{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome","text":"<p>This library of documentation is dedicated to technical topics related to Granite WMS. We cover setups, configurations, and various other technical aspects.</p> <p>To continue enhancing the value of this resource, we kindly ask the community for their support and feedback. Please be aware that the documentation reflects the latest version of the software. Keep this in mind as you refer to the content.</p> <p>Other resources: Stack Overflow Teams - Granite WMS Questions</p>"},{"location":"safe_keep/","title":"Safe keep","text":""},{"location":"safe_keep/#unreleased-6000","title":"Unreleased : 6.0.0.0","text":"<p>Note</p> <ul> <li>Database changes required</li> </ul>"},{"location":"safe_keep/#database","title":"Database","text":""},{"location":"safe_keep/#database-tables","title":"Database Tables","text":"<ul> <li><code>new</code> table UsersPermissions</li> <li><code>new</code> table SystemPermissions</li> <li><code>new</code> table IntegrationSettings</li> <li><code>new</code> table DataCapture</li> <li><code>new</code> table DataCaptureFields</li> <li><code>new</code> table DataCaptureFieldsLookup</li> <li><code>change</code> table Users</li> <li><code>change</code> table UsersCredentials</li> <li><code>change</code> table ScheduledJobs</li> <li><code>change</code> table ScheduledJobsHistory</li> <li><code>change</code> table ProcessStep</li> <li><code>change</code> table StockTakeLines</li> <li><code>change</code> table AuditStockTakeLines</li> <li><code>change</code> table Document<ul> <li>https://granitewms.canny.io/bugs/p/injected-job-failing-to-sync-document-with-message-string-or-binary-data-will-be</li> </ul> </li> <li><code>change</code> table DocumentDetail<ul> <li>https://granitewms.canny.io/bugs/p/injected-job-failing-to-sync-document-with-message-string-or-binary-data-will-be</li> </ul> </li> <li><code>change</code> table TradingPartner<ul> <li>https://granitewms.canny.io/bugs/p/accpac-integration-job-tradingpartners-truncated-data</li> </ul> </li> <li><code>change</code> table DataGrid</li> <li><code>change</code> table StockTakeSession</li> </ul>"},{"location":"safe_keep/#database-views","title":"Database Views","text":"<ul> <li><code>new</code> DataCaptureFieldsLookup_View</li> <li><code>fix</code> API_QueryStockReorder<ul> <li>https://granitewms.canny.io/bugs/p/view-api-querystockreorder-does-not-exclude-nonstock-locations</li> </ul> </li> </ul>"},{"location":"safe_keep/#stored-procedures","title":"Stored Procedures","text":"<ul> <li><code>new</code> stored procedure CreateExtendedPropertyDescription</li> </ul>"},{"location":"safe_keep/#database-data","title":"Database Data","text":"<ul> <li><code>new</code> Table SystemSettings: Default security settings</li> <li><code>new</code> Table Migration: Default V6 migration data</li> <li><code>new</code> Table SystemPermissions: Default permissions data</li> <li><code>new</code> Table DataGrid: AuditStockTakeSession grid</li> <li><code>change</code> Table SystemSnippets: Updated snippets to include pagination for document lines</li> <li><code>change</code> Table SystemSettings: Latest Custodian Api token</li> <li><code>change</code> Table DataGrid: Add carrying entity barcode to AuditStockTakeLines grid</li> <li><code>change</code> Table DataGrid: Add LastExecutionDate to ScheduledJobs grid</li> </ul>"},{"location":"safe_keep/#sqlclr","title":"SQLCLR","text":"<ul> <li><code>new</code> support for Business Api operations</li> <li><code>new</code> support for Option Field Entry (Location, Document, DocumentDetail, MasterItem)</li> <li><code>new</code> support for Copy Document</li> <li><code>new</code> support for TrackingEntityOptionalField</li> <li><code>new</code> support for create carrying entity</li> <li><code>new</code> support for Transfer process<ul> <li>https://granitewms.canny.io/request/p/clr-for-transfers</li> </ul> </li> <li><code>change</code> new certificate that won't expire</li> <li><code>change</code> added copies parameter to ReportPrint</li> </ul>"},{"location":"safe_keep/#accpac-integration-jobs","title":"Accpac Integration Jobs","text":"<ul> <li><code>new</code> Integration_Accpac_AutoSimplyMOHeader</li> <li><code>new</code> Integration_Accpac_AutoSimplyMODetail</li> <li><code>new</code> TriggerGraniteAutoSimplyMO</li> <li> <p><code>fix</code> Integration_Accpac_IntransitHeader</p> <ul> <li>https://granitewms.canny.io/bugs/p/accpac-transfer-view-issues</li> <li>https://granitewms.canny.io/bugs/p/the-view-integration-accpac-intransitheader-fails-on-a-conversion-of-expecteddat</li> <li>https://granitewms.canny.io/bugs/p/accpac-sales-order-document-header-view-expdate-and-isactive</li> </ul> </li> <li> <p><code>fix</code> Integration_Accpac_PurchaseOrderHeader</p> <ul> <li>https://granitewms.canny.io/bugs/p/the-view-integration-accpac-intransitheader-fails-on-a-conversion-of-expecteddat</li> <li>https://granitewms.canny.io/bugs/p/accpac-sales-order-document-header-view-expdate-and-isactive</li> </ul> </li> <li> <p><code>fix</code> Integration_Accpac_ReceiptHeader</p> <ul> <li>https://granitewms.canny.io/bugs/p/accpac-transfer-view-issues</li> <li>https://granitewms.canny.io/bugs/p/accpac-sales-order-document-header-view-expdate-and-isactive</li> </ul> </li> <li> <p><code>fix</code> Integration_Accpac_SalesOrderHeader</p> <ul> <li>https://granitewms.canny.io/bugs/p/the-view-integration-accpac-intransitheader-fails-on-a-conversion-of-expecteddat</li> <li>https://granitewms.canny.io/bugs/p/accpac-sales-order-document-header-view-expdate-and-isactive</li> </ul> </li> <li> <p><code>fix</code> Integration_Accpac_TransferHeader</p> <ul> <li>https://granitewms.canny.io/bugs/p/accpac-transfer-view-issues</li> <li>https://granitewms.canny.io/bugs/p/the-view-integration-accpac-intransitheader-fails-on-a-conversion-of-expecteddat</li> <li>https://granitewms.canny.io/bugs/p/accpac-sales-order-document-header-view-expdate-and-isactive</li> </ul> </li> <li> <p><code>fix</code> Integration_Accpac_WorkOrderHeader</p> <ul> <li>https://granitewms.canny.io/bugs/p/the-view-integration-accpac-intransitheader-fails-on-a-conversion-of-expecteddat</li> <li>https://granitewms.canny.io/bugs/p/accpac-sales-order-document-header-view-expdate-and-isactive</li> </ul> </li> <li> <p><code>fix</code> Integration_Accpac_TradingPartner</p> <ul> <li>https://granitewms.canny.io/bugs/p/sql-view-integration-accpac-tradingpartner-definition-is-incorrect</li> </ul> </li> <li> <p><code>change</code> Integration_Accpac_IntransitDetail</p> </li> <li><code>change</code> Integration_Accpac_PurchaseOrderDetail</li> <li><code>change</code> Integration_Accpac_ReceiptDetail</li> <li><code>change</code> Integration_Accpac_SalesOrderDetail</li> <li><code>change</code> Integration_Accpac_TransferDetail</li> <li><code>change</code> Integration_Accpac_WorkOrderDetail</li> <li><code>fix</code> TriggerGranitePurchaseOrders<ul> <li>https://granitewms.canny.io/bugs/p/accpac-integration-view-timing-and-status-changes</li> </ul> </li> <li><code>fix</code> TriggerGraniteSalesOrders<ul> <li>https://granitewms.canny.io/bugs/p/accpac-integration-view-timing-and-status-changes</li> </ul> </li> <li><code>fix</code> TriggerGraniteWorkOrders</li> <li><code>fix</code> TriggerGraniteTransfers</li> </ul>"},{"location":"safe_keep/#evo-integration-jobs","title":"Evo Integration Jobs","text":"<ul> <li><code>fix</code> ERP_StockOnHand<ul> <li>https://granitewms.canny.io/bugs/p/evolution-erp-stockonhand-view-join-excluding-items</li> </ul> </li> <li><code>change</code> TriggerGraniteWorkOrders</li> <li><code>change</code> TriggerGraniteWarehouseTransfer</li> <li><code>change</code> TriggerGraniteSalesOrders</li> <li><code>change</code> TriggerGranitePurchaseOrders</li> <li><code>change</code> TriggerGraniteIntransit</li> <li><code>change</code> TriggerGraniteInterBranchRequisition</li> <li><code>change</code> TriggerGraniteReceipt</li> <li><code>change</code> Integration_Evolution_ReceiptHeader</li> <li><code>change</code> Integration_Evolution_InterBranchRequisitionHeader</li> <li><code>change</code> Integration_Evolution_IntransitHeader</li> <li><code>change</code> Integration_Evolution_PurchaseOrderDetail</li> <li><code>change</code> Integration_Evolution_PurchaseOrderDetail_V7</li> <li><code>change</code> Integration_Evolution_PurchaseOrderHeader</li> <li><code>change</code> Integration_Evolution_SalesOrderDetail</li> <li><code>change</code> Integration_Evolution_SalesOrderDetail_V7</li> <li><code>change</code> Integration_Evolution_SalesOrderHeader</li> </ul>"},{"location":"safe_keep/#sage-100-integration-jobs","title":"Sage 100 Integration Jobs","text":"<ul> <li><code>new</code> trigger TriggerGranitePurchaseOrders</li> <li><code>new</code> trigger TriggerGraniteSalesOrders</li> <li><code>new</code> view Integration_Sage100_TradingPartner</li> <li><code>new</code> view Integration_Sage100_SalesOrderHeader</li> <li><code>new</code> view Integration_Sage100_SalesOrderDetail</li> <li><code>new</code> view Integration_Sage100_PurchaseOrderHeader</li> <li><code>new</code> view Integration_Sage100_PurchaseOrderDetail</li> <li><code>new</code> view Integration_Sage100_MasterItem</li> <li><code>new</code> view MasterItemAlias_View</li> <li><code>new</code> view ERP_StockOnHand</li> </ul>"},{"location":"safe_keep/#process-app","title":"Process App","text":"<ul> <li><code>change</code> upgrade to .NET 8</li> <li><code>fix</code> object reference error on Manufacture process looping back to before Document step<ul> <li>https://granitewms.canny.io/bugs/p/manufacture-process-showing-object-reference-error</li> </ul> </li> <li><code>fix</code> mashing next button in process results in multiple requests<ul> <li>https://granitewms.canny.io/bugs/p/process-app-next-btn-bug</li> </ul> </li> <li><code>fix</code> adjustment with integration success message not showing correctly<ul> <li>https://granitewms.canny.io/bugs/p/accpac-adjustment-the-success-message-displayed-incorrectly</li> </ul> </li> <li><code>new</code> show printer required message when user has not entered a printer name<ul> <li>https://granitewms.canny.io/request/p/printer-required-message-for-a-process-on-processapp</li> </ul> </li> <li><code>change</code> process dividers more clearly separate menu items </li> <li><code>change</code> can set Replenish Step 100 ToTrackingEntity from prescript<ul> <li>https://granitewms.canny.io/request/p/replenish-totrackingbarcode-as-silent-step</li> </ul> </li> </ul>"},{"location":"safe_keep/#business-api-webservice-replacement","title":"Business API (Webservice replacement)","text":"<ul> <li><code>fix</code> clearer message when lines are complete / cancelled<ul> <li>https://granitewms.canny.io/bugs/p/process-app-error-message-line-item</li> </ul> </li> <li><code>fix</code> quality control permission not required for direct on hold take on / receive<ul> <li>https://granitewms.canny.io/bugs/p/direct-onhold-quality-control</li> </ul> </li> <li><code>fix</code> transfer location not validating consistently <ul> <li>https://granitewms.canny.io/bugs/p/transfer-destination-location</li> </ul> </li> <li><code>fix</code> packing process not allocating transactions to correct lines<ul> <li>https://granitewms.canny.io/bugs/p/packing-process-incorrect-line-batch</li> </ul> </li> <li><code>new</code> record pallet on stocktakecount transactions <ul> <li>https://granitewms.canny.io/bugs/p/pallet-number-stock-take-transactions</li> </ul> </li> <li><code>fix</code> StockTakeCount Pallet audit bug<ul> <li>https://granitewms.canny.io/bugs/p/pallet-stocktakecount-audit-bug</li> </ul> </li> <li><code>new</code> support for api key authentication </li> <li><code>new</code> support for security settings</li> </ul>"},{"location":"safe_keep/#repo-api","title":"Repo API","text":"<ul> <li><code>change</code> upgrade to .NET 8</li> <li><code>fix</code> datagrids fail to load<ul> <li>https://granitewms.canny.io/bugs/p/webdesktop-enquiry-datagrids-fails-to-load</li> </ul> </li> <li><code>fix</code> added validation of foreign keys on MasterItemAlias import<ul> <li>https://granitewms.canny.io/request/p/masteritemalias-data-import-error-change</li> </ul> </li> <li><code>fix</code> Invalid Username and Password on the Webdeskop using valid credentials<ul> <li>https://granitewms.canny.io/bugs/p/webdesktop-login-expired-invalid-user-name-password</li> </ul> </li> <li><code>fix</code> StockTakeRelease not creating transactions<ul> <li>https://granitewms.canny.io/bugs/p/webdesktop-stocktakerelease-sometimes-not-creating-transactions</li> </ul> </li> <li><code>new</code> record pallet on stocktakecount transactions <ul> <li>https://granitewms.canny.io/bugs/p/pallet-number-stock-take-transactions</li> </ul> </li> <li><code>new</code> support for api key authentication </li> <li><code>new</code> support for security settings</li> </ul>"},{"location":"safe_keep/#webdesktop","title":"Webdesktop","text":"<ul> <li><code>new</code> support configurable page size for data grids<ul> <li>https://granitewms.canny.io/request/p/webdesktop-datagrid-page-size-configuraion</li> </ul> </li> <li><code>new</code> support renaming processes<ul> <li>https://granitewms.canny.io/request/p/webdesktop-processes-rename-functionality</li> </ul> </li> <li><code>new</code> support deleting processes<ul> <li>https://granitewms.canny.io/request/p/webdesktop-processes-delete-functionality</li> </ul> </li> <li><code>new</code> refresh button for stock take session<ul> <li>https://granitewms.canny.io/bugs/p/webdesktop-stocktake-session-missing-refresh</li> </ul> </li> <li><code>new</code> support for stock take session audit<ul> <li>https://granitewms.canny.io/request/p/stocktake-create-audit-selection-criteria</li> </ul> </li> <li><code>new</code> support for copying users<ul> <li>https://granitewms.canny.io/request/p/copy-user-functionality</li> </ul> </li> <li><code>new</code> support for formatting data grids<ul> <li>https://granitewms.canny.io/request/p/datagrid-row-formatting</li> </ul> </li> <li><code>new</code> data capture feature</li> </ul>"},{"location":"safe_keep/#utility-api","title":"Utility API","text":"<ul> <li><code>change</code> added copies parameter to ReportPrint call to enable printing multiple copies</li> <li><code>change</code> changed report print to add the print to a queue to make the call faster</li> </ul>"},{"location":"safe_keep/#accpac-integration","title":"Accpac Integration","text":""},{"location":"safe_keep/#sdk-provder","title":"SDK Provder","text":"<ul> <li><code>fix</code> clearer message when encrypted SystemSettings fail to decrypt<ul> <li>https://granitewms.canny.io/bugs/p/integration-provider-error-invalid-length-for-a-base-64-char-array-or-string</li> </ul> </li> <li><code>fix</code> reclassify failing to create second line in adjustment<ul> <li>https://granitewms.canny.io/bugs/p/integration-method-reclassify-split-is-not-implemented-even-though-config-shows</li> </ul> </li> <li><code>fix</code> unable to post transfer receipt with serial numbers<ul> <li>https://granitewms.canny.io/bugs/p/accpac-integration-post-transfer-receipt-with-serial-number</li> </ul> </li> </ul>"},{"location":"safe_keep/#injected-jobs","title":"Injected jobs","text":"<ul> <li><code>change</code> upgrade to .NET 8</li> <li><code>new</code> 'all in one' deploy script</li> <li><code>new</code> support setting initial action qty on document import<ul> <li>https://granitewms.canny.io/request/p/initial-downwards-integration-for-new-sites</li> </ul> </li> <li><code>fix</code> completed lines are not 'uncompleted' when the qty is increased in the ERP<ul> <li>https://granitewms.canny.io/bugs/p/injected-job-complete-flag-on-document-detail-line-not-updating</li> </ul> </li> <li><code>fix</code> documents deleted in the ERP are marked as cancelled in Granite<ul> <li>https://granitewms.canny.io/request/p/change-document-status-in-granite-when-document-is-deleted-from-erp</li> </ul> </li> </ul>"},{"location":"safe_keep/#evolution-integration","title":"Evolution Integration","text":""},{"location":"safe_keep/#sdk-provder_1","title":"SDK Provder","text":"<ul> <li><code>fix</code> clearer message when encrypted SystemSettings fail to decrypt<ul> <li>https://granitewms.canny.io/bugs/p/integration-provider-error-invalid-length-for-a-base-64-char-array-or-string</li> </ul> </li> <li><code>new</code> map adjustment's DocumentReference to Evo adjustment description<ul> <li>https://granitewms.canny.io/request/p/evo-posting-of-adjustments-field-changes</li> </ul> </li> </ul>"},{"location":"safe_keep/#injected-jobs_1","title":"Injected jobs","text":"<ul> <li><code>change</code> upgrade to .NET 8</li> <li><code>new</code> 'all in one' deploy script</li> <li><code>new</code> support setting initial action qty on document import<ul> <li>https://granitewms.canny.io/request/p/initial-downwards-integration-for-new-sites</li> </ul> </li> <li><code>fix</code> completed lines are not 'uncompleted' when the qty is increased in the ERP<ul> <li>https://granitewms.canny.io/bugs/p/injected-job-complete-flag-on-document-detail-line-not-updating</li> </ul> </li> <li><code>fix</code> documents deleted in the ERP are marked as cancelled in Granite<ul> <li>https://granitewms.canny.io/request/p/change-document-status-in-granite-when-document-is-deleted-from-erp</li> </ul> </li> </ul>"},{"location":"safe_keep/#syspro-integration","title":"Syspro Integration","text":""},{"location":"safe_keep/#sdk-provder_2","title":"SDK Provder","text":"<ul> <li><code>fix</code> clearer message when encrypted SystemSettings fail to decrypt<ul> <li>https://granitewms.canny.io/bugs/p/integration-provider-error-invalid-length-for-a-base-64-char-array-or-string</li> </ul> </li> </ul>"},{"location":"safe_keep/#sapb1-integration","title":"SAPB1 Integration","text":""},{"location":"safe_keep/#sdk-provder_3","title":"SDK Provder","text":"<ul> <li><code>fix</code> clearer message when encrypted SystemSettings fail to decrypt<ul> <li>https://granitewms.canny.io/bugs/p/integration-provider-error-invalid-length-for-a-base-64-char-array-or-string</li> </ul> </li> </ul>"},{"location":"safe_keep/#omni-integration","title":"Omni Integration","text":""},{"location":"safe_keep/#sdk-provder_4","title":"SDK Provder","text":"<ul> <li><code>fix</code> clearer message when encrypted SystemSettings fail to decrypt<ul> <li>https://granitewms.canny.io/bugs/p/integration-provider-error-invalid-length-for-a-base-64-char-array-or-string</li> </ul> </li> </ul>"},{"location":"safe_keep/#quickbooks-integration","title":"QuickBooks Integration","text":""},{"location":"safe_keep/#downwards-jobs","title":"Downwards jobs","text":"<ul> <li><code>change</code> document headers without any valid lines are not synced to Granite<ul> <li>https://granitewms.canny.io/request/p/quickbooks-interface-ignore-nonstock-items-flag</li> </ul> </li> </ul>"},{"location":"safe_keep/#label-printing-zpl","title":"Label Printing ZPL","text":"<ul> <li><code>change</code> upgrade to .NET 8</li> <li><code>fix</code> printer name case sensitive<ul> <li>https://granitewms.canny.io/bugs/p/printername-on-processapp-login-seems-to-be-case-sensitive-previously-this-didnt</li> </ul> </li> </ul>"},{"location":"safe_keep/#label-printing-bartender","title":"Label Printing Bartender","text":"<ul> <li><code>fix</code> printer name case sensitive<ul> <li>https://granitewms.canny.io/bugs/p/printername-on-processapp-login-seems-to-be-case-sensitive-previously-this-didnt</li> </ul> </li> <li><code>new</code> support for Bartender 2022 R8</li> </ul>"},{"location":"safe_keep/#scheduler","title":"Scheduler","text":"<p>Warning</p> <p>There are breaking changes to injected jobs from older versions in version 6.  Only version 6 specific injected jobs will work with Scheduler version 6.</p> <ul> <li><code>change</code> upgrade to .NET 8</li> <li><code>change</code> upgrade Coravel dependency</li> <li><code>change</code> IInjectableJob interface</li> </ul>"},{"location":"android-application/manual/","title":"Granite Scanner Application","text":"<p>The Granite Scanner Application (Android) acts as a browser replacement for the ProcessApp allowing the scanner functionality to be configured with restricted access.</p>"},{"location":"android-application/manual/#setup","title":"Setup","text":"<p>To install you will need the apk from the dropbox folder \"Software Installs &gt; Granite Android App &gt; Granite.apk\"</p> <p>You can either use the QR code from in the same folder to download the APK directly from dropbox onto the scanner or you could send the file via bluetooth to each of the scanners. </p> <p>Once the APK is on the device, simply select it to begin the install process. If this is the first APK install you may need to update the permissions to allow to install from a folder as below (it may look different depending on the version of android). </p> <p>Note</p> <pre><code>Some scanners may prevent you from installing the app if the apk is in the downloads folder.\n\nMove to DCIM or similar to resolve the issue.\n</code></pre> <p></p>"},{"location":"android-application/manual/#using-the-app","title":"Using the App","text":""},{"location":"android-application/manual/#add-a-website","title":"Add a Website","text":"<p>There are two options for adding websites:</p> <ul> <li>Manual</li> <li>Scan QR</li> </ul> Manual <p>Select Add &gt; Manual. You will be prompted to enter a Website Name and a URL. </p> <p>The name must be unique. If you have a website called \"Live\" and create a new website with the same name the old website will be overwritten.  The url needs to include \"https://\" or \"http://\".</p> <p></p> Scan QR <p>Select Add &gt; Manual. You will be prompted to scan a QR code. (create a Config QR code)</p> <p>In the example below I post from the clipboard, but on a scanner, scanning the Config QR will populate the input field.</p> <p></p>"},{"location":"android-application/manual/#delete-a-website","title":"Delete a Website","text":"<p>To delete a website select the website in the list and then press Delete. You will be prompted to confirm that you would like to delete the selected site. </p> <p></p>"},{"location":"android-application/manual/#launch-a-website","title":"Launch a Website","text":"<p>To launch a website select the website and press launch. </p> <p>If only website is set up, when launching the app, it will browse directly to the website skipping the home screen. Pressing back take you back to the home screen. </p> <p>Note</p> <pre><code>Only granite websites can be browsed to.\n\nAn error will display if you try launch any other website.\n</code></pre> <p></p>"},{"location":"android-application/manual/#config-qr","title":"Config QR","text":"<p>To create a QR code that can be used to add websites to the scanner you will need to create a QR code that contains json text with your website details.</p> <p>Below is an example of the json code. You can add as many websites as needed. Remember to change the names and urls.</p> <pre><code>[{\"name\":\"Test\",\"url\":\"https://10.0.0.1:40186\"},{\"name\":\"Live\",\"url\":\"https://10.0.0.1:40086\"}]\n</code></pre> <p>To create the Qr code you can use QR.io and then grab the QR code using the windows snipping tool. </p> <p></p>"},{"location":"business-api/GettingStarted3rdParty/","title":"GettingStarted3rdParty","text":""},{"location":"business-api/GettingStarted3rdParty/#getting-started","title":"Getting Started","text":""},{"location":"business-api/GettingStarted3rdParty/#integration-to-granite","title":"Integration to Granite:","text":"<p>This document details the tools and information needed to integrate with Granite WMS.</p> <p>What will be covered:</p> <ul> <li>Granite's API</li> <li>Detailing business objects</li> <li>Relationships between the business objects</li> <li>Instruction on authentication to make calls</li> <li>An example of a GET, POST, and  DELETE on one of the business objects. </li> </ul>"},{"location":"business-api/GettingStarted3rdParty/#granite-apis","title":"Granite APIs:","text":"<p>Granite operates using one API:  - BusinessAPI: handles the CRUD functionality of the business objects and the business processes E.g picking or moving stock</p> <p>For the purposes of integration with Granite, i.e maintaining Documents , MasterItems, Locations, and Trading Partners,  the CRUD operations will be the only ones used and will be the ones covered in this document. </p> <p>A full list of Business API calls is not included here; refer to the Swagger documentation for full details. A link to the swagger documentation will be provided and a postman collection of the relevant calls will be provided. </p>"},{"location":"business-api/GettingStarted3rdParty/#business-objects","title":"Business objects:","text":"<p>Granite makes use of six core business objects. While there are other business objects used in Granite, these six represent the core functionality.</p> <ul> <li> <p>Locations: are uniquely identified by a Barcode. Used to identify something as specific as a shelf or as general as an area in a warehouse. E.g Name: Cage A Shelf  3 Row 2 Barcode: A-3-2 or Name: Dispatch Code: DIS </p> </li> <li> <p>MasterItems: are the identities of specific products and are uniquely identified using a Code. E.g. Code: ABCLZZ110 Product: KL371X ABRASIVE CLOTH 230 x 280mm</p> </li> <li> <p>TradingPartners: are any parties that will be listed on a document as either a customer or supplier. Trading partners are set up per Document type and are uniquely identified with a Code. E.g. Code: AVO15 Name: Avondale Confectionary </p> </li> <li> <p>Documents: are the objects that represent sales orders, purchase orders, transfers, or manufacturing documents (documents are generic in Granite and represent any of the previously listed types). They can be considered the documents Header and are uniquely represented by a Number. E.g. A sales order for trading partner AVO15 Number: SO001263</p> </li> <li> <p>DocumentDetails: are the lines of the document and are uniquely assigned to a specific Document. E.g. There are multiple documentdetail entries that are assigned to SO001263 that detail the contents of the order. </p> </li> <li> <p>TrackingEntities: represent the stock/physical goods in the system and are uniquely identified with a Barcode. A single tracking entity can represent only one masteritem. E.g. Barcode: T00000124 represents a quantity of 5 sheets of MasterItem ABCLZZ110.</p> </li> </ul>"},{"location":"business-api/GettingStarted3rdParty/#business-object-relationships","title":"Business object relationships","text":""},{"location":"business-api/GettingStarted3rdParty/#example-calls","title":"Example calls:","text":"<p>Following are a few examples of calls made to the Business API to provide some initial context. The calls for all the other objects are very similar so will not be detailed as their calls can be found in the swagger documention.  </p>"},{"location":"business-api/GettingStarted3rdParty/#authenticate","title":"Authenticate:","text":"<p>The first call is /auth to authenticate for all following calls. The security uses cookies so if the same client is used this will only have to be called once per set of calls. The format for the examples use json but xml, jsv, and csv are also supported  If any other call is made without calling authorisation first it will return: 401 Unauthorized</p> <p>Authentication works on a rolling window of 30min. As long as a call is made within that time the session will remain active. Most clients will keep the context of the session, but some clients may require you to pass the cookies from the authenticated client to the one that you use to make subsequent calls. </p> <p></p> <pre><code>POST https://{server-address}:{port}/auth HTTP/1.1\nAccept: application/json\nContent-Type: application/json\nContent-Length: length\n\n{\"UserName\":\"username\",\"Password\":\"password\"}\n</code></pre>"},{"location":"business-api/GettingStarted3rdParty/#locations","title":"Locations:","text":"<p>Following are examples of GET, POST, DELETE calls on the Location business object: <pre><code>GET https://{server-address}:{port}/Locations/{Barcode}?Barcode=DIS HTTP/1.1\nAccept: application/json\n</code></pre></p> <p><pre><code>POST https://{server-address}:{port}/Locations HTTP/1.1\nAccept: application/json\nContent-Type: application/json\nContent-Length: length\n\n{\"Body\":{\"Name\":\"ExampleLocation\",\"Barcode\":\"EL123\",\"Site\":\"\",\"isActive\":true,\"NonStock\":false,\"ERPLocation\":\"ERP1\",\"Category\":\"\",\"Type\":\"\",\"Status\":\"\",\"Width\":0,\"Length\":0,\"Height\":0,\"MaximumWeight\":0,\"ERPIdentification\":\"ERPid123\",\"AuditDate\":\"05/05/2023\",\"AuditUser\":\"ErpSystem\",\"Version\":0}}\n</code></pre> The same call can be used to modify the location by providing the granite id as part of the call: <pre><code>POST https://{server-address}:{port}/Locations HTTP/1.1\nAccept: application/json\nContent-Type: application/json\nContent-Length: length\n\n{\"Body\":{\"ID\":6064,\"Name\":\"NewName\",\"Barcode\":\"EL123\",\"Site\":\"\",\"isActive\":true,\"NonStock\":false,\"ERPLocation\":\"ERP1\",\"Category\":\"\",\"Type\":\"\",\"Status\":\"\",\"Width\":0,\"Length\":0,\"Height\":0,\"MaximumWeight\":0,\"ERPIdentification\":\"ERPid123\",\"AuditDate\":\"05/05/2023\",\"AuditUser\":\"ErpSystem\",\"Version\":0}}\n</code></pre> <pre><code>DELETE https://{server-address}:{port}/Locations/{Barcode}?Barcode=EL123 HTTP/1.1\nAccept: application/json\n</code></pre></p>"},{"location":"business-api/manual/","title":"Business API","text":"<p>The Business API is the back end that powers all of the business operations &amp; data persistence in Granite WMS. It is responsible for the transactions performed via the Process App, as well as maintenance of master data and documents performed via the Web Desktop.</p> <p>In addition to serving our applications, third parties can utilize this API to retrieve data for integration purposes.</p>"},{"location":"business-api/manual/#setup","title":"Setup","text":""},{"location":"business-api/manual/#prerequisites","title":"Prerequisites","text":"<ul> <li>ASP.NET Core 8 Hosting Bundle</li> <li>IIS </li> </ul>"},{"location":"business-api/manual/#configure","title":"Configure","text":"<p>Configure the below in the <code>appsettings.json</code> file</p> <ol> <li> <p>Connection string</p> <pre><code>    \"ConnectionStrings\": {\n        \"CONNECTION\": \"Data Source=.\\\\SQL2022;Initial Catalog=GraniteDatabase;User ID=Granite;Password=******;Persist Security Info=True;TrustServerCertificate=True;\"\n    }\n</code></pre> </li> <li> <p>AllowedOrigins</p> <p>The 'allowed origins' is a list of addresses for applications requiring access to the API.  This may also include third parties utilizing the API.  By default, the only address that requires configuration is the Granite WebDesktop address.</p> <p>Example single address <pre><code>  \"AllowedOrigins\": [ \"https://192.168.1.10:8081\" ]\n</code></pre> Example multiple <pre><code>  \"AllowedOrigins\": [ \"https://192.168.1.10:8081\", \"https://192.168.1.20:3009\" ],\n</code></pre></p> </li> <li> <p>DateTimeFormat</p> <p>This setting sets the datetime format returned by the Business API.</p> <p>Note</p> <p>This needs to be the same as in the WebDesktop <code>appsettings.json</code></p> <p>The WebDesktop requires the format to be capitalized <code>DD/MM/YYYY</code>, while the Business API requires the format as follows <code>dd'/'MM'/'yyyy</code></p> <p>This difference is due to the difference in the technology used on the frontend and backend</p> <pre><code>\"DateTimeFormat\": \"MM'/'dd'/'yyyy\",\n</code></pre> </li> <li> <p>UseSameSiteCookies</p> <p>Same Site Cookies are a good default to use in your Apps which restricts cookies from being sent cross-site in order to prevent against cross-site request forgery (CSRF) attacks. Cookies are typically sent to third parties in cross origin requests. This can be abused to do CSRF attacks.</p> <p>Default set to true. (value type Boolean) <pre><code>  \"UseSameSiteCookies\": true,\n</code></pre> Disable if 3rd parties need access to the API.  <pre><code>  \"UseSameSiteCookies\": false,\n</code></pre></p> </li> </ol>"},{"location":"business-api/manual/#getting-started","title":"Getting started","text":"<p>The Business API is fully documented in Swagger and ServiceStack's Metadata. You can find these at the following addresses:</p> <ul> <li>https://[Your_Address]:[Port_Number]/metadata</li> <li>https://[Your_Address]:[Port_Number]/swagger-ui/</li> </ul> <p>Most of the operations require you to first authenticate. To authenticate for testing, you can either use the <code>/auth</code> operation to validate using your Granite user credentials, or you can use your API Key via Swagger's built in Authorize functionality.</p>"},{"location":"business-api/manual/#credentials","title":"Credentials","text":"<p>To use credentials to authenticate, browse to <code>/swagger-ui/#!/auth/Authenticate_Post</code> and enter your UserName and Password. Click <code>Try it out!</code> to send the request.</p> <p>On a successful authentication you will receive a 200 OK response.</p>"},{"location":"business-api/manual/#api-key","title":"API Key","text":"<p>To use your api key to authenticate, browse to the swagger ui, and click the Authorize button on the top right. In the value field, type the word 'Bearer' followed by a space and then your api key and then click Authorize. </p> <p>Example:</p> <pre><code>Bearer wM3laTJT99rOnnjjYejl6nZ-vvn6hCMNJGpwvMrksxp5eBnwCpEKchO9Q_NyLBun\n</code></pre> <p>You will then need to make a request that requires authentication to ensure that your api key was entered correctly. If it is not working you will receive a 401 response with a body like this:</p> <pre><code>{\n  \"ResponseStatus\": {\n    \"ErrorCode\": \"UnauthorizedAccessException\",\n    \"Message\": \"User must be authenticated before performing ValidateLocation.\"\n  }\n}\n</code></pre>"},{"location":"custodian-api/","title":"Custodian API","text":"<p>The Custodian API is home to various services that enhance Granite's capabilities.</p> <p>At the moment it is comprised of:</p> <ul> <li> <p>Process Template Service</p> <p>The service behind the Process Catalog functionality in the WebDesktop.</p> </li> <li> <p>Database Migration Service</p> <p>Powering automated Database upgrades for each new version of Granite.</p> </li> <li> <p>Reporting Service </p> <p>Provides easy ways of interacting with SSRS.</p> </li> <li> <p>SQL Export Service</p> <p>Enables simpler excel exports from SQL tables and views.</p> </li> <li> <p>Email Service </p> <p>A versatile email service that has built in support for Reporting Service and SQL Export Service as sources of attachments.</p> </li> </ul>"},{"location":"custodian-api/email-service/","title":"Email Service","text":""},{"location":"custodian-api/email-service/#configuration","title":"Configuration","text":"<p>Google shutting down access to sending mails via SMTP</p> <p>As of January 2025, the Custodian API will not be able to send emails using SMTP.</p> <p>If you are using a Gmail address to send emails, you will need to switch over to the new Gmail provider</p> <p>Settings for the Email Service are configured in the <code>SystemSettings</code> table. You can find the insert script for the settings in the GraniteDatabase install folder:</p> <pre><code>\"...\\GraniteDatabase\\Data\\SystemSettings\\SystemSettingsCustodian.sql\"\n</code></pre> <p>You should have the following settings after running the script:</p> Application Key Value Description ValueDataType isEncrypted isActive Granite.Custodian UserName Username for the account that will be used to send email string False True Granite.Custodian Password Password for the account that will be used to send email string True True Granite.Custodian Host smtp.gmail.com The address of the SMTP server string False True Granite.Custodian Port 587 Port number to be used when accessing the SMTP server int False True Granite.Custodian EnableSsl true Use SSL when accessing the SMTP server. True or False bool False True Granite.Custodian From Email address that will be used to send mail string False True Granite.Custodian FromName The sender name that will display to users who receive emails string False True Granite.Custodian RetryInterval 30 Number of seconds to wait before retrying processing an email int False True Granite.Custodian MaxNumberOfRetries 3 Maximum number of times to retry processing an email. int False True Granite.Custodian EmailAttachmentFolder Full filepath to folder to export email attachments to. Leave empty to use the Custodian install folder string False True Granite.Custodian EmailProvider Provider to use for sending emails. If empty, we will use the SMTP provider. string False True <p>Password isEncrypted is True</p> <p>You will only be able to change the value of this setting from the Webdesktop System Settings page</p>"},{"location":"custodian-api/email-service/#email-providers","title":"Email Providers","text":"<p>Email Providers allow us to configure the way that we send emails for different types of email accounts. At the moment we support sending email using a SMTP server directly, or using the Gmail API.</p> <p>Note that as of January 2025, Gmail no longer allows sending emails using their SMTP server directly. This is why configuring the Email Service to send email via a Gmail account works slightly differently.</p> <p>To configure the <code>EmailProvider</code>, set the name of the provider you want to use in SystemSettings. If the <code>EmailProvider</code> setting is empty, it will default to using the SMTP provider.</p>"},{"location":"custodian-api/email-service/#smtp","title":"SMTP","text":"<p>Sending email via SMTP is quite straightforward, all you need is the credentials of the account that you are using to send email, and the details of the server that you are using to send email. These get configured in the <code>System Settings</code></p>"},{"location":"custodian-api/email-service/#required-system-settings","title":"Required System Settings","text":"<ul> <li>UserName - User name to use when connecting to the SMTP server</li> <li>Password - Password to use when connecting to the SMTP server</li> <li>Host - The host address of the SMTP server (server name or IP)</li> <li>Port - The port number to use when accessing the SMTP server</li> <li>EnableSsl - Use SSL when accessing the SMTP server. True or False</li> <li>From - The email address that you are sending mail from</li> <li>FromName - The sender name that will display to users who receive emails</li> </ul>"},{"location":"custodian-api/email-service/#gmail","title":"Gmail","text":"<p>Since Gmail has blocked access to SMTP, sending email via a Gmail account involves more set up.</p> <p>Note</p> <p>If you are updating in order to continue using the GraniteWMS Info to send email, all you need to do is the following:</p> <ol> <li> <p>Deploy the latest Custodian API </p> </li> <li> <p>Run the SQL script at <code>...\\Granite Releases\\Granite Info Gmail Auth\\CustodianSystemSettings.sql</code></p> </li> <li> <p>Copy the GmailTokens folder <code>...\\Granite Releases\\Granite Info Gmail Auth\\GmailTokens</code> into the GraniteCustodian folder</p> </li> </ol> <p>To send email via Gmail, you will first need to enable Gmail API access for the account you're using and obtain the <code>Client ID</code> and <code>Client secret</code>. These are the UserName and Password that you will need to set in <code>SystemSettings</code>.</p> <p>Next, you will need to place the API token file in the <code>...\\GraniteCustodian\\GmailTokens</code> folder. If you have the token file for the account you are using already, you can simply paste it in. Otherwise, you will need to run the Gmail Authenticator to obtain the token file.</p>"},{"location":"custodian-api/email-service/#required-system-settings_1","title":"Required System Settings","text":"<ul> <li>UserName - The Client ID used to connect to the Gmail API</li> <li>Password - The Client secret used to connect to the Gmail API</li> <li>From - The email address that you are sending mail from</li> <li>FromName - The sender name that will display to users who receive emails</li> </ul>"},{"location":"custodian-api/email-service/#allow-gmail-account-api-access","title":"Allow Gmail account API access","text":"<p>Note</p> <p>This configuration has already been completed for the GraniteWMS Info account, it does not need to be performed again.</p> <p>If you are using the GraniteWMS Info account, use the script in Dropbox to update your SystemSettings and then run the GmailAuthenticator app to log in.</p> <p>To allow Email Service access to the Gmail account in order to send email, we will need to configure some settings on the Gmail account.</p> <p>Browse to https://console.cloud.google.com and log in with the account that you want to use, then follow the steps below.</p> <ol> <li> <p>Click the <code>Select a project</code> button on the top left</p> <p></p> </li> <li> <p>Click the <code>New Project</code> button on the top right of the box.</p> <p></p> </li> <li> <p>Give the new project a name e.g. <code>GraniteCustodianAPI</code>. You shouldn't need to change the Location/Organization. Just keep the default and click <code>CREATE</code></p> <p></p> </li> <li> <p>Click the hamburger menu on the top left and select <code>Enabled APIs &amp; services</code> from the menu</p> <p></p> </li> <li> <p>Click the <code>Enable APIs and Services</code> button</p> <p></p> </li> <li> <p>Search for \"gmail\", click on the Gmail API entry and then click the <code>Enable</code> button</p> <p></p> </li> <li> <p>Once the Gmail API is enabled, select the <code>OAuth consent screen</code> from the menu on the left</p> <p></p> </li> <li> <p>On the OAuth consent screen, select User Type <code>Internal</code> and click <code>Create</code></p> <p></p> </li> <li> <p>Select the Application type <code>Web application</code>.  Enter an App name e.g. <code>Granite.Custodian.Api</code>, a user support email address and a developer contact email address.  You can set both of the email addresses to the email address that you are using to send email. Click the <code>Save and Continue</code> button once you've entered the required fields.</p> <p></p> </li> <li> <p>Click the <code>Add or Remove Scopes</code> button</p> <p></p> </li> <li> <p>Filter the list of scopes by <code>Gmail API</code> and select the scope <code>https://mail.google.com</code>.  Scroll to the bottom of the page and click <code>Update</code></p> <p></p> </li> <li> <p>Now that the scope has been added, scroll down to the bottom of the page and click <code>Save and Continue</code></p> <p></p> </li> <li> <p>Select <code>Credentials</code> from the menu on the left</p> <p></p> </li> <li> <p>Click the <code>Create Credentials</code> button at the top and select <code>OAuth client ID</code></p> <p></p> </li> <li> <p>Give the client ID a name, e.g. <code>Granite.Custodian.Api</code>.  Under Authorized redirect URIs add both <code>http://localhost/authorize/</code> and <code>http://127.0.0.1/authorize/</code> Then click the <code>Create</code> button at the bottom</p> <p></p> </li> <li> <p>Take note of the <code>Client ID</code> and the <code>Client secret</code>.  These are the <code>UserName</code> and <code>Password</code> that you will need for SystemSettings</p> <p></p> </li> <li> <p>Set the <code>Client ID</code> and <code>Client secret</code> as your <code>UserName</code> and <code>Password</code> in SystemSettings.  While you are in SystemSettings, also ensure that you have the <code>EmailProvider</code> setting and that the value is set to <code>GMAIL</code></p> <p>Note</p> <p>The <code>Client secret</code> must be encrypted. Ensure that you save it through the Webdesktop so that it is not stored in plaintext.</p> </li> </ol>"},{"location":"custodian-api/email-service/#gmail-authenticator","title":"Gmail Authenticator","text":"<p>The Gmail Authenticator connects to the Gmail API using the Client ID and Client secret from System Settings, and fetches tokens that allow the Custodian API to connect to the Gmail API. This is a once off set up, once you have authenticated, the Email Service will be able to send email via Gmail.</p> <ol> <li> <p>Open a browser window that is either signed in with the Gmail account you are planning to use, or not signed in to any Gmail account. The Guest mode in Chrome works well for this.</p> </li> <li> <p>Browse to the folder where you have installed Custodian, and into the <code>GmailAuthenticator</code> folder.  Run the <code>Granite.Email.GmailAuthenticator.exe</code>.</p> <p>Note</p> <p>Granite.Email.GmailAuthenticator.exe uses the Custodian's appSettings.json file.  Make sure that it is configured before trying to authenticate the Gmail account.</p> </li> <li> <p>A new browser tab will open asking you to log in to authorize the Custodian API.  Log in with the Gmail account that you are going to use to send emails.  Log in with the normal username and password - NOT the Client ID and Client secret</p> </li> </ol> <p>After signing in via the browser, Gmail Authenticator will place the received token file into the <code>...\\GraniteCustodian\\GmailTokens</code> folder</p>"},{"location":"custodian-api/email-service/#email-templates","title":"Email Templates","text":"<p>Email templates use MARKDOWN for text formatting - HTML is not supported.  If you're not familiar with markdown, take a look at the syntax cheat-sheet.</p> <p>To embed images and tables in the body of your email, Email Templates use Script Methods similar to the Web Template's Script Methods.</p>"},{"location":"custodian-api/email-service/#template-manager","title":"Template Manager","text":"<p>The Template Manager is how you design and preview your email templates before using them.  It has full auditing, so you can see which user has made changes to the Email Templates, as well as what has changed.</p> <p>To copy an existing template, select it from the dropdown and then select New Template.  When you save the template you will be prompted to give your new template a name.</p>"},{"location":"custodian-api/email-service/#script-methods","title":"Script Methods","text":"<p>Script methods are the building blocks of your emails.  You can use these to add images, tables, and more to the body of your email.</p> <p>Each currently available Script Method is described below:</p>"},{"location":"custodian-api/email-service/#headerimage","title":"headerImage()","text":"<p>The headerImage() script method allows you to add an image as a header to the top of your email.</p> <p>Available parameters:</p> ParameterName Data Type Required Description imageUrl string Yes The url of the image that you want in your header imageAltText string No Text that will display in place of image if link is broken backgroundColor string No Solid block of color behind the image. Can be hexcode or word <p>Code example:</p> <pre><code>{{\n    headerImage(\n    {\n      imageUrl:'https://raw.githubusercontent.com/GraniteWMS/GraniteBrandAssets/main/Granite_WMS_Reversed.png',\n      imageAltText:'GraniteWMS logo',\n      backgroundColor:'#182026'\n    })\n}}\n</code></pre>"},{"location":"custodian-api/email-service/#table","title":"table()","text":"<p>The <code>table()</code> script method works together with the <code>dbSelect()</code> method to take a SQL string as an input and return the result as a table.</p> ParameterName Data Type Required Description sumColumns string[] No Comma separated list of columns to sum in the table footer backgroundColor string No Background color for the table's header and footer textColor string No Text color for the table's header and footer text <p>Code example:</p> <pre><code>{{    \n    'SELECT * FROM EmailTemplate_OrderDetail WHERE DocumentNumber = @documentNumber'\n    | dbSelect({documentNumber})\n    | table({backgroundColor: '#182026', textColor: 'white', sumColumns:['Qty','Price']})\n}}\n</code></pre>"},{"location":"custodian-api/email-service/#footerblock-and-footeritem","title":"footerBlock() and footerItem()","text":"<p>The <code>footerItem()</code> script method can be chained together with more <code>footerItem()</code>'s which are then passed into the <code>footerBlock()</code> to add a footer to your email.</p> <p>FooterItem parameters:</p> ParameterName Data Type Required Description imageUrl string No Url of the image to include in this footer item imageWidth int No Width of the image in pixels. Height will scale automatically text string No Text to include in this footer item url string No Url to link to if this footer item is clicked on <p>FooterBlock parameters:</p> ParameterName Data Type Required Description textColor string No Color of the text in the footerBlock backgroundColor string No Color of the background block for the whole footerBlock <p>Code example:</p> <pre><code>{{\n    footerItem(\n    { \n        imageUrl:'https://cdn1.iconfinder.com/data/icons/logotypes/32/square-facebook-1024.png',\n        imageWidth: 50,\n        url:'https://www.facebook.com/StarWarsAfrica/'\n    })\n    | footerItem(\n    { \n        imageUrl:'https://cdn2.iconfinder.com/data/icons/social-icons-33/128/Instagram-1024.png',\n        imageWidth: 50,\n        url:'https://www.instagram.com/starwars'\n    })\n    | footerBlock({backgroundColor:'#182026', textColor:'lightgray' })\n}}\n</code></pre>"},{"location":"custodian-api/email-service/#clr-procedures","title":"CLR Procedures","text":""},{"location":"custodian-api/email-service/#sending-an-email","title":"Sending an Email","text":"<p>When you make a request to send an email, the email is immediately entered into the <code>Email</code> table in the database. If your email is a templated email, the template is rendered just before the entry is created in the <code>Email</code> table. The Email Service will give you a response as soon as the email is queued in the table.  From there, the email is passed to background services to fetch any attachments.  Once the attachments have been gathered, the email will be sent.</p> <p>If any of the background services are unable to complete their job,  whether that be fetching an attachment or actually sending the mail, they will retry until the task succeeds or the  <code>MaxNumberOfRetries</code> configured in SystemSettings is reached.</p> <p>When the <code>MaxNumberOfRetries</code> is reached, the mail's status is set to FAILED and will not be retried without manual intervention.</p> <p>Two types of emails can be sent using SQLCLR:</p> <ul> <li>Template Emails</li> <li>Simple Emails</li> </ul> <p>The difference between these two types of emails is where the content of the email body comes from.  Templated emails require an email template that will be used to generate the body of the email.  Simple emails can only contain unformatted text in the body of the email. For more info on these, as well as help with designing your own email templates, see the Custodian API manual.</p> <p>Both types of emails have support for the following types of attachments:</p> <ul> <li>SSRS Reports</li> <li>Excel exports of SQL tables</li> <li>File attachments</li> </ul>"},{"location":"custodian-api/email-service/#dboclr_templateemail","title":"dbo.clr_TemplateEmail","text":"<p>Use this procedure to send an email that uses an Email template to generate the body of the email.</p> Parameter Name Required Description subject Yes The subject of the email templateName Yes The name of the email template to use for the body of this email templateParameters No List of parameters to pass into the email template to render the body of the email toEmailAddresses No Semicolon delimited list of email addresses to address this email to ccEmailAddresses No Semicolon delimited list of email address to CC on this email bccEmailAddresses No Semicolon delimited list of email addresses to BCC on this email reportAttachments No List of SSRS reports to attach to this email excelAttachments No List of excel exports to attach to this email fileAttachments No List of files to attach to this email"},{"location":"custodian-api/email-service/#dboemail_addtemplateparameter","title":"dbo.email_AddTemplateParameter","text":"<p>Use this function to add parameters to the list that will be used to render the email template</p> Parameter Name Required Description templateParameters Yes The list of template parameters parameterName Yes The name of the parameter as it appears in the email template parameterValue Yes The value that you are passing into the parameter <p>Example usage</p> <pre><code>DECLARE @subject nvarchar(max)\nDECLARE @templateName nvarchar(max)\nDECLARE @templateParameters nvarchar(max)\nDECLARE @toEmailAddresses nvarchar(max)\nDECLARE @ccEmailAddresses nvarchar(max)\nDECLARE @bccEmailAddresses nvarchar(max)\nDECLARE @reportAttachments nvarchar(max)\nDECLARE @excelAttachments nvarchar(max)\nDECLARE @fileAttachments nvarchar(max)\nDECLARE @success bit\nDECLARE @message varchar(max)\n\nBEGIN TRY\n\n    SET @subject = 'Test Clr Mail'                                                                          \n    SET @templateName = 'PickingNotification' -- Use the email template named PickingNotification\n    SET @templateParameters = dbo.email_AddTemplateParameter(@templateParameters, 'documentNumber', 'SO000123') -- Add a parameter to be passed to the email template. The parameter name is documentNumber, and value is SO000123\n    SET @toEmailAddresses = 'email1@gmail.com;email2@gmail.com'                                     \n\n    EXECUTE [dbo].[clr_TemplateEmail] \n        @subject\n        ,@templateName\n        ,@templateParameters\n        ,@toEmailAddresses\n        ,@ccEmailAddresses\n        ,@bccEmailAddresses\n        ,@reportAttachments\n        ,@excelAttachments\n        ,@fileAttachments\n        ,@success OUTPUT\n        ,@message OUTPUT\n\nEND TRY\nBEGIN CATCH\n    SELECT @message = ERROR_MESSAGE()\n    SELECT @success = 0\nEND CATCH\n\nSELECT @success, @message\n</code></pre>"},{"location":"custodian-api/email-service/#dboclr_simpleemail","title":"dbo.clr_SimpleEmail","text":"Parameter Name Required Description subject Yes The subject of the email body Yes The string content that will make up the body of the email toEmailAddresses No Semicolon delimited list of email addresses to address this email to ccEmailAddresses No Semicolon delimited list of email address to CC on this email bccEmailAddresses No Semicolon delimited list of email addresses to BCC on this email reportAttachments No List of SSRS reports to attach to this email excelAttachments No List of excel exports to attach to this email fileAttachments No List of files to attach to this email <p>Example usage</p> <pre><code>DECLARE @subject nvarchar(max)\nDECLARE @body nvarchar(max)\nDECLARE @toEmailAddresses nvarchar(max)\nDECLARE @ccEmailAddresses nvarchar(max)\nDECLARE @bccEmailAddresses nvarchar(max)\nDECLARE @reportAttachments nvarchar(max)\nDECLARE @excelAttachments nvarchar(max)\nDECLARE @fileAttachments nvarchar(max)\nDECLARE @success bit\nDECLARE @message varchar(max)\n\nSET @subject = 'Test Clr Mail' \nSET @body = 'Test mail'\nSET @toEmailAddresses = 'email1@gmail.com;email2@gmail.com'\n\nBEGIN TRY\n    EXECUTE [dbo].[clr_SimpleEmail] \n        @subject\n        ,@body\n        ,@toEmailAddresses\n        ,@ccEmailAddresses\n        ,@bccEmailAddresses\n        ,@reportAttachments\n        ,@excelAttachments\n        ,@fileAttachments\n        ,@success OUTPUT\n        ,@message OUTPUT\nEND TRY\nBEGIN CATCH\n    SELECT @message = ERROR_MESSAGE()\n    SELECT @success = 0\nEND CATCH\n\nSELECT @success, @message\n</code></pre>"},{"location":"custodian-api/email-service/#attachments","title":"Attachments","text":"<p>When you send an email with attachments, copies of those attachments are saved to the <code>EmailAttachmentFolder</code> specified in SystemSettings.  The attachments for any given email will be placed in a subfolder named with the <code>ID</code> of the email in the <code>Email</code> database table. This allows you to go back at any point to check the contents of the files that were sent as attachments.</p>"},{"location":"custodian-api/email-service/#ssrs-reports","title":"SSRS Reports","text":"<p>To attach SSRS reports, ensure the Reporting Service is configured correctly and working.</p> <p>Attaching an SSRS report works very similarly to printing or exporting the report directly from the Reporting Service.  The difference is that the Email Service will make the request to fetch the report after the email has been queued in the database.</p> <p>Browse the API's documentation page (<code>/metadata</code>) for details on the properties needed to attach an SSRS report.  The details can be found on the TemplateEmail or SimpleEmail requests.</p>"},{"location":"custodian-api/email-service/#dboemail_createreportattachment","title":"dbo.email_CreateReportAttachment","text":"ParameterName Required Description reportPath Yes The path to this report in SSRS. You can find the report path by browsing the CustodianAPI's reports page fileType Yes The file type that the report should be exported to. Valid values are PDF, EXCELOPENXML, or EXCEL <p>dbo.email_AddReportParameter</p> ParameterName Required Description reportAttachment Yes The report attachment that you are adding the parameter to. This must be created using the CreateReportAttachment function parameterName Yes The name of the SSRS report parameter you want to set parameterValue Yes The value that you want to set the SSRS report parameter to"},{"location":"custodian-api/email-service/#dboemail_addreportattachment","title":"dbo.email_AddReportAttachment","text":"ParameterName Required Description reportAttachments Yes The variable that contains the list of report attachments that you are going to send reportAttachmentToAdd Yes The variable that contains the report that you want to add to the list of reports that you are going to send <p>Example</p> <pre><code>DECLARE @subject nvarchar(max)\nDECLARE @body nvarchar(max)\nDECLARE @toEmailAddresses nvarchar(max)\nDECLARE @ccEmailAddresses nvarchar(max)\nDECLARE @bccEmailAddresses nvarchar(max)\nDECLARE @reportAttachments nvarchar(max)\nDECLARE @excelAttachments nvarchar(max)\nDECLARE @fileAttachments nvarchar(max)\nDECLARE @success bit\nDECLARE @message varchar(max)\nDECLARE @PickingReport varchar(max)\n\nBEGIN TRY\n    SET @PickingReport = dbo.email_CreateReportAttachment('/PickingReport', 'PDF')                  -- Creating the report that we want to attach. The reportPath is /PickingReport, and fileType is PDF\n    SET @PickingReport = dbo.email_AddReportParameter(@PickingReport, 'documentNumber', 'SO0001')       -- Adding a parameter that will be used to call the SSRS report. The parameter named 'documentNumber' will be set to 'SO0001'\n    SET @reportAttachments = dbo.email_AddReportAttachment(@reportAttachments, @PickingReport)      -- Lastly, we add the picking report to the list of report attachments. \n    SET @subject = 'Test Clr Mail' \n    SET @toEmailAddresses = 'email1@gmail.com;email2@gmail.com'\n\n    EXECUTE [dbo].[clr_SimpleEmail] \n        @subject\n        ,@body\n        ,@toEmailAddresses\n        ,@ccEmailAddresses\n        ,@bccEmailAddresses\n        ,@reportAttachments\n        ,@excelAttachments\n        ,@fileAttachments\n        ,@success OUTPUT\n        ,@message OUTPUT\nEND TRY\nBEGIN CATCH\n    SELECT @message = ERROR_MESSAGE()\n    SELECT @success = 0\nEND CATCH\n\nSELECT @success, @message\n</code></pre>"},{"location":"custodian-api/email-service/#sql-table-exports","title":"SQL Table exports","text":"<p>To attach SQL Table exports, ensure the SQLExport Service is configured correctly and working.</p> <p>Attaching an excel export works very similarly to exporting the data directly from the SQLExport Service.  The difference is that the Email Service will make the request to export the data after the email has been queued in the database.</p> <p>Browse the API's documentation page (<code>/metadata</code>) for details on the properties needed to attach a SQL Table Export.  The details can be found on the TemplateEmail or SimpleEmail requests.</p>"},{"location":"custodian-api/email-service/#dboemail_createexcelattachment","title":"dbo.email_CreateExcelAttachment","text":"ParameterName Required Description tableName Yes The name of the table or view that you want to export results from fileType Yes The file type that the data should be exported to. Valid values are CSV or EXCEL"},{"location":"custodian-api/email-service/#dboemail_addexcelattachmentfilter","title":"dbo.email_AddExcelAttachmentFilter","text":"ParameterName Required Description excelAttachment Yes The excel attachment you are adding a filter to. The variable passed in must be created using the CreateExcelAttachment function filterColumn Yes The column that you want to filter on filterType Yes The filter operation you want to perform. Valid values are Equal, NotEqual, Like, NotLike, StartsWith, EndsWith, Between, GreaterThan, GreaterThan, GreaterThanOrEqual, LessThan, LessThanOrEqual filterValue Yes The value you want to filter by"},{"location":"custodian-api/email-service/#dboemail_addexcelattachmentorderby","title":"dbo.email_AddExcelAttachmentOrderBy","text":"ParameterName Required Description excelAttachment Yes The excel attachment you are adding a filter to. The variable passed in must be created using the CreateExcelAttachment function orderByColumn Yes The column that you want to order by orderByType Yes Order by ascending or descending. Valid values are ASC or DESC"},{"location":"custodian-api/email-service/#dboemail_addexcelattachment","title":"dbo.email_AddExcelAttachment","text":"ParameterName Required Description excelAttachments Yes The variable that contains the list of excel attachments that you are going to send excelAttachmentToAdd Yes The variable that contains the excel attachment that you want to add to the list of attachments that you are going to send <p>Example</p> <pre><code>DECLARE @subject nvarchar(max)\nDECLARE @body nvarchar(max)\nDECLARE @toEmailAddresses nvarchar(max)\nDECLARE @ccEmailAddresses nvarchar(max)\nDECLARE @bccEmailAddresses nvarchar(max)\nDECLARE @reportAttachments nvarchar(max)\nDECLARE @excelAttachments nvarchar(max)\nDECLARE @fileAttachments nvarchar(max)\nDECLARE @success bit\nDECLARE @message varchar(max)\n\nDECLARE @ConsumablesExport varchar(max)\n\nBEGIN TRY\n    SET @ConsumablesExport = dbo.email_CreateExcelAttachment('CustomView_MasterItem', 'CSV')                                -- Create the excel attachment. The view we will pull from is CustomView_MasterItem, and it will export to a csv file \n    SET @ConsumablesExport = dbo.email_AddExcelAttachmentFilter(@ConsumablesExport, 'Category', 'Equal', 'CONSUMABLE')  -- Add a filter on the Category column of the view, fetch results where Category is equal to CONSUMABLE\n    SET @ConsumablesExport = dbo.email_AddExcelAttachmentOrderBy(@ConsumablesExport, 'Description', 'ASC')              -- Order the results of the export using the Description column in ascending order\n    SET @excelAttachments = dbo.email_AddExcelAttachment(@excelAttachments, @ConsumablesExport)                         -- Lastly, we add the export to the list of excel attachments\n\n    SET @subject = 'Test Clr Mail' \n    SET @toEmailAddresses = 'email1@gmail.com;email2@gmail.com'\n\n    EXECUTE [dbo].[clr_SimpleEmail] \n        @subject\n        ,@body\n        ,@toEmailAddresses\n        ,@ccEmailAddresses\n        ,@bccEmailAddresses\n        ,@reportAttachments\n        ,@excelAttachments\n        ,@fileAttachments\n        ,@success OUTPUT\n        ,@message OUTPUT\nEND TRY\nBEGIN CATCH\n    SELECT @message = ERROR_MESSAGE()\n    SELECT @success = 0\nEND CATCH\n\nSELECT @success, @message\n</code></pre>"},{"location":"custodian-api/email-service/#file-attachments","title":"File attachments","text":"<p>File attachments allow you to specify a file path to the file that you want to attach. When fetching this attachment type, the Email Service will copy the file into the email attachment folder configured in the SystemSettings table. This is to ensure that a copy is kept for future reference in case the original is ever moved or deleted.</p> <p>Browse the API's documentation page (<code>/metadata</code>) for details on the properties needed to attach a File Attachment.  The details can be found on the TemplateEmail or SimpleEmail requests.</p>"},{"location":"custodian-api/email-service/#dboemail_addfileattachment","title":"dbo.email_AddFileAttachment","text":"ParameterName Required Description fileAttachments Yes The variable that contains all the file attachment paths that will be sent with the email fileToAttach Yes The path to the file that you want to add as an attachment <p>Example</p> <pre><code>DECLARE @subject nvarchar(max)\nDECLARE @body nvarchar(max)\nDECLARE @toEmailAddresses nvarchar(max)\nDECLARE @ccEmailAddresses nvarchar(max)\nDECLARE @bccEmailAddresses nvarchar(max)\nDECLARE @reportAttachments nvarchar(max)\nDECLARE @excelAttachments nvarchar(max)\nDECLARE @fileAttachments nvarchar(max)\nDECLARE @success bit\nDECLARE @message varchar(max)\n\nBEGIN TRY\n    SET @fileAttachments = dbo.email_AddFileAttachment(@fileAttachments, 'C:\\logexport.txt')        -- Add a file to the list of file attachments\n\n    SET @subject = 'Test Clr Mail' \n    SET @toEmailAddresses = 'email1@gmail.com;email2@gmail.com'\n\n    EXECUTE [dbo].[clr_SimpleEmail] \n        @subject\n        ,@body\n        ,@toEmailAddresses\n        ,@ccEmailAddresses\n        ,@bccEmailAddresses\n        ,@reportAttachments\n        ,@excelAttachments\n        ,@fileAttachments\n        ,@success OUTPUT\n        ,@message OUTPUT\nEND TRY\nBEGIN CATCH\n    SELECT @message = ERROR_MESSAGE()\n    SELECT @success = 0\nEND CATCH\n\nSELECT @success, @message\n</code></pre>"},{"location":"custodian-api/getting-started/","title":"Getting Started","text":""},{"location":"custodian-api/getting-started/#prerequisites","title":"Prerequisites","text":"<ul> <li>IIS</li> <li>ASP.NET Core 8 Hosting Bundle</li> <li>Sufficient permissions for folder and file access and IIS application creation</li> </ul>"},{"location":"custodian-api/getting-started/#install","title":"Install","text":"<ol> <li> <p>Configure the connection string to the Granite database in the <code>appsettings.json</code> file</p> <pre><code>{\n\"ConnectionStrings\": {\n    \"GRANITE\": \"Server=.\\\\sql2019;Database=GraniteDatabase;User ID=Granite;Password=******;Persist Security Info=False;\"\n},\n\"AllowedOrigins\": [ \"https://:40099\" ],\n\"Logging\": {\n    \"LogLevel\": {\n    \"Default\": \"Information\",\n    \"Microsoft.AspNetCore\": \"Warning\"\n    }\n},\n\"AllowedHosts\": \"*\"\n}\n</code></pre> <p>Note</p> <p>You cannot use wildcards like <code>*</code> in the <code>AllowedOrigins</code> setting for the UtilityAPI.</p> <p>It should contain only the WebDesktop address.</p> </li> <li> <p>Add the site to IIS, be sure to run as https and select a valid certificate</p> </li> <li>Configure the settings for each service that you are going to make use of<ul> <li>Process Template Service Configuration</li> <li>Email Service Configuration</li> <li>Reporting Service Configuration</li> <li>SqlExport Service Configuration</li> </ul> </li> </ol>"},{"location":"custodian-api/process-template-service/","title":"Process Template Service","text":"<p>The primary responsibility of the Custodian API is to manage Process Templates, which encapsulate Granite Processes along with Process Steps, web templates, and pre-scripts. Each template consists of both metadata and artifact files. Metadata serves to document the process and provide additional information, while artifacts encompass all the data, scripts, views, lookups, and static data necessary for deploying the process. Ultimately, each deployment is self-contained, facilitating seamless sharing and deployment processes through the WebDesktop.</p>"},{"location":"custodian-api/process-template-service/#configuration","title":"Configuration","text":""},{"location":"custodian-api/process-template-service/#application-settings","title":"Application Settings","text":"<p>The settings below are configured in the <code>appsettings.json</code>.</p>"},{"location":"custodian-api/process-template-service/#connectionstrings","title":"ConnectionStrings","text":"<p>Configuring multiple connection strings allow you to deploy to any instance of Granite. The name of the connection string will be used in the Webdesktop to identify the connection. Example CONNECTION and TEST.</p> <pre><code>\"ConnectionStrings\": {\n    \"CONNECTION\": \"Data Source=.;Initial Catalog=GraniteLive;Persist Security Info=True;User ID=;TrustServerCertificate=True;\",\n    \"TEST\": \"Data Source=.;Initial Catalog=GraniteTest;Persist Security Info=True;User ID=;TrustServerCertificate=True;\"\n  }\n</code></pre>"},{"location":"custodian-api/process-template-service/#allowedorigins","title":"AllowedOrigins","text":"<p>The 'allowed origins' is a list of addresses for applications requiring access to the API.  By default, the only address that requires configuration is the Granite WebDesktop address.</p> <pre><code>\"AllowedOrigins\": [ \"https://192.168.1.10:8081\" ]\n</code></pre> <p>Note</p> <p>You cannot use wildcards like <code>*</code> in the <code>AllowedOrigins</code> setting for Custodian.</p>"},{"location":"custodian-api/process-template-service/#systemsettings","title":"SystemSettings","text":"<pre><code>INSERT INTO SystemSettings ([Application], [Key], [Value], [Description], [isEncrypted], [isActive], AuditDate, AuditUser)\nVALUES \n('Granite.Custodian', 'Repo_id', '676912773', '', 0, 1, GETDATE(), 'AUTOMATION'),\n('Granite.Custodian', 'Token', '******', '', 0, 1, GETDATE(), 'AUTOMATION'),\n('Granite.Custodian', 'Stores', 'Approved,Draft', '', 0, 1, GETDATE(), 'AUTOMATION')\n</code></pre> <ul> <li><code>Take Note</code> Ensure that the Token is Encrypted. After 90 days reset the token. We will issue a new token prior to expiry.</li> <li>New stores could be introduced and added to this setting. The stores available will be communicated to the team; you cannot add names that do not exist.</li> </ul>"},{"location":"custodian-api/process-template-service/#troubleshoot","title":"Troubleshoot","text":"<p>The most common issues will arise with the connection to the cloud store, ensuring that the token is correct and not expired. Run <code>\\config</code> operation to verify connections, authentication and setup.</p>"},{"location":"custodian-api/process-template-service/#process-template-best-practices","title":"Process Template Best Practices","text":"<p>The aim of a template is to encapsulate a single business use-case in a self-deployable unit. It should be easy to understand, clear in its intention, and simple to deploy. Below are some guidelines on how you would achieve this. These guidelines do not state that you should avoid certain things, but rather aim to provide context and explain some of the trade-offs of your design decisions.</p>"},{"location":"custodian-api/process-template-service/#simplicity","title":"Simplicity","text":"<p><code>Always aim for simplicity over any other motivation.</code></p> <p>Simplicity in templates refers to how easily colleagues can deploy, modify, comprehend, and upkeep processes.  Your process behavior should consistently yield predefined outcomes.</p>"},{"location":"custodian-api/process-template-service/#low-ceremony","title":"Low Ceremony","text":"<p><code>Ready to use</code></p> <p>Processes often rely on predefined, hardcoded, or static data. Ensure these are minimized, and thorough documentation is provided to highlight any required setup data, such as types, categories, locations, etc.</p>"},{"location":"custodian-api/process-template-service/#abstraction-and-decoupling","title":"Abstraction and Decoupling","text":"<p><code>Less moving parts</code></p> <p>Keep to a single stored procedure per prescript and try to avoid further decoupling.</p> <p>Decoupling and Abstraction often used for re-use can increase complexity, ensure the re-use value is justified.</p>"},{"location":"custodian-api/process-template-service/#explicit-over-generic","title":"Explicit over Generic","text":"<p><code>Be Explicit</code></p> <p>While Generic (multipurpose) processes have their value, simplicity is often compromised in their favor.  However, it's preferable to develop Explicit (single-use) processes for the sake of simplicity.</p>"},{"location":"custodian-api/reporting-service/","title":"Reporting Service","text":"<p>The reporting service accesses the reports by directly calling SQL Server Reporting Service's API. Once it has received the report back from the API it either prints or exports the report depending on the call.</p>"},{"location":"custodian-api/reporting-service/#prerequisites","title":"Prerequisites","text":"<ul> <li>SQL Server Reporting Service</li> </ul>"},{"location":"custodian-api/reporting-service/#configuration","title":"Configuration","text":"<p>Settings for the Reporting Service element of the UtilityAPI are configured in the <code>SystemSettings</code> table. You can find the insert script for the settings in the GraniteDatabase install folder:</p> <pre><code>\"...\\GraniteDatabase\\Data\\SystemSettings\\SystemSettingsUtilityAPI.sql\"\n</code></pre> <p>You should have the following settings after running the script:</p> Application Key Value Description ValueDataType isEncrypted isActive Granite.Utility SSRSWebServiceUrl Url of the reporting service string False True <p>The SSRS Web Service Url should look something like this: http://10.0.0.1/ReportServer</p> <p>You can find it on the Report Server Configuration Manager under the web service url tab. Check the configuration page (<code>/config</code>) and ensure that <code>Report Service URL Valid</code> and <code>Report Execution Service URL Valid</code> are both <code>true</code>.</p>"},{"location":"custodian-api/reporting-service/#iis-application-pool","title":"IIS Application Pool","text":"<p>In order for the UtilityAPI to access SSRS, the Identity of the Application pool needs to be changed to LocalSystem. </p> <p>To do this, go to the advanced settings of the application pool associated with the UtilityAPI and change from ApplicationPoolIdentity to LocalSystem as you can see below.</p> <p></p>"},{"location":"custodian-api/reporting-service/#report-properties","title":"Report Properties","text":"<p>Report Properties on the UtilityAPI homepage allows you to see all of the report paths and parameters. </p> <p>If the parameter Name is ERROR you will need to check that the report is working in SSRS. The most common errors are a missing stored procedure or the report being pointed to a data source that does not exist.</p>"},{"location":"custodian-api/reporting-service/#printer-statuses","title":"Printer Statuses","text":"<p>Printer Statuses on the UtilityAPI homepage allows you to see all of the Printers visible to the UtilityAPI and their statuses. The report service does not check the status of the printer before sending a print job. The status is purely useful to diagnose issues printing.</p>"},{"location":"custodian-api/reporting-service/#reportfileexport","title":"ReportFileExport","text":"<p>This process calls SSRS and saves the report to the specified file path. The file path has to be on the server where the UtilityAPI is running. To get the file from the server, the easiest option is to send it as an email attachment.</p> <p>Supported file types are PDF and EXCEL, both the new .xlsx and the old .xls. If you are unsure which to use, go for .xlsx</p> <p>See the API Documentation for more details on how to export a report using the API. See the dbo.clr_ReportExportToFile procedure for how to export a report using SQLCLR.</p>"},{"location":"custodian-api/reporting-service/#reportprint","title":"ReportPrint","text":"<p>Note</p> <p>From version 6 of the Custodian API onwards this method no longer sends the job directly to the printer. Instead it is sent to an internal queue that then sends the job to the printer asynchronously. This allows the call to be faster. </p> <p>This process calls SSRS and sends the report to a print queue. Check Printer Statues on the UtilityAPI homepage to see the list of available printers.</p> <p>See the API Documentation for more details on how to print a report using the API. See below the dbo.clr_PrintReport procedure for how to print a report using SQLCLR.</p>"},{"location":"custodian-api/reporting-service/#clr-procedures","title":"CLR Procedures","text":""},{"location":"custodian-api/reporting-service/#dboclr_reportexporttofile","title":"dbo.clr_ReportExportToFile","text":"<p>Use this procedure to save a SSRS report to the server where the CustodianAPI is running. Will require using dbo.report_AddReportParameters, see a working example below.</p> Parameter Name Required Description reportPath Yes Path to the report in SSRS (use the report properties in the CustodianAPI to find the report path) fileDestinationPath Yes Where the report will be save to including the file name. filetype Yes File type that you want to save as (PDF, EXCELOPENXML (.xlsx), EXCEL (.xls)) parameters No List of all parameters required by the report"},{"location":"custodian-api/reporting-service/#dboclr_printreport","title":"dbo.clr_PrintReport","text":"<p>Use this procedure to print a SSRS report.  Will require using dbo.report_AddReportParameters, see a working example below.</p> Parameter Name Required Description reportPath Yes Path to the report in SSRS (use the report properties in the CustodianAPI to find the report path) printerName Yes Name of the printer to print to (check available printers in CustodianAPI printer statuses ) copies Yes Number of copies to be printed parameters No List of all parameters required by the report"},{"location":"custodian-api/reporting-service/#dboreport_addreportparameters","title":"dbo.report_AddReportParameters","text":"<p>Use this Function to create a report parameter to use with dbo.clr_ReportExport and dbo.clr_PrintReport.</p> Parameter Name Required Description parameters Yes The string that will contain the report parameters name Yes The name of the report parameter value Yes The value of the parameter <p>Example use (printing)</p> <pre><code>DECLARE @reportPath varchar(50)\nDECLARE @printerName varchar(50) \nDECLARE @parameters varchar(200)\nDECLARE @copies int\nDECLARE @success bit\nDECLARE @message varchar(max)\n\nSELECT @reportPath = '/Pick Slip - Per Cage'\nSELECT @printerName = 'TestPrinter'\nSELECT @copies = 1\n\nBEGIN TRY\n    SELECT @parameters = dbo.report_AddReportParameter(@parameters, 'DocumentNumber', 'STV-AVO-000001')\n    SELECT @parameters = dbo.report_AddReportParameter(@parameters, 'Cage', 'CAGE D')\n\n    EXEC [dbo].[clr_ReportPrint]\n        @reportPath\n        ,@printerName\n        ,@parameters\n        ,@copies\n        ,@success OUTPUT\n        ,@message OUTPUT\nEND TRY\nBEGIN CATCH\n    SELECT @message = ERROR_MESSAGE()\n    SELECT @success = 0\nEND CATCH\n\nSELECT @success, @message\n</code></pre> <p>Example use (export)</p> <pre><code>DECLARE @reportPath varchar(50)\nDECLARE @fileDestinationPath varchar(50)\nDECLARE @fileType varchar(50) \nDECLARE @parameters varchar(200)\nDECLARE @success bit\nDECLARE @message varchar(max)\n\nSELECT @reportPath = N'/Pick Slip - Per Cage'\nSELECT @fileDestinationPath = 'D:\\\\Granite WMS\\\\V5 Demo\\\\PickSlip.pdf'\nSELECT @fileType = 'PDF'\n\nBEGIN TRY\n\n    SELECT @parameters = dbo.report_AddReportParameter(@parameters, 'DocumentNumber', 'STV-AVO-000001')\n    SELECT @parameters = dbo.report_AddReportParameter(@parameters, 'Cage', 'CAGE D')\n\n    EXEC [dbo].[clr_ReportExportToFile]\n         @reportPath\n        ,@fileDestinationPath\n        ,@fileType\n        ,@parameters\n        ,@success OUTPUT\n        ,@message OUTPUT\nEND TRY\nBEGIN CATCH\n    SELECT @message = ERROR_MESSAGE()\n    SELECT @success = 0\nEND CATCH\n\nSELECT @success, @message\n</code></pre>"},{"location":"custodian-api/sql-export-service/","title":"SqlExport Service","text":""},{"location":"custodian-api/sql-export-service/#configuration","title":"Configuration","text":"<p>The only setup required is to configure the connection string to the Granite database in the <code>appsettings.json</code> file.</p>"},{"location":"custodian-api/sql-export-service/#table-export","title":"Table Export","text":"<p>This process saves data from either a table or a view to the specified file path. The file path has to be on the server where the UtilityAPI is running. To get the file from the server, the easiest option is to send it as an email attachment.</p> <p>Supported file types are EXCEL (.xlsx) AND CSV (.csv).</p> <p>Table Export supports filters (Equal, GreaterThan, ect..), order by, offset, and limit.</p> <ul> <li>Filters require the column name, the filter type, and filter value. (For a full list of supported filter types, see the API documentation)</li> <li>OrderBy requires a column name and an order by type (ASC or DESC). The order in which the order bys are submitted determines the order in which they are applied. </li> <li>Offset determines how many rows from the start of the data are skipped. If not set it will default to 0.</li> <li>Limit determines the number of rows returned from the data. If not set it will default to 10000. </li> </ul> <p>See the API documentation for more details on how to export a table or view using the API. See the SQLCLR documentation for how to export a table or view using SQLCLR.</p>"},{"location":"custodian-api/sql-export-service/#clr-procedures","title":"CLR Procedures","text":""},{"location":"custodian-api/sql-export-service/#dboclr_tableexport","title":"dbo.clr_TableExport","text":"<p>Use this procedure to export data from a SQL Table or View to either a CSV or Excel file. </p> Parameter Name Required Description tableName Yes The name of the sql table or view to export data from filters No The list of filters to be applied to the dataset (see below for details) offset No Number of lines to skip from the dataset limit No Limit the number of rows exported (if left blank it will default to 10000) orderByList No The list of order by criteria to sort the dataset (see below for details) fileDestinationPath Yes Where the report will be save to including the file name. filetype Yes File type that you want to save as (CSV (.csv),  EXCEL (.xlsx))"},{"location":"custodian-api/sql-export-service/#dboexport_addfilter","title":"dbo.export_AddFilter","text":"<p>This function allows you to build the filters parameter string.</p> Parameter Name Required Description filters Yes The string containing the list of filters column Yes The name of the column that is being filtered filterType Yes The type of filter being applied (Equal, NotEqual, Like, NotLike, StartsWith, EndsWith, Between, GreaterThan, GreaterThanOrEqual, LessThan, LessThanOrEqual) value Yes The value applied to the filter"},{"location":"custodian-api/sql-export-service/#dboexport_addorderby","title":"dbo.export_AddOrderBy","text":"<p>This function allows you to build the OrderBy parameter string.</p> Parameter Name Required Description orderByList Yes The string containing the list of orderby parameters column Yes The name of the column that is being order by orderByType Yes The type of filter being applied (ASC or DESC) <ul> <li>Example usage <pre><code>DECLARE @tableName varchar(50) \nDECLARE @offset int\nDECLARE @limit int\nDECLARE @fileDestinationPath varchar(100)\nDECLARE @filetype varchar(20)\nDECLARE @orderByList varchar(200)\nDECLARE @filters varchar(200)\nDECLARE @success bit\nDECLARE @message varchar(max)\n\nSELECT @tableName = 'API_QueryStockTotals'\nSELECT @fileDestinationPath = 'D:\\\\Granite WMS\\\\V5 Demo\\\\StockInFreezer.csv'\nSELECT @filetype = 'CSV'\n\nBEGIN TRY\n    SET @orderByList = dbo.export_AddOrderBy(@OrderByList, 'Type', 'DESC')\n    SET @orderByList = dbo.export_AddOrderBy(@OrderByList, 'Code', 'ASC')\n    SET @filters = dbo.export_AddFilter(@Filters, 'Category', 'Equal', 'Freezer')\n    SET @filters = dbo.export_AddFilter(@Filters, 'Qty', 'GreaterThan', '0')\n\n    SET @offset = 0\n    SET @limit = 500\n\n    EXEC clr_TableExport \n        @tableName\n        ,@filters\n        ,@offset\n        ,@limit\n        ,@orderByList\n        ,@fileDestinationPath \n        ,@fileType\n        ,@success OUTPUT\n        ,@message OUTPUT\nEND TRY\nBEGIN CATCH\n    SELECT @message = ERROR_MESSAGE()\n    SELECT @success = 0\nEND CATCH\n\nSELECT @success, @message\n</code></pre></li> </ul>"},{"location":"customization/","title":"Customization","text":""},{"location":"customization/#introduction","title":"Introduction","text":"<p>Granite WMS prides itself on offering not only extensive customization options but also solutions of the highest quality. By leveraging robust programming languages in combination with flexible database schemas, we deliver an innovative and unique suite of customization tools. Our approach ensures that we remain free from technology debt while also addressing backward compatibility concerns. Programming languages, being more stable and less prone to rapid obsolescence compared to technology trends, enable us to build a future-proof system. In essence, we\u2019ve embraced customization the right way\u2014empowering you to tailor our solutions to your exact needs without compromising on stability or quality.</p> <p>Much of this customization is supported directly in the frontend user interface (WebDesktop), allowing you to configure and manage setups efficiently within the application. For areas where frontend support is not yet available, we ensure comprehensive documentation is provided to guide you through the process. </p>"},{"location":"customization/#at-a-glance","title":"At a glance","text":""},{"location":"customization/#process-and-steps","title":"Process and Steps","text":"<p><code>Our business process workflow engine.</code></p> <p>Low-code data-driven workflow. Step behavior is driven by T-SQL pre-scripts. UI design is driven by HTML and Handlebars known as WebTemplates.</p>"},{"location":"customization/#webdesktop-data-capture","title":"WebDesktop Data Capture","text":"<p><code>Custom data entry</code></p> <p>No-code data-driven setup to add custom data capture screens. These screens map one-to-one to webDesktop screens and utilize same API operation.</p>"},{"location":"customization/#webdesktop-functions","title":"WebDesktop Functions","text":"<p><code>Custom Injectable functions</code> Similar to Data Capture except instead of calling an API operation you implement a custom T-SQL script.</p>"},{"location":"customization/#sql-clr","title":"SQL CLR","text":"<p><code>T-SQL utility</code></p> <p>SQL CLR is utilized to enhance the T-SQL experience, we have a comprehensive set of functions to interact with our APi s, utilities etc. This ensure that the same logic is used in T-SQL via our API s and that T-SQL is not depended on technologies.</p>"},{"location":"customization/intro-practice/","title":"Intro practice","text":"<p>PRACTICE</p> <p><code>Professional Rules And Coding Techniques In Consultant Environments</code></p> <p><code>WIP: YAML file to capture best practice for AI tools and LLMs.</code></p> <p>PRACTICE is the official technical standards guide for implementing and customizing Granite WMS. Designed specifically for our consulting and implementation teams, it outlines the coding techniques, configuration principles, and professional behaviors expected when delivering client solutions in our low-code environment.</p> <p>Granite WMS is a powerful and flexible platform \u2014 but with flexibility comes responsibility. PRACTICE ensures that every consultant follows a common approach to structure, quality, and maintainability. Whether building a simple process or deploying a complex warehouse solution, PRACTICE helps us deliver results that are scalable, supportable, and aligned with our core product philosophy.</p>"},{"location":"customization/intro-practice/#values","title":"Values","text":""},{"location":"customization/intro-practice/#deliver-consistent-predictable-implementations","title":"Deliver Consistent, Predictable Implementations","text":"<p>Create client confidence through professionalism, structure, and repeatable delivery \u2014 every project, every time.</p>"},{"location":"customization/intro-practice/#protect-and-grow-the-granite-wms-reputation","title":"Protect and Grow the Granite WMS Reputation","text":"<p>Our technical work is a reflection of our product. Reliable, well-executed implementations uphold and extend the value of the Granite WMS brand.</p>"},{"location":"customization/intro-practice/#foster-a-culture-of-craftsmanship-and-ownership","title":"Foster a Culture of Craftsmanship and Ownership","text":"<p>We take pride in clean, thoughtful work \u2014 and take responsibility for how our solutions affect the team and the client experience.</p>"},{"location":"customization/intro-practice/#encourage-technical-excellence-and-team-learning","title":"Encourage Technical Excellence and Team Learning","text":"<p>PRACTICE creates a shared foundation that helps us learn from each other, build better together, and elevate our collective skills.</p>"},{"location":"customization/intro-practice/#minimize-technical-debt-through-smart-design","title":"Minimize Technical Debt Through Smart Design","text":"<p>Sustainable solutions save time. PRACTICE helps us make decisions that reduce future maintenance and complexity.</p> <p>Granite WMS is only as strong as the standards we uphold. PRACTICE is how we build better, together.</p>"},{"location":"customization/prescripts/prescripts/","title":"Pre Scripts","text":""},{"location":"customization/prescripts/prescripts/#teaching-moment-a-t-sql-script-should-be-well-formed-or-not-run-at-all","title":"\ud83d\udcda Teaching Moment: \u201cA T-SQL Script Should Be Well-Formed, or Not Run at All\u201d","text":""},{"location":"customization/prescripts/prescripts/#the-situation","title":"The Situation","text":"<p>It\u2019s easy to focus on getting a T-SQL script to \u201cjust work.\u201d But in a real production system \u2014 especially in a live warehouse \u2014 scripts run under pressure, on live data, and often as part of an automated process or scanner interaction.</p> <p>Many failures we\u2019ve traced come down to scripts that:</p> <ul> <li>Assume inputs are always present</li> <li>Lack error handling</li> <li>Return nothing when something goes wrong</li> <li>Fail silently and leave bad data behind</li> </ul>"},{"location":"customization/prescripts/prescripts/#the-impact","title":"The Impact","text":"<p>Poorly structured SQL might seem faster to write, but it causes:</p> <ul> <li>Inconsistent behavior across environments</li> <li>Difficult-to-diagnose issues in production</li> <li>Rework, cleanup, and loss of trust</li> <li>Cascading failures when dependent logic relies on a successful response</li> </ul> <p>This directly undermines:</p> <ul> <li>\ud83d\udd12 Professionalism and Predictability</li> <li>\ud83c\udfaf Technical Excellence</li> <li>\ud83e\uddf9 Minimized Technical Debt</li> </ul>"},{"location":"customization/prescripts/prescripts/#the-practice-way","title":"The PRACTICE Way","text":"<p>All scripts that run as part of Granite WMS must follow a few basic principles:</p>"},{"location":"customization/prescripts/prescripts/#1-structured-start","title":"\u2705 1. Structured Start","text":"<p>Begin your script with:</p> <ul> <li><code>SET NOCOUNT ON</code> to avoid extra result sets</li> <li>Declare all variables upfront</li> <li>Use comments to separate and label sections</li> </ul>"},{"location":"customization/prescripts/prescripts/#2-safe-input-parsing","title":"\u2705 2. Safe Input Parsing","text":"<p>Always check that required inputs exist before using them. Use <code>ISNULL(...)</code> or fallback values.</p> <pre><code>DECLARE @Document VARCHAR(30)\nSELECT @Document = ISNULL(Value, '') FROM @input WHERE Name = 'Document'\n</code></pre>"},{"location":"customization/prescripts/prescripts/#3-defensive-error-handling","title":"\u2705 3. Defensive Error Handling","text":"<p>Use <code>TRY/CATCH</code> to prevent your script from breaking the scanner.</p> <pre><code>BEGIN TRY\n   -- Your logic here\nEND TRY\nBEGIN CATCH\n   SET @Valid = 0\n   SET @Reference = 'Error: ' + ERROR_MESSAGE()\nEND CATCH\n</code></pre>"},{"location":"customization/prescripts/prescripts/#4-consistent-output-structure","title":"\u2705 4. Consistent Output Structure","text":"<p>Always return:</p> <ul> <li><code>Valid</code> (bit, 1 = success, 0 = failure)</li> <li><code>Reference</code> (varchar, explanation or result)</li> </ul> <p>These are used by the process engine or UI to continue or block flow.</p>"},{"location":"customization/prescripts/prescripts/#5-readable-and-maintainable","title":"\u2705 5. Readable and Maintainable","text":"<p>Write for the next consultant:</p> <ul> <li>Clear variable names</li> <li>Comments explaining intent</li> <li>No cryptic logic or \u201cshortcuts\u201d</li> </ul>"},{"location":"customization/prescripts/prescripts/#takeaway","title":"\ud83d\udd11 Takeaway","text":"<p>\u201cIf your SQL isn\u2019t safe, readable, and predictable \u2014 it doesn\u2019t belong in production.\u201d</p> <p>In PRACTICE, we don\u2019t just write SQL that runs. We write SQL that survives real-world usage, upgrades, and other people.</p>"},{"location":"customization/triggers/triggers/","title":"Triggers","text":""},{"location":"customization/triggers/triggers/#teaching-moment-let-your-trigger-fail-loud-but-safely","title":"\ud83d\udcda Teaching Moment: \"Let Your Trigger Fail Loud, But Safely\"","text":""},{"location":"customization/triggers/triggers/#the-situation","title":"The Situation","text":"<p>A consultant implemented a SQL trigger to log inserts. It was wrapped in <code>TRY/CATCH</code>, but the failure was silently swallowed \u2014 no error message, no rollback, no visibility. The transaction partially committed, leaving the data in an inconsistent state and creating hours of downstream debugging.</p>"},{"location":"customization/triggers/triggers/#the-impact","title":"The Impact","text":"<p>Triggers that fail silently or partially succeed are dangerous. They break the very foundations of reliable data operations. Without logging and proper rollback, they:</p> <ul> <li>Introduce invisible bugs and corruption</li> <li>Undermine client confidence in the system</li> <li> <p>Violate core PRACTICE values:</p> </li> <li> <p>Professionalism &amp; Predictability</p> </li> <li>Reliable Delivery</li> <li>Minimized Technical Debt</li> </ul>"},{"location":"customization/triggers/triggers/#the-practice-way","title":"The PRACTICE Way","text":"<p>A trigger should always:</p> <ol> <li>Catch and log errors visibly</li> <li>Rollback cleanly if needed</li> <li>Re-throw the error using <code>THROW</code> to ensure the transaction is aborted and upstream systems are notified</li> </ol> <p>Use <code>SET XACT_ABORT ON</code> to force full rollback on runtime errors, and use <code>XACT_STATE()</code> in the CATCH block to safely handle the transaction state.</p>"},{"location":"customization/triggers/triggers/#recommended-template","title":"\u2705 Recommended Template","text":"<pre><code>CREATE TRIGGER dbo.TR_YourTable_AI_Granite\nON dbo.YourTable\nAFTER INSERT\nAS\nBEGIN\n    SET NOCOUNT ON;\n\n    -- Ensures entire transaction is rolled back on unhandled errors.\n    SET XACT_ABORT ON;\n\n    BEGIN TRY\n        -- Your logic here\n        RAISERROR ('Testing error', 16, 1); -- for simulation only\n    END TRY\n    BEGIN CATCH\n        DECLARE @ErrorMessage NVARCHAR(4000) = ERROR_MESSAGE();\n        DECLARE @ErrorSeverity INT = ERROR_SEVERITY();\n        DECLARE @ErrorState INT = ERROR_STATE();\n        DECLARE @TriggerName SYSNAME = OBJECT_NAME(@@PROCID);\n\n        DECLARE @LogMessage NVARCHAR(4000) =\n            CONCAT('Trigger [', @TriggerName, '] error: ', @ErrorMessage);\n\n        -- Log the error using SQL event log or error table\n        EXEC xp_logevent 50001, @LogMessage, 'ERROR';\n        -- Optional: INSERT INTO dbo.GraniteErrorLog ...\n\n        -- Roll back the transaction if active\n        IF XACT_STATE() &lt;&gt; 0\n            ROLLBACK TRANSACTION;\n\n        -- Re-throw to abort the outer transaction\n        THROW;\n    END CATCH\nEND\nGO\n</code></pre>"},{"location":"customization/triggers/triggers/#anti-pattern-silent-trigger-failure","title":"\u274c Anti-Pattern: Silent Trigger Failure","text":"<pre><code>BEGIN TRY\n   -- error occurs here\nEND TRY\nBEGIN CATCH\n   -- does nothing, error disappears\nEND CATCH\n</code></pre> <p>This creates invisible failures and corrupts your audit trail and client trust.</p>"},{"location":"customization/triggers/triggers/#takeaway","title":"\ud83d\udd11 Takeaway","text":"<p>Log it. Roll it back. Throw it again. A trigger that fails silently is a ticking time bomb.</p>"},{"location":"database/release-notes/","title":"Release notes","text":""},{"location":"database/release-notes/#unreleased-500","title":"Unreleased (5.0.0)","text":""},{"location":"database/release-notes/#granitedatabase","title":"GraniteDatabase","text":""},{"location":"database/release-notes/#changed-views","title":"Changed Views","text":""},{"location":"database/release-notes/#api_querydocuments","title":"API_QueryDocuments","text":"<pre><code>ALTER VIEW [dbo].[API_QueryDocuments]\nAS\nSELECT        TOP 100 PERCENT dbo.[Document].ID, dbo.[Document].Number, dbo.[Document].TradingPartnerCode, dbo.[Document].TradingPartnerDescription, dbo.[Document].CreateDate, dbo.[Document].Priority, \n                         dbo.[Document].ERPLocation, dbo.[Document].Site, dbo.Document.ExpectedDate, dbo.Document.RouteName, dbo.Document.StopName, dbo.[Document].Status, dbo.[Document].AuditDate, dbo.[Document].AuditUser, dbo.[Document].Type, dbo.[Document].Description, (STUFF\n                             ((SELECT        CAST(', ' + IntegrationReference AS VARCHAR(MAX))\n                                 FROM            [Transaction]\n                                 WHERE        (Document_id = [Document].ID)\n                                 GROUP BY [Transaction].IntegrationReference FOR XML PATH('')), 1, 2, '')) AS IntegrationReference\nFROM            dbo.[Document]\nWHERE  ([Status] &lt;&gt; 'COMPLETE' OR AuditDate &gt; getdate() - 30)\nORDER BY dbo.[Document].ID DESC\n\nGO\n</code></pre>"},{"location":"database/release-notes/#integration_transactions","title":"Integration_Transactions","text":"<pre><code>ALTER VIEW [dbo].[Integration_Transactions]\nAS\nSELECT * FROM \n(SELECT DISTINCT \n                         dbo.[Transaction].ID, dbo.[Transaction].Date, dbo.Users.Name AS [User], dbo.[Transaction].IntegrationStatus, dbo.[Transaction].IntegrationReady, dbo.MasterItem.Code, ISNULL(dbo.[Transaction].UOM, dbo.MasterItem.UOM) \n                         AS UOM, dbo.[Transaction].UOMConversion, dbo.[Transaction].FromQty, dbo.[Transaction].ToQty, dbo.[Transaction].ActionQty, dbo.Location.ERPLocation AS FromLocationERPLocation, \n                         Location_1.ERPLocation AS ToLocationERPLocation, dbo.[Document].Number AS [Document], dbo.DocumentDetail.LineNumber, MasterItem_1.Code AS FromCode, MasterItem_2.Code AS ToCode, dbo.TrackingEntity.Batch, \n                         dbo.[Transaction].Comment, dbo.[Transaction].Type, dbo.[Transaction].Process, dbo.TrackingEntity.SerialNumber, dbo.[Document].Type AS DocumentType, dbo.[Transaction].IntegrationReference, \n                         dbo.[Document].Description AS DocumentDescription, dbo.TrackingEntity.ExpiryDate, [log].Message, dbo.DocumentDetail.Cancelled AS DocumentLineCancelled, Location_1.Site AS ToSite, dbo.Location.Site AS FromSite, \n                         Process.Name,\n                         CASE \n                         WHEN dbo.[Transaction].Process ='PICKING' AND dbo.Process.IntegrationIsActive = 0  THEN \n                            (SELECT IntegrationIsActive FROM dbo.Process WHERE [Name] = 'PICKINGPOST')\n                         WHEN dbo.[Transaction].Process ='RECEIVING' AND dbo.Process.IntegrationIsActive = 0  THEN \n                            (SELECT IntegrationIsActive FROM dbo.Process WHERE [Name] = 'RECEIVINGPOST')\n                         ELSE dbo.Process.IntegrationIsActive END\n                         as IntegrationIsActive, \n\n                         dbo.[Document].TradingPartnerCode AS DocumentTradingPartnerCode, dbo.[Transaction].DocumentReference AS TransactionDocumentReference, dbo.[Transaction].ReversalTransaction_id\nFROM            dbo.[Transaction] INNER JOIN\n                         dbo.TrackingEntity ON dbo.[Transaction].TrackingEntity_id = dbo.TrackingEntity.ID INNER JOIN\n                         dbo.MasterItem ON dbo.TrackingEntity.MasterItem_id = dbo.MasterItem.ID INNER JOIN\n                         dbo.Users ON dbo.[Transaction].User_id = dbo.Users.ID LEFT OUTER JOIN\n                         dbo.Process ON dbo.[Transaction].Process = dbo.Process.Name LEFT OUTER JOIN\n                         dbo.Location AS Location_1 ON dbo.[Transaction].ToLocation_id = Location_1.ID LEFT OUTER JOIN\n                         dbo.Location ON dbo.[Transaction].FromLocation_id = dbo.Location.ID LEFT OUTER JOIN\n                         dbo.[Document] ON dbo.[Transaction].Document_id = dbo.[Document].ID LEFT OUTER JOIN\n                         dbo.MasterItem AS MasterItem_1 ON dbo.[Transaction].FromMasterItem_id = MasterItem_1.ID LEFT OUTER JOIN\n                         dbo.MasterItem AS MasterItem_2 ON dbo.[Transaction].ToMasterItem_id = MasterItem_2.ID LEFT OUTER JOIN\n                         dbo.DocumentDetail ON dbo.[Transaction].DocumentLine_id = dbo.DocumentDetail.ID OUTER APPLY\n                         (\n                             SELECT TOP(1) [Message]\n                             FROM dbo.IntegrationLog\n                             WHERE GraniteTransaction_id = [Transaction].ID\n                             ORDER BY [Date] DESC\n                         ) [log]\nWHERE       dbo.[Transaction].Type NOT IN ('SPLIT','QCHOLD', 'QCRELEASE', 'STOCKTAKE', 'STOCKTAKEHOLD', 'STOCKTAKERELEASE')  AND \n            IntegrationStatus = 0 AND ISNULL(ReversalTransaction_id, 0) = 0\n) AS table_1\nWHERE table_1.IntegrationIsActive = 1\n</code></pre>"},{"location":"database/release-notes/#api_querytransactionsreceivereversal","title":"API_QueryTransactionsReceiveReversal","text":"<pre><code>ALTER VIEW [dbo].[API_QueryTransactionsReceiveReversal]\n    AS\nSELECT dbo.[Transaction].ID, dbo.TrackingEntity.Barcode, dbo.MasterItem.Code, dbo.MasterItem.Description, dbo.[Transaction].Date, dbo.TrackingEntity.Batch, dbo.TrackingEntity.SerialNumber, dbo.TrackingEntity.ExpiryDate, dbo.[Transaction].FromQty, dbo.[Transaction].ToQty, dbo.[Transaction].ActionQty, dbo.Users.Name AS [User], dbo.[Transaction].DocumentReference, dbo.[Document].Number AS [Document], dbo.[Transaction].IntegrationStatus, \n         dbo.CarryingEntity.Barcode AS Pallet, dbo.[Transaction].Comment, L1.Name AS FromLocation, L2.Name AS ToLocation, L3.Site, dbo.[Transaction].Type, dbo.[Transaction].IntegrationReference, dbo.[Transaction].ReversalTransaction_id, dbo.[Document].TradingPartnerCode, dbo.[Document].TradingPartnerDescription, dbo.[Document].Status, dbo.DocumentDetail.LineNumber\nFROM  dbo.[Transaction] INNER JOIN\n         dbo.DocumentDetail ON dbo.[Transaction].DocumentLine_id = dbo.DocumentDetail.ID INNER JOIN\n         dbo.[Document] ON dbo.[Document].ID = dbo.[Transaction].Document_id LEFT OUTER JOIN\n         dbo.CarryingEntity ON dbo.[Transaction].ContainableEntity_id = dbo.CarryingEntity.ID LEFT OUTER JOIN\n         dbo.Location AS L1 ON dbo.[Transaction].FromLocation_id = L1.ID LEFT OUTER JOIN\n         dbo.Location AS L2 ON dbo.[Transaction].ToLocation_id = L2.ID INNER JOIN\n         dbo.Users ON dbo.[Transaction].[User_id] = dbo.Users.ID INNER JOIN\n         dbo.TrackingEntity ON [Transaction].TrackingEntity_id = TrackingEntity.ID INNER JOIN\n         dbo.Location AS L3 ON dbo.TrackingEntity.Location_id = L3.ID INNER JOIN\n         dbo.MasterItem ON dbo.TrackingEntity.MasterItem_id = dbo.MasterItem.ID CROSS APPLY\n         (\n             SELECT TOP 1 ID\n             FROM [Transaction] \n             WHERE TrackingEntity_id = TrackingEntity.ID\n             ORDER BY [Date] DESC\n         ) lastTransaction\nWHERE (dbo.[Transaction].Type = 'RECEIVE') AND ISNULL(dbo.[Transaction].ReversalTransaction_id, 0) = 0 AND ISNULL(dbo.[Transaction].IntegrationStatus, 0) = 0 AND lastTransaction.ID = [Transaction].ID\nGO\n</code></pre>"},{"location":"database/release-notes/#datagrid_stockavailable","title":"DataGrid_StockAvailable","text":"<pre><code>CREATE VIEW [dbo].[DataGrid_StockAvailable]\nAS\nSELECT DISTINCT MasterItem.ID AS MasterItemId, \n       Code AS MasterItemCode, \n       Description AS MasterItemDescription,\n       MasterItem.Type,\n       MasterItem.Category,\n       UOM, \n       CASE WHEN (SUM(Qty) OVER(PARTITION BY MasterItem.ID) - ISNULL(SalesOrderQty, 0.000) + ISNULL(PurchaseOrderQty, 0.000)) &gt; 0\n            THEN 'InStock'\n            WHEN (SUM(Qty) OVER(PARTITION BY MasterItem.ID) - ISNULL(SalesOrderQty, 0.000) + ISNULL(PurchaseOrderQty, 0.000)) &lt;= 0\n            THEN 'NoStock'\n            ELSE 'NoStock'\n            END AS Status\n       ,\n       ISNULL(SUM(Qty) OVER(PARTITION BY MasterItem.ID), 0.0000) AS QtyInWarehouse, \n       ISNULL(SalesOrderQty, 0.000) AS QtyOnSalesOrders,\n       ISNULL(PurchaseOrderQty, 0.000) AS QtyOnPurchaceOrders,\n       ISNULL((SUM(Qty) OVER(PARTITION BY MasterItem.ID) - ISNULL(SalesOrderQty, 0.000)), 0.0000) AS QtyAfterSales,\n       ISNULL((SUM(Qty) OVER(PARTITION BY MasterItem.ID) + ISNULL(PurchaseOrderQty, 0.000)), 0.0000) AS QtyAfterPurchaces,\n       ISNULL((SUM(Qty) OVER(PARTITION BY MasterItem.ID) - ISNULL(SalesOrderQty, 0.000) + ISNULL(PurchaseOrderQty, 0.000)), 0.0000) AS TotalQtyAvailable\nFROM MasterItem LEFT JOIN \n     TrackingEntity ON MasterItem.ID = TrackingEntity.MasterItem_id OUTER APPLY\n     (SELECT (SUM(Qty) - SUM(ActionQty)) AS SalesOrderQty\n      FROM DocumentDetail LEFT JOIN \n           Document ON DocumentDetail.Document_id = Document.ID\n      WHERE Completed &lt;&gt; 1 AND\n            Cancelled &lt;&gt; 1 AND\n            Document.Status in ('ENTERED', 'RELEASED') AND \n            DocumentDetail.Item_id = MasterItem.ID AND \n            Document.Type = 'ORDER'\n      GROUP BY Item_id) AS SalesOrders\n      OUTER APPLY\n     (SELECT (SUM(Qty) - SUM(ActionQty)) AS PurchaseOrderQty\n      FROM DocumentDetail LEFT JOIN \n           Document ON DocumentDetail.Document_id = Document.ID\n      WHERE Completed &lt;&gt; 1 AND\n            Cancelled &lt;&gt; 1 AND\n            Document.Status in ('ENTERED', 'RELEASED') AND \n            DocumentDetail.Item_id = MasterItem.ID AND \n            Document.Type = 'RECEIVING'\n      GROUP BY Item_id) AS PurchaseOrders\nWHERE MasterItem.isActive = 1 \nGO\n</code></pre>"},{"location":"database/release-notes/#new-tables","title":"New tables","text":""},{"location":"database/release-notes/#migration","title":"Migration","text":"<pre><code>CREATE TABLE [dbo].[Migration](\n    [Id] [bigint] IDENTITY(1,1) NOT NULL,\n    [Name] [varchar](8000) NULL,\n    [Description] [varchar](8000) NULL,\n    [CreatedDate] [datetime] NOT NULL,\n    [CompletedDate] [datetime] NULL,\n    [ConnectionString] [varchar](8000) NULL,\n    [NamedConnection] [varchar](8000) NULL,\n    [Log] [varchar](max) NULL,\n    [ErrorCode] [varchar](8000) NULL,\n    [ErrorMessage] [varchar](8000) NULL,\n    [ErrorStackTrace] [varchar](max) NULL,\n    [Meta] [varchar](max) NULL,\nPRIMARY KEY CLUSTERED \n(\n    [Id] ASC\n)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]\n) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]\n</code></pre>"},{"location":"database/release-notes/#optionalfieldvalues_location","title":"OptionalFieldValues_Location","text":"<pre><code>CREATE TABLE [dbo].[OptionalFieldValues_Location](\n    [ID] [bigint] IDENTITY(1,1) NOT NULL,\n    [Value] [nvarchar](255) NULL,\n    [OptionalField_id] [bigint] NULL,\n    [BelongsTo_id] [bigint] NULL,\nPRIMARY KEY CLUSTERED \n(\n    [ID] ASC\n)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]\n) ON [PRIMARY]\nGO\n\nALTER TABLE [dbo].[OptionalFieldValues_Location]  WITH CHECK ADD  CONSTRAINT [FK1C630FA95BD9E8FA] FOREIGN KEY([OptionalField_id])\nREFERENCES [dbo].[OptionalFields] ([ID])\nGO\n\nALTER TABLE [dbo].[OptionalFieldValues_Location] CHECK CONSTRAINT [FK1C630FA95BD9E8FA]\nGO\n\nALTER TABLE [dbo].[OptionalFieldValues_Location]  WITH CHECK ADD  CONSTRAINT [FK1C630FA96509605E] FOREIGN KEY([BelongsTo_id])\nREFERENCES [dbo].[Location] ([ID])\nGO\n\nALTER TABLE [dbo].[OptionalFieldValues_Location] CHECK CONSTRAINT [FK1C630FA96509605E]\nGO\n</code></pre>"},{"location":"database/release-notes/#optionalfieldvalues_document","title":"OptionalFieldValues_Document","text":"<pre><code>CREATE TABLE [dbo].[OptionalFieldValues_Document](\n    [ID] [bigint] IDENTITY(1,1) NOT NULL,\n    [Value] [nvarchar](255) NULL,\n    [OptionalField_id] [bigint] NULL,\n    [BelongsTo_id] [bigint] NULL,\nPRIMARY KEY CLUSTERED \n(\n    [ID] ASC\n)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]\n) ON [PRIMARY]\nGO\n\nALTER TABLE [dbo].[OptionalFieldValues_Document]  WITH CHECK ADD  CONSTRAINT [FK1C630FA95BD9E1FA] FOREIGN KEY([OptionalField_id])\nREFERENCES [dbo].[OptionalFields] ([ID])\nGO\n\nALTER TABLE [dbo].[OptionalFieldValues_Document] CHECK CONSTRAINT [FK1C630FA95BD9E1FA]\nGO\n\nALTER TABLE [dbo].[OptionalFieldValues_Document]  WITH CHECK ADD  CONSTRAINT [FK1C630FA96509601E] FOREIGN KEY([BelongsTo_id])\nREFERENCES [dbo].[Document] ([ID])\nGO\n\nALTER TABLE [dbo].[OptionalFieldValues_Document] CHECK CONSTRAINT [FK1C630FA96509601E]\nGO\n</code></pre>"},{"location":"database/release-notes/#optionalfieldvalues_documentdetail","title":"OptionalFieldValues_DocumentDetail","text":"<pre><code>CREATE TABLE [dbo].[OptionalFieldValues_DocumentDetail](\n    [ID] [bigint] IDENTITY(1,1) NOT NULL,\n    [Value] [nvarchar](255) NULL,\n    [OptionalField_id] [bigint] NULL,\n    [BelongsTo_id] [bigint] NULL,\nPRIMARY KEY CLUSTERED \n(\n    [ID] ASC\n)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]\n) ON [PRIMARY]\nGO\n\nALTER TABLE [dbo].[OptionalFieldValues_DocumentDetail]  WITH CHECK ADD  CONSTRAINT [FK1C630FA95BD9E1FB] FOREIGN KEY([OptionalField_id])\nREFERENCES [dbo].[OptionalFields] ([ID])\nGO\n\nALTER TABLE [dbo].[OptionalFieldValues_DocumentDetail] CHECK CONSTRAINT [FK1C630FA95BD9E1FB]\nGO\n\nALTER TABLE [dbo].[OptionalFieldValues_DocumentDetail]  WITH CHECK ADD  CONSTRAINT [FK1C630FA96509601A] FOREIGN KEY([BelongsTo_id])\nREFERENCES [dbo].[DocumentDetail] ([ID])\nGO\n\nALTER TABLE [dbo].[OptionalFieldValues_DocumentDetail] CHECK CONSTRAINT [FK1C630FA96509601A]\nGO\n</code></pre>"},{"location":"database/release-notes/#systemtransientdata","title":"SystemTransientData","text":"<pre><code>CREATE TABLE [dbo].[SystemTransientData]\n(\n    [ID] INT NOT NULL PRIMARY KEY, \n    [Group] VARCHAR(50) NULL, \n    [Key] VARCHAR(100) NULL, \n    [Description] VARCHAR(MAX) NULL, \n    [Value] VARCHAR(MAX) NULL, \n    [Value_id] BIGINT NULL, \n    [User] VARCHAR(50) NULL, \n    [Process] VARCHAR(50) NULL, \n    [ProcessStep] VARCHAR(50) NULL, \n    [DataExpiry] DATETIME NULL\n)\n</code></pre>"},{"location":"database/release-notes/#email","title":"Email","text":"<pre><code>CREATE TABLE [dbo].[Email](\n    [ID] [bigint] IDENTITY(1,1) NOT NULL,\n    [Subject] [varchar](150) NOT NULL,\n    [Body] [varchar](max) NOT NULL,\n    [ToEmailAddresses] [varchar](max) NULL,\n    [CcEmailAddresses] [varchar](max) NULL,\n    [BccEmailAddresses] [varchar](max) NULL,\n    [TemplateName] [varchar](50) NULL,\n    [TemplateParameters] [varchar](max) NULL,\n    [AttachmentPaths] [varchar](max) NULL,\n    [ReportAttachments] [varchar](max) NULL,\n    [ExcelAttachments] [varchar](max) NULL,\n    [FileAttachments] [varchar](max) NULL,\n    [CreateDate] [datetime] NULL,\n    [RequestDate] [datetime] NULL,\n    [RequestApplication] [varchar](50) NULL,\n    [SendDate] [datetime] NULL,\n    [NumberOfRetries] [int] NULL,\n    [Status] [varchar](50) NOT NULL,    \n CONSTRAINT [PK_Emails] PRIMARY KEY CLUSTERED \n(\n    [ID] ASC\n)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]\n) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]\n</code></pre>"},{"location":"database/release-notes/#emaillog","title":"EmailLog","text":"<pre><code>CREATE TABLE [dbo].[EmailLog](\n    [ID] [bigint] IDENTITY(1,1) NOT NULL,\n    [Email_id] [bigint] NOT NULL FOREIGN KEY REFERENCES Email(ID),\n    [Date] [datetime] NOT NULL,\n    [Message] [varchar](max) NOT NULL,  \n CONSTRAINT [PK_EmailLog] PRIMARY KEY CLUSTERED \n(\n    [ID] ASC\n)\nWITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]\n) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]\n</code></pre>"},{"location":"database/release-notes/#emailtemplate","title":"EmailTemplate","text":"<pre><code>CREATE TABLE [dbo].[EmailTemplate](\n    [ID] [bigint] IDENTITY(1,1) NOT NULL,\n    [Name] [varchar](50) NOT NULL,\n    [Description] [varchar](150) NULL,\n    [Definition] [varchar](max) NOT NULL,\n    [Format] [varchar](50) NOT NULL,\n    [AuditDate] [datetime] NULL,\n    [AuditUser] [varchar](50) NULL,\n    [Version] [int] NOT NULL,\n CONSTRAINT [PK_EmailTemplate] PRIMARY KEY CLUSTERED \n(\n    [ID] ASC\n)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY],\n CONSTRAINT [IX_EmailTemplate] UNIQUE NONCLUSTERED \n(\n    [Name] ASC\n)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]\n) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]\n</code></pre>"},{"location":"database/release-notes/#changed-tables","title":"Changed tables","text":""},{"location":"database/release-notes/#users","title":"Users","text":"<p>Add column AllowProcessCatalog <pre><code>[AllowProcessCatalog] BIT NOT NULL,\n</code></pre></p>"},{"location":"database/release-notes/#systemsettings","title":"SystemSettings","text":"<p>Add column EncryptionKey <pre><code>[EncryptionKey] VARCHAR(64) NULL,\n</code></pre></p>"},{"location":"database/release-notes/#process","title":"Process","text":"<p>Increase size of Process Name and Description, add Template_version and Template_id <pre><code>[Name] [varchar](50) NOT NULL,\n[Description] [varchar](50) NOT NULL,\n[Template_version] INT NULL, \n[Template_id] VARCHAR(50) NULL, \n</code></pre></p>"},{"location":"database/release-notes/#processmembers","title":"ProcessMembers","text":"<p>Increase size of Process column <pre><code>[Process] VARCHAR(50) NOT NULL,\n</code></pre></p>"},{"location":"database/release-notes/#processstep","title":"ProcessStep","text":"<p>Increase size of Process column <pre><code>[Process] VARCHAR(50) NOT NULL,\n</code></pre></p>"},{"location":"database/release-notes/#transaction","title":"Transaction","text":"<p>Increase size of Process column <pre><code>[Process] VARCHAR(50) NULL,\n</code></pre></p>"},{"location":"database/release-notes/#processsteplookup","title":"ProcessStepLookup","text":"<p>Increase size of Process column <pre><code>[Process] VARCHAR(50) NULL,\n</code></pre></p>"},{"location":"database/release-notes/#processsteplookupdynamic","title":"ProcessStepLookupDynamic","text":"<p>Increase size of Process column <pre><code>[Process] VARCHAR(50) NULL,\n</code></pre></p>"},{"location":"database/release-notes/#removed-stored-procedures","title":"Removed Stored Procedures","text":""},{"location":"database/release-notes/#emailtemplate_1","title":"EmailTemplate","text":"<p>Removed as Scheduler no longer sends emails using stored procedures</p>"},{"location":"database/release-notes/#new-data","title":"New Data","text":""},{"location":"database/release-notes/#migration-data","title":"Migration Data","text":"<pre><code>INSERT INTO Migration ([Name], [Description], [Log], [CreatedDate], [CompletedDate])\nVALUES  ('SCHEMA_500', 'Schema Version 5.0.0', 'Initialised by database create script', GETDATE(), GETDATE()),\n        ('DATA_500', 'Data Version 5.0.0', 'Initialised by database create script', GETDATE(), GETDATE()),\n        ('CLR_500', 'CLR Version 5.0.0', 'Initialised by database create script', GETDATE(), GETDATE())\n</code></pre>"},{"location":"database/release-notes/#emailtemplate-data","title":"EmailTemplate Data","text":"<pre><code>INSERT [dbo].[EmailTemplate] ( [Name], [Description], [Definition], [Format], [AuditDate], [AuditUser], [Version]) \nVALUES ( N'IntegrationError', N'This template is used by Scheduler injected jobs to notify of a failed document sync', N'{{\n  headerImage({\n    imageUrl:''https://www.granitewms.com/wp-content/uploads/2020/07/GraniteWMS-1.png'',\n    backgroundColor:''#182026''\n  })\n}}\n\n# Document {{documentNumber}} failed to sync\n\n{{#if documentLogs}}\n### Document header failed to sync:\n{{documentLogs}}\n{{/if}}\n\n{{#if documentDetailLogs}}\n### Document details failed to sync:\n{{documentDetailLogs}}\n{{/if}}', N'markdown', GETDATE(), N'AUTOMATION', 1)\n</code></pre>"},{"location":"database/release-notes/#systemsettings_1","title":"SystemSettings","text":"<ul> <li>Add SQLCLR UtilityApi setting</li> </ul> <pre><code>INSERT [dbo].[SystemSettings] ([Application], [Key], [Value], [Description], [ValueDataType], [isEncrypted], [isActive], [AuditDate], [AuditUser])\n('SQLCLR', 'UtilityApi', '' , 'Utility API Address', 'string', 0, 1, GETDATE(), 'AUTOMATION')\n</code></pre> <ul> <li> <p>Add Custodian SystemSettings: <pre><code>INSERT INTO SystemSettings ([Application], [Key], [Value], [Description], [isEncrypted], [isActive], AuditDate, AuditUser, EncryptionKey)\nVALUES \n('GRANITECUSTODIAN', 'Repo_id', 'gVYmRwrftflB7Ffr3FCq2cv2555odnaHqww9lmtAv+w=', '', 1, 1, GETDATE(), 'AUTOMATION', '3SsPIaHkYgQdiMhgeRsMpA=='),\n('GRANITECUSTODIAN', 'Token', 'qlL0OC2DjetOxQWFfaVHomADvFcjHqJsmRwCDly5SjArj7JRpAV5r3mAwPSBbn21ZpOtvv75Ht388lYtkTQJe3AYb6XrSPU7w26SB+TU9230WeCGpBouYdMSiZbva3v7E3DU4TVpFDn5o8vxKtDLh8NLnyfNS4X0aY9hGWBoR0Wqsn1xuAm7bWQwtzT74sl1XVM69BQYYyglDLD10sZykvCC9aJOdkMUGWKNVY+7Ra1YznwLJskxqU4WR6dxo2y6', '', 1, 1, GETDATE(), 'AUTOMATION', '3SsPIaHkYgQdiMhgeRsMpA=='),\n('GRANITECUSTODIAN', 'Stores', 'Approved,Draft', '', 0, 1, GETDATE(), 'AUTOMATION', null)\n</code></pre></p> </li> <li> <p>Add GraniteScheduler UtilityApiUrl setting: <pre><code>INSERT [dbo].[SystemSettings] ([Application], [Key], [Value], [Description], [ValueDataType], [isEncrypted], [isActive], [AuditDate], [AuditUser])\nVALUES  ('GraniteScheduler', 'UtilityApiUrl', '', 'The UtilityAPI URL', 'string', 0, 1, GETDATE(), 'AUTOMATION')\n</code></pre></p> </li> <li> <p>Add Utility API System Settings: <pre><code>INSERT [dbo].[SystemSettings] ([Application], [Key], [Value], [Description], [ValueDataType], [isEncrypted], [isActive], [AuditDate], [AuditUser]) \nVALUES  ('Granite.Utility', 'UserName', '', 'Username for the SMTP server', 'string', 0, 1, GETDATE(), 'AUTOMATION'),\n        ('Granite.Utility', 'Password', '', 'Password for the SMTP server', 'string', 1, 1, GETDATE(), 'AUTOMATION'),\n        ('Granite.Utility', 'Host', '', 'The address of the SMTP server', 'string', 0, 1, GETDATE(), 'AUTOMATION'),\n        ('Granite.Utility', 'Port', '', 'Port number to be used when accessing the SMTP server', 'string', 0, 1, GETDATE(), 'AUTOMATION'),\n        ('Granite.Utility', 'EnableSsl', 'true', 'Use SSL when accessing the SMTP server. True or False', 'bool', 0, 1, GETDATE(), 'AUTOMATION'),\n        ('Granite.Utility', 'From', '', 'Email address that will be used to send mail', 'string', 0, 1, GETDATE(), 'AUTOMATION'),\n        ('Granite.Utility', 'FromName', '', 'The sender name that will display to users who receive emails', 'string', 0, 1, GETDATE(), 'AUTOMATION'),\n        ('Granite.Utility', 'RetryInterval', '15', 'Number of seconds to wait before retrying processing an email', 'int', 0, 1, GETDATE(), 'AUTOMATION'),\n        ('Granite.Utility', 'MaxNumberOfRetries', '3', 'Maximum number of times to retry processing an email', 'int', 0, 1, GETDATE(), 'AUTOMATION'),\n        ('Granite.Utility', 'EmailAttachmentFolder', '', 'Full filepath to folder to export email attachments to. Leave empty to use the Utility API install folder', 'string', 0, 1, GETDATE(), 'AUTOMATION'),\n        ('Granite.Utility', 'SSRSWebServiceUrl', '', 'URL for SSRS Report Server', 'string', 0, 1, GETDATE(), 'AUTOMATION')\n</code></pre></p> </li> <li> <p>QuickBooks Integration <pre><code>INSERT INTO SystemSettings ([Application], [Key], [Value], [Description], [ValueDataType], [isEncrypted], [isActive], [AuditDate], [AuditUser]) \nVALUES  \n(N'IntegrationQuickBooks', N'QuickBooksCompanyFile', N'', N'File path to the QuickBooks company file', N'string', 0, 1, GETDATE(), N'AUTOMATION'),\n(N'IntegrationQuickBooks', N'MasterItemSyncEnable', N'false', N'Enables syncing MasterItems from QuickBooks to Granite', N'bool', 0, 1, GETDATE(), N'AUTOMATION'),\n(N'IntegrationQuickBooks', N'MasterItemSyncInterval', N'300', N'Interval to sync MasterItems at. Measured in seconds', N'int', 0, 1, GETDATE(), N'AUTOMATION'),\n(N'IntegrationQuickBooks', N'MasterItemSyncInventoryItems', N'true', N'Enable or disable syncing Inventory Items', N'bool', 0, 1, GETDATE(), N'AUTOMATION'),\n(N'IntegrationQuickBooks', N'MasterItemSyncAssemblyItems', N'true', N'Enable or disable syncing Assembly Items', N'bool', 0, 1, GETDATE(), N'AUTOMATION'),\n(N'IntegrationQuickBooks', N'MasterItemSyncServiceItems', N'true', N'Enable or disable syncing Service Items', N'bool', 0, 1, GETDATE(), N'AUTOMATION'),\n(N'IntegrationQuickBooks', N'SalesOrderSyncEnable', N'false', N'Enables syncing Sales Orders from QuickBooks to Granite', N'bool', 0, 1, GETDATE(), N'AUTOMATION'),\n(N'IntegrationQuickBooks', N'SalesOrderSyncInterval', N'300', N'Interval to sync Sales Orders at. Measured in seconds', N'int', 0, 1, GETDATE(), N'AUTOMATION'),\n(N'IntegrationQuickBooks', N'SalesOrderPrefix', N'', N'Prefix that will be applied to Sales Order numbers when they are synced to Granite.', N'string', 0, 1, GETDATE(), N'AUTOMATION'),\n(N'IntegrationQuickBooks', N'SalesOrderAfterHeaderSyncProcedure', N'', N'Name of stored procedure that will run after each SalesOrder header is synced to Granite', N'string', 0, 1, GETDATE(), N'AUTOMATION'),\n(N'IntegrationQuickBooks', N'InvoiceSyncEnable', N'false', N'Enables syncing Invoices from QuickBooks to Granite', N'bool', 0, 1, GETDATE(), N'AUTOMATION'),\n(N'IntegrationQuickBooks', N'InvoiceSyncInterval', N'300', N'Interval to sync Invoices at. Measured in seconds', N'int', 0, 1, GETDATE(), N'AUTOMATION'),\n(N'IntegrationQuickBooks', N'InvoicePrefix', N'', N'Prefix that will be applied to Invoice numbers when they are synced to Granite.', N'string', 0, 1, GETDATE(), N'AUTOMATION'),\n(N'IntegrationQuickBooks', N'InvoiceAfterHeaderSyncProcedure', N'', N'Name of stored procedure that will run after each Invoice header is synced to Granite', N'string', 0, 1, GETDATE(), N'AUTOMATION'),\n(N'IntegrationQuickBooks', N'PurchaseOrderSyncEnable', N'false', N'Enables syncing Purchase Orders from QuickBooks to Granite', N'bool', 0, 1, GETDATE(), N'AUTOMATION'),\n(N'IntegrationQuickBooks', N'PurchaseOrderSyncInterval', N'300', N'Interval to sync Purchase Orders at. Measured in seconds', N'int', 0, 1, GETDATE(), N'AUTOMATION'),\n(N'IntegrationQuickBooks', N'PurchaseOrderPrefix', N'', N'Prefix that will be applied to Purchase Order numbers when they are synced to Granite.', N'string', 0, 1, GETDATE(), N'AUTOMATION'),\n(N'IntegrationQuickBooks', N'PurchaseOrderAfterHeaderSyncProcedure', N'', N'Name of stored procedure that will run after each PurchaseOrder header is synced to Granite', N'string', 0, 1, GETDATE(), N'AUTOMATION'),\n(N'IntegrationQuickBooks', N'TradingPartnerSyncEnable', N'false', N'Enables syncing TradingPartners from QuickBooks to Granite', N'bool', 0, 1, GETDATE(), N'AUTOMATION'),\n(N'IntegrationQuickBooks', N'TradingPartnerSyncInterval', N'300', N'Interval to sync TradingPartners at. Measured in seconds', N'int', 0, 1, GETDATE(), N'AUTOMATION')\n</code></pre></p> </li> </ul>"},{"location":"database/release-notes/#changed-data","title":"Changed Data","text":""},{"location":"database/release-notes/#users_1","title":"Users","text":"<ul> <li>Add AllowProcessCatalog permission</li> </ul>"},{"location":"database/release-notes/#defaultreplenishprocess","title":"DefaultReplenishProcess","text":"<ul> <li>Add NoEntities step</li> </ul>"},{"location":"database/release-notes/#systemsettings_2","title":"SystemSettings","text":"<ul> <li>Removed GraniteScheduler settings:<ul> <li>Host</li> <li>Port</li> <li>EnableSsl</li> <li>EmailAddress</li> <li>Username</li> <li>Password</li> <li>DisplayName</li> <li>TimeZone</li> </ul> </li> <li>All password settings isEncrypted = true</li> </ul>"},{"location":"database/release-notes/#applicationgrids","title":"ApplicationGrids","text":"<ul> <li>Added missing document fields to grids</li> <li>Remove SystemSettings grid</li> </ul>"},{"location":"database/release-notes/#accpacintegration","title":"AccpacIntegration","text":""},{"location":"database/release-notes/#changed-views_1","title":"Changed Views","text":""},{"location":"database/release-notes/#integration_accpac_autosimplymodetail","title":"Integration_Accpac_AutoSimplyMODetail","text":"<pre><code>CREATE VIEW [dbo].[Integration_Accpac_AutoSimplyMODetail] AS\nSELECT  MOUNIQ Document_ERPIdentification,\n        [ITEMNO] MasterItem_ERPIdentification, \n        0 ERPIdentification,\n        0 LineNumber, \n        [ORDQTYUM] UOMQty, \n        [ORDQTY] Qty, \n        [STKUOM] UOM, \n        1 UOMConversion,\n        RTRIM(LTRIM(AREACD)) ToLocation,\n        '' FromLocation,\n        0 Completed,\n        'OUTPUT' [Type],\n        [COMMENTS] as Instruction,\n        [ITEMDESC] as Comment\nFROM [$(AccpacDatabase)].dbo.[MFORDH] WITH (NOLOCK)\nUNION ALL\nSELECT  MOUNIQ Document_ERPIdentification,\n        [COMPID] MasterItem_ERPIdentification, \n        LINENUM ERPIdentification,\n        LINENUM LineNumber, \n        [REQQTY] UOMQty, \n        [REQQTY] Qty, \n        [COMPUOM] UOM, \n        1 UOMConversion,\n        '' ToLocation,\n        RTRIM(LTRIM([LOCATION])) FromLocation,      \n        0 Completed,\n        'INPUT' as [Type],\n        '' as Instruction,\n        [COMPDESC] as Comment\nFROM [$(AccpacDatabase)].dbo.[MFORDD] WITH (NOLOCK)\n</code></pre>"},{"location":"database/release-notes/#integration_accpac_internalusagedetail","title":"Integration_Accpac_InternalUsageDetail","text":"<pre><code>CREATE VIEW [dbo].[Integration_Accpac_InternalUsageDetail] AS\nSELECT  [SEQUENCENO] Document_ERPIdentification,\n        [LINENO] ERPIdentification, \n        [LINENO] LineNumber,\n        [LOCATION] FromLocation, \n        QUANTITY Qty, \n        ITEMNO MasterItem_ERPIdentification,\n        SUBSTRING(COMMENTS, 1, 50) Comment\nFROM [$(AccpacDatabase)].dbo.[ICICED] \n</code></pre>"},{"location":"database/release-notes/#integration_accpac_intransitdetail","title":"Integration_Accpac_IntransitDetail","text":"<pre><code>CREATE VIEW [dbo].[Integration_Accpac_IntransitDetail] as\nSELECT  [LINENO] LineNumber,\n        [LINENO] ERPIdentification, \n        RTRIM(FROMLOC) FromLocation, \n        RTRIM(TOLOC) ToLocation, \n        RTRIM(GITLOC) IntransitLocation, \n        QTYREQ Qty, \n        RTRIM(ITEMNO) MasterItem_ERPIdentification, \n        RTRIM(COMMENTS) Comment,\n        [ICTREH].[TRANFENSEQ] Document_ERPIdentification\nFROM [$(AccpacDatabase)].dbo.[ICTRED] with (nolock) INNER JOIN \n[$(AccpacDatabase)].dbo.[ICTREH] with (NOLOCK) ON [ICTRED].[TRANFENSEQ] = [ICTREH].[TRANFENSEQ]\nWHERE [ICTREH].DOCTYPE = 2\n</code></pre>"},{"location":"database/release-notes/#integration_accpac_purchaseorderdetail","title":"Integration_Accpac_PurchaseOrderDetail","text":"<pre><code>CREATE VIEW [dbo].[Integration_Accpac_PurchaseOrderDetail] as\nSELECT  PORLREV LineNumber, \n        [SQORDERED] Qty, \n        RTRIM([ORDERUNIT]) UOM, \n        [ORDERCONV] UOMConversion,\n        [OQORDERED] UOMQty, \n        RTRIM([LOCATION]) ToLocation,\n        CASE WHEN [COMPLETION] &lt; 2 THEN 0 ELSE 1 END Completed, \n        RTRIM([ITEMNO]) MasterItem_ERPIdentification, \n        ROUND(UNITCOST,2) UnitValue,\n        PORHSEQ Document_ERPIdentification,\n        PORLREV ERPIdentification\nFROM [$(AccpacDatabase)].dbo.[POPORL] WITH (NOLOCK)\nWHERE STOCKITEM = 1\n</code></pre>"},{"location":"database/release-notes/#integration_accpac_receiptdetail","title":"Integration_Accpac_ReceiptDetail","text":"<pre><code>CREATE VIEW [dbo].[Integration_Accpac_ReceiptDetail] as\nSELECT  [LINENO] LineNumber,\n        [LINENO] ERPIdentification, \n        RTRIM(FROMLOC) FromLocation, \n        RTRIM(TOLOC) ToLocation, \n        RTRIM(GITLOC) IntransitLocation, \n        QTYTRA Qty, \n        RTRIM(ITEMNO) MasterItem_ERPIdentification, \n        RTRIM(COMMENTS) Comment,\n        [ICTREH].[TRANFENSEQ] Document_ERPIdentification\nFROM [$(AccpacDatabase)].dbo.[ICTRED] with (nolock) INNER JOIN \n[$(AccpacDatabase)].dbo.[ICTREH] with (NOLOCK) ON [ICTRED].[TRANFENSEQ] = [ICTREH].[TRANFENSEQ] LEFT JOIN\n[$(AccpacDatabase)].dbo.[ICTRID] with (nolock) ON [ICTRED].DETAILNUM = [ICTRID].DETAILNUM AND [ICTREH].FROMNUM = [ICTRID].DOCNUM\nWHERE [ICTREH].DOCTYPE = 3\n</code></pre>"},{"location":"database/release-notes/#integration_accpac_salesorderdetail","title":"Integration_Accpac_SalesOrderDetail","text":"<pre><code>CREATE VIEW [dbo].[Integration_Accpac_SalesOrderDetail] as\nSELECT  ORDUNIQ Document_ERPIdentification,\n        LINENUM [LineNumber], \n        LINENUM ERPIdentification, \n        ([UNITCONV] * ([QTYORDERED]+[QTYSHPTODT])) UOMQty, \n        [QTYORDERED]+[QTYSHPTODT] Qty, \n        RTRIM([ORDUNIT]) UOM, \n        [UNITCONV] UOMConversion,\n        RTRIM([LOCATION]) FromLocation, \n        RTRIM([ITEM]) MasterItem_ERPIdentification, \n        CASE WHEN [COMPLETE] &lt; 2 THEN 0 ELSE 1 END  Completed\nFROM [$(AccpacDatabase)].dbo.[OEORDD] WITH (NOLOCK)\nWHERE STOCKITEM = 1\n</code></pre>"},{"location":"database/release-notes/#integration_accpac_transferdetail","title":"Integration_Accpac_TransferDetail","text":"<pre><code>CREATE VIEW [dbo].[Integration_Accpac_TransferDetail] as\nSELECT  [LINENO] LineNumber, \n        RTRIM(FROMLOC) FromLocation, \n        RTRIM(TOLOC) ToLocation, \n        RTRIM(GITLOC) IntransitLocation, \n        QTYREQ Qty, \n        RTRIM(ITEMNO) MasterItem_ERPIdentification, \n        RTRIM(COMMENTS) Comment,\n        [ICTREH].[TRANFENSEQ] Document_ERPIdentification,\n        [LINENO] ERPIdentification\nFROM [$(AccpacDatabase)].dbo.[ICTRED] with (nolock) INNER JOIN \n[$(AccpacDatabase)].dbo.[ICTREH] with (NOLOCK) ON [ICTRED].[TRANFENSEQ] = [ICTREH].[TRANFENSEQ]\nWHERE [ICTREH].DOCTYPE = 1\n</code></pre>"},{"location":"database/release-notes/#masteritemalias_view","title":"MasterItemAlias_View","text":"<pre><code>ALTER VIEW [dbo].[MasterItemAlias_View]\n\n    AS \nSELECT ROW_NUMBER() OVER (ORDER BY [$(GraniteDatabase)].dbo.MasterItem.ID) AS ID, \nCAST([$(AccpacDatabase)].dbo.ICIOTH.MANITEMNO as varchar(16)) COLLATE SQL_Latin1_General_CP1_CI_AS AS Code, \nCAST([$(AccpacDatabase)].dbo.ICUNIT.UNIT as varchar(16)) COLLATE SQL_Latin1_General_CP1_CI_AS AS UOM, \n[$(AccpacDatabase)].dbo.ICUNIT.CONVERSION AS Conversion, CAST(1 as bit)as IsActive, \nGETDATE() as AuditDate, '' as AuditUser, \n[$(GraniteDatabase)].dbo.MasterItem.ID AS MasterItem_id,NULL as ERPIdentification,0 as Version\nFROM         [$(AccpacDatabase)].dbo.ICIOTH RIGHT OUTER JOIN\n                      [$(AccpacDatabase)].dbo.ICUNIT ON [$(AccpacDatabase)].dbo.ICIOTH.UNIT COLLATE SQL_Latin1_General_CP1_CI_AS = [$(AccpacDatabase)].dbo.ICUNIT.UNIT AND \n                      [$(AccpacDatabase)].dbo.ICIOTH.ITEMNO COLLATE SQL_Latin1_General_CP1_CI_AS = [$(AccpacDatabase)].dbo.ICUNIT.ITEMNO RIGHT OUTER JOIN\n                      [$(GraniteDatabase)].dbo.MasterItem RIGHT OUTER JOIN\n                      [$(AccpacDatabase)].dbo.ICITEM ON [$(GraniteDatabase)].dbo.MasterItem.Code COLLATE SQL_Latin1_General_CP1_CI_AS = [$(AccpacDatabase)].dbo.ICITEM.ITEMNO ON \n                      [$(AccpacDatabase)].dbo.ICUNIT.ITEMNO COLLATE SQL_Latin1_General_CP1_CI_AS = [$(AccpacDatabase)].dbo.ICITEM.ITEMNO\nWHERE     ([$(GraniteDatabase)].dbo.MasterItem.ID IS NOT NULL) AND ([$(AccpacDatabase)].dbo.ICIOTH.MANITEMNO IS NOT NULL)\nUNION\nSELECT  * FROM [$(GraniteDatabase)].dbo.MasterItemAlias\nGO\n</code></pre>"},{"location":"database/release-notes/#changed-stored-procedures","title":"Changed Stored Procedures","text":""},{"location":"database/release-notes/#integrationprocesstransfer","title":"IntegrationProcessTransfer","text":"<pre><code>ALTER PROCEDURE [dbo].[IntegrationProcessTransfer]\n    -- Add the parameters for the stored procedure here\n\nAS\nBEGIN\n    SET NOCOUNT ON;\n    DECLARE @Debug Bit = 0\n    DECLARE @DocumentNumber varchar(30)\n    DECLARE @Document_id bigint\n    DECLARE @TradingPartner_id bigint\n    DECLARE @TradingPartnerCode varchar(20)\n    DECLARE @TradingPartnerDescription varchar(60)\n    DECLARE @AccpacReference varchar(60) = ''\n    DECLARE @TradingPartnerReferenceNumber varchar(30) = ''\n    DECLARE @ToLocation varchar(50) = ''\n    DECLARE @Description varchar(60)\n    DECLARE @Priority int\n    DECLARE @ERPLocation varchar(15)\n    DECLARE @Site varchar(30) = ''  --Code required to determine the SITE\n    DECLARE @User varchar(20) = 'INTEGRATION'\n    DECLARE @Date datetime = GETDATE()\n    DECLARE @DocumentType varchar(30) = 'TRANSFER'\n    DECLARE @AccpacType int\n    DECLARE @Status varchar(30)\n    DECLARE @ErrorMessage NVARCHAR(4000) = NULL\n    DECLARE @ErrorSeverity INT\n    DECLARE @ErrorState INT\n    DECLARE @ExpectedShipDate DateTime\n    DECLARE @ORDUNIQ DECIMAL(19,0)\n    DECLARE @GraniteOrderStatus varchar(20)\n    DECLARE @GraniteDocumentType varchar(20)\n    DECLARE @ACCPAC_FROMNUM VARCHAR(250)\n    DECLARE @COMMENTS VARCHAR(250)\n    DECLARE @LINE VARCHAR(250)\n    DECLARE @DETAILNUM VARCHAR(250)\n    DECLARE @FROMLOC VARCHAR(250)\n    DECLARE @TOLOC VARCHAR(250)\n    DECLARE @GITLOC VARCHAR(250)\n    DECLARE @ACCPAC_QTYREC DECIMAL(9,4)\n    DECLARE @ACCPAC_QUANTITY DECIMAL (9,4)\n    DECLARE @ACCPAC_QTYTRA DECIMAL (9,4)\n    DECLARE @ITEMNO VARCHAR(250)\n    DECLARE @ITEMID bigint\n    DECLARE @GRANITELINEID bigint\n\n    --Declare cursor for all Documents to be integrated.\n\n    DECLARE IntegrationQueueCursor CURSOR FOR\n    SELECT   ERP_id , [DocumentType] FROM [$(GraniteDatabase)].dbo.IntegrationDocumentQueue \n    WHERE [Status] = 'ENTERED' AND [DocumentType] IN ('TRANSFER','INTRANSIT','RECEIPT')\n\n    OPEN IntegrationQueueCursor\n    FETCH NEXT FROM IntegrationQueueCursor\n    INTO @ORDUNIQ, @DocumentType\n\n    WHILE @@FETCH_STATUS = 0\n    BEGIN\n\n        UPDATE [$(GraniteDatabase)].dbo.IntegrationDocumentQueue \n        SET [Status] = 'POSTING', IntegrationDateTime = getdate()\n        WHERE [Status] = 'ENTERED' AND [DocumentType] IN ('TRANSFER','INTRANSIT','RECEIPT') and ERP_id = @ORDUNIQ\n\n\n        SELECT @DocumentNumber = RTRIM(LTRIM([DOCNUM])) collate Latin1_General_CI_AS, \n        @Description = HDRDESC collate Latin1_General_CI_AS, \n        @AccpacReference = REFERENCE  collate Latin1_General_CI_AS,\n        @ACCPAC_FROMNUM = FROMNUM collate Latin1_General_CI_AS,\n        @ExpectedShipDate = CASE WHEN EXPARDATE = 0 THEN '' ELSE CONVERT(DateTime,CONVERT(varchar(10),EXPARDATE)) END,\n        @Status = 'ENTERED'\n        FROM [$(AccpacDatabase)].dbo.[ICTREH] with (NOLOCK)\n        WHERE TRANFENSEQ = @ORDUNIQ\n\n        IF @Debug = 1\n            PRINT 'IN Cursor -Record found:' + @DocumentNumber\n\n                BEGIN TRY\n                    BEGIN TRANSACTION\n                    IF @Debug = 1\n                        PRINT 'In Try and Transaction block'\n\n                    SELECT TOP 1  @ERPLocation = [FROMLOC], @ToLocation = [TOLOC] \n                    FROM [$(AccpacDatabase)].dbo.[ICTRED] with (Nolock) \n                    WHERE [TRANFENSEQ] = @ORDUNIQ\n\n                    IF @DocumentType = 'RECEIPT'        --If the Document is a Receipt then set the ERPLocation to the TOLocation\n                        SELECT @ERPLocation = @ToLocation\n\n\n                    SELECT @TradingPartnerCode = @ERPLocation\n                    SELECT @TradingPartnerDescription = 'TRANSFER TO WHSE:' + isnull(@TradingPartnerCode,'') + ' TO WHSE:' + isnull(@ToLocation,'')\n\n                    -- Insert TradingPartner\n                    SELECT @TradingPartner_id = ID FROM [$(GraniteDatabase)].dbo.TradingPartner WHERE Code = @TradingPartnerCode AND DocumentType = @DocumentType\n                    IF ISNULL(@TradingPartner_id,'') = ''\n                    BEGIN\n                        INSERT INTO [$(GraniteDatabase)].dbo.TradingPartner\n                        (Code, Description, DocumentType, isActive, AuditDate, AuditUser)\n                        VALUES\n                        (@TradingPartnerCode, @TradingPartnerDescription, @GraniteDocumentType, 1, GETDATE(), @User)\n                    END\n\n                    --======Update the Document Header table or insert the Document Header accordingly\n                    IF EXISTS(SELECT ID FROM [$(GraniteDatabase)].dbo.Document WHERE Number = @DocumentNumber)\n                    BEGIN\n\n                        UPDATE [$(GraniteDatabase)].dbo.Document SET ERPLocation = @ERPLocation, [Site] = @Site, \n                        TradingPartnerCode = @TradingPartnerCode, TradingPartnerDescription = @TradingPartnerDescription,\n                        AuditDate = @Date, AuditUser = @User ,[Description] =  @ACCPAC_FROMNUM + '--'+ @Description\n                        WHERE Number = @DocumentNumber\n\n                        SELECT @Document_id = ID , @GraniteOrderStatus = [Status] FROM [$(GraniteDatabase)].dbo.Document \n                        WHERE Number = @DocumentNumber\n\n                        IF @Status IN ('ONHOLD','COMPLETE','CANCELLED')\n                            UPDATE [$(GraniteDatabase)].dbo.Document SET [Status] = @Status,ExpectedDate = @ExpectedShipDate\n                            WHERE ID = @Document_id\n                        IF @Status = 'ENTERED' and @GraniteOrderStatus NOT IN ('RELEASED','COMPLETE')\n                            UPDATE [$(GraniteDatabase)].dbo.Document SET [Status] = @Status, ExpectedDate = @ExpectedShipDate\n                            WHERE ID = @Document_id\n\n                    END\n                    ELSE\n                    BEGIN\n                        INSERT INTO [$(GraniteDatabase)].dbo.Document (Number,[Description],CreateDate,TradingPartnerCode, TradingPartnerDescription, ERPLocation,[Site],\n                        AuditDate,AuditUser,[Type],[Status],ExpectedDate,isActive)\n                        SELECT @DocumentNumber,  @ACCPAC_FROMNUM + '--'+ @Description, @Date, @TradingPartnerCode, @TradingPartnerDescription, @ERPLocation, @Site, \n                        @Date, @User, @DocumentType, @Status ,@ExpectedShipDate,1\n\n                        SELECT  @Document_id = (SELECT ID FROM [$(GraniteDatabase)].dbo.Document WHERE Number = @DocumentNumber)\n                        IF @Debug = 1\n                            PRINT @Document_id\n\n                    END\n                    --=======End DOcument Header Section=============================================== \n\n                    --=====Start Inserting or Updaing the items depending on whether they exists or not\n\n                    IF ISNULL(@Document_id,'') &lt;&gt; ''\n                    BEGIN\n                        --Update Existing Granite Lines\n                        --We know these Lines Exist Because of the Inner Join\n                        DECLARE detail CURSOR FOR\n                        SELECT [LINENO], DETAILNUM, FROMLOC, TOLOC, GITLOC, QTYREQ, QUANTITY, ITEMNO,COMMENTS  \n                        FROM [$(AccpacDatabase)].dbo.[ICTRED] with (nolock) \n                        WHERE  [TRANFENSEQ] = @ORDUNIQ\n                        OPEN detail;\n\n                        FETCH NEXT FROM detail \n                        INTO @LINE, @DETAILNUM, @FROMLOC, @TOLOC, @GITLOC, @ACCPAC_QTYREC, @ACCPAC_QUANTITY, @ITEMNO, @COMMENTS;\n                        WHILE @@FETCH_STATUS = 0\n                        BEGIN\n\n                        /*GET GRANITE ITEM ID*/\n                        SELECT @ITEMID = ID FROM [$(GraniteDatabase)].dbo.MasterItem WHERE FORMATTEDCODE = @ITEMNO\n\n                        SELECT @GRANITELINEID = ID FROM [$(GraniteDatabase)].dbo.[DocumentDetail] \n                        WHERE DOCUMENT_ID = @Document_id AND ITEM_ID = @ITEMID AND LineNumber = @LINE\n\n                        IF ISNULL(@GRANITELINEID, 0) = 0\n                        BEGIN\n                            IF @DocumentType = 'RECEIPT'\n                            BEGIN\n                                -- Fetch qty from Table ICTRID, based on TRANSFER (FROMNUM = @ACCPAC_FROMNUM)\n                                -- QTYTRA = Quantity Transfer to Date\n\n                                SELECT @ACCPAC_QTYTRA = QTYTRA\n                                FROM  [$(AccpacDatabase)].dbo.ICTRID with (nolock)\n                                WHERE (DOCNUM = @ACCPAC_FROMNUM) AND (DETAILNUM = @DETAILNUM)\n\n                                --RECEIPT use QUANTITY this is the transfer qty instead of the requested original qty, can only receipt what was actual transfer\n                                --The from location becomes the transit location, I leave the transit no need in granite\n                                --@ACCPAC_QUANTITY\n                                INSERT INTO [$(GraniteDatabase)].dbo.[DocumentDetail] \n                                    (ITEM_ID, [COMMENT], LINENUMBER, FROMLOCATION, TOLOCATION, IntransitLocation, QTY, \n                                    DOCUMENT_ID, ActionQty, Completed, AuditDate, AuditUser)\n                                        values (@ITEMID, SUBSTRING(@COMMENTS,1,50), @LINE, @FROMLOC, @TOLOC, @GITLOC, \n                                        @ACCPAC_QTYTRA, @Document_id, 0, 0,  GETDATE(),@User)\n                            END\n                            ELSE\n                            BEGIN\n                                --@ACCPAC_QTYREC\n                                INSERT INTO [$(GraniteDatabase)].dbo.[DocumentDetail] \n                                (ITEM_ID, [COMMENT], LINENUMBER, FROMLOCATION, TOLOCATION, IntransitLocation, QTY, \n                                DOCUMENT_ID, ActionQty, Completed, AuditDate, AuditUser)\n                                    values (@ITEMID, SUBSTRING(@COMMENTS,1,50), @LINE, RTRIM(@FROMLOC), RTRIM(@TOLOC), RTRIM(@GITLOC), \n                                    @ACCPAC_QTYREC, @Document_id, 0, 0,  GETDATE(), @User)\n                            END\n                        END\n                        ELSE\n                        BEGIN\n                            UPDATE [$(GraniteDatabase)].dbo.[DocumentDetail] SET\n                            [Qty] = @ACCPAC_QTYREC, Completed = 0, ToLocation = RTRIM(@TOLOC), IntransitLocation = RTRIM(@GITLOC),\n                            [FromLocation] = RTRIM(@FROMLOC), AuditDate = GETDATE(), AuditUser = @User\n                            WHERE [$(GraniteDatabase)].dbo.[DocumentDetail].[ID] = @GRANITELINEID\n                        END\n                        FETCH NEXT FROM detail \n                        INTO @LINE, @DETAILNUM, @FROMLOC, @TOLOC, @GITLOC, @ACCPAC_QTYREC, @ACCPAC_QUANTITY, @ITEMNO,@COMMENTS;\n                        END\n                        CLOSE detail;\n                        DEALLOCATE detail;\n\n                        UPDATE [$(GraniteDatabase)].dbo.DocumentDetail SET MultipleEntries = 1 \n                        WHERE Document_id = @Document_id AND Item_id IN (SELECT DISTINCT Item_id FROM [$(GraniteDatabase)].dbo.DocumentDetail GROUP BY Document_id, Item_id HAVING Document_id = @Document_id AND COUNT(ID) &gt; 1)\n\n                    END\n                    UPDATE [$(GraniteDatabase)].dbo.IntegrationDocumentQueue \n                    SET [Status] = 'POSTED', IntegrationDateTime = getdate()\n                    WHERE [Status] = 'POSTING' and ERP_id = @ORDUNIQ\n\n            END TRY\n\n            BEGIN CATCH\n                SELECT @ErrorMessage = ERROR_MESSAGE(), @ErrorSeverity = ERROR_SEVERITY(), @ErrorState = ERROR_STATE();\n                RAISERROR (@ErrorMessage, @ErrorSeverity, @ErrorState);\n                IF @Debug = 1\n                    PRINT @ErrorMessage\n\n                IF @@TRANCOUNT &gt; 0\n                    ROLLBACK TRANSACTION;\n\n            END CATCH\n\n            IF @@TRANCOUNT &gt; 0\n                COMMIT TRANSACTION;\n\n        FETCH NEXT FROM IntegrationQueueCursor\n        INTO @ORDUNIQ, @DocumentType\n    END\n    CLOSE IntegrationQueueCursor\n    DEALLOCATE IntegrationQueueCursor\n\nEND  --Stored Procedure\n\nGO\n</code></pre>"},{"location":"database/release-notes/#pastelevointegration","title":"PastelEvoIntegration","text":""},{"location":"database/release-notes/#new-views","title":"New Views","text":""},{"location":"database/release-notes/#integration_evolution_interbranchrequisitionheader","title":"Integration_Evolution_InterBranchRequisitionHeader","text":"<pre><code>CREATE VIEW [Integration_Evolution_InterBranchRequisitionHeader] AS\nSELECT  CAST(IDWhseIBT as varchar) ERPIdentification, \n        [cIBTNumber] Number, \n        [cIBTDescription] [Description], \n        CASE iIBTStatus \n            WHEN 3 THEN 'ENTERED' \n            WHEN 4 THEN 'RELEASED'\n            ELSE 'COMPLETE' \n        END [Status], \n        WhseMst.Code ERPLocation,\n        'INTRANSIT' [Type], \n        '' as [Site], \n        GETDATE() as CreateDate\nFROM [$(PastelEvoDatabase)].dbo._etblWhseIBT INNER JOIN\n[$(PastelEvoDatabase)].dbo.WhseMst ON _etblWhseIBT.iWhseIDFrom = WhseMst.WhseLink\nWHERE iIBTStatus IN (3, 4, 5)\n</code></pre>"},{"location":"database/release-notes/#integration_evolution_interbranchrequisitiondetail","title":"Integration_Evolution_InterBranchRequisitionDetail","text":"<pre><code>CREATE VIEW [Integration_Evolution_InterBranchRequisitionDetail] as\nSELECT  CAST(IDWhseIBTLines as varchar) ERPIdentification, \n        CAST(ROW_NUMBER() OVER (PARTITION BY iWhseIBTID ORDER BY IDWhseIBTLines ASC) as varchar) LineNumber,  \n        CAST(iWhseIBTID as varchar) Document_ERPIdentification, \n        fQtyRequired Qty, \n        WhseMst.Code FromLocation, \n        WhseMst_2.Code IntransitLocation, \n        WhseMst_3.Code ToLocation, \n        cLotNumber Batch, \n        CAST(iStockID as varchar) MasterItem_ERPIdentification\nFROM [$(PastelEvoDatabase)].dbo.[_etblWhseIBTLines] WITH (NOLOCK) INNER JOIN\n[$(PastelEvoDatabase)].dbo.StkItem ON iStockID = StkItem.StockLink INNER JOIN\n[$(PastelEvoDatabase)].dbo.[_etblWhseIBT] ON iWhseIBTID = _etblWhseIBT.IDWhseIBT LEFT JOIN \n[$(PastelEvoDatabase)].dbo.WhseMst ON _etblWhseIBT.iWhseIDFrom = WhseMst.WhseLink LEFT JOIN\n[$(PastelEvoDatabase)].dbo.WhseMst WhseMst_2 ON _etblWhseIBT.iWhseIDIntransit = WhseMst_2.WhseLink LEFT JOIN\n[$(PastelEvoDatabase)].dbo.WhseMst WhseMst_3 ON _etblWhseIBT.iWhseIDTo = WhseMst_3.WhseLink \nWHERE iIBTStatus IN (3, 4, 5)\n</code></pre>"},{"location":"database/release-notes/#new-trigger","title":"New trigger","text":""},{"location":"database/release-notes/#triggergraniteinterbranchrequisition","title":"TriggerGraniteInterBranchRequisition","text":"<pre><code>GO\nUSE [$(PastelEVODatabase)]\nGO\n\nCREATE TRIGGER [dbo].[TriggerGraniteInterBranchRequisition]\n   ON  [$(PastelEVODatabase)].[dbo].[_etblWhseIBT]\n   AFTER INSERT, UPDATE\nAS\nBEGIN\n    SET NOCOUNT ON;\n\n    DECLARE @Site varchar(30) = ''  \n    DECLARE @ErrorMessage NVARCHAR(4000) = NULL\n    DECLARE @ErrorSeverity INT\n    DECLARE @ErrorState INT\n\n\n    BEGIN TRY\n    BEGIN TRANSACTION   \n        INSERT INTO [$(GraniteDatabase)].dbo.IntegrationDocumentQueue (ERP_id,DocumentNumber,DocumentType,[Status],LastUpdateDateTime)\n        SELECT IDWhseIBT, RTRIM(LTRIM([cIBTNumber])) collate Latin1_General_CI_AS, 'REQUISITION','ENTERED',getdate()\n        FROM Inserted\n        WHERE iIBTStatus IN (3,4,5)\n        AND NOT EXISTS(SELECT ID FROM [$(GraniteDatabase)].dbo.IntegrationDocumentQueue \n        WHERE DocumentNumber = RTRIM(LTRIM([cIBTNumber])) collate Latin1_General_CI_AS \n        AND IntegrationDocumentQueue.[Status] = 'ENTERED' AND ERP_id = IDWhseIBT)\n    END TRY\n\n    BEGIN CATCH\n        SELECT @ErrorMessage = ERROR_MESSAGE(), @ErrorSeverity = ERROR_SEVERITY(), @ErrorState = ERROR_STATE();\n        RAISERROR (@ErrorMessage, @ErrorSeverity, @ErrorState);\n\n        IF @@TRANCOUNT &gt; 0\n        BEGIN \n            ROLLBACK TRANSACTION;\n        END\n    END CATCH\n\n    IF @@TRANCOUNT &gt; 0\n    BEGIN \n        COMMIT TRANSACTION;\n    END\n\n\nEND \n</code></pre>"},{"location":"database/release-notes/#august-4510","title":"August (4.5.1.0)","text":""},{"location":"database/release-notes/#granitedatabase_1","title":"GraniteDatabase","text":""},{"location":"database/release-notes/#new-views_1","title":"New Views","text":""},{"location":"database/release-notes/#datagrid_stockavailable_1","title":"Datagrid_StockAvailable","text":"<pre><code>CREATE VIEW [dbo].[DataGrid_StockAvailable]\nAS\nSELECT DISTINCT MasterItem.ID AS MasterItemId, \n       Code AS MasterItemCode, \n       Description AS MasterItemDescription,\n       MasterItem.Type,\n       MasterItem.Category,\n       UOM, \n       CASE WHEN (SUM(Qty) OVER(PARTITION BY MasterItem.ID) - ISNULL(SalesOrderQty, 0.000) + ISNULL(PurchaseOrderQty, 0.000)) &gt; 0\n            THEN 'InStock'\n            WHEN (SUM(Qty) OVER(PARTITION BY MasterItem.ID) - ISNULL(SalesOrderQty, 0.000) + ISNULL(PurchaseOrderQty, 0.000)) &lt;= 0\n            THEN 'NoStock'\n            END AS Status\n       ,\n       SUM(Qty) OVER(PARTITION BY MasterItem.ID) AS QtyInWarehouse, \n       ISNULL(SalesOrderQty, 0.000) AS QtyOnSalesOrders,\n       ISNULL(PurchaseOrderQty, 0.000) AS QtyOnPurchaceOrders,\n       (SUM(Qty) OVER(PARTITION BY MasterItem.ID) - ISNULL(SalesOrderQty, 0.000)) AS QtyAfterSales,\n       (SUM(Qty) OVER(PARTITION BY MasterItem.ID) + ISNULL(PurchaseOrderQty, 0.000)) AS QtyAfterPurchaces,\n       (SUM(Qty) OVER(PARTITION BY MasterItem.ID) - ISNULL(SalesOrderQty, 0.000) + ISNULL(PurchaseOrderQty, 0.000)) AS TotalQtyAvailable\nFROM MasterItem LEFT JOIN \n     TrackingEntity ON MasterItem.ID = TrackingEntity.MasterItem_id OUTER APPLY\n     (SELECT (SUM(Qty) - SUM(ActionQty)) AS SalesOrderQty\n      FROM DocumentDetail LEFT JOIN \n           Document ON DocumentDetail.Document_id = Document.ID\n      WHERE Completed &lt;&gt; 1 AND\n            Cancelled &lt;&gt; 1 AND\n            Document.Status in ('ENTERED', 'RELEASED') AND \n            DocumentDetail.Item_id = MasterItem.ID AND \n            Document.Type = 'ORDER'\n      GROUP BY Item_id) AS SalesOrders\n      OUTER APPLY\n     (SELECT (SUM(Qty) - SUM(ActionQty)) AS PurchaseOrderQty\n      FROM DocumentDetail LEFT JOIN \n           Document ON DocumentDetail.Document_id = Document.ID\n      WHERE Completed &lt;&gt; 1 AND\n            Cancelled &lt;&gt; 1 AND\n            Document.Status in ('ENTERED', 'RELEASED') AND \n            DocumentDetail.Item_id = MasterItem.ID AND \n            Document.Type = 'RECEIVING'\n      GROUP BY Item_id) AS PurchaseOrders\nWHERE MasterItem.isActive = 1 AND\n      Qty &lt;&gt; 0 AND \n      TrackingEntity.InStock = 1\n</code></pre>"},{"location":"database/release-notes/#changed-views_2","title":"Changed Views","text":""},{"location":"database/release-notes/#api_querytransactionspickreversal","title":"API_QueryTransactionsPickReversal","text":"<ul> <li>Exclude packed items <pre><code>ALTER VIEW [dbo].[API_QueryTransactionsPickReversal]\nAS\nSELECT dbo.[Transaction].ID, dbo.TrackingEntity.Barcode, dbo.MasterItem.Code, dbo.MasterItem.Description, CAST(dbo.[Transaction].Date AS Date) as Date, CAST(dbo.[Transaction].Date AS Time(0)) as Time, dbo.TrackingEntity.Batch, dbo.TrackingEntity.SerialNumber, dbo.TrackingEntity.ExpiryDate, dbo.[Transaction].FromQty, dbo.[Transaction].ToQty, dbo.[Transaction].ActionQty, dbo.Users.Name AS [User], dbo.[Transaction].DocumentReference, dbo.[Document].Number AS [Document], dbo.[Transaction].IntegrationStatus, \n         dbo.CarryingEntity.Barcode AS Pallet, dbo.[Transaction].Comment, L1.Name AS FromLocation, L2.Name AS ToLocation, L3.Site, dbo.[Transaction].Type, dbo.[Transaction].IntegrationReference, dbo.[Transaction].ReversalTransaction_id, dbo.[Document].TradingPartnerCode, dbo.[Document].TradingPartnerDescription, dbo.[Document].Status, dbo.DocumentDetail.LineNumber\nFROM  dbo.[Transaction] INNER JOIN\n         dbo.DocumentDetail ON dbo.[Transaction].DocumentLine_id = dbo.DocumentDetail.ID LEFT OUTER JOIN\n         dbo.[Document] ON dbo.[Document].ID = dbo.[Transaction].Document_id LEFT OUTER JOIN\n         dbo.CarryingEntity ON dbo.[Transaction].ContainableEntity_id = dbo.CarryingEntity.ID LEFT OUTER JOIN\n         dbo.Location AS L1 ON dbo.[Transaction].FromLocation_id = L1.ID LEFT OUTER JOIN\n         dbo.Location AS L2 ON dbo.[Transaction].ToLocation_id = L2.ID LEFT OUTER JOIN\n         dbo.Users ON dbo.[Transaction].User_id = dbo.Users.ID FULL OUTER JOIN\n         dbo.TrackingEntity LEFT OUTER JOIN\n         dbo.Location AS L3 ON dbo.TrackingEntity.Location_id = L3.ID ON dbo.TrackingEntity.ID = dbo.[Transaction].TrackingEntity_id FULL OUTER JOIN\n         dbo.MasterItem ON dbo.TrackingEntity.MasterItem_id = dbo.MasterItem.ID LEFT JOIN\n         dbo.[Transaction] T2 ON DocumentDetail.ID = T2.DocumentLine_id AND T2.[Type] = 'PACK'\nWHERE (dbo.[Transaction].Type = 'PICK') AND ISNULL(dbo.[Transaction].ReversalTransaction_id, 0) = 0 AND ISNULL(dbo.[Transaction].IntegrationStatus, 0) = 0 AND T2.ID IS NULL\nGO\n</code></pre></li> </ul>"},{"location":"database/release-notes/#api_querydocumentprogress","title":"API_QueryDocumentProgress","text":"<ul> <li>Added Document.ID column <pre><code>ALTER VIEW [dbo].[API_QueryDocumentProgress]\n    AS \nSELECT DISTINCT  \n         dbo.[Document].ID, dbo.[Document].Priority, dbo.[Document].ExpectedDate, dbo.[Document].Number, dbo.[Document].TradingPartnerCode AS TradingPartnerCode,dbo.[Document].TradingPartnerDescription AS TradingPartnerDescription, dbo.[Document].Description,dbo.[Document].ActionDate AS ActionDate, \n         TSQL.DateStart AS Started, TSQL.DateStop AS Stopped, DATEDIFF(MI, TSQL.DateStart, TSQL.DateStop) AS Duration, \n         TSQL3.Qty AS DocumentQty, \n         TSQL3.ActionQty AS ActionQty, ISNULL(TSQL3.ActionQty / CAST(CASE WHEN TSQL3.Qty = 0 THEN 1 ELSE TSQL3.Qty END AS DECIMAL(38, 3)) * 100, 0.1) AS Progress, \n         TSQL.[User] AS [User], \n         dbo.[Document].ERPLocation AS Location, dbo.[Document].Site, dbo.[Document].Status, dbo.[Document].Type\nFROM  dbo.[Document]  OUTER APPLY\n             (SELECT MIN(dbo.[Transaction].Date) AS DateStart, MAX(dbo.[Transaction].Date) AS DateStop, MAX(dbo.Users.Name) [USER]\n               FROM   dbo.[Transaction]  INNER JOIN\n               Users ON [Transaction].User_id = Users.ID\n               WHERE Document_id = dbo.[Document].ID) AS TSQL CROSS APPLY\n             (SELECT ISNULL(SUM(DocumentDetail.Qty), 0) as Qty, ISNULL(SUM(DocumentDetail.ActionQty), 0) as ActionQty\n                FROM DocumentDetail\n                WHERE Document_id = Document.ID) TSQL3\nWHERE (dbo.[Document].Status &lt;&gt; 'COMPLETE' OR AuditDate &gt; getdate() - 14)\n</code></pre></li> </ul>"},{"location":"database/release-notes/#changed-data_1","title":"Changed Data","text":""},{"location":"database/release-notes/#applicationgrids_1","title":"ApplicationGrids","text":"<ul> <li>Add ID column to all Document Progress grids</li> <li>Fix Document / PickslipDocument grid</li> <li>Fix ImportTrackingEntity</li> </ul>"},{"location":"database/release-notes/#enquiry-grids","title":"Enquiry Grids","text":"<ul> <li>Add StockAvailable grid</li> </ul>"},{"location":"database/release-notes/#systemsnippets","title":"SystemSnippets","text":"<ul> <li>Added snippets for all default Process templates</li> </ul>"},{"location":"database/release-notes/#accpaccintegration","title":"AccpaccIntegration","text":""},{"location":"database/release-notes/#changed-views_3","title":"Changed Views","text":""},{"location":"database/release-notes/#masteritemalias_view_1","title":"MasterItemAlias_View","text":"<ul> <li>Add columns<ul> <li>AuditDate</li> <li>AuditUser</li> <li>Version</li> <li>ERPIdentification</li> </ul> </li> <li>Add UNION to return results from MasterItemAlias table</li> </ul> <pre><code>ALTER VIEW [dbo].[MasterItemAlias_View]\n\n    AS \nSELECT ROW_NUMBER() OVER (ORDER BY [$(GraniteDatabase)].dbo.MasterItem.ID) AS ID, \nCAST([$(AccpacDatabase)].dbo.ICIOTH.MANITEMNO as varchar(16)) COLLATE SQL_Latin1_General_CP1_CI_AS AS Code, \nCAST([$(AccpacDatabase)].dbo.ICUNIT.UNIT as varchar(16)) COLLATE SQL_Latin1_General_CP1_CI_AS AS UOM, \n[$(AccpacDatabase)].dbo.ICUNIT.CONVERSION AS Conversion, CAST(1 as bit)as IsActive, \nGETDATE() as AuditDate, '' as AuditUser, \n[$(GraniteDatabase)].dbo.MasterItem.ID AS MasterItem_id,NULL as ERPIdentification,0 as Version\nFROM         [$(AccpacDatabase)].dbo.ICIOTH RIGHT OUTER JOIN\n                      [$(AccpacDatabase)].dbo.ICUNIT ON [$(AccpacDatabase)].dbo.ICIOTH.UNIT COLLATE SQL_Latin1_General_CP1_CI_AS = [$(AccpacDatabase)].dbo.ICUNIT.UNIT AND \n                      [$(AccpacDatabase)].dbo.ICIOTH.ITEMNO COLLATE SQL_Latin1_General_CP1_CI_AS = [$(AccpacDatabase)].dbo.ICUNIT.ITEMNO RIGHT OUTER JOIN\n                      [$(GraniteDatabase)].dbo.MasterItem RIGHT OUTER JOIN\n                      [$(AccpacDatabase)].dbo.ICITEM ON [$(GraniteDatabase)].dbo.MasterItem.Code COLLATE SQL_Latin1_General_CP1_CI_AS = [$(AccpacDatabase)].dbo.ICITEM.ITEMNO ON \n                      [$(AccpacDatabase)].dbo.ICUNIT.ITEMNO COLLATE SQL_Latin1_General_CP1_CI_AS = [$(AccpacDatabase)].dbo.ICITEM.ITEMNO\nWHERE     ([$(GraniteDatabase)].dbo.MasterItem.ID IS NOT NULL) AND ([$(AccpacDatabase)].dbo.ICIOTH.MANITEMNO IS NOT NULL)\nUNION\nSELECT  * FROM ([$(GraniteDatabase)].dbo.MasterItemAlias\n</code></pre>"},{"location":"database/release-notes/#changed-stored-procedures_1","title":"Changed Stored Procedures","text":""},{"location":"database/release-notes/#integrationprocesspurchaseorder","title":"IntegrationProcessPurchaseOrder","text":"<ul> <li>Map ExpectedArrivalDate to ExpectedDate instead of ActionDate</li> </ul>"},{"location":"database/release-notes/#integrationprocesssalesorder","title":"IntegrationProcessSalesOrder","text":"<ul> <li>Map ExpectedShipDate to ExpectedDate instead of ActionDate</li> </ul>"},{"location":"database/release-notes/#integrationprocesstransfer_1","title":"IntegrationProcessTransfer","text":"<ul> <li>Map ExpectedShipDate to ExpectedDate instead of ActionDate</li> </ul>"},{"location":"database/release-notes/#evolutionintegration","title":"EvolutionIntegration","text":""},{"location":"database/release-notes/#changed-views_4","title":"Changed Views","text":""},{"location":"database/release-notes/#masteritemalias_view_2","title":"MasterItemAlias_View","text":"<ul> <li>Add columns<ul> <li>AuditDate</li> <li>AuditUser</li> <li>Version</li> <li>ERPIdentification</li> </ul> </li> <li>Add UNION to return results from MasterItemAlias table</li> </ul> <pre><code>ALTER VIEW [dbo].[MasterItemAlias_View]\n    AS \nSELECT  ROW_NUMBER() OVER (ORDER BY [$(GraniteDatabase)].dbo.MasterItem.ID) AS ID,\n        [$(PastelEVODatabase)].dbo.StkItem.Code + [$(PastelEVODatabase)].dbo._etblUnits.cUnitCode AS Code, \n        [$(PastelEVODatabase)].dbo._etblUnits.cUnitCode AS UOM, \n        [$(PastelEVODatabase)].dbo._etblUnitConversion.fUnitBQty AS Conversion, 1 AS IsActive, \n        [$(GraniteDatabase)].dbo.MasterItem.ID as MasterItem_id,\n        GETDATE() as AuditDate, '' as AuditUser, 0 as Version, \n        NULL as ERPIdentification\nFROM         [$(PastelEVODatabase)].dbo._etblUnits INNER JOIN\n                      [$(PastelEVODatabase)].dbo._etblUnitConversion ON [$(PastelEVODatabase)].dbo._etblUnits.idUnits = [$(PastelEVODatabase)].dbo._etblUnitConversion.idUnitConversion INNER JOIN\n                      [$(PastelEVODatabase)].dbo.StkItem ON [$(PastelEVODatabase)].dbo._etblUnitConversion.idUnitConversion = [$(PastelEVODatabase)].dbo.StkItem.iUOMDefPurchaseUnitID INNER JOIN\n                      [$(GraniteDatabase)].dbo.MasterItem ON [$(PastelEVODatabase)].dbo.StkItem.Code = [$(GraniteDatabase)].dbo.MasterItem.Code COLLATE SQL_Latin1_General_CP1_CI_AS\nUNION\nSELECT  * FROM [$(GraniteDatabase)].dbo.MasterItemAlias\n</code></pre>"},{"location":"database/release-notes/#09-june-2023-4500","title":"09 June 2023 (4.5.0.0)","text":""},{"location":"database/release-notes/#granitedatabase_2","title":"GraniteDatabase","text":""},{"location":"database/release-notes/#new-tables_1","title":"New tables","text":""},{"location":"database/release-notes/#datagrid","title":"DataGrid","text":"<pre><code>CREATE TABLE [dbo].[DataGrid]\n(\n    [ID] BIGINT NOT NULL PRIMARY KEY IDENTITY, \n    [Group] VARCHAR(50) NOT NULL, \n    [Name] VARCHAR(50) NOT NULL UNIQUE, \n    [SQLView] VARCHAR(100) NULL, \n    [GridDefinition] NVARCHAR(MAX) NOT NULL, \n    [UserGroup_id] BIGINT NULL, \n    [User_id] BIGINT NULL,\n    [AuditDate] DATETIME NULL, \n    [AuditUser] VARCHAR(20) NULL,\n    [Version] SMALLINT NULL, \n    [isApplicationGrid] BIT NULL, \n    [isCustomGrid] BIT NULL,\n)\n</code></pre>"},{"location":"database/release-notes/#systemstaticdata","title":"SystemStaticData","text":"<pre><code>CREATE TABLE [dbo].[SystemStaticData]\n(\n    [ID] BIGINT NOT NULL PRIMARY KEY IDENTITY, \n    [Group] VARCHAR(100) NULL,\n    [Key] VARCHAR(100) NOT NULL UNIQUE, \n    [Value] VARCHAR(MAX) NOT NULL, \n    [Description] VARCHAR(MAX) NULL, \n    [isEncrypted] BIT NOT NULL DEFAULT 0, \n    [AuditDate] DATETIME NULL, \n    [AuditUser] NCHAR(10) NULL, \n    [Version] SMALLINT NULL\n)\n</code></pre>"},{"location":"database/release-notes/#systemsnippets_1","title":"SystemSnippets","text":"<pre><code>CREATE TABLE [SystemSnippets]\n(\n    [ID] INT NOT NULL PRIMARY KEY IDENTITY, \n    [Name] VARCHAR(50) NOT NULL,\n    [Description] NVARCHAR(MAX) NOT NULL, \n    [Code] NVARCHAR(MAX) NOT NULL,\n    [CodeComment] NVARCHAR(MAX) NULL,\n    [Tags] VARCHAR(MAX) NULL,\n    [ProcessType] VARCHAR(30) NULL,\n)\n</code></pre>"},{"location":"database/release-notes/#auditstocktakelines","title":"AuditStockTakeLines","text":"<pre><code>CREATE TABLE [dbo].[AuditStockTakeLines]\n(\n    [ID] [bigint] IDENTITY(1,1) NOT NULL,\n    [StockTakeSession_id] BIGINT NOT NULL, \n    [StockTakeLines_id] BIGINT NOT NULL, \n    [TrackingEntity_id] BIGINT NULL, \n    [MasterItem_id] BIGINT NULL, \n    [Barcode] VARCHAR(50) NULL, \n    [MasterItemCode] VARCHAR(40) NULL,\n    [Action] VARCHAR(10) NOT NULL,\n    [QtyColumn] VARCHAR(20) NULL, \n    [FromQty] decimal NULL, \n    [ToQty] decimal NULL,\n    [FromStatus]  VARCHAR(20) NULL,\n    [ToStatus]  VARCHAR(20) NULL,\n    [FromLocation]  VARCHAR(50) NULL,\n    [ToLocation]  VARCHAR(50) NULL,\n    [User] VARCHAR(20) NOT NULL, \n    [AuditDate] DATE NOT NULL,\n    [AuditTime] TIME NOT NULL, \n)\n</code></pre>"},{"location":"database/release-notes/#systemhelp","title":"SystemHelp","text":"<pre><code>CREATE TABLE [dbo].[SystemHelp]\n(\n    [ID] [bigint] IDENTITY(1,1) NOT NULL,\n    [Title] VARCHAR(255) NULL, \n    [Content] VARCHAR(MAX) NULL,\n    [Component] VARCHAR(255) NULL\n)\n</code></pre>"},{"location":"database/release-notes/#table-changes","title":"Table Changes","text":""},{"location":"database/release-notes/#userscredential","title":"UsersCredential","text":"<p>Columns PasswordExpiration and FailedLoginAttempts added</p> <pre><code>    ALTER TABLE [UsersCredential]\n    ADD [PasswordExpiration] DATETIME NULL, \n        [FailedLoginAttempts] BIT NULL\n</code></pre>"},{"location":"database/release-notes/#document","title":"Document","text":"<p>Columns Route and Stop have been renamed to RouteName and StopName respectively</p> <pre><code>    ALTER TABLE Document\n    ADD [RouteName] VARCHAR(50) NULL,\n        [StopName] VARCHAR(50) NULL\n</code></pre>"},{"location":"database/release-notes/#process_1","title":"Process","text":"<pre><code>    ALTER TABLE [Process]\n    ADD [WebTemplate] VARCHAR(MAX) NULL\n</code></pre>"},{"location":"database/release-notes/#processstep_1","title":"ProcessStep","text":"<pre><code>    ALTER TABLE [ProcessStep]\n    ADD [WebTemplate] VARCHAR(MAX) NULL\n</code></pre>"},{"location":"database/release-notes/#users_2","title":"Users","text":"<p>Added new permissions</p> <pre><code>    ALTER TABLE [Users]\n    ADD [AllowSystemStaticData] BIT NULL DEFAULT 0,\n        [AllowManufactureDocument] BIT NOT NULL, \n        [AllowPickReversal] BIT NOT NULL, \n        [AllowReceiveReversal] BIT NOT NULL, \n        [AllowTransferReversal] BIT NOT NULL, \n        [AllowInventoryVariances] BIT NOT NULL,\n        [AllowReceivingProgress] BIT NOT NULL,\n        [AllowPickingProgress] BIT NOT NULL,\n        [AllowPickSlip] BIT NOT NULL,\n        [AllowTransferProgress] BIT NOT NULL,\n        [AllowManufactureProgress] BIT NOT NULL\n</code></pre>"},{"location":"database/release-notes/#usergroup","title":"UserGroup","text":"<pre><code>    ALTER TABLE [UserGroup]\n    ALTER COLUMN [Name] NOT NULL UNIQUE\n</code></pre>"},{"location":"database/release-notes/#audit","title":"Audit","text":"<p>Column NewValue now allows nulls <pre><code>    ALTER TABLE [Audit]\n    ALTER COLUMN [NewValue] VARCHAR(MAX) NULL\n</code></pre></p>"},{"location":"database/release-notes/#systemsettings_3","title":"SystemSettings","text":"<p>Add Version column</p> <pre><code>    ALTER TABLE\n    ADD [Version] SMALLINT NULL\n</code></pre>"},{"location":"database/release-notes/#deprecated-tables","title":"Deprecated Tables","text":"<ul> <li>ApplicationLog</li> <li>Emails</li> <li>Reports</li> <li>StockTakeLine</li> <li>StockTakeScanned</li> </ul>"},{"location":"database/release-notes/#new-views_2","title":"New Views","text":""},{"location":"database/release-notes/#api_querystocktakeprocesssummary","title":"API_QueryStockTakeProcessSummary","text":"<pre><code>CREATE VIEW [dbo].[API_QueryStockTakeProcessSummary] as\nSELECT dbo.StockTakeSession.[Name] AS [Session], dbo.MasterItem.Code,dbo. MasterItem.[Description], dbo.MasterItem.Category AS ItemCategory, dbo.MasterItem.[Type] AS ItemType, \n    SUM(OpeningQty) AS OpeningQty,\n    COUNT(StockTakeLines.TrackingEntity_id) AS Total, \n    SUM(CASE WHEN [Status] = 'OUTSTANDING' AND ISNULL(Scrap, 0) = 0 THEN OpeningQty ELSE 0 END) OutstandingQty,\n    SUM(CASE WHEN [Status] = 'COUNTED' AND ISNULL(dbo.StockTakeLines.Scrap, 0) = 0 THEN dbo.StockTakeLines.Count1Qty ELSE 0 END) AS Count1Qty,  \n    SUM(CASE WHEN [Status] = 'COUNTED' AND ISNULL(dbo.StockTakeLines.Scrap, 0) = 0 THEN dbo.StockTakeLines.Count2Qty ELSE 0 END) AS Count2Qty, \n    SUM(CASE WHEN [Status] = 'COUNTED' AND ISNULL(dbo.StockTakeLines.Scrap, 0) = 0 THEN dbo.StockTakeLines.Count3Qty ELSE 0 END) AS Count3Qty, \n    SUM(CASE WHEN [Status] = 'APPROVED' AND ISNULL(dbo.StockTakeLines.Scrap, 0) = 0 THEN dbo.StockTakeLines.ApprovedQty ELSE 0 END) AS ApprovedQty,\n    ISNULL(dbo.ERP_StockOnHand.QTYONHAND, 0) ERPQty\nFROM dbo.StockTakeSession INNER JOIN\n    dbo.StockTakeLines ON dbo.StockTakeSession.ID = dbo.StockTakeLines.StockTakeSession_id INNER JOIN\n    dbo.MasterItem ON dbo.StockTakeLines.MasterItem_id = dbo.MasterItem.ID INNER JOIN\n    dbo.TrackingEntity ON dbo.StockTakeLines.TrackingEntity_id = dbo.TrackingEntity.ID LEFT OUTER JOIN\n    dbo.ERP_StockOnHand ON dbo.MasterItem.Code = dbo.ERP_StockOnHand.ITEMNO\nGROUP BY dbo.StockTakeSession.[Name], dbo.MasterItem.Code, dbo.MasterItem.[Description], dbo.MasterItem.Category, dbo.MasterItem.[Type],  dbo.ERP_StockOnHand.QTYONHAND\n</code></pre>"},{"location":"database/release-notes/#changed-views_5","title":"Changed Views","text":""},{"location":"database/release-notes/#api_querypicksliplines","title":"API_QueryPickslipLines","text":"<p>Remove dependency on deprecated view Base_Inventory_Summary <pre><code>ALTER VIEW [dbo].[API_QueryPickslipLines]\n    AS \nSELECT  dbo.[Document].ID, dbo.DocumentDetail.ID AS DocumentDetailID, dbo.[Document].Number, Document_1.Number AS SalesOrder, \n        Document_1.TradingPartnerCode, Document_1.TradingPartnerDescription, dbo.MasterItem.Code, dbo.MasterItem.Description, \n        dbo.DocumentDetail.Qty AS PickSlipQty, DocumentDetail_1.Qty AS OrderQty, ISNULL(dbo.DocumentDetail.ActionQty, 0) AS PickedQty, \n        stock.QtyOnHand AS QtyOnHand, Document_1.ID AS SalesOrderID, dbo.MasterItem.ID AS MasterItemID, \n        dbo.DocumentDetail.LineNumber, DocumentDetail_1.LineNumber AS SalesOrderLine, dbo.DocumentDetail.Comment, dbo.DocumentDetail.Instruction, \n        dbo.DocumentDetail.Cancelled, dbo.DocumentDetail.Completed, dbo.DocumentDetail.UOM, dbo.DocumentDetail.Batch, dbo.DocumentDetail.ExpiryDate, \n        dbo.DocumentDetail.SerialNumber\nFROM  dbo.[Document] INNER JOIN\n         dbo.DocumentDetail ON dbo.[Document].ID = dbo.DocumentDetail.Document_id INNER JOIN\n         dbo.Type ON dbo.[Document].Type = dbo.Type.Name INNER JOIN\n         dbo.DocumentDetail AS DocumentDetail_1 ON dbo.DocumentDetail.LinkedDetail_id = DocumentDetail_1.ID INNER JOIN\n         dbo.[Document] AS Document_1 ON DocumentDetail_1.Document_id = Document_1.ID INNER JOIN\n         dbo.MasterItem ON dbo.DocumentDetail.Item_id = dbo.MasterItem.ID INNER JOIN\n         dbo.Status ON dbo.[Document].Status = dbo.Status.Name OUTER APPLY\n         (\n            SELECT ISNULL(SUM(Qty), 0) AS QtyOnHand\n            FROM TrackingEntity INNER JOIN\n            [Location] ON TrackingEntity.Location_id = [Location].ID\n            WHERE TrackingEntity.MasterItem_id = DocumentDetail.Item_id AND TrackingEntity.InStock = 1 AND ISNULL([Location].NonStock, 0) = 0\n         ) stock\nWHERE (dbo.Type.Name = 'PICKSLIP') AND (dbo.Status.Name &lt;&gt; 'COMPLETE')\nGO\n</code></pre></p>"},{"location":"database/release-notes/#api_querystockreplenish","title":"API_QueryStockReplenish","text":"<p>Remove dependency on deprecated view Base_Inventory_Summary <pre><code>CREATE VIEW [dbo].API_QueryStockReplenish\nAS\nSELECT Code, [Description], [Location].[Name] AS PickFaceLocation, stock.LocationQty, MasterItem.MinimumPickfaceQuantity AS MininmumQty, \nMasterItem.OptimalPickfaceQuantity AS OptimalQty, OptimalPickfaceQuantity - LocationQty AS ReplenishQty\nFROM dbo.MasterItem INNER JOIN\ndbo.[Location] ON MasterItem.PickfaceLocation_id = [Location].ID OUTER APPLY\n(\n    SELECT ISNULL(SUM(Qty), 0) AS LocationQty\n    FROM dbo.TrackingEntity \n    WHERE InStock = 1 AND TrackingEntity.Location_id = [Location].ID AND TrackingEntity.MasterItem_id = MasterItem.ID\n) stock\nWHERE OptimalPickfaceQuantity &gt; 0\nGO\n</code></pre></p>"},{"location":"database/release-notes/#api_querystocktakelinessummary","title":"API_QueryStockTakeLinesSummary","text":"<p>Added collation to join on ERP_StockOnHand view <pre><code>ALTER VIEW [dbo].[API_QueryStockTakeLinesSummary]\nAS\nSELECT dbo.MasterItem.Code, dbo.MasterItem.Description, dbo.MasterItem.Category AS ItemCategory, dbo.MasterItem.Type AS ItemType, dbo.StockTakeLines.OpeningLocationERP,\nSUM(dbo.StockTakeLines.OpeningQty) AS OpeningQty, dbo.StockTakeLines.Status, dbo.StockTakeSession.Name AS Session, \nCOUNT(dbo.TrackingEntity.ID) AS Total, \nSUM(CASE WHEN ISNULL(dbo.StockTakeLines.Scrap, 0) = 0 THEN dbo.TrackingEntity.Qty ELSE 0 END) AS SessionQty, \nSUM(CASE WHEN ISNULL(dbo.StockTakeLines.Scrap, 0) = 0 THEN dbo.StockTakeLines.Count1Qty ELSE 0 END) AS Count1Qty,  \nSUM(CASE WHEN ISNULL(dbo.StockTakeLines.Scrap, 0) = 0 THEN dbo.StockTakeLines.Count2Qty ELSE 0 END) AS Count2Qty, \nSUM(CASE WHEN ISNULL(dbo.StockTakeLines.Scrap, 0) = 0 THEN dbo.StockTakeLines.Count3Qty ELSE 0 END) AS Count3Qty, \nSUM(CASE WHEN ISNULL(dbo.StockTakeLines.Scrap, 0) = 0 THEN dbo.StockTakeLines.ApprovedQty ELSE 0 END) AS ApprovedQty,  \nERP_StockOnHand.QTYONHAND AS ERPQty\nFROM  dbo.TrackingEntity INNER JOIN\n         dbo.StockTakeLines ON dbo.TrackingEntity.ID = dbo.StockTakeLines.TrackingEntity_id INNER JOIN\n         dbo.StockTakeSession ON dbo.StockTakeLines.StockTakeSession_id = dbo.StockTakeSession.ID INNER JOIN\n         dbo.MasterItem ON dbo.TrackingEntity.MasterItem_id = dbo.MasterItem.ID LEFT OUTER JOIN\n         ERP_StockOnHand ON MasterItem.FormattedCode = ERP_StockOnHand.ITEMNO COLLATE DATABASE_DEFAULT AND StockTakeLines.OpeningLocationERP = ERP_StockOnHand.[LOCATION] COLLATE DATABASE_DEFAULT\nGROUP BY dbo.MasterItem.Code, dbo.MasterItem.Description, dbo.StockTakeLines.Status, dbo.StockTakeSession.Name, dbo.MasterItem.Category, dbo.MasterItem.Type, dbo.StockTakeLines.OpeningLocationERP, ERP_StockOnHand.QTYONHAND\nGO\n</code></pre></p>"},{"location":"database/release-notes/#api_querystockdetail","title":"API_QueryStockDetail","text":"<p>Split CreateDate (datetime) to CreateDate (date) and Time (Time(0))</p> <pre><code>ALTER VIEW [dbo].[API_QueryStockDetail]\nAS\nSELECT dbo.TrackingEntity.Barcode, dbo.TrackingEntity.SerialNumber, dbo.TrackingEntity.Qty, dbo.MasterItem.ID AS MasterItem_id, dbo.MasterItem.Code AS Code, dbo.MasterItem.Description AS Description, dbo.Location.Name AS Location, dbo.Location.Site, dbo.TrackingEntity.Batch, dbo.TrackingEntity.ExpiryDate, NULL AS OnHoldDate, CAST(dbo.[TrackingEntity].CreatedDate AS Date) as CreatedDate, CAST(dbo.[TrackingEntity].CreatedDate AS Time(0)) as Time, dbo.CarryingEntity.Barcode AS Pallet, dbo.TrackingEntity.OnHold, dbo.TrackingEntity.StockTake,\ndbo.MasterItem.Category as ItemCategory, dbo.MasterItem.[Type] as ItemType, dbo.Location.Category as LocationCategory, dbo.Location.[Type] as LocationType \nFROM  dbo.TrackingEntity INNER JOIN\n         dbo.MasterItem ON dbo.TrackingEntity.MasterItem_id = dbo.MasterItem.ID INNER JOIN\n         dbo.Location ON dbo.TrackingEntity.Location_id = dbo.Location.ID LEFT OUTER JOIN\n         dbo.CarryingEntity ON dbo.TrackingEntity.BelongsToEntity_id = dbo.CarryingEntity.ID\nWHERE (dbo.TrackingEntity.InStock = 1) AND (dbo.Location.NonStock = 0)\nGO\n</code></pre>"},{"location":"database/release-notes/#api_querytransactions","title":"API_QueryTransactions","text":"<p>Split column Date (datetime) into columns Date (date) and Time (Time(0))</p> <pre><code>ALTER VIEW [dbo].[API_QueryTransactions]\nAS\nSELECT dbo.[Transaction].ID, dbo.TrackingEntity.Barcode, dbo.MasterItem.Code, dbo.MasterItem.Description, CAST(dbo.[Transaction].Date AS Date) as Date, CAST(dbo.[Transaction].Date AS Time(0)) as Time, dbo.TrackingEntity.Batch, dbo.TrackingEntity.SerialNumber, dbo.TrackingEntity.ExpiryDate, dbo.[Transaction].FromQty, dbo.[Transaction].ToQty, dbo.[Transaction].ActionQty, dbo.[Transaction].UOM, dbo.[Transaction].Comment, dbo.[Transaction].IntegrationDate, dbo.[Transaction].Process, dbo.Users.Name AS [User], \n         dbo.[Transaction].DocumentReference, dbo.[Document].Number AS Document, dbo.[Transaction].IntegrationStatus, dbo.CarryingEntity.Barcode AS Pallet, L1.Name AS FromLocation, L2.Name AS ToLocation, L3.Site, dbo.[Transaction].Type, dbo.[Transaction].IntegrationReference, dbo.DocumentDetail.LineNumber, TrackingEntity_1.Barcode AS FromBarcode,\n         CONVERT(Date, dbo.[Transaction].Date, 101) AS TransactionDate, SUBSTRING(CONVERT(varchar(20), dbo.[Transaction].Date), 12, 10) AS TransactionTime\nFROM  dbo.[Transaction] LEFT OUTER JOIN\n         dbo.DocumentDetail ON dbo.[Transaction].DocumentLine_id = dbo.DocumentDetail.ID AND dbo.[Transaction].Document_id = dbo.DocumentDetail.Document_id LEFT OUTER JOIN\n         dbo.[Document] ON dbo.[Document].ID = dbo.[Transaction].Document_id LEFT OUTER JOIN\n         dbo.CarryingEntity ON dbo.[Transaction].ContainableEntity_id = dbo.CarryingEntity.ID LEFT OUTER JOIN\n         dbo.Location AS L1 ON dbo.[Transaction].FromLocation_id = L1.ID LEFT OUTER JOIN\n         dbo.Location AS L2 ON dbo.[Transaction].ToLocation_id = L2.ID LEFT OUTER JOIN\n         dbo.Users ON dbo.[Transaction].User_id = dbo.Users.ID INNER JOIN\n         dbo.TrackingEntity ON dbo.[Transaction].TrackingEntity_id = dbo.TrackingEntity.ID LEFT OUTER JOIN\n         dbo.Location AS L3 ON dbo.TrackingEntity.Location_id = L3.ID INNER JOIN\n         dbo.MasterItem ON dbo.TrackingEntity.MasterItem_id = dbo.MasterItem.ID LEFT OUTER JOIN\n         dbo.TrackingEntity AS TrackingEntity_1 ON dbo.[Transaction].FromTrackingEntity_id = TrackingEntity_1.ID\nGO\n</code></pre>"},{"location":"database/release-notes/#api_querytransactionsmanufacture","title":"API_QueryTransactionsManufacture","text":"<p>Split column Date (datetime) into columns Date (date) and Time (Time(0))</p> <pre><code>ALTER VIEW [dbo].[API_QueryTransactionsManufacture]\nAS\nSELECT dbo.[Transaction].ID, dbo.TrackingEntity.Barcode, dbo.MasterItem.Code, dbo.MasterItem.Description, CAST(dbo.[Transaction].Date AS Date) as Date, CAST(dbo.[Transaction].Date AS Time(0)) as Time, dbo.TrackingEntity.Batch, dbo.TrackingEntity.SerialNumber, dbo.TrackingEntity.ExpiryDate, \n                  dbo.[Transaction].FromQty, dbo.[Transaction].ToQty, dbo.[Transaction].ActionQty, dbo.Users.Name AS [User], dbo.[Transaction].DocumentReference, dbo.[Document].Number AS Document, dbo.[Transaction].IntegrationStatus, \n                  dbo.CarryingEntity.Barcode AS Pallet, dbo.[Transaction].Comment, L1.Name AS FromLocation, L2.Name AS ToLocation, L3.Site, dbo.[Transaction].Type AS Type, dbo.[Transaction].IntegrationReference\nFROM     dbo.[Transaction] LEFT OUTER JOIN\n                  dbo.TrackingEntity ON dbo.TrackingEntity.ID = dbo.[Transaction].TrackingEntity_id LEFT OUTER JOIN\n                  dbo.MasterItem ON dbo.MasterItem.ID = dbo.TrackingEntity.MasterItem_id LEFT OUTER JOIN\n                  dbo.CarryingEntity ON dbo.[Transaction].ContainableEntity_id = dbo.CarryingEntity.ID LEFT OUTER JOIN\n                  dbo.Location AS L1 ON dbo.[Transaction].FromLocation_id = L1.ID LEFT OUTER JOIN\n                  dbo.Location AS L2 ON dbo.[Transaction].ToLocation_id = L2.ID LEFT OUTER JOIN\n                  dbo.Location AS L3 ON dbo.TrackingEntity.Location_id = L3.ID LEFT OUTER JOIN\n                  dbo.Users ON dbo.[Transaction].User_id = dbo.Users.ID LEFT OUTER JOIN\n                  dbo.[Document] ON dbo.[Document].ID = dbo.[Transaction].Document_id\n                  WHERE dbo.[Transaction].Type = 'CONSUME' OR dbo.[Transaction].Type = 'MANUFACTURE'\nGO\n</code></pre>"},{"location":"database/release-notes/#api_querytransactionspickreversal_1","title":"API_QueryTransactionsPickReversal","text":"<p>Split column Date (datetime) into columns Date (date) and Time (Time(0))</p> <pre><code>ALTER VIEW [dbo].[API_QueryTransactionsPickReversal]\nAS\nSELECT dbo.[Transaction].ID, dbo.TrackingEntity.Barcode, dbo.MasterItem.Code, dbo.MasterItem.Description, CAST(dbo.[Transaction].Date AS Date) as Date, CAST(dbo.[Transaction].Date AS Time(0)) as Time, dbo.TrackingEntity.Batch, dbo.TrackingEntity.SerialNumber, dbo.TrackingEntity.ExpiryDate, dbo.[Transaction].FromQty, dbo.[Transaction].ToQty, dbo.[Transaction].ActionQty, dbo.Users.Name AS [User], dbo.[Transaction].DocumentReference, dbo.[Document].Number AS [Document], dbo.[Transaction].IntegrationStatus, \n         dbo.CarryingEntity.Barcode AS Pallet, dbo.[Transaction].Comment, L1.Name AS FromLocation, L2.Name AS ToLocation, L3.Site, dbo.[Transaction].Type, dbo.[Transaction].IntegrationReference, dbo.[Transaction].ReversalTransaction_id, dbo.[Document].TradingPartnerCode, dbo.[Document].TradingPartnerDescription, dbo.[Document].Status, dbo.DocumentDetail.LineNumber\nFROM  dbo.[Transaction] INNER JOIN\n         dbo.DocumentDetail ON dbo.[Transaction].DocumentLine_id = dbo.DocumentDetail.ID LEFT OUTER JOIN\n         dbo.[Document] ON dbo.[Document].ID = dbo.[Transaction].Document_id LEFT OUTER JOIN\n         dbo.CarryingEntity ON dbo.[Transaction].ContainableEntity_id = dbo.CarryingEntity.ID LEFT OUTER JOIN\n         dbo.Location AS L1 ON dbo.[Transaction].FromLocation_id = L1.ID LEFT OUTER JOIN\n         dbo.Location AS L2 ON dbo.[Transaction].ToLocation_id = L2.ID LEFT OUTER JOIN\n         dbo.Users ON dbo.[Transaction].User_id = dbo.Users.ID FULL OUTER JOIN\n         dbo.TrackingEntity LEFT OUTER JOIN\n         dbo.Location AS L3 ON dbo.TrackingEntity.Location_id = L3.ID ON dbo.TrackingEntity.ID = dbo.[Transaction].TrackingEntity_id FULL OUTER JOIN\n         dbo.MasterItem ON dbo.TrackingEntity.MasterItem_id = dbo.MasterItem.ID\nWHERE (dbo.[Transaction].Type = 'PICK') AND ISNULL(dbo.[Transaction].ReversalTransaction_id, 0) = 0 AND ISNULL(dbo.[Transaction].IntegrationStatus, 0) = 0\nGO\n</code></pre>"},{"location":"database/release-notes/#api_querytransactionspicking","title":"API_QueryTransactionsPicking","text":"<p>Split column Date (datetime) into columns Date (date) and Time (Time(0))</p> <pre><code>CREATE VIEW [dbo].[API_QueryTransactionsPicking]\nAS\nSELECT dbo.[Transaction].ID, dbo.[Transaction].ReversalTransaction_id, dbo.TrackingEntity.Barcode, dbo.MasterItem.Code, dbo.MasterItem.Description, CAST(dbo.[Transaction].Date AS Date) as Date, CAST(dbo.[Transaction].Date AS Time(0)) as Time, dbo.TrackingEntity.Batch, \n                    dbo.TrackingEntity.SerialNumber, dbo.TrackingEntity.ExpiryDate, dbo.[Transaction].FromQty, dbo.[Transaction].ToQty, \n                    dbo.[Transaction].ActionQty, dbo.[Transaction].UOM, dbo.[Transaction].Comment, dbo.[Transaction].IntegrationDate,\n                    dbo.[Transaction].Process, dbo.Users.Name AS [User], dbo.[Transaction].DocumentReference, dbo.[Document].Number AS Document, dbo.[Transaction].IntegrationStatus, \n                    dbo.CarryingEntity.Barcode AS Pallet, L1.Name AS FromLocation, L2.Name AS ToLocation, L3.Site, \n                    dbo.[Transaction].Type AS Type, dbo.[Transaction].IntegrationReference\nFROM     dbo.[Transaction] LEFT OUTER JOIN\n                    dbo.TrackingEntity ON dbo.TrackingEntity.ID = dbo.[Transaction].TrackingEntity_id LEFT OUTER JOIN\n                    dbo.MasterItem ON dbo.MasterItem.ID = dbo.TrackingEntity.MasterItem_id LEFT OUTER JOIN\n                    dbo.CarryingEntity ON dbo.[Transaction].ContainableEntity_id = dbo.CarryingEntity.ID LEFT OUTER JOIN\n                    dbo.Location AS L1 ON dbo.[Transaction].FromLocation_id = L1.ID LEFT OUTER JOIN\n                    dbo.Location AS L2 ON dbo.[Transaction].ToLocation_id = L2.ID LEFT OUTER JOIN\n                    dbo.Location AS L3 ON dbo.TrackingEntity.Location_id = L3.ID LEFT OUTER JOIN\n                    dbo.Users ON dbo.[Transaction].User_id = dbo.Users.ID LEFT OUTER JOIN\n                    dbo.[Document] ON dbo.[Document].ID = dbo.[Transaction].Document_id\nWHERE dbo.[Transaction].Type = 'PICK' OR dbo.[Transaction].Type = 'DYNAMICPICK'\nGO\n</code></pre>"},{"location":"database/release-notes/#api_querytransactionsreceiving","title":"API_QueryTransactionsReceiving","text":"<p>Split column Date (datetime) into columns Date (date) and Time (Time(0))</p> <pre><code>CREATE VIEW [dbo].[API_QueryTransactionsReceiving]\nAS\nSELECT dbo.[Transaction].ID, dbo.[Transaction].ReversalTransaction_id, dbo.TrackingEntity.Barcode, dbo.MasterItem.Code, dbo.MasterItem.Description, CAST(dbo.[Transaction].Date AS Date) as Date, CAST(dbo.[Transaction].Date AS Time(0)) as Time, dbo.TrackingEntity.Batch, \n                    dbo.TrackingEntity.SerialNumber, dbo.TrackingEntity.ExpiryDate, dbo.[Transaction].FromQty, dbo.[Transaction].ToQty, \n                    dbo.[Transaction].ActionQty, dbo.[Transaction].UOM, dbo.[Transaction].Comment, dbo.[Transaction].IntegrationDate,\n                    dbo.[Transaction].Process, dbo.Users.Name AS [User], dbo.[Transaction].DocumentReference, dbo.[Document].Number AS Document, dbo.[Transaction].IntegrationStatus, \n                    dbo.CarryingEntity.Barcode AS Pallet, L1.Name AS FromLocation, L2.Name AS ToLocation, L3.Site, \n                    dbo.[Transaction].Type AS Type, dbo.[Transaction].IntegrationReference\nFROM     dbo.[Transaction] LEFT OUTER JOIN\n                    dbo.TrackingEntity ON dbo.TrackingEntity.ID = dbo.[Transaction].TrackingEntity_id LEFT OUTER JOIN\n                    dbo.MasterItem ON dbo.MasterItem.ID = dbo.TrackingEntity.MasterItem_id LEFT OUTER JOIN\n                    dbo.CarryingEntity ON dbo.[Transaction].ContainableEntity_id = dbo.CarryingEntity.ID LEFT OUTER JOIN\n                    dbo.Location AS L1 ON dbo.[Transaction].FromLocation_id = L1.ID LEFT OUTER JOIN\n                    dbo.Location AS L2 ON dbo.[Transaction].ToLocation_id = L2.ID LEFT OUTER JOIN\n                    dbo.Location AS L3 ON dbo.TrackingEntity.Location_id = L3.ID LEFT OUTER JOIN\n                    dbo.Users ON dbo.[Transaction].User_id = dbo.Users.ID LEFT OUTER JOIN\n                    dbo.[Document] ON dbo.[Document].ID = dbo.[Transaction].Document_id\nWHERE dbo.[Transaction].Type = 'RECEIVE'\nGO\n</code></pre>"},{"location":"database/release-notes/#api_querytransactionstransfer","title":"API_QueryTransactionsTransfer","text":"<p>Split column Date (datetime) into columns Date (date) and Time (Time(0))</p> <pre><code>CREATE VIEW [dbo].[API_QueryTransactionsTransfer]\nAS\nSELECT dbo.[Transaction].ID, dbo.[Transaction].ReversalTransaction_id, dbo.TrackingEntity.Barcode, dbo.MasterItem.Code, dbo.MasterItem.Description, CAST(dbo.[Transaction].Date AS Date) as Date, CAST(dbo.[Transaction].Date AS Time(0)) as Time, dbo.TrackingEntity.Batch, \n                    dbo.TrackingEntity.SerialNumber, dbo.TrackingEntity.ExpiryDate, dbo.[Transaction].FromQty, dbo.[Transaction].ToQty, \n                    dbo.[Transaction].ActionQty, dbo.[Transaction].UOM, dbo.[Transaction].Comment, dbo.[Transaction].IntegrationDate,\n                    dbo.[Transaction].Process, dbo.Users.Name AS [User], dbo.[Transaction].DocumentReference, dbo.[Document].Number AS Document, dbo.[Transaction].IntegrationStatus, \n                    dbo.CarryingEntity.Barcode AS Pallet, L1.Name AS FromLocation, L2.Name AS ToLocation, L3.Site, \n                    dbo.[Transaction].Type AS Type, dbo.[Transaction].IntegrationReference\nFROM     dbo.[Transaction] LEFT OUTER JOIN\n                    dbo.TrackingEntity ON dbo.TrackingEntity.ID = dbo.[Transaction].TrackingEntity_id LEFT OUTER JOIN\n                    dbo.MasterItem ON dbo.MasterItem.ID = dbo.TrackingEntity.MasterItem_id LEFT OUTER JOIN\n                    dbo.CarryingEntity ON dbo.[Transaction].ContainableEntity_id = dbo.CarryingEntity.ID LEFT OUTER JOIN\n                    dbo.Location AS L1 ON dbo.[Transaction].FromLocation_id = L1.ID LEFT OUTER JOIN\n                    dbo.Location AS L2 ON dbo.[Transaction].ToLocation_id = L2.ID LEFT OUTER JOIN\n                    dbo.Location AS L3 ON dbo.TrackingEntity.Location_id = L3.ID LEFT OUTER JOIN\n                    dbo.Users ON dbo.[Transaction].User_id = dbo.Users.ID LEFT OUTER JOIN\n                    dbo.[Document] ON dbo.[Document].ID = dbo.[Transaction].Document_id\nWHERE dbo.[Transaction].Type = 'TRANSFER' OR dbo.[Transaction].Type = 'DYNAMICTRANSFER'\nGO\n</code></pre>"},{"location":"database/release-notes/#deprecated-views","title":"Deprecated Views","text":"<ul> <li>App_DocumentDetail</li> <li>App_Documentdetail_Pickslips</li> <li>App_DocumentHeader</li> <li>App_Integration_Transactions</li> <li>App_Inventory_ByLocation</li> <li>App_Inventory_Instock</li> <li>App_Inventory_Pallets</li> <li>App_Inventory_QCHold</li> <li>App_Inventory_StockTake</li> <li>App_MasterFiles_Locations</li> <li>App_MasterFiles_MasterItems</li> <li>App_Outbound_Packing</li> <li>App_Outbound_PickSlips</li> <li>App_StockTake_Approved</li> <li>App_StockTake_PostingTotals</li> <li>App_StockTake_Processed</li> <li>App_StockTake_Scanned</li> <li>App_StockTake_ScannedSummary</li> <li>App_StockTake_Unscanned</li> <li>App_TrackingEntity</li> <li>App_Transactions_Location</li> <li>App_Warning_InventoryVariance</li> <li>App_Warning_Picking</li> <li>App_Warning_Receiving</li> <li>App_Warning_StockExpiry</li> <li>Base_App_Comparison</li> <li>Base_App_ExecutionProgress</li> <li>Base_App_TransactionPerUser</li> <li>Base_Inventory_Summary</li> <li>Base_Inventory_Summary_Location</li> <li>Base_Report_Inventory_Expiry</li> <li>Base_Stocktake</li> <li>Report_App_Transactions</li> <li>Report_App_Warning_StockReorder</li> <li>Report_App_Warning_StockToReplenish</li> <li>Report_Inbound_ReceivePerUser</li> <li>Report_Inbound_Receiving</li> <li>Report_Inventory_Adjustments</li> <li>Report_Inventory_Moves</li> <li>Report_Inventory_OnhandDetail</li> <li>Report_Inventory_OnhandSummary</li> <li>Report_Inventory_OnHandSummary_ForBufferStock</li> <li>Report_Inventory_OnholdDetail</li> <li>Report_Inventory_Reclassify</li> <li>Report_Inventory_ReplenishHistory</li> <li>Report_Inventory_Returns</li> <li>Report_Inventory_Scrapped</li> <li>Report_Inventory_Transfer</li> <li>Report_Outbound_Picking</li> <li>Report_Outbound_PicksPerUser</li> <li>Report_StockTake_Variance</li> <li>Report_Transactions_ActivityCost</li> </ul>"},{"location":"database/release-notes/#other","title":"Other","text":""},{"location":"database/release-notes/#misc-folder-renamed-to-tooling","title":"Misc folder renamed to Tooling","text":""},{"location":"database/release-notes/#moved-views-to-new-folders","title":"Moved views to new folders","text":"<ul> <li> <p>Views\\Labels folder</p> <ul> <li>Label_Box</li> <li>Label_Location</li> <li>Label_MasterItem</li> <li>Label_Pallet</li> <li>Label_TrackingEntity</li> <li>Label_Users</li> </ul> </li> <li> <p>Views\\Integration folder</p> <ul> <li>Integration_Transactions</li> <li>Integration_TransactionsComplete</li> </ul> </li> </ul>"},{"location":"database/release-notes/#moved-scripts-to-new-folders","title":"Moved scripts to new folders","text":"<ul> <li>Data\\ScheduledJobs folder<ul> <li>ScheduledJobs.sql</li> </ul> </li> <li>Data\\SystemSettings folder<ul> <li>SystemSettings.sql</li> <li>SystemSettingsAccpac.sql</li> <li>SystemSettingsEvolution.sql</li> <li>SystemSettingsProcessApp.sql</li> <li>SystemSettingsSAP.sql</li> <li>SystemSettingsScheduler.sql</li> </ul> </li> <li>Data\\Users folder<ul> <li>UserGroups.sql</li> <li>Users.sql</li> </ul> </li> </ul>"},{"location":"database/release-notes/#default-processes-moved-to-subfolder","title":"Default processes moved to subfolder","text":"<ul> <li>Process* moved to Process\\Default</li> </ul>"},{"location":"database/release-notes/#removed-unused-scripts","title":"Removed unused scripts","text":"<ul> <li>Customers*</li> <li>DataDemo*</li> <li>Reporting*</li> </ul>"},{"location":"database/release-notes/#postdeployscript","title":"PostDeployScript","text":"<ul> <li>Add .\\Data\\UserCredentials.sql</li> <li>Granite user creation updated to check if user exists before creating</li> </ul>"},{"location":"database/release-notes/#scriptinputparameters","title":"ScriptInputParameters","text":"<p>Value field changed to nvarchar(max) <pre><code>CREATE TYPE dbo.ScriptInputParameters AS TABLE\n(\n   Name NVARCHAR(50) NOT NULL,\n   Value  NVARCHAR(MAX)\n)\n</code></pre></p>"},{"location":"database/release-notes/#grids-data","title":"Grids data","text":"<ul> <li>Add ApplicationGrids.sql</li> <li>Add EnquiryGrids.sql</li> </ul>"},{"location":"database/release-notes/#systemsettings-data","title":"SystemSettings data","text":"<ul> <li>Change DatabaseVersion     <pre><code>    INSERT INTO SystemSettings ([Application], [Key], [Value], [Description], [isEncrypted], [isActive], AuditDate, AuditUser)\n    VALUES    ('Granite', 'DatabaseVersion', '4.5.0.0', 'Granite Database version', 0, 1, GETDATE(), 'AUTOMATION')\n</code></pre></li> <li>Add GraniteScheduler TimeZone and EmailAddress settings     <pre><code>    INSERT [dbo].[SystemSettings] ([Application], [Key], [Value], [Description], [ValueDataType], [isEncrypted], [isActive], [AuditDate], [AuditUser])\n    VALUES    ('GraniteScheduler', 'TimeZone', '', 'The time zone that will be used when scheduling CRON jobs', 'string', 0, 1, GETDATE(), 'AUTOMATION'),\n              ('GraniteScheduler', 'Username', '', 'The username that will be used to connect to the SMTP server (usually the same as the EmailAddress)', 'string', 0, 1, GETDATE(), 'AUTOMATION')\n</code></pre></li> <li>Add settings to SystemSettingsAccpac.sql     <pre><code>    INSERT INTO SystemSettings ([Application], [Key], [Value], [Description], [isEncrypted], [isActive], AuditDate, AuditUser)\n    VALUES ('IntegrationSage300', 'RoundSummarizedActionQty', 'true', 'Round summed ActionQty when posting transfers and moves', 0, 1, GETDATE(), 'AUTOMATION')\n\n    INSERT INTO SystemSettings ([Application], [Key], [Value], [Description], [isEncrypted], [isActive], AuditDate, AuditUser)\n    VALUES ('IntegrationSage300', 'RoundSummarizedActionQtyToDecimalPlaces', '2', 'Number of decimal places to round ActionQty to', 0, 1, GETDATE(), 'AUTOMATION')\n</code></pre></li> <li>Add Syspro settings     <pre><code>    INSERT INTO SystemSettings ([Application], [Key], [Value], [Description], [isEncrypted], [isActive], AuditDate, AuditUser)\n    VALUES \n    ('IntegrationSyspro', 'SysproWriteXML', 'false', 'If true, logs XML that would be posted to C drive instead of posting to Syspro', 0, 1, GETDATE(), 'AUTOMATION'),\n    ('IntegrationSyspro', 'Operator', '', 'Syspro Operator name', 0, 1, GETDATE(), 'AUTOMATION'),\n    ('IntegrationSyspro', 'OperatorPassword', '', 'Syspro Operator password', 0, 1, GETDATE(), 'AUTOMATION'),\n    ('IntegrationSyspro', 'CompanyId', '', 'Syspro CompanyID', 0, 1, GETDATE(), 'AUTOMATION'),\n    ('IntegrationSyspro', 'CompanyPassword', '', 'Syspro Company password', 0, 1, GETDATE(), 'AUTOMATION'),\n    ('IntegrationSyspro', 'SalesOrderPosting', 'SORTBO', 'Syspro business object to use for SalesOrder posting (SORTBO or SORTOS or ALL)', 0, 1, GETDATE(), 'AUTOMATION'),\n    ('IntegrationSyspro', 'TransferPosting', 'GIT', 'Syspro integration method for Transfers (GIT or INVT)', 0, 1, GETDATE(), 'AUTOMATION'),\n    ('IntegrationSyspro', 'Instance', '', 'Syspro Instance to use (empty for default)', 0, 1, GETDATE(), 'AUTOMATION'),\n    ('IntegrationSyspro', 'MultipleBins', 'false', 'true or false. Set to true when Syspro has multiple bins enabled', 0, 1, GETDATE(), 'AUTOMATION'),\n    ('IntegrationSyspro', 'SerialNumbers', 'false', 'true or false. Set to true when Syspro has SerialNumbers enabled', 0, 1, GETDATE(), 'AUTOMATION')\n</code></pre></li> <li>Add Omni settings     <pre><code>    INSERT INTO SystemSettings ([Application], [Key], [Value], [Description], [isEncrypted], [isActive], AuditDate, AuditUser)\n    VALUES  \n    ('IntegrationOmni', 'Host', '', 'Servername or IP of the server where the API is hosted', 0, 1, GETDATE(), 'AUTOMATION'),\n    ('IntegrationOmni', 'Port', '', 'Port number that the Omni API is running on', 1, 1, GETDATE(), 'AUTOMATION'),\n    ('IntegrationOmni', 'UserName', '', 'Omni user name that is used to transact via the API', 0, 1, GETDATE(), 'AUTOMATION'),\n    ('IntegrationOmni', 'Password', '', 'Password for the Omni user', 0, 1, GETDATE(), 'AUTOMATION'),\n    ('IntegrationOmni', 'CompanyName', '', 'Omni company name to post to', 0, 1, GETDATE(), 'AUTOMATION'),\n    ('IntegrationOmni', 'AdjustmentAccount', '', 'Account that adjustments will post to', 0, 1, GETDATE(), 'AUTOMATION'),\n    ('IntegrationOmni', 'ScrapAccount', '', 'Account that scrap transcations will post to', 0, 1, GETDATE(), 'AUTOMATION'),\n    ('IntegrationOmni', 'IntransitWarehouse', '', 'The intransit warehouse that will be used', 0, 1, GETDATE(), 'AUTOMATION'),\n    ('IntegrationOmni', 'PostDynamicTransferReceipt', 'false', 'true or false. Determines whether Omni transfer is auto posted for Granite DynamicTransfers', 0, 1, GETDATE(), 'AUTOMATION')\n</code></pre></li> <li>Add SystemSettingsSQLCLR.sql     <pre><code>    INSERT [dbo].[SystemSettings] ([Application], [Key], [Value], [Description], [ValueDataType], [isEncrypted], [isActive], [AuditDate], [AuditUser])\n    VALUES  ('SQLCLR', 'Webservice', '', 'Granite Webservice Address', 'string', 0, 1, GETDATE(), 'AUTOMATION'),\n            ('SQLCLR', 'LabelPrintService', '', 'Label Print Service Address', 'string', 0, 1, GETDATE(), 'AUTOMATION'),\n            ('SQLCLR', 'IntegrationService', '', 'Integration Service Address', 'string', 0, 1, GETDATE(), 'AUTOMATION')\n</code></pre></li> <li> <p>Application value changed from INTEGRATIONSERVICE to provider specific names:</p> <ul> <li>IntegrationSage300</li> <li>IntegrationSage200</li> <li>IntegrationSAPB1</li> </ul> </li> <li> <p>Changed casing on Application name for SystemSettingsScheduler.sql</p> <ul> <li>GRANITESCHEDULER -&gt; GraniteScheduler</li> </ul> </li> <li> <p>Changed casing on Application name for SystemSettingsProcessApp.sql</p> <ul> <li>PROCESSAPP -&gt; ProcessApp</li> </ul> </li> </ul>"},{"location":"database/release-notes/#systemsnippets-data","title":"SystemSnippets data","text":"<p>Add default snippets data to SystemSnippets table <pre><code>INSERT INTO SystemSnippets ([Name], [Description], [Code], [Tag0])\nVALUES \n('Basic Table','Basic html table.','{{ ''SELECT * FROM _replace_'' | dbSelect() | basicTable() }}', 'TABLE'),\n('Basic Table / Search','Table with search textbox.','{{ ''SELECT * FROM _replace_'' | dbSelect({}) | basicTable({enableSearch:true}) }}', 'TABLE'),\n('Basic Table / Search and Select','Table with search and select on column.','{{ ''SELECT * FROM _replace_'' | dbSelect({}) | basicTable({selectOnColumn:''_replace_'', enableSearch:true}) }}', 'TABLE'),\n('Basic List','Basic List', '{{ ''SELECT * FROM _replace_'' | dbSelect() | basicList() }}', 'LIST'),\n('Basic List / Search','List with search textbox', '{{ ''SELECT * FROM _replace_'' | dbSelect() | basicList({enableSearch:true}) }}', 'LIST'),\n('Label with Value','Label with step value', '&lt;div&gt;&lt;small&gt;_replace_&lt;/small&gt;&lt;header class=''gn-float-right''&gt;{{_replace_}}&lt;/header&gt;&lt;/div&gt;', 'LABEL'),\n('SQL select parameter','SQL select with parameter.', '{{ ''SELECT * FROM _replace_view_ WHERE _replace_col_ = @_replace_value_'' | dbSelect({_replace_step_}) |&gt; to =&gt; rows }}', 'SQL'),\n('SQL select single value','SQL select single value to variable', '{{ ''SELECT _replace_col_ FROM _replace_view_ WHERE _replace_col_ = @_replace_value_'' | dbScalar({_replace_step_}) |&gt; to =&gt; _replace_variable_ }}', 'SQL'),\n('SQL select single row','SQL select single row to variable', '{{ ''SELECT * FROM _replace_view_ WHERE _replace_col_ = @_replace_value_'' | dbSingle({_replace_step_}) |&gt; to =&gt; row }}', 'SQL'),\n('Hide New button','Hide New button on CarryingEntity step', '&lt;style&gt; #btnNew { display:none } &lt;/style&gt;', 'HIDE')\n</code></pre></p>"},{"location":"database/release-notes/#usercredentials-data","title":"UserCredentials data","text":"<p>Add default user to UsersCredential table <pre><code>INSERT INTO UsersCredential (Users_id, Password, Salt, PasswordStrength, Version, AuditDate, AuditUser)\nSELECT ID as User_id, \n'Pm7fzVwBm+rMN5+hTRDFQPicjE5JYU8TpZq7lQS8CYMCqsP0QefTlBk96q0EucwyXuLWwe25y+IuqPXe/NPUBg==', \n'bNbQLUjOj041iKexoJV9fCvSANYohJPchw6QOrBzzwGol6Xwydm44BsIABBMYlEA',\n'VeryWeak',\n1,\nGETDATE(),\n'AUTOMATION'\nFROM Users WHERE Name = '0'\n</code></pre></p>"},{"location":"database/release-notes/#pastel-evo-integration","title":"Pastel EVO Integration","text":""},{"location":"database/release-notes/#scheduledjobs-views","title":"ScheduledJobs Views","text":"<p>Removed: - Integration_Evolution_SalesOrderTradingPartner - Integration_Evolution_PurchaseOrderTradingPartner Added: - Integration_Evolution_TradingPartner Updated: - Integration_Evolution_ReceiptDetail - Integration_Evolution_ReceiptHeader - Integration_Evolution_IntransitDetail - Integration_Evolution_IntransitHeader - Integration_Evolution_MasterItem - Integration_Evolution_MasterItem_V7 - Integration_Evolution_PurchaseOrderDetail - Integration_Evolution_PurchaseOrderDetail_V7 - Integration_Evolution_PurchaseOrderHeader - Integration_Evolution_SalesOrderDetail - Integration_Evolution_SalesOrderDetail_V7 - Integration_Evolution_SalesOrderHeader - Integration_Evolution_TransferDetail - Integration_Evolution_TransferHeader - Integration_Evolution_WorkOrderDetail - Integration_Evolution_WorkOrderHeader</p>"},{"location":"database/release-notes/#scheduledjobs-triggers","title":"ScheduledJobs Triggers","text":"<p>Updated: - TriggerGranitePurchaseOrders - TriggerGraniteSalesOrders - TriggerGraniteWarehouseTransfer</p>"},{"location":"database/release-notes/#accpac-integration","title":"Accpac Integration","text":""},{"location":"database/release-notes/#scheduledjobs-views_1","title":"ScheduledJobs Views","text":"<p>Added: - Integration_Accpac_IntransitDetail - Integration_Accpac_IntransitHeader - Integration_Accpac_MasterItem - Integration_Accpac_PurchaseOrderDetail - Integration_Accpac_PurchaseOrderHeader - Integration_Accpac_ReceiptDetail - Integration_Accpac_ReceiptHeader - Integration_Accpac_SalesOrderDetail - Integration_Accpac_SalesOrderHeader - Integration_Accpac_TradingPartner - Integration_Accpac_TransferDetail - Integration_Accpac_TransferHeader - Integration_Accpac_WorkOrderDetail - Integration_Accpac_WorkOrderHeader</p>"},{"location":"database/release-notes/#scheduledjobs-triggers_1","title":"ScheduledJobs Triggers","text":"<ul> <li>TriggerGranitePurchaseOrders</li> <li>TriggerGraniteSalesOrders</li> <li>TriggerGraniteTransfers</li> <li>TriggerGraniteWorkOrders</li> </ul>"},{"location":"database/release-notes/#syspro-database","title":"Syspro Database","text":"<p>New project for Syspro integration</p>"},{"location":"database/release-notes/#tables","title":"Tables","text":"<ul> <li>InvMaster</li> <li>PorMasterDetail</li> <li>PorMasterHdr</li> <li>SorDetail</li> <li>SorMaster</li> <li>WipJobAllMat</li> <li>WipMaster</li> </ul>"},{"location":"database/release-notes/#triggers","title":"Triggers","text":"<ul> <li>TriggerGraniteWorkOrders</li> <li>TriggerGraniteSalesOrders</li> <li>TriggerGranitePurchaseOrders</li> </ul>"},{"location":"database/release-notes/#procedures","title":"Procedures","text":"<ul> <li>IntegrationMasterItems</li> <li>IntegrationProcessPurchaseOrder</li> <li>IntegrationProcessSalesOrder</li> <li>IntegrationProcessWorkOrders</li> </ul>"},{"location":"database/release-notes/#sapb1-database","title":"SAPB1 Database","text":""},{"location":"database/release-notes/#new-tables_2","title":"New Tables","text":"<ul> <li>ORDN</li> </ul>"},{"location":"database/release-notes/#sapb1-integration","title":"SAPB1 Integration","text":""},{"location":"database/release-notes/#scheduled-job-views","title":"Scheduled Job Views","text":"<ul> <li>Integration_SAPB1_MasterItem</li> <li>Integration_SAPB1_PurchaseOrderDetail</li> <li>Integration_SAPB1_PurchaseOrderHeader</li> <li>Integration_SAPB1_SalesOrderDetail</li> <li>Integration_SAPB1_SalesOrderHeader</li> <li>Integration_SAPB1_TransferDetail</li> <li>Integration_SAPB1_TransferHeader</li> </ul>"},{"location":"database/release-notes/#omni-integration","title":"Omni Integration","text":"<p>New project added to database solution</p> <p>Tables: - Omni_DebugJSON</p> <p>Functions: - FN_BasicAuthHeader</p> <p>StoredProcedures:  - HttpProcedures:     - HTTP_GET_JSON     - HTTP_POST     - HTTP_POST_JSON     - HTTP_PUT_JSON - Omni_PurchaseOrderSync - Omni_SalesOrderSync - Omni_StockTakeSync - Omni_WarehouseReqSync - Omni_WarehouseTransferSync - Omni_WorkOrderSync</p>"},{"location":"database/release-notes/#24-feb-2023-4220","title":"24 Feb 2023 (4.2.2.0)","text":""},{"location":"database/release-notes/#granitedatabase_3","title":"GraniteDatabase","text":""},{"location":"database/release-notes/#new-tables_3","title":"New tables","text":"<ul> <li>UsersCredential     <pre><code>CREATE TABLE [dbo].[UsersCredential]\n(\n    [ID] [bigint] IDENTITY(1,1) NOT NULL, \n    [Users_id] BIGINT NOT NULL unique,\n    [Password] VARCHAR(MAX) NOT NULL, \n    [Salt] VARCHAR(64) NOT NULL, \n    [PasswordStrength] VARCHAR(20) NULL, \n    [AuditDate] DATETIME NULL,\n    [AuditUser] VARCHAR(20) NULL, \n    [Version] SMALLINT NULL, \n    CONSTRAINT [PK_UsersCredential] PRIMARY KEY ([ID]),\n)\n</code></pre></li> <li>ApplicationLog     <pre><code>CREATE TABLE [dbo].[ApplicationLog]\n(\n    [Id] BIGINT NOT NULL PRIMARY KEY IDENTITY, \n    [Date] DATETIME NOT NULL, \n    [Application] VARCHAR(50) NULL,\n    [LogOrigin] VARCHAR(50) NULL,\n    [LogLevel] VARCHAR(20) NULL, \n    [Message] VARCHAR(MAX) NULL,\n    [User] VARCHAR(20) NULL, \n    [GraniteTransaction_id] BIGINT NULL,\n    [Document_id] BIGINT NULL, \n    [DocumentDetail_id] BIGINT NULL\n)\n</code></pre></li> </ul>"},{"location":"database/release-notes/#table-changes_1","title":"Table changes","text":"<ul> <li>TradingPartner increase Email column size and add ERPIdentification     <pre><code>ALTER TABLE TradingPartner\nALTER COLUMN [Email] [varchar](500) NULL\n</code></pre> <pre><code>ALTER TABLE TradingPartner\nADD [ERPIdentification] varchar(50) NULL\n</code></pre></li> <li>ScheduledJobsHistory AuditDate not null     <pre><code>ALTER TABLE ScheduledJobsHistory\nALTER COLUMN [AuditDate] [datetime] NOT NULL\n</code></pre></li> <li>ProcessStepLookup increase column lengths     <pre><code>ALTER TABLE ProcessStepLookup\nALTER COLUMN [Value] [varchar](100) NULL\nGO\nALTER TABLE ProcessStepLookup\nALTER COLUMN [Description] [varchar](100) NULL\n</code></pre></li> <li>ProcessStepLookupDynamic increase column lengths     <pre><code>ALTER TABLE ProcessStepLookupDynamic\nALTER COLUMN [Value] [varchar](100) NULL\nGO\nALTER TABLE ProcessStepLookupDynamic\nALTER COLUMN [Description] [varchar](100) NULL\n</code></pre></li> <li>IntegrationDocumentQueue change ERP_id datatype decimal(19,0) -&gt; varchar(50)     <pre><code>ALTER TABLE IntegrationDocumentQueue\nALTER COLUMN [ERP_id] VARCHAR(50) NOT NULL\n</code></pre></li> <li>Status add column Version     <pre><code>ALTER TABLE [Status]\nADD [Version] SMALLINT NULL\n</code></pre></li> </ul>"},{"location":"database/release-notes/#view-changes","title":"View changes","text":"<pre><code>Various fixes. Update the following views to ensure compatibility\n</code></pre> <ul> <li>API_QueryStockDetail (spelling fix, LocactionType -&gt; LocationType)</li> <li>API_QueryStockTakeLines (add missing column, MasterItem.Description)</li> <li>API_QueryStockTakeLinesSummary (Change add columns Count1Qty, Count2Qty, Count3Qty)</li> <li>Integration_Transactions (fix only showing most recent IntegraitonLog entry for all failed transactions)</li> </ul>"},{"location":"database/release-notes/#stored-procedure-changes","title":"Stored Procedure changes","text":"<ul> <li>EmailTemplate (updated to maintain compatibility with GraniteScheduler)     <pre><code>INSERT INTO @Output (Name, Value)\nVALUES  ('RecipientList', @RecipientList),\n        ('CC', @CC),\n        ('BCC', @BCC),\n        ('Subject', @Subject),\n        ('Body', @Body),\n        ('BodyIsHtml', CAST(ISNULL(@BodyIsHtml, 0) as varchar)),\n        ('AttachmentPath', @AttachmentPath)\n\nSELECT * FROM @Output\n</code></pre>     changes to     <pre><code>SELECT  @RecipientList RecipientList, \n        @CC CC, \n        @BCC BCC, \n        @Subject [Subject], \n        @Body Body, \n        @BodyIsHtml BodyIsHtml, \n        @AttachmentPath AttachmentPath\n</code></pre></li> </ul>"},{"location":"database/release-notes/#default-process-scripts","title":"Default Process scripts","text":"<ul> <li>Fix DefaultAdjustmentProcess.sql incorrect process name for lookup values</li> <li>Fix DefaultQualityControlProcess.sql incorrect process name for lookup values</li> </ul>"},{"location":"database/release-notes/#miscellaneous","title":"Miscellaneous","text":""},{"location":"database/release-notes/#new","title":"New","text":"<ul> <li>Add older comparison scripts<ul> <li>CompareTables.sql</li> <li>CompareTablesAndViews.sql </li> </ul> </li> <li>Add data compare scripts<ul> <li>RowCountCompare.sql</li> <li>ViewCountCompare.sql</li> </ul> </li> <li>Add  .sql</li> <li>Add DropUnusedIndex.sql</li> <li>Add UnusedIndexes.sql</li> <li>Add ShowDBLocks.sql</li> </ul>"},{"location":"database/release-notes/#changes","title":"Changes","text":"<ul> <li>ColumnCompare.sql (<ul> <li>Add where clause example to include/exclude views)</li> <li>Add column isTable</li> </ul> </li> </ul>"},{"location":"database/release-notes/#evolutiondatabase","title":"EvolutionDatabase","text":""},{"location":"database/release-notes/#new_1","title":"New","text":"<ul> <li>Add Views and triggers for ScheduledJobs (still needs work)</li> </ul>"},{"location":"database/release-notes/#07-sep-2022-4210","title":"07 Sep 2022 (4.2.1.0)","text":"<pre><code>    Major release to support Audit and Versioning.\n    Add version column to all tables with audit functionality. \n    Document and DocumentDetail add columns to be used by integration to flag sync failures.\n    Several minor changes as listed below.\n</code></pre>"},{"location":"database/release-notes/#table-changes-add-version-column","title":"Table Changes Add Version column","text":"<pre><code>ALTER TABLE [Category] ADD [Version] SMALLINT NULL\n</code></pre> <pre><code>ALTER TABLE [Type] ADD [Version] SMALLINT NULL\n</code></pre> <p><pre><code>ALTER TABLE [TradingPartner] ADD [Version] SMALLINT NULL\n</code></pre> Add AuditDate, AuditUser also <pre><code>ALTER TABLE [ProcessMembers] \nADD [Version] SMALLINT NULL,\n    [AuditDate] DATETIME NULL, \n    [AuditUser] VARCHAR(20) NULL,\n</code></pre> <pre><code>ALTER TABLE [UserGroup] \nADD [Version] SMALLINT NULL,\n    [AuditDate] DATETIME NULL, \n    [AuditUser] VARCHAR(20) NULL,\n</code></pre></p> <p><pre><code>ALTER TABLE [Process] \nADD [Version] SMALLINT NULL,\n    [AuditDate] DATETIME NULL, \n    [AuditUser] VARCHAR(20) NULL,\n</code></pre> <pre><code>ALTER TABLE [ProcessStep] \nADD [Version] SMALLINT NULL,\n[AuditDate] DATETIME NULL ,\n[AuditUser] VARCHAR(20) NULL\n</code></pre></p>"},{"location":"database/release-notes/#table-changes-add-erpsyncfailed-erpsyncfailedreason","title":"Table changes Add ERPSyncFailed, ERPSyncFailedReason","text":"<pre><code>ALTER TABLE [Document]\nADD [ERPSyncFailed] BIT NOT NULL DEFAULT 0,\n[ERPSyncFailedReason] VARCHAR(500) NULL,\n[Version] SMALLINT NULL\n</code></pre> <pre><code>ALTER TABLE [DocumentDetail] \nADD [ERPSyncFailed] BIT NOT NULL DEFAULT 0,\n[ERPSyncFailedReason] VARCHAR(500) NULL,\n[Version] SMALLINT NULL\n</code></pre>"},{"location":"database/release-notes/#view-changes_1","title":"View Changes","text":"<pre><code>View changes below fixing various issues. Alteration on views required.\n</code></pre> <ul> <li>Add column MasterItem_id to the following views</li> <li>API_QueryInventoryVariance</li> <li>API_QueryInventoryVarianceDetail</li> <li>API_QueryStockDetail</li> <li>API_QueryStockTotals </li> <li> <p>API_QueryStockTotalsDetail</p> </li> <li> <p>Fix Integration_Transactions view</p> </li> <li> <p>Add clause to exclude CONSUME and Process.IntegrationIsActive. Also Exclude reversed transactions.</p> </li> <li> <p>Fix reversal views, don't show already reversed transactions </p> </li> <li>API_QueryTransactionsTransferReversal</li> <li>API_QueryTransactionsReceiveReversal</li> <li>API_QueryTransactionsPickReversal</li> </ul>"},{"location":"database/release-notes/#15-aug-2022","title":"15 Aug 2022","text":""},{"location":"database/release-notes/#view-changes_2","title":"View changes","text":""},{"location":"database/release-notes/#-add-masteritem-id-to-views-api_querystocktotalsdetail-api_querystocktotals-api_querystockdetail","title":"- Add masterItem ID to views. API_QueryStockTotalsDetail, API_QueryStockTotals, API_QueryStockDetail","text":""},{"location":"database/release-notes/#04-aug-2022-4200","title":"04 Aug 2022 (4.2.0.0)","text":"<p>Minor release for database changes in regards to future work. Release also include changes related to Function Stored Procedures</p>"},{"location":"database/release-notes/#systemsettings-new-data-entry","title":"SystemSettings new data entry","text":"<p>Setting to hold database version in SystemSettings table.</p> <pre><code>INSERT INTO SystemSettings ([Application], [Key], [Value], [Description], [isEncrypted], [isActive], AuditDate, AuditUser)\nVALUES ('GRANITE', 'DatabaseVersion', '4.2.0.0', 'Granite Database version', 0, 1, GETDATE(), 'AUTOMATION')\n</code></pre>"},{"location":"database/release-notes/#new-table-type","title":"New table type","text":"<p>ScriptInputIdentities new type used by Function stored procedures <pre><code>CREATE TYPE [dbo].[ScriptInputIdentities] AS TABLE(\n    [ID] [bigint] NOT NULL\n)\nGO\n</code></pre></p>"},{"location":"database/release-notes/#function-template","title":"Function Template","text":"<ul> <li>New example of Function stored procedure</li> </ul>"},{"location":"database/release-notes/#new-table","title":"New Table","text":"<ul> <li>Audit Table (usage of table for future release)</li> </ul>"},{"location":"database/release-notes/#27-july-2022","title":"27 July 2022","text":""},{"location":"database/release-notes/#data-changes","title":"Data changes","text":"<ul> <li>Add new processes for \"Menu\" groupings</li> <li>Default data entry in SystemSettings for GRANITESCHEDULER (ScheduleService)</li> <li>Scheduled job entry for InventorySnapshot (ScheduleService)</li> <li>Example EmailTemplate procedure</li> </ul>"},{"location":"database/release-notes/#view-changes_3","title":"View changes","text":"<ul> <li>API_QueryDocumentProgressDetail add UOM columns, add lineType for manufacturing</li> <li>SystemMetaData_View various improvements</li> </ul>"},{"location":"database/release-notes/#table-changes_2","title":"Table changes","text":"<ul> <li>Users add column AllowSystemSettings, AllowScheduledJobs, AllowSystemMetaData, AllowDataImport</li> <li>ScheduledJobs rename column JobParameter to StoredProcedure</li> </ul>"},{"location":"database/release-notes/#new-tables_4","title":"New Tables","text":"<ul> <li>SystemSettings</li> <li>ScheduledJobsHistory</li> <li>ScheduledJobInput</li> </ul>"},{"location":"database/release-notes/#stored-procs-changes","title":"Stored Procs changes","text":"<ul> <li>Job_Inventory_DailySnapShot remove dependency on Base view.</li> </ul>"},{"location":"database/release-notes/#30-june","title":"30 June","text":""},{"location":"database/release-notes/#process-and-steps-default","title":"Process and Steps default","text":"<ul> <li>Default Process and Steps data/setup improvements.</li> </ul>"},{"location":"database/release-notes/#new-views_3","title":"New Views","text":"<ul> <li>API_QueryStockReorder</li> <li>API_QueryStockReplenish</li> </ul>"},{"location":"database/release-notes/#new-function","title":"New function","text":"<ul> <li>FN_GetOptionalField</li> </ul>"},{"location":"database/release-notes/#07-june","title":"07 June","text":"<p>Documentation for Accpac, SAP, Evolution Tables. Path: \\Software Installs\\Granite\\Granite V3.4.4\\GraniteDatabase</p>"},{"location":"database/release-notes/#granitedatabase_4","title":"GraniteDatabase","text":""},{"location":"database/release-notes/#table-changes_3","title":"Table changes","text":"<ul> <li>Users, Name and Password not null</li> <li>Users, Name UNIQUE</li> <li>SystemMetaData, New column ProcessName</li> </ul>"},{"location":"database/release-notes/#view-changes_4","title":"View changes","text":"<ul> <li>API_QueryTransactionsPicking, add column ReversalTransaction_id</li> <li>API_QueryTransactionsReceiving, add column ReversalTransaction_id</li> <li>API_QueryTransactionsTransfer, add column ReversalTransaction_id</li> <li>API_QueryStockDetail, add columns MasterItem and Location Category and Type</li> <li>API_QueryStockTotals</li> <li>API_QueryDocumentProgressDetail</li> <li>API_QueryStockTakeLinesSummary</li> </ul>"},{"location":"database/release-notes/#new-function_1","title":"New function","text":"<ul> <li>SSRS_ParameterSplit, function used by SSRS reports to split comma delimited string</li> </ul>"},{"location":"database/release-notes/#sapb1","title":"SAPB1","text":"<ul> <li>IntegrationProcessSalesOrder - Added Unit of Measure, Comment to lines, Changed Status on the Temporary Table from bit to varchar.</li> <li>Created Queue stored proc for Transfer Requests</li> <li>Created Process stored proc for Transfer Requests</li> </ul>"},{"location":"database/release-notes/#accpac","title":"ACCPAC","text":""},{"location":"database/release-notes/#stored-proc-changes","title":"Stored Proc Changes","text":"<ul> <li>IntegrationProcessTransfer, Tweaks to the TransferIntegration for Sage Accpac. Mainly to deal with Intransit Receipt Document</li> <li>IntegrationProcessPurchaseOrder. Update Granite document isActive</li> <li>IntegrationProcessSalesOrder. Update Granite document isActive</li> </ul>"},{"location":"database/release-notes/#new-stored-proc","title":"New Stored Proc","text":"<p>Downwards integration for Supplier Returns - New IntegrationProcessSupplierReturn, TriggerGraniteSupplierReturn</p>"},{"location":"database/release-notes/#20-may-2022","title":"20 May 2022","text":""},{"location":"database/release-notes/#granitedatabase_5","title":"GraniteDatabase","text":""},{"location":"database/release-notes/#view-changes_5","title":"View changes","text":"<ul> <li>Integration_Transactions, exclude SPLIT transaction type, should not integrate. AND (dbo.[Transaction].Type != 'SPLIT')</li> <li>SystemMetaData_View, various fixes</li> <li>ProcessStepLookup_View, distinct UNION to exclude double entries</li> </ul>"},{"location":"database/release-notes/#18-may-2022","title":"18 May 2022","text":""},{"location":"database/release-notes/#granitedatabase_6","title":"GraniteDatabase","text":""},{"location":"database/release-notes/#new-table_1","title":"New table","text":"<ul> <li>ScheduledJobs     <pre><code>[ID] BIGINT NOT NULL PRIMARY KEY IDENTITY,\n[isActive] [bit] NOT NULL,\n[JobName] [varchar](50) NOT NULL UNIQUE,\n[JobDescription] [varchar](100) NULL,\n[Type] [varchar](50) NULL,\n[JobParameter] [varchar](100) NULL,\n[Interval] [varchar](50) NULL,\n[IntervalFormat] [varchar](50) NULL,\n[Status] [varchar](50) NULL,\n[LastExecutionTime] [datetime] NULL,\n[LastExecutionResult] [varchar](50) NULL,\nAuditDate datetime NULL,\nAuditUser varchar(20) NULL\n</code></pre></li> </ul>"},{"location":"database/release-notes/#table-changes_4","title":"Table changes","text":"<ul> <li>Users AllowBulkScrap &amp; AllowBulkMove DEFAULT 0</li> <li>TradingPartner not null constraint on Code, Description, DocumentType</li> <li>TradingPartner Code increase to 50</li> <li>Table SystemSettings add column Application     <pre><code>[Application] VARCHAR(50) NOT NULL\n</code></pre></li> </ul>"},{"location":"database/release-notes/#view-changes_6","title":"View changes","text":"<ul> <li>API_QueryStockTakeLines add missing recommendation</li> <li>API_QueryPickslipLines added in Comment and Instruction and missing fields    </li> <li>API_QueryTransactions add FromBarcode</li> </ul>"},{"location":"database/release-notes/#13-may-2022","title":"13 May 2022","text":""},{"location":"database/release-notes/#view-changes-alter-views","title":"View Changes (alter views)","text":"<ul> <li>API_QueryStockTakeLines: Add recommendation for Count1,2,3 match</li> </ul>"},{"location":"database/release-notes/#05-may-2022","title":"05 May 2022","text":""},{"location":"database/release-notes/#view-changes-alter-views_1","title":"View Changes (alter views)","text":"<p>Should be safe at this stage to re-create all API_* views for existing clients (upgrades) - API_QueryDocumentProgress: Add column TradingPartnerCode, ExpectedDate.  - API_QueryDocumentProgress, API_QueryDocument: Include completed documents with audit date in last 14 / 30 days - API_QueryStockTakeLinesSummary. Change join from Barcode to ID on TrackingEntity Table - API_QueryStockTakeLines. Change join from Barcode to ID on TrackingEntity Table - API_QueryUserGroups, Add Users columns</p>"},{"location":"database/release-notes/#table-document-add-columns","title":"Table Document add columns","text":"<pre><code>Route varchar(30) \nStop varchar(30) \nAssignedTo varchar(250)\n</code></pre>"},{"location":"database/release-notes/#table-document-change-column","title":"Table Document change column","text":"<pre><code>TradingPartnerDescription varchar(250)\n</code></pre>"},{"location":"database/release-notes/#table-tradingpartner-change-column","title":"Table TradingPartner change column","text":"<pre><code>Description varchar(250)\n</code></pre>"},{"location":"database/release-notes/#table-custom_documenttrackinglog-change-column","title":"Table custom_DocumentTrackingLog change column","text":"<pre><code>Comment varchar(250)\n</code></pre>"},{"location":"database/release-notes/#table-custom_documenttrackinglog-add-column","title":"Table custom_DocumentTrackingLog add column","text":"<pre><code>Process varchar(50) \nAdditionalData varchar(250)\n</code></pre>"},{"location":"database/release-notes/#table-stocktakelines-add-columns","title":"Table StockTakeLines add columns","text":"<pre><code>OpeningLocationERP varchar(15)\nMasterItemCode varchar(40)\n</code></pre>"},{"location":"database/release-notes/#31-mar-2022","title":"31 Mar 2022","text":""},{"location":"database/release-notes/#table-stocktakelines-add-column","title":"Table StockTakeLines Add column","text":"<pre><code>TrackingEntity_id bigint\n</code></pre>"},{"location":"database/release-notes/#views-new","title":"Views New","text":"<ul> <li>SystemMetaData_View</li> </ul>"},{"location":"database/release-notes/#25-mar-2022","title":"25 Mar 2022","text":""},{"location":"database/release-notes/#table-masteritemalias","title":"Table MasterItemAlias","text":"<ul> <li>Change column Code type to VARCHAR(50)</li> </ul>"},{"location":"database/release-notes/#23-mar-2022","title":"23 Mar 2022","text":""},{"location":"database/release-notes/#table-functionparameter-add-column","title":"Table FunctionParameter Add column","text":"<pre><code>isBool bit\n</code></pre>"},{"location":"database/release-notes/#08-mar-2022","title":"08 Mar 2022","text":"<p>Table FunctionParameterLookup Add column  <pre><code>isActive bit\n</code></pre></p>"},{"location":"database/release-notes/#table-functionparameterlookup","title":"Table FunctionParameterLookup","text":"<ul> <li>Rename column Function to FunctionName</li> <li>Rename column Description to ParameterName</li> </ul>"},{"location":"database/release-notes/#new-views_4","title":"New Views","text":"<ul> <li>FunctionParameterLookup_View</li> </ul>"},{"location":"database/release-notes/#changed-views_6","title":"Changed Views","text":"<ul> <li>API_QueryDocumentProgressDetail change lineNumber to bigint</li> <li>API_QueryTransactionsPickReversal</li> <li>API_QueryTransactionsReceiveReversal</li> <li>API_QueryTransactions</li> </ul>"},{"location":"database/release-notes/#27-feb-2022","title":"27 Feb 2022","text":""},{"location":"database/release-notes/#new-views_5","title":"New Views","text":"<ul> <li>API_QueryTransactionsTransferReversal</li> <li>API_QueryStockTakeCriteria</li> </ul>"},{"location":"database/release-notes/#changed-views_7","title":"Changed Views","text":"<ul> <li>App_Outbound_Packing where clause for type incorrect.</li> <li>API_QueryStockDetail. Rename columns MasterItemCode and MasterItemDescription to Code and Description</li> <li>API_QueryTransactions. Add column LineNumber</li> <li>API_QueryPickslipLines. Add column SalesOrderLine </li> <li>API_QueryStockTotalsDetail, API_QueryStockTotals. Exclude Non stock location</li> <li>API_QueryStockDetail. Rename columns MasterItemCode and MasterItemDescription to Code    and Description</li> <li>API_QueryDocumentProgress add column document description</li> </ul>"},{"location":"database/release-notes/#table-transaction-add-column","title":"Table Transaction add column","text":"<pre><code>LinkedTransaction_id bigint NULL\n</code></pre>"},{"location":"database/release-notes/#table-documentdetail-update-columns","title":"Table DocumentDetail Update columns","text":"<pre><code> LineNumber varchar(50)\n Comment varchar(250)\n ```\n\n### Table StockTakeSession add column \n```sql\nSite varchar(30) NULL\n</code></pre>"},{"location":"database/release-notes/#table-processstep-data","title":"Table ProcessStep data","text":"<ul> <li>Add step DocumentReference to all standard Document Post processes</li> </ul>"},{"location":"database/release-notes/#accpac_1","title":"Accpac:","text":""},{"location":"database/release-notes/#stored-procs-new-fixes","title":"Stored Procs New &amp; Fixes","text":"<ul> <li>Fix IntegrationProcessTransfer. Receipt qty fetch from ICTRID</li> <li>New Upwards integration scripts Accpac IC / Assemblies.</li> <li>IntegrationProcessTransfer add no lock</li> <li>IntegrationProcessSalesOrder add no lock</li> <li>IntegrationProcessPurchaseOrder add no lock</li> </ul>"},{"location":"database/release-notes/#22-nov-2021","title":"22 Nov 2021","text":""},{"location":"database/release-notes/#table-users-new-columns","title":"Table Users new columns","text":"<pre><code>[AllowBulkScrap] bit NOT NULL\n[AllowBulkMove] bit NOT NULL\n</code></pre>"},{"location":"database/release-notes/#10-nov-2021","title":"10 Nov 2021","text":""},{"location":"database/release-notes/#execute-script-to-add-previous-data-for-documents","title":"EXECUTE Script to add previous Data for Documents:","text":"<pre><code>INSERT INTO TradingPartner (Code,[Description],[Name], DocumentType, AuditDate, AuditUser)\nSELECT DISTINCT TradingPartnerCode, TradingPartnerDescription, TradingPartnerCode, [Type], getdate(), 'INTEGRATION'\nFROM Document WHERE TradingPartnerCode NOT IN (SELECT Code FROM TradingPartner)\n</code></pre>"},{"location":"database/release-notes/#accpac_2","title":"Accpac:","text":""},{"location":"database/release-notes/#update-stored-procs-to-insert-trading-partner","title":"Update Stored procs to insert trading partner:","text":"<ul> <li>IntegrationProcessPurchaseOrder </li> <li>IntegrationProcessSalesOrder </li> </ul>"},{"location":"database/release-notes/#pastel-evo","title":"Pastel Evo:","text":""},{"location":"database/release-notes/#update-stored-procs-to-insert-trading-partner_1","title":"Update Stored procs to insert trading partner:","text":"<ul> <li>IntegrationProcessPurchaseOrder </li> <li>IntegrationProcessSalesOrder </li> </ul>"},{"location":"database/release-notes/#sap-b1","title":"SAP B1:","text":""},{"location":"database/release-notes/#update-stored-procs-to-insert-trading-partner_2","title":"Update Stored procs to insert trading partner:","text":"<ul> <li>GranitePurchaseOrder </li> <li>GraniteSalesOrder </li> </ul>"},{"location":"database/release-notes/#3-november-2021","title":"3 November 2021","text":""},{"location":"database/release-notes/#table-tradingpartner-new-columns","title":"Table TradingPartner new columns","text":"<pre><code>DocumentType \nAuditDate \nAuditUser\n</code></pre>"},{"location":"database/release-notes/#table-tradingpartner-rename-column-name-to-description","title":"Table TradingPartner rename column Name to Description","text":""},{"location":"database/release-notes/#table-users-new-column","title":"Table Users new column","text":"<p><pre><code>AllowTradingPartner \n</code></pre> Table Document new column  <pre><code>ExpectedDate\n</code></pre></p>"},{"location":"database/release-notes/#new-view","title":"New View","text":"<ul> <li>API_QueryTradingPartners</li> </ul>"},{"location":"database/release-notes/#update-view-api_querylocations-remove-0-qty-trackingentities","title":"Update view API_QueryLocations remove 0 qty trackingentities","text":""},{"location":"database/release-notes/#data-table-type","title":"Data Table Type","text":"<ul> <li>Rename document types to INTRANSIT and RECEIPT</li> </ul>"},{"location":"database/release-notes/#06-oct-2021","title":"06 Oct 2021","text":""},{"location":"database/release-notes/#table-transaction-new-columns","title":"Table Transaction new columns","text":"<pre><code>[ReversalTransaction_id] BIGINT NULL\n</code></pre>"},{"location":"database/release-notes/#table-documentdetail-new-columns","title":"Table DocumentDetail new columns","text":"<pre><code>[ReversalAuditUser] VARCHAR(20) NULL\n[ReversalAuditDate] DATETIME NULL\n</code></pre>"},{"location":"database/release-notes/#data-table-status","title":"Data Table Status","text":"<ul> <li>Rename status CANCELED to CANCELLED</li> </ul>"},{"location":"database/release-notes/#data-table-type_1","title":"Data Table Type","text":"<ul> <li>Add transaction type TRANSACTIONREVERSAL</li> </ul>"},{"location":"database/release-notes/#new-views_6","title":"New Views","text":"<ul> <li>API_QueryTransactionsReceiveReversal</li> <li>API_QueryTransactionsPickReversal</li> </ul>"},{"location":"database/release-notes/#07-sep-2021","title":"07 Sep 2021","text":""},{"location":"database/release-notes/#new-sql-views","title":"New Sql Views","text":"<ul> <li>API_QueryTransactionsPicking</li> <li>API_QueryTransactionsReceiving </li> <li>API_QueryTransactionsManufacture </li> <li>API_QueryTransactionsTransfer</li> </ul>"},{"location":"database/release-notes/#06-sep-2021","title":"06 Sep 2021","text":""},{"location":"database/release-notes/#table-process-change-column-integrationmethod-varchar-20-to-50","title":"Table Process change column IntegrationMethod - Varchar 20 to 50","text":"<pre><code>[IntegrationMethod] VARCHAR(50) NULL\n</code></pre>"},{"location":"database/release-notes/#table-stocktakelines-new-columns","title":"Table StockTakeLines new columns","text":"<pre><code>[MasterItem_id] BIGINT NULL\n</code></pre>"},{"location":"database/release-notes/#pastelevo-database","title":"PastelEVO Database","text":""},{"location":"database/release-notes/#add-scripts-for-pastel-transfer","title":"Add scripts for Pastel Transfer","text":"<p>Note the previous and still supported \u201ctransfer\u201d moved to IntransitTransfer.</p>"},{"location":"database/release-notes/#fix-stored-proc-integrationprocessworkorder-collate-issue","title":"Fix Stored Proc IntegrationProcessWorkOrder - collate issue","text":"<pre><code>...\\PastelEVOIntegration\\WorkOrder\\IntegrationProcessWorkOrder.sql\n</code></pre>"},{"location":"database/release-notes/#20-july-2021","title":"20 July 2021","text":"<ul> <li>New user AUTOMATION and UserGroup SYSTEM. Use when you have external applications, scripts, excel etc performing data alterations.</li> <li>Change: API_QueryDocumentProgress increase decimal point on progress percentage.</li> <li>Change: Table IntegrationLog column LogOrigin from varchar 20 to 50</li> <li>New: Add table FunctionParamaterLookup.</li> <li>Change: Table InventoryDailyBalanace add columns ERPSTDCOST and ERPLASTCOST.</li> <li>Change: API_QueryDocumentProgressDetail add Instruction and Comment column.</li> <li>Change: API_QueryProcesses add Prescripts column.</li> <li>Change: API_QueryDocumentProgress add TradingPartnerCode and Description. </li> <li>Change: API_QueryDocuments add InetgrationReference column. Add order by ID.</li> <li>Change/Alter: ProcessStepLookupDynamic table change identity seed to 100000.</li> <li>Change: Location table, Columns Name and Barcode length changed from 30 to 50.</li> <li>New: IntegrationMethodExample.sql \u2013 example stored procedure of how to implement custom integration stored proc.</li> <li>New Table ProcessStepLookupDynamic</li> <li>Change: ProcessStepLookup_View include data from ProcessStepLookupDynamic</li> <li>Add TRANSFERDYNAMICPOST process and process step.</li> </ul>"},{"location":"database/release-notes/#31-march-2021","title":"31 March 2021","text":""},{"location":"database/release-notes/#new-process-data-stocktakecount","title":"New Process Data StockTakeCount","text":"<pre><code>...\\Process\\DefaultStockTakeCountProcess.sql\n</code></pre>"},{"location":"database/release-notes/#new-process-data-returnpost","title":"New Process Data ReturnPost","text":"<pre><code>...\\Process\\DefaultDocumentPostProcesses.sql (RETURNPOST entry)\n</code></pre>"},{"location":"database/release-notes/#16-march-2021","title":"16 March 2021","text":""},{"location":"database/release-notes/#table-processsteplookup-new-columns","title":"Table ProcessStepLookUp new columns","text":"<pre><code>[UserName] VARCHAR(20) NULL\n</code></pre>"},{"location":"database/release-notes/#view-processsteplookup_view-new-columns","title":"View ProcessStepLookUp_View new columns","text":"<pre><code>[UserName]\n</code></pre>"},{"location":"database/release-notes/#1-march-2021","title":"1 March 2021","text":"<ul> <li>Add API views (web desktop) to create script execution</li> <li>Update view API_QueryTrackingEntities, add calculated column for TrackingEntity status</li> </ul>"},{"location":"database/release-notes/#10-jan-2021","title":"10 Jan 2021","text":""},{"location":"database/release-notes/#table-users-new-columns_1","title":"Table Users new columns","text":"<pre><code>[AllowProcess] BIT NULL DEFAULT 1\n[AllowUserGroups] BIT NULL DEFAULT 1\n</code></pre>"},{"location":"database/release-notes/#table-documentdetail-new-columns_1","title":"Table DocumentDetail new columns","text":"<pre><code>[LinePriority] int NULL \n[Instruction] VARCHAR(250) NULL\n</code></pre>"},{"location":"database/release-notes/#new-process-data-custom","title":"New Process Data Custom","text":"<pre><code>\u2026\\Process\\DefaultCustomProcess.sql (example)\n</code></pre>"},{"location":"iis/getting-started/","title":"IIS","text":"<p>IIS is the web server that is used for hosting all of Granite's APIs and applications. Once you've followed the steps below to install and configure IIS, you'll be ready to set up any of the Granite applications and APIs.</p>"},{"location":"iis/getting-started/#install","title":"Install","text":"<ol> <li> <p>From the control panel, select Programs and then click on Turn Windows Features on or off:</p> <p></p> </li> <li> <p>Go through the dialog that pops up to select the features shown below</p> Windows DesktopWindows Server <p>On desktop versions of Windows, select the following features under <code>Internet Information Services</code> and click OK:</p> <p></p> <p>On windows server editions, the Server Manager page pops up instead. Click next until you get to the Server Roles page:</p> <p></p> <p>Select these features under Web Server, then go to the next page and click install.</p> </li> <li> <p>Install the IIS URL Rewrite Module</p> </li> <li> <p>Install the latest ASP.NET Core Runtime 6 and 8 hosting bundles</p> <ul> <li>ASP.NET Core 8</li> <li>ASP.NET Core 6</li> </ul> <p></p> </li> </ol>"},{"location":"iis/getting-started/#creating-certificates","title":"Creating Certificates","text":"<p>Certificates are needed to host secured sites in IIS over https.  Most Granite applications and apis require this, so we will need to create a certificate for them to use. They can all use the same certificate, so you do not need to create multiple.</p> <p>Be sure to follow the correct section below based on the operating system of the machine you are installing on - older versions of Windows require some extra steps.</p>"},{"location":"iis/getting-started/#windows-10-server-2016-and-up","title":"Windows 10 / Server 2016 and up","text":"<p>On the server, open <code>PowerShell ISE</code> as Administrator and paste the following into a new script window</p> <pre><code>$FriendlyName = 'GraniteWMS'  # Give your certificate a name\n$ServerName = 'appsrv01.domain.local'  # Server name. This can also be just appsrv01\n$IPAddress = '192.168.0.168'  # Server IP address\n$ExportPath = \"C:\\GraniteInstalls\\$FriendlyName.cer\"  # Path to save certificate to\n\n# Create a new self-signed certificate with DNS and IP SAN\nNew-SelfSignedCertificate -Subject $IPAddress -CertStoreLocation \"cert:\\LocalMachine\\My\" -FriendlyName $FriendlyName  -TextExtension @(\"2.5.29.17={text}dns=$ServerName &amp;ipaddress=$IPAddress\") \n\n#Get Cert Thumbprint\n$Cert = Get-ChildItem -Path Cert:LocalMachine\\MY | Where-Object {$_.FriendlyName -Match $FriendlyName} | Select-Object Thumbprint\n$Thumbprint = $Cert.Thumbprint\n\n#Copy Cert to file\nExport-Certificate -Cert (Get-Item Cert:\\LocalMachine\\My\\$Thumbprint) -FilePath $ExportPath\n</code></pre> <p>Set your variables on the first four lines and execute the script. Ensure that the <code>$FriendlyName</code> is a unique name for the certificate - there must not be any other certificates in the store with the same name. It should look like this if all has worked:</p> <p></p> <p>You should now be able to select the certificate in IIS's Edit Bindings screen:</p> <p></p> <p>If you don't see the certificate you've just created in the dropdown, find it in the folder it exported to and double click it and select install. Be sure to install to the Local Machine store, and on the next page click browse and select the Personal store.</p> <p>If your certificate is still not available in IIS, please reach out to the development team for assistance.</p>"},{"location":"iis/getting-started/#windows-81-server-2012-r2-and-below","title":"Windows 8.1 / Server 2012 R2 and below","text":"<p>On older versions of Windows you need to create the certificate on your own machine and then import it on the server.</p> <p>On YOUR MACHINE, open <code>PowerShell ISE</code> as Administrator and paste the following into a new script window.</p> <pre><code>$FriendlyName = 'GraniteWMS'  # Give your certificate a name\n$ServerName = 'appsrv01.domain.local'  # Server name. This can also be just appsrv01\n$IPAddress = '192.168.0.168'  # Server IP address\n$ExportPath = \"C:\\GraniteInstalls\\$FriendlyName.cer\"  # Path to save certificate to\n\n# Create a new self-signed certificate with DNS and IP SAN\nNew-SelfSignedCertificate -Subject $IPAddress -CertStoreLocation \"cert:\\LocalMachine\\My\" -FriendlyName $FriendlyName  -TextExtension @(\"2.5.29.17={text}dns=$ServerName &amp;ipaddress=$IPAddress\") \n\n#Get Cert Thumbprint\n$Cert = Get-ChildItem -Path Cert:LocalMachine\\MY | Where-Object {$_.FriendlyName -Match $FriendlyName} | Select-Object Thumbprint\n$Thumbprint = $Cert.Thumbprint\n\n#Copy Cert to file\nExport-Certificate -Cert (Get-Item Cert:\\LocalMachine\\My\\$Thumbprint) -FilePath $ExportPath\n</code></pre> <p>Set your variables on the first four lines and execute the script. Ensure that the <code>$FriendlyName</code> is a unique name for the certificate - there must not be any other certificates in the store with the same name. It should look like this if all has worked:</p> <p></p> <p>Now search the start menu for <code>Manage computer certificates</code> and open it. Under Personal certificates you should see the certificate you have just created:</p> <p></p> <p>Right click it, and under All Tasks, select Export. Click Next and ensure you select <code>Yes, export the private key</code>:</p> <p></p> <p>On the next screen ensure you select the following:</p> <p></p> <p>On the next page, enter and confirm a password:</p> <p></p> <p>Lastly you will be prompted for a path to save the certificate to. Browse to where you want to save it and give it a name, then finish going through the export wizard.</p> <p>You should now have a <code>.pfx</code> file in the directory you selected with the name you entered.</p> <p>Copy the <code>.pfx</code> file to the server and double click it to install.</p> <p>Ensure you select <code>Local Machine</code>:</p> <p></p> <p>Click next until you get to a page prompting you for the password you set when exporting the certificate. Enter the password and be sure to select the Include all extended properties checkbox:</p> <p></p> <p>On the next page ensure you select the Personal certificate store, then finish going through the wizard.</p> <p>Your certificate should now be selectable from the IIS bindings edit screen:</p> <p></p>"},{"location":"iis/getting-started/#troubleshooting","title":"Troubleshooting","text":"Export-Certificate : The system cannot find the path specified <p>If you get this error it means that the path that the folder that you have specified in the <code>$ExportPath</code> variable does not exist. Make sure to create the folder you want to place the certificate in before you run the PowerShell script.</p> <p>Once you've created the folder to export to, you can comment out the part of the PowerShell script that creates the certificate to just run the export part.</p> Get-Item : Cannot find path 'Cert:\\LocalMachine\\My\\...' <p>Looking at the below screenshot you'll see that there are multiple thumbprints after <code>Cert:\\LocalMachine\\My\\</code></p> <p></p> <p>This happens when you have multiple certificates installed to the store with the same FriendlyName. The script needs a unique Friendly name to find the correct certificate.</p> <p>You can end up with multiple certificates named the same when the script has successfully created and installed the certificate but failed to export it, and you run the entire script again. </p> <p>You can remove unused certificates from the <code>Manage computer certificates</code> explorer by right clicking them and deleting. Try to ensure when you create a new certificate that you are giving it a unique name to prevent this from happening.</p>"},{"location":"iis/getting-started/#adding-a-site-to-iis","title":"Adding a site to IIS","text":"<p>Before you add your site to IIS, ensure that you have configured the relevant <code>appsettings.json</code> or <code>web.config</code> file as per the application's installation guide</p> <p>To add a site to IIS, open the IIS Manager and right click the Sites folder to select <code>Add Website</code>: </p> <p>In the dialogue enter relevant settings for your application. </p> <ul> <li>Site name is the name that will be used in IIS for this website.</li> <li>Physical path is where the application folder actually is</li> <li> <p>Binding settings determine the url that your application will be accessible at.  You should use either the host name or the IP address of the machine that you are installing on.  This ProcessApp will be accessible at <code>https://josh-laptop:40086</code></p> <p>Note</p> <p>Because we need the ProcessApp to use https, we have to select a SSL certificate that we have previously created. If we are adding a http site, there is no option to select an SSL certificate</p> </li> </ul> <p></p> <p>Once you click OK, you will see your site is available in IIS:</p> <p></p>"},{"location":"integration/_TEMPLATE_integration_provider_structure/","title":"Integration Provider Documentation Template","text":"<p>This template provides the standard structure and content guidelines for creating documentation for new integration providers in the Granite ecosystem.</p>"},{"location":"integration/_TEMPLATE_integration_provider_structure/#folder-structure","title":"Folder Structure","text":"<p>For each new integration provider, create the following folder structure:</p> <pre><code>docs/integration/{provider_name}/\n\u251c\u2500\u2500 index.md                    # Main overview/entry point\n\u251c\u2500\u2500 integration-jobs.md         # Scheduler jobs documentation  \n\u251c\u2500\u2500 sdk-provider.md             # Integration Service provider documentation\n\u251c\u2500\u2500 {provider_name}-overview.md # ERP entities/objects overview (optional)\n\u251c\u2500\u2500 {provider_name}-img/        # Images folder\n\u2502   \u251c\u2500\u2500 {provider_name}-logo.png\n\u2502   \u2514\u2500\u2500 [other relevant screenshots/diagrams]\n\u2514\u2500\u2500 [additional specific files as needed]\n</code></pre>"},{"location":"integration/_TEMPLATE_integration_provider_structure/#file-templates","title":"File Templates","text":""},{"location":"integration/_TEMPLATE_integration_provider_structure/#1-indexmd-main-entry-point","title":"1. index.md (Main Entry Point)","text":"<pre><code># {Provider Name}\n\n[Optional: Note if documentation is work in progress]\n!!! note\n    This documentation is a work in progress and is intended to show the development progress of the integration with {Provider Name}. As such, it may be subject to change as progress is made.\n\nThis document contains all of the information needed to set up and configure integration with {Provider Name}.\nThere are two parts to the complete integration solution:\n\n- The [SDK Provider](sdk-provider.md) is used by the Integration Service to map transactions performed in Granite to the relevant format for {Provider Name}.\n\n- The [integration jobs](integration-jobs.md) are used by the [Scheduler](../../scheduler/manual.md) to pull {Provider Name}'s documents, item codes, and trading partners into Granite.\n\n[If overview exists] To get an overview of the {Provider Name} entities/objects that are used in integration see [{Provider Name} Overview]({provider_name}-overview.md)\n\n[Optional: External Resources section for additional links]\n### External Resources\n- [Relevant external documentation links]\n</code></pre>"},{"location":"integration/_TEMPLATE_integration_provider_structure/#2-integration-jobsmd-scheduler-jobs","title":"2. integration-jobs.md (Scheduler Jobs)","text":"<pre><code># Integration Jobs\n\nIntegration jobs are a special type of [Scheduler](../../scheduler/manual.md) job called [injected jobs](../../scheduler/manual.md#injected-jobs-integration-jobs). \nSee below for information for specifics on how document and master data jobs work\n\n## Supported document types \n&lt;div class=\"grid cards\" markdown&gt;\n\n-   ORDER\n    ---\n    {Provider Name} type: [ERP equivalent type]\n\n-   RECEIVING\n    ---\n    {Provider Name} type: [ERP equivalent type]\n\n-   TRANSFER\n    ---\n    {Provider Name} type: [ERP equivalent type]\n\n-   [Add other supported types as needed]\n\n&lt;/div&gt;\n\n## How it works\n### Document Jobs\n[Describe how the integration fetches documents - API endpoints, queries, etc.]\n\n[Describe the workflow: checking lastUpdated times, fetching documents, updating Granite]\n\n[Explain error handling and logging]\n\n#### Document Statuses\n[If applicable, include status mapping tables]\n\nFor [Document Type] the statuses are mapped in the following way:\n\n| {Provider Name} Status | Granite Status | \n|------------------------|----------------|\n| [Status 1] | [Mapped Status] |\n| [Status 2] | [Mapped Status] |\n\n### Master data jobs\n[Describe how MasterItems and TradingPartners are synced]\n\n## Install \n\n### Set up database triggers, views, and data\nRun the `{ProviderName}IntegrationJobs_Create.sql` script to insert the required SystemSettings and ScheduledJob table entries needed. \nYou can then just activate the Scheduled Jobs that are needed.\n\n[Describe any specific SystemSettings and their purposes]\n\n#### SystemSettings\n\n##### [Setting Name 1]\n[Description and screenshots if needed]\n\n##### [Setting Name 2]\n[Description and screenshots if needed]\n\n### Add the Injected job files to GraniteScheduler\nTo add the injected job files to the GraniteScheduler, simply copy the dlls and xml files into the root folder of GraniteScheduler.\n\n## Configure\n\n### Schedule configuration\nSee the GraniteScheduler manual for the details on how to [configure injected jobs](../../scheduler/manual.md#injected-jobs-integration-jobs).\nMost of the work will have already been done for you by the `{ProviderName}IntegrationJobs_Create.sql` script, you can simply activate the jobs you want to run.\n\n### Email on Error\n\n!!! note\n    Emailing functionality is now handled by the [Custodian API](../../custodian-api/index.md), set up has changed from previous versions.\n\nEnsure that you have configured the CustodianApiUrl for the Scheduler in the `SystemSettings` table:\n\n| Application | Key | Value |\n|---|---|---|\n| GraniteScheduler | CustodianApiUrl | https://localhost:5001/ |\n\nEnsure you have the `IntegrationError` email template in your database. This is the email template that is used for all error notifications in these injected jobs. \n\nThen for each job that needs to send failure notifications, add a job input for `MailOnError` and `MailOnErrorToAddresses`:\n\n| JobName | Name | Value |\n| --- | --- | --- |\n| &lt; JobName goes here &gt; | MailOnError | true |\n| &lt; JobName goes here &gt; | MailOnErrorToAddresses | name@client.co.za;name2@client.co.za |\n</code></pre>"},{"location":"integration/_TEMPLATE_integration_provider_structure/#3-sdk-providermd-integration-service-provider","title":"3. sdk-provider.md (Integration Service Provider)","text":"<pre><code># SDK Provider\n\nThe {Provider Name} SDK provider is responsible for mapping Granite Transactions to the relevant format for posting to {Provider Name}. It makes use of the {Provider Name} [API type - REST API/SOAP/etc.].\n\n## How it connects\n[Describe the connection method and any overview documents]\n\n## Setup\n\n1. **Copy** everything in the `Providers\\\\{ProviderName}` folder into Integration Service folder (root folder).\n\n2. Ensure `SDKProvider.xml` setup or copied correctly\n    ```xml\n    &lt;module name=\"Provider\"&gt;\n    &lt;bind\n        service=\"Granite.Integration.Contract.IProvider, Granite.Integration.Contract\"\n        to=\"Granite.Integration.{ProviderName}.Provider, Granite.Integration.{ProviderName}\"/&gt;\n    &lt;/module&gt;\n    ```\n\n3. Configure your connection string and endpoint in the `Granite.Integration.Web.exe.config` file\n\n## Settings\n\n!!! note\n    To pick up any changes to the SystemSettings table, the IntegrationService will need to be restarted. \n\nThe settings for {Provider Name} are configured in the SystemSettings table. The IntegrationService will pick up the settings using the Application name specified in it's `.config` file:\nIf this setting is missing from the config file or left empty, the IntegrationService will default to using `{ProviderName}` as the SystemSettingsApplicationName.\nYou can browse the IntegrationService's `/config` page to have the IntegrationService create the default settings in the SystemSettings table for you.\n\n### Config File Settings\n\n```xml\n    &lt;add key=\"SystemSettingsApplicationName\" value=\"{ProviderName}\" /&gt;\n    &lt;add key=\"EndPoint\" value=\"[Default endpoint URL]\" /&gt;\n</code></pre>"},{"location":"integration/_TEMPLATE_integration_provider_structure/#systemsettingsapplicationname","title":"SystemSettingsApplicationName","text":"<p>The Application name of the entries in the SystemSettings table that you want to use for this integration service. If this setting is the same as Application name for the ScheduledJobs they can use the same SystemSettings.</p> <p>This setting allows you to have multiple integration services running with different settings.</p>"},{"location":"integration/_TEMPLATE_integration_provider_structure/#provider-name-settings","title":"{Provider Name} Settings","text":"<p>[Describe any ERP-specific configuration requirements]</p>"},{"location":"integration/_TEMPLATE_integration_provider_structure/#integration-methods","title":"Integration Methods","text":"<p>By default if the method names below is the same as a Granite Transaction type, it will autowire the integration.  If you require a different integration action you can specify the name below in the Process IntegrationMethod property.</p> <p>[For each integration method, follow this pattern:]</p>"},{"location":"integration/_TEMPLATE_integration_provider_structure/#method_name","title":"[METHOD_NAME]","text":"<ul> <li>Granite Transaction: [GRANITE_TYPE]</li> <li>{Provider Name}: [ERP_EQUIVALENT]</li> <li>Supports:<ul> <li>[Feature 1 - e.g., Lot]</li> <li>[Feature 2 - e.g., Serial]</li> </ul> </li> <li>Integration Post<ul> <li>False - [Behavior when Integration Post is false]</li> <li>True - [Behavior when Integration Post is true]</li> </ul> </li> <li>Returns:     [What is returned to Granite]</li> </ul> Granite {Provider Name} Entity Required Behavior [Granite Field] [ERP Field] Y/N [Special behavior notes] <p>[Include screenshots if needed to illustrate the integration]</p> <p>[Continue for all supported integration methods...] <pre><code>### 4. {provider_name}-overview.md (Optional - ERP Objects Overview)\n```markdown\n# {Provider Name} Overview\n\nThis document provides an overview of the {Provider Name} entities and objects that are used in the Granite integration.\n\n## Documents\n\n### [Document Type 1]\n[Description of the document type and how it's used]\n\n### [Document Type 2]\n[Description of the document type and how it's used]\n\n## Master Data\n\n### Items/Products\n[How items are structured in the ERP]\n\n### Trading Partners\n[How customers/vendors are structured in the ERP]\n\n### Warehouses/Locations\n[How locations are structured in the ERP]\n\n## Additional Entities\n[Any other relevant entities specific to this ERP]\n</code></pre></p>"},{"location":"integration/_TEMPLATE_integration_provider_structure/#content-guidelines","title":"Content Guidelines","text":""},{"location":"integration/_TEMPLATE_integration_provider_structure/#writing-style","title":"Writing Style","text":"<ul> <li>Use clear, concise language</li> <li>Include relevant screenshots with descriptive filenames</li> <li>Use consistent terminology throughout</li> <li>Include code blocks with proper syntax highlighting</li> <li>Use admonition blocks (notes, warnings) where appropriate</li> </ul>"},{"location":"integration/_TEMPLATE_integration_provider_structure/#screenshots-and-images","title":"Screenshots and Images","text":"<ul> <li>Store all images in <code>{provider_name}-img/</code> folder</li> <li>Use descriptive filenames (e.g., <code>system-settings.png</code>, <code>purchase-order.png</code>)</li> <li>Include the provider logo as <code>{provider_name}-logo.png</code></li> <li>Reference images using relative paths: <code>![Description](./provider-img/image.png)</code></li> </ul>"},{"location":"integration/_TEMPLATE_integration_provider_structure/#common-patterns","title":"Common Patterns","text":"<ul> <li>Always reference the Scheduler manual for injected jobs</li> <li>Include the standard Email on Error section</li> <li>Use consistent table formatting for field mappings</li> <li>Include both Integration Post true/false behaviors</li> <li>Document return values for each integration method</li> </ul>"},{"location":"integration/_TEMPLATE_integration_provider_structure/#required-sections","title":"Required Sections","text":"<p>Every integration should have: 1. Main index.md with overview 2. integration-jobs.md with supported documents and setup 3. sdk-provider.md with integration methods 4. Proper folder structure with images</p>"},{"location":"integration/_TEMPLATE_integration_provider_structure/#optional-sections","title":"Optional Sections","text":"<ul> <li>ERP-specific overview document</li> <li>Additional configuration files</li> <li>Troubleshooting guides</li> <li>FAQ sections</li> </ul>"},{"location":"integration/_TEMPLATE_integration_provider_structure/#ai-instructions-template","title":"AI Instructions Template","text":"<p>When providing this template to AI for populating documentation:</p> <pre><code>Please create integration documentation for [Provider Name] following this template structure. \n\nKey information needed:\n- Provider name and connection method (REST API, SOAP, etc.)\n- Supported document types and their ERP equivalents  \n- Integration methods and field mappings\n- SystemSettings requirements\n- Any provider-specific configuration needs\n- Screenshots should be referenced but don't need to be created\n\nFollow the folder structure and content patterns shown in the template. Focus on accuracy and consistency with existing documentation patterns.\n</code></pre>"},{"location":"integration/accpac/","title":"Accpac","text":"<p>This document contains all of the information needed to set up and configure integration with Accpac. There are two parts to the complete integration solution:</p> <p>The SDK Provider is used by the Integration Service to map transactions performed in Granite to the relevant format for Accpac.</p> <p>The integration jobs are used by the Scheduler to pull Accpac's documents, item codes, and trading partners into Granite.</p>"},{"location":"integration/accpac/#external-resources","title":"External Resources","text":"<ul> <li>https://www.acutedata.com/sage-300-kb/</li> </ul>"},{"location":"integration/accpac/integration-jobs/","title":"Integration Jobs","text":"<p>Integration jobs are a special type of Scheduler job called injected jobs.  See below for information for specifics on how document and master data jobs work</p>"},{"location":"integration/accpac/integration-jobs/#supported-document-types","title":"Supported document types","text":"<ul> <li> <p>ORDER </p> <p>Accpac type: Sales Order</p> </li> <li> <p>RECEIVING</p> <p>Accpac type: Purchase Order</p> </li> <li> <p>INTRANSIT </p> <p>Accpac type: Transit Transfer</p> </li> <li> <p>RECEIPT</p> <p>Accpac type: Transit Receipt</p> </li> <li> <p>TRANSFER</p> <p>Accpac type: Transfer</p> </li> <li> <p>WORKORDER</p> <p>Accpac type: Assemblies</p> </li> </ul>"},{"location":"integration/accpac/integration-jobs/#how-it-works","title":"How it works","text":""},{"location":"integration/accpac/integration-jobs/#document-jobs","title":"Document jobs","text":"<p>Triggers on the ERP document tables insert a record into the Granite IntegrationDocumentQueue table whenever a change is applied to a document. </p> <p>GraniteScheduler runs injected jobs that monitor the IntegrationDocumentQueue table for records that need to be processed.</p> <p>When a record with Status 'ENTERED' is found, the job uses views on the Granite database to fetch the  information related to that document from the ERP database and apply the changes to the Granite document. </p> <p>All valid changes to data in the Granite tables are logged to the Audit table, showing the previous value and the new value.</p> <p>If a change is made in the ERP system that would put Granite into an invalid state, no changes are applied. Instead, the ERPSyncFailed field is set to true and the ERPSyncFailedReason field shows the reason for the failure. The IntegrationLog table will contain futher details on the failure if applicable.</p>"},{"location":"integration/accpac/integration-jobs/#master-data-jobs","title":"Master data jobs","text":"<p>MasterItems and TradingPartners have their own jobs. These jobs compare the results of their respective views to the data in the Granite tables and insert new records / update records as needed.</p> <p>The document jobs themselves also sync changes to the TradingPartners &amp; MasterItems that are on the document. This means that on sites that do not process a lot of changes to master data you can limit the MasterItem/TradingPartner jobs to running once a day or even less frequently. The only thing they are really still needed for is setting isActive to false when something is deactivated in the ERP system.</p>"},{"location":"integration/accpac/integration-jobs/#install","title":"Install","text":"<p>Note</p> <p>If you are upgrading from the old StoredProcedure/Trigger integration, ensure that ERPIdentification (Document, DocumentDetail, MasterItem, TradingPartner) column is populated with correct values before attempting to start the new jobs</p>"},{"location":"integration/accpac/integration-jobs/#set-up-database-triggers-views-and-data","title":"Set up database triggers, views, and data","text":"<p>Run the <code>AccpacIntegrationJobs_Create.sql</code> script to create all the views, triggers and ScheduledJob table entries needed. </p>"},{"location":"integration/accpac/integration-jobs/#add-the-injected-job-files-to-granitescheduler","title":"Add the Injected job files to GraniteScheduler","text":"<p>To add the injected job files to the GraniteScheduler, simply copy the dlls and xml files into the root folder of GraniteScheduler. </p> <p>Example:</p> <p></p>"},{"location":"integration/accpac/integration-jobs/#configure","title":"Configure","text":""},{"location":"integration/accpac/integration-jobs/#initial-import","title":"Initial Import","text":"<p>When you first set up a new site, there will be documents that are partially processed already in Accpac. The following document types now support setting an initial ActionQty:</p> <ul> <li>Intransit</li> <li>PurchaseOrder</li> <li>Receipt</li> <li>SalesOrder</li> <li>Transfer</li> </ul> <p>When ActionQty is a column returned by these types' Detail view, the ActionQty will be set to the same in Granite when the lines are inserted. This ensures that users cannot action more than the actual outstanding qty on the document.</p> <p>Note</p> <p>ActionQty will ONLY be used on insert of document lines, never on update as this would cause problems once the document is actioned in Granite.</p> <p>The ActionQty column should be removed from the detail views after the initial import has completed syncing documents.</p> <p>You can use the <code>InitialImport.sql</code> script to enter all of the Accpac documents not in a COMPLETE/CANCELLED statue into the IntegrationDocumentQueue table. The job will then pick these up and insert them once it is enabled.</p> <p>Note</p> <p>Reminder, ActionQty column should be removed from the detail views after the initial import is finished running.</p>"},{"location":"integration/accpac/integration-jobs/#schedule-configuration","title":"Schedule configuration","text":"<p>See the GraniteScheduler manual for the details on how to configure injected jobs. Most of the work will have already been done for you by the <code>AccpacIntegrationJobs_Create.sql</code> script, you can simply activate the jobs you want to run. </p> <p>Sometimes when the documents in Accpac are very large, the lines will not be finished inserting before we start fetching the records to create in Granite. To circumvent this issue, we have a setting that allows you to configure an offset for the <code>LastUpdateDateTime</code> field in the <code>IntegrationDocumentQueue</code> table.</p> <p>To configure this you simply add an entry into the <code>ScheduledJobInputs</code> table with the Name <code>LastUpdateTimeOffset</code> and the Value in minutes that you want to offset by</p> JobName Name Value SalesOrderJob LastUpdateTimeOffset 5 <p>Using this example, the SalesOrderJob will only pick up documents that have been sitting in the IntegrationDocumentQueue for longer than 5 minutes at the time the job runs. This should give Accpac the time it needs to insert all of the lines on a very large document. </p>"},{"location":"integration/accpac/integration-jobs/#email-on-error","title":"Email on Error","text":"<p>Note</p> <p>Emailing functionality is now handled by the Custodian API, set up has changed from previous versions.</p> <p>Ensure that you have configured the CustodianApiUrl for the Scheduler in the <code>SystemSettings</code> table:</p> Application Key Value GraniteScheduler CustodianApiUrl https://localhost:5001/ <p>Ensure you have the <code>IntegrationError</code> email template in your database. This is the email template that is used for all error notifications in these injected jobs. </p> <p>Then for each job that needs to send failure notifications, add a job input for <code>MailOnError</code> and <code>MailOnErrorToAddresses</code>:</p> JobName Name Value &lt; JobName goes here &gt; MailOnError true &lt; JobName goes here &gt; MailOnErrorToAddresses name@client.co.za;name2@client.co.za"},{"location":"integration/accpac/integration-jobs/#view-customisation","title":"View customisation","text":"<p>Each view can be customised to include custom logic or map extra fields to fields on the corresponding Granite table. </p> <p>All of the standard fields on Granite tables are supported, simply add the required field to your view with an alias matching the Granite field name on the table the view maps to.</p> <p>Non standard fields are also supported, but for these to work your column name on the destination table must start with 'Custom'. On the view, simply alias the name of the field to match the name of the field on the destination Granite table, including the 'Custom' prefix.</p> <p>For fields like Document.Status where you may have custom rules / statuses, use a CASE statement in your view definition so that the view returns the Status that you want to set on the Granite Document table.</p> <p>It is highly advised that you check the validity of yor job on the GraniteScheduler /config page after making a change to your view! Especially after changing filter criteria/joins, your view may be returning duplicate rows - the job validation will bring this to your attention.</p>"},{"location":"integration/accpac/integration-jobs/#upgrading-to-version-6","title":"Upgrading to version 6","text":"<p>There are some significant changes that you need to be aware of when upgrading your injected jobs from an earlier version to version 6. When you upgrade, be sure to follow all of the steps below to ensure that all the new changes are applied. </p>"},{"location":"integration/accpac/integration-jobs/#upgrade-scheduler-to-version-6","title":"Upgrade Scheduler to version 6","text":"<p>In version 6 there are changes to the contract between the Scheduler and the injected jobs.  This means that in order to run version 6 of the injected jobs, you will need to be using the version 6 release of the Scheduler. </p> <p>Older versions of the Scheduler will not be able to support the version 6 injected jobs.</p>"},{"location":"integration/accpac/integration-jobs/#copy-in-new-dlls","title":"Copy in new dlls","text":"<p>Copy the new dlls from the Accpac injected job folder to replace the old ones.</p>"},{"location":"integration/accpac/integration-jobs/#replace-triggers","title":"Replace triggers","text":"<p>All triggers have been updated to cater to documents deleted in Accpac.  You should apply the new triggers so that when documents are deleted in Accpac, they are set to CANCELLED status in Granite. </p>"},{"location":"integration/accpac/integration-jobs/#update-views","title":"Update views","text":"<p>Almost all of the views have been updated based on feedback from sites using the injected jobs.  These changes include better handling of null values, as well as better mapping of document statuses.</p> <p>A few views also have the <code>ActionQty</code> field added.  If your site is already live, be sure not to add the ActionQty field to your views  With version 6 we have introduced the ability to set the ActionQty on insert for document types that support it.  This is intended for the initial import of open documents when taking a site live - it prevents Granite from being able to action what has already processed in Accpac before the go live. The ActionQty column is present in the views that support it by default.  If you are upgrading it is best to create the views without the ActionQty column. </p>"},{"location":"integration/accpac/integration-jobs/#whats-different-about-accpac-jobs","title":"What's different about Accpac jobs","text":""},{"location":"integration/accpac/integration-jobs/#inserting-lines-between-existing-lines-in-accpac","title":"Inserting lines between existing lines in Accpac","text":"<p>If enough lines are added in between existing lines on an Accpac document, existing line numbers can change. This will break the document in Granite as we lose the reference to the specific line in Accpac.  Luckily, this can be easily avoided by ensuring that the Accpac user modifying documents is trained to only ever add new lines at the bottom.</p>"},{"location":"integration/accpac/integration-jobs/#things-to-look-out-for","title":"Things to look out for","text":""},{"location":"integration/accpac/integration-jobs/#importance-of-erpidentification","title":"Importance of ERPIdentification","text":"<p>The injected jobs use the ERPIdentification column on the Document, DocumentDetail and MasterItem tables to look for matching records in the corresponding view. It is very important that you ensure that these values are populated for all records in Granite if you are upgrading from the old Document stored procedures.</p>"},{"location":"integration/accpac/integration-jobs/#validation","title":"Validation","text":"<p>Each job type has it's own validation criteria that must be passed before the job will execute. You can check the validity of injected jobs on the GraniteScheduler /config page. </p> <p>Here is an example of some failed validation:</p> <p></p>"},{"location":"integration/accpac/sdk-provider/","title":"SDK Provider","text":"<p>The Accpac SDK provider is responsible for mapping Granite transactions to the relevant format for posting to Accpac. It makes use of the Accpac Advantage SDK to post to Accpac.</p>"},{"location":"integration/accpac/sdk-provider/#setup","title":"Setup","text":"<ol> <li> <p>Check the version of the Accpac SDK that is currently installed on the server. The SDK is usually found at <code>C:\\Program Files (x86)\\Common Files\\Sage\\Sage 300 ERP</code>. Take note of the first two numbers of <code>Accpac.Advantage.dll</code> file version.</p> <p>Note</p> <p>If the SDK is not yet installed, please engage with the client's Accpac consultant - the SDK is required for Granite integration.</p> </li> <li> <p>In the <code>Providers\\Accpac</code> folder, find the <code>AccpacX.Y</code> folder matching the installed SDK version. <code>X.Y</code> must match the first two numbers of the installed SDK version. For example, if the installed SDK version is 6.5.0.30, you will take the files from the Accpac6.5 folder</p> </li> <li> <p>Copy everything in the <code>Providers\\Accpac\\AccpacX.Y</code> folder into Integration Service folder (root folder).</p> </li> <li> <p>Ensure <code>SDKProvider.xml</code> setup or copied correctly     <pre><code>&lt;module name=\"Provider\"&gt;\n&lt;bind\n    service=\"Granite.Integration.Contract.IProvider, Granite.Integration.Contract\"\n    to=\"Granite.Integration.Accpac.Provider, Granite.Integration.Accpac\"/&gt;\n&lt;/module&gt;\n</code></pre></p> </li> <li> <p>Configure your connection string and endpoint in the <code>Granite.Integration.Web.exe.config</code> file</p> </li> </ol>"},{"location":"integration/accpac/sdk-provider/#settings","title":"Settings","text":"<p>Note</p> <p>To pick up any changes to the SystemSettings table, the IntegrationService will need to be restarted.</p> <p>The settings for Sage 300 (Accpac) are configured in the SystemSettings table. The IntegrationService will pick up the settings using the Application name specified in it's <code>.config</code> file: If this setting is missing from the config file or left empty, the IntegrationService will default to using <code>IntegrationSage300</code> as the SystemSettingsApplicationName You can browse the IntegrationService's <code>/config</code> page to have the IntegrationService create the default settings in the SystemSettings table for you.</p>"},{"location":"integration/accpac/sdk-provider/#config-file-settings","title":"Config File Settings","text":"<pre><code>    &lt;add key=\"SystemSettingsApplicationName\" value=\"IntegrationSage300\" /&gt;\n    &lt;add key=\"EndPoint\" value=\"http://:40091/\" /&gt;\n</code></pre>"},{"location":"integration/accpac/sdk-provider/#systemsettingsapplicationname","title":"SystemSettingsApplicationName","text":"<p>The Application name of the entries in the SystemSettings table that you want to use for this integration service. This setting allows you to have multiple integration services running with different settings.</p>"},{"location":"integration/accpac/sdk-provider/#database-systemsettings","title":"Database SystemSettings","text":"<p>The script to insert the default settings is located in the GraniteDatabase release. <pre><code>~\\GraniteDatabase\\Data\\SystemSettings\\SystemSettingsAccpac.sql\n</code></pre></p> Application Key Value Description IntegrationSage300 UserID Sage300 user name IntegrationSage300 Password Sage300 user password IntegrationSage300 CompanyID Sage300 company ID IntegrationSage300 POExchangeRate false Override exchange rate for PO and Multiple PO IntegrationSage300 PurchaseOrderOverrideLocation false Override line location for PO and Multiple PO IntegrationSage300 RoundSummarizedActionQty true Round summed ActionQty when posting transfers and moves IntegrationSage300 RoundSummarizedActionQtyToDecimalPlaces 2 Number of decimal places to round ActionQty to"},{"location":"integration/accpac/sdk-provider/#poexchangerate","title":"POExchangeRate","text":"<ul> <li>Options: true or false</li> <li>Used by: RECEIVE and RECEIVINGPOSTMULTIPLE</li> <li>Override the Receipt rate with the Purchase Order rate</li> <li>PO rate source: SELECT RATE FROM POPORH1 WHERE PONUMBER = 'your_po_number'</li> </ul>"},{"location":"integration/accpac/sdk-provider/#purchaseorderoverridelocation","title":"PurchaseOrderOverrideLocation","text":"<ul> <li>Options: true or false</li> <li>Used by: RECEIVE and RECEIVINGPOSTMULTIPLE</li> <li>Override the Receipt location with Granite location</li> </ul>"},{"location":"integration/accpac/sdk-provider/#roundsummarizedactionqty","title":"RoundSummarizedActionQty","text":"<ul> <li>Options: true or false</li> <li>Used by:<ul> <li>Replenish</li> <li>Move</li> <li>Dynamic Transfer</li> </ul> </li> <li>Turns rounding for summed ActionQty on or off</li> </ul>"},{"location":"integration/accpac/sdk-provider/#roundsummarizedactionqtytodecimalplaces","title":"RoundSummarizedActionQtyToDecimalPlaces","text":"<ul> <li>Options: integer value</li> <li>Used by:<ul> <li>Replenish</li> <li>Move</li> <li>Dynamic Transfer</li> </ul> </li> <li>Only comes into effect if RoundSummarizedActionQty is true</li> <li>Sets the number of decimal places that we round the summed ActionQty to</li> </ul>"},{"location":"integration/accpac/sdk-provider/#integration-methods","title":"Integration Methods","text":"<p>By default if the method name below is the same as a Granite Transaction type, it will autowire the integration. If you require a different integration action you can specify the name below in the Process IntegrationMethod property.</p>"},{"location":"integration/accpac/sdk-provider/#takeon","title":"TAKEON","text":"<ul> <li>Granite Transaction: TAKEON</li> <li>Accpac: I/C Receipts</li> <li>Supports: <ul> <li>Integration Reference</li> <li>Lots</li> <li>Serials</li> <li>UOM</li> </ul> </li> <li>IntegrationPost:<ul> <li>False - Saves receipt</li> <li>True - Posts receipt</li> </ul> </li> <li>Returns:<ul> <li>RECPNUMBER</li> </ul> </li> </ul> Granite Accpac SDK Required Accpac Table Behaviour IntegrationReference RECPNUMBER Y ICREEH Create or update if exists, if empty follows Accpac sequence ID REFERENCE Y ICREEH MasterItemCode ITEMNO Y ICREED ERPLocation LOCATION Y ICREED Qty RECPQTY Y ICREED Lot LOTNUMF N ICREEDL Qty QTY N ICREEDL Serial SERIALNUMF N ICREEDS"},{"location":"integration/accpac/sdk-provider/#adjustment","title":"ADJUSTMENT","text":"<ul> <li>Granite Transaction: ADJUSTMENT</li> <li>Accpac: I/C Adjustments<ul> <li>Adjustment Type: Decrease Quantity OR Increase Quantity</li> </ul> </li> <li>Supports:<ul> <li>Integration Reference</li> <li>Lots </li> <li>Serials</li> <li>WOFFACCT (GL Account), mapped to Granite Comment</li> </ul> </li> <li>IntegrationPost:<ul> <li>False - Saves adjustment</li> <li>True - Posts adjustment</li> </ul> </li> <li>Returns:<ul> <li>DOCNUM</li> </ul> </li> </ul> Granite Accpac SDK Required Accpac Table Behaviour IntegrationReference DOCNUM N ICADEH Create or update if exists, if empty follows Accpac sequence MasterItemCode ITEMNO Y ICADED FromLocation LOCATION Y ICADED ActionQty QUANTITY Y ICADED Batch LOTNUMF N ICADEDL ActionQty QTY N ICADEDL SerialNumber SERIALNUMF N ICADEDS Comment WOFFACCT N ICADED if comment not empty, this is the GL account"},{"location":"integration/accpac/sdk-provider/#adjustment_cost","title":"ADJUSTMENT_COST","text":"<p>Same as ADJUSTMENT but Adjustment Type set to Cost - Adjustment Type: Decrease Cost OR Increase Cost</p>"},{"location":"integration/accpac/sdk-provider/#adjustment_both","title":"ADJUSTMENT_BOTH","text":"<p>Same as ADJUSTMENT but Adjustment Type set to Both (Cost &amp; Qty) - Adjustment Type: Decrease Both OR Increase Both</p>"},{"location":"integration/accpac/sdk-provider/#adjustmentstatus","title":"ADJUSTMENTSTATUS","text":"<p>Note</p> <p>Document field on Granite transaction that is posted must match the Adjustment Number in Accpac.</p> <ul> <li>Granite Transaction: ADJUSTMENT</li> <li>Accpac: I/C Adjustments<ul> <li>Updates the status of the adjustment to Posted</li> </ul> </li> </ul>"},{"location":"integration/accpac/sdk-provider/#reclassify","title":"RECLASSIFY","text":"<ul> <li>Granite Transaction: RECLASSIFY</li> <li>Accpac: I/C Adjustments<ul> <li>Adjustment Type: Decrease Quantity AND Increase Quantity</li> </ul> </li> <li>Support <ul> <li>Integration Reference (Accpac Adjustment number, create or update if exists) </li> <li>Lots </li> <li>Serials</li> </ul> </li> <li>IntegrationPost:<ul> <li>False - Saves adjustment</li> <li>True - Posts adjustment</li> </ul> </li> <li>Returns:<ul> <li>DOCNUM</li> </ul> </li> </ul> Granite Accpac SDK Required Accpac Table Behaviour IntegrationReference DOCNUM N ICADEH Create or update if exists, if empty follows Accpac sequence MasterItemCode ITEMNO Y ICADED FromLocation LOCATION Y ICADED ActionQty QUANTITY Y ICADED Batch LOTNUMF N ICADEDL ActionQty QTY N ICADEDL SerialNumber SERIALNUMF N ICADEDS"},{"location":"integration/accpac/sdk-provider/#reclassify_cost","title":"RECLASSIFY_COST","text":"<p>Same as RECLASSIFY but Adjustment Type set to COST - Adjustment Type: Decrease Cost AND Increase Cost</p>"},{"location":"integration/accpac/sdk-provider/#reclassify_both","title":"RECLASSIFY_BOTH","text":"<p>Same as RECLASSIFY but Adjustment Type set to BOTH (Cost &amp; Qty) - Adjustment Type: Decrease Both AND Increase Both</p>"},{"location":"integration/accpac/sdk-provider/#reclassify_split","title":"RECLASSIFY_SPLIT","text":"<p>Same as RECLASSIFY but Decrease Quantity and Increase Quantity post as two separate Adjustments in Accpac</p>"},{"location":"integration/accpac/sdk-provider/#scrap","title":"SCRAP","text":"<ul> <li>Granite Transaction: SCRAP</li> <li>Accpac: I/C Adjustments<ul> <li>Adjustment Type Decrease Quantity</li> </ul> </li> <li>Supports: <ul> <li>Integration Reference </li> <li>Lots</li> <li>Serials</li> </ul> </li> <li>IntegrationPost:<ul> <li>False - Saves adjustment</li> <li>True - Posts adjustment</li> </ul> </li> <li>Returns:<ul> <li>DOCNUM</li> </ul> </li> </ul> Granite Accpac SDK Required Accpac Table Behaviour IntegrationReference DOCNUM N ICADEH Create or update if exists, if empty follows Accpac sequence MasterItemCode ITEMNO Y ICADED FromLocation LOCATION Y ICADED ActionQty QUANTITY Y ICADED Batch LOTNUMF N ICADEDL ActionQty QTY N ICADEDL SerialNumber SERIALNUMF N ICADEDS"},{"location":"integration/accpac/sdk-provider/#scrap_cost","title":"SCRAP_COST","text":"<p>Same as SCRAP but Adjustment Type set to COST - Adjustment Type: Decrease Cost</p>"},{"location":"integration/accpac/sdk-provider/#scrap_both","title":"SCRAP_BOTH","text":"<p>Same as SCRAP but Adjustment Type set to BOTH - Adjustment Type: Decrease Both</p>"},{"location":"integration/accpac/sdk-provider/#move","title":"MOVE","text":"<ul> <li>Granite Transaction: MOVE</li> <li>Accpac: I/C Transfers Type Transfer </li> <li>Supports: <ul> <li>RoundSummarizedActionQty (See setting description)</li> <li>RoundSummarizedActionQtyToDecimalPlaces (See setting description)</li> <li>Integration Reference</li> <li>Serial</li> <li>Lot</li> <li>Comment </li> </ul> </li> <li>IntegrationPost:<ul> <li>False - Saves transfer</li> <li>True - Posts transfer</li> </ul> </li> <li>Returns:<ul> <li>DOCNUM</li> </ul> </li> </ul> Granite Accpac SDK Required Accpac Table Behaviour IntegrationReference DOCNUM N ICTREH Create or update if exists, if empty follows Accpac sequence Document REFERENCE N ICTREH MasterItemCode ITEMNO Y ICTRED FromLocation FROMLOC Y ICTRED ToLocation TOLOC Y ICTRED Comment COMMENTS N ICTRED ActionQty QTYREQ Y ICTRED Batch LOTNUMF N ICTREDL ActionQty QTY N ICTREDL SerialNumber SERIALNUMF N ICTREDS"},{"location":"integration/accpac/sdk-provider/#replenish","title":"REPLENISH","text":"<ul> <li>Granite Transaction: REPLENISH</li> <li>Accpac: I/C Transfers Type Transfer </li> <li>Supports: <ul> <li>RoundSummarizedActionQty (See setting description)</li> <li>RoundSummarizedActionQtyToDecimalPlaces (See setting description)</li> <li>Integration Reference </li> <li>Serial</li> <li>Lot</li> <li>Comment </li> </ul> </li> <li>IntegrationPost:<ul> <li>False - Saves transfer</li> <li>True - Posts transfer</li> </ul> </li> <li>Returns:<ul> <li>DOCNUM</li> </ul> </li> </ul> Granite Accpac SDK Required Accpac Table Behaviour IntegrationReference DOCNUM N ICTREH Create or update if exists, if empty follows Accpac sequence Document REFERENCE N ICTREH MasterItemCode ITEMNO Y ICTRED FromLocation FROMLOC Y ICTRED ToLocation TOLOC Y ICTRED Comment COMMENTS N ICTRED ActionQty QTYREQ Y ICTRED Batch LOTNUMF N ICTREDL ActionQty QTY N ICTREDL SerialNumber SERIALNUMF N ICTREDS"},{"location":"integration/accpac/sdk-provider/#transfer","title":"TRANSFER","text":"<ul> <li>Granite Transaction: TRANSFER</li> <li>Accpac: **I/C Transfers **<ul> <li>Type: Transfer, Transit and Receipt, based on Granite document type.</li> </ul> </li> <li>Supports:<ul> <li>Serial</li> <li>LOT</li> </ul> </li> <li>IntegrationPost:<ul> <li>False - Saves transfer</li> <li>True - Posts transfer</li> </ul> </li> <li>Returns:<ul> <li>DOCNUM</li> </ul> </li> </ul> Granite Accpac SDK Required Accpac Table Document REFERENCE N ICTREH MasterItemCode ITEMNO Y ICTRED FromLocation FROMLOC Y ICTRED ToLocation TOLOC Y ICTRED ActionQty QTYREQ Y ICTRED Batch LOTNUMF N ICTREDL ActionQty QTY N ICTREDL SerialNumber SERIALNUMF N ICTREDS"},{"location":"integration/accpac/sdk-provider/#transferreceipt","title":"TRANSFERRECEIPT","text":"<ul> <li>Granite Transaction: TRANSFER</li> <li>Accpac: **I/C Transfers **<ul> <li>Type: Receipt</li> </ul> </li> <li>Supports:<ul> <li>Serial</li> <li>LOT</li> </ul> </li> <li>Returns:<ul> <li>DOCNUM</li> </ul> </li> </ul> Granite Accpac SDK Required Accpac Table Document REFERENCE N ICTREH MasterItemCode ITEMNO Y ICTRED FromLocation FROMLOC Y ICTRED ToLocation TOLOC Y ICTRED ActionQty QTYREQ Y ICTRED Batch LOTNUMF N ICTREDL ActionQty QTYMOVED N ICTREDL SerialNumber SERIALNUMF N ICTREDS"},{"location":"integration/accpac/sdk-provider/#dynamictransfer","title":"DYNAMICTRANSFER","text":"<ul> <li>Granite Transaction: DYNAMICTRANSFER</li> <li>Accpac: I/C Transfers Type Transfer </li> <li>Supports: <ul> <li>RoundSummarizedActionQty (See setting description)</li> <li>RoundSummarizedActionQtyToDecimalPlaces (See setting description)</li> <li>Integration Reference (Accpac Transfer number, create or update if exists) </li> <li>Serial</li> <li>Lot</li> <li>Comment (Accpac Comments field)</li> </ul> </li> <li>IntegrationPost:<ul> <li>False - Saves transfer</li> <li>True - Posts transfer</li> </ul> </li> <li>Returns:<ul> <li>DOCNUM</li> </ul> </li> </ul> Granite Accpac SDK Required Accpac Table Behaviour IntegrationReference DOCNUM N ICTREH Create or update if exists, if empty follows Accpac sequence Document REFERENCE N ICTREH MasterItemCode ITEMNO Y ICTRED FromLocation FROMLOC Y ICTRED ToLocation TOLOC Y ICTRED Comment COMMENTS N ICTRED ActionQty QTYREQ Y ICTRED Batch LOTNUMF N ICTREDL ActionQty QTY N ICTREDL SerialNumber SERIALNUMF N ICTREDS"},{"location":"integration/accpac/sdk-provider/#pick","title":"PICK","text":"<p>Note</p> <p>IntegrationPost setting does not affect saving/invoicing for SalesOrder. Default Create Invoice option must be switched on/off in Accpac.</p> <ul> <li>Granite Transaction: PICK</li> <li>Accpac: O/E Transactions Order Entry</li> <li> <p>Supports:</p> <ul> <li>Serial</li> <li>Lot</li> </ul> </li> <li> <p>IntegrationPost:</p> <ul> <li>Not supported, see NOTE above</li> </ul> </li> <li>Returns:<ul> <li>LASTSHINUM if there is one, else LASTINVNUM</li> </ul> </li> </ul> Granite Accpac SDK Required Accpac Table Behaviour Document ORDNUMBER Y OEORDH LineNumber LINENUM Y OEORDD Qty QTYSHIPPED Y OEORDD Lot LOTNUMF N OEORDDL Qty QTY N OEORDDL Serial SERIALNUMF N OEORDDS"},{"location":"integration/accpac/sdk-provider/#pickweight","title":"PICKWEIGHT","text":"<p>Note</p> <p>Weight of the item being picked in Granite must be in the Transaction Comment field. This will post to the EXTWEIGHT field in Accpac.</p> <ul> <li>Granite Transaction: PICK</li> <li>Accpac: O/E Transactions Order Entry</li> <li>Supports:<ul> <li>Comment (posts to Accpac EXTWEIGHT field)</li> </ul> </li> <li>IntegrationPost:<ul> <li>True - CREATEINV will be set to true</li> <li>False - CREATEINV will be set to false</li> </ul> </li> <li>Returns:<ul> <li>SHINUMBER if there is one, else LASTINVNUM</li> </ul> </li> </ul> Granite Accpac SDK Required Accpac Table Behaviour Document ORDNUMBER Y OESHIH LineNumber ORDLINENUM Y OESHID ActionQty QTYSHIPPED Y OESHID Comment EXTWEIGHT Y OESHID"},{"location":"integration/accpac/sdk-provider/#dynamicpick","title":"DYNAMICPICK","text":"<ul> <li>Granite Transaction: PICKINGDYNAMIC</li> <li>Accpac: O/E Transactions Order Entry<ul> <li>Create and Post</li> </ul> </li> <li>Supports:<ul> <li>UOM</li> </ul> </li> <li>IntegrationPost:<ul> <li>Order will always be Processed regardless of setting</li> <li>True - Check Customer Credit Limit</li> </ul> </li> <li>Returns:<ul> <li>LASTSHINUM if there is one, else LASTINVNUM</li> </ul> </li> </ul> Granite Accpac SDK Required Accpac Table Behaviour Document ORDNUMBER Y OEORDH FromLocation LOCATION Y OEORDH LineNumber LINENUM Y OEORDD ActionQty QTYORDERED Y OEORDD ActionQty QTYSHIPPED Y OEORDD Only applies if IntegrationPost is true UOM ORDUNIT N OEORDD"},{"location":"integration/accpac/sdk-provider/#pick_shipall","title":"PICK_SHIPALL","text":"<p>Note</p> <p>Will ship all lines on Accpac Order regardless of Granite transactions.</p> <ul> <li>Granite Transaction: PICK</li> <li>Accpac: O/E Transactions Order Entry</li> <li>Supports:</li> <li>IntegrationPost:</li> <li>Returns:<ul> <li>SHINUMBER </li> </ul> </li> </ul> Granite Accpac SDK Required Accpac Table Behaviour Document ORDNUMBER Y OESHIH"},{"location":"integration/accpac/sdk-provider/#receive","title":"RECEIVE","text":"<ul> <li>Granite Transaction: RECEIVE</li> <li>Accpac: P/O Transactions Purchase Order Entry</li> <li>Supports: <ul> <li>POExchangeRate (See setting description)</li> <li>PurchaseOrderOverrideLocation (See setting description)</li> <li>DocumentReference (posts to the REFERENCE field in Accpac)</li> <li>Lots with ExpiryDate</li> <li>Serials</li> <li>UOM</li> </ul> </li> <li>IntegrationPost:<ul> <li>Not supported, will always process receipt</li> </ul> </li> <li>Returns:<ul> <li>RCPNUMBER</li> </ul> </li> </ul> Granite Accpac SDK Required Accpac Table Behaviour Document PONUMBER Y PORCPH1 DocumentReference REFERENCE Y PORCPH1 UOM RCPUNIT Y PORCPL ActionQty RQRECEIVED Y PORCPL ToLocation LOCATION Y PORCPL Only applies if PurchaseOrderOverrideLocation is true MasterItemCode ITEMNO Y PORCPL Batch LOTNUMF N PORCPLL ExpiryDate EXPIRYDATE N PORCPLL ActionQty QTY N PORCPLL SerialNumber SERIALNUMF N PORCPLS"},{"location":"integration/accpac/sdk-provider/#receivingpostmultiple","title":"RECEIVINGPOSTMULTIPLE","text":"<p>Note</p> <p>The TransactionDocumentReference field is used to group all the Purchase Orders you would like to post as one receipt. The RECEIVINGPOSTMULTIPLE process should be used for posting. </p> <ul> <li>Granite Transaction: RECEIVE</li> <li>Accpac: P/O Transactions Purchase Order Entry</li> <li>Supports:<ul> <li>POExchangeRate (See setting description)</li> <li>PurchaseOrderOverrideLocation (See setting description)</li> <li>DocumentReference (posts to REFERENCE field in Accpac)</li> <li>Lots with ExpiryDate</li> <li>Serials</li> <li>UOM</li> </ul> </li> <li>IntegrationPost:<ul> <li>Not supported, will always process receipt</li> </ul> </li> <li>Returns:<ul> <li>RCPNUMBER</li> </ul> </li> </ul> Granite Accpac SDK Required Accpac Table Behaviour Document PONUMBER Y PORCPR DocumentReference REFERENCE Y PORCPH1 UOM RCPUNIT Y PORCPL ActionQty RQRECEIVED Y PORCPL ToLocation LOCATION Y PORCPL Only applies if PurchaseOrderOverrideLocation is true MasterItemCode ITEMNO Y PORCPL Batch LOTNUMF N PORCPLL ExpiryDate EXPIRYDATE N PORCPLL ActionQty QTY N PORCPLL SerialNumber SERIALNUMF N PORCPLS"},{"location":"integration/accpac/sdk-provider/#returnreceipt","title":"RETURNRECEIPT","text":"<p>Note</p> <p>Return document must be brought in to Granite as an ORDER document. We pick against it to reduce stock, and when we post we update the Return document's qtys.</p> <ul> <li>Granite Transaction: PICK</li> <li>Accpac: P/O Transactions Receipt Entry</li> <li>IntegrationPost:<ul> <li>Not supported, will always create return</li> </ul> </li> <li>Returns:<ul> <li>RETNUMBER</li> </ul> </li> </ul> Granite Accpac SDK Required Accpac Table Behaviour Document RCPNUMBER Y PORETH1 LineNumber RCPLSEQ Y PORETL ActionQty RQRETURNED Y PORETL"},{"location":"integration/accpac/sdk-provider/#manufacture","title":"MANUFACTURE","text":"<ul> <li>Granite Transaction: MANUFACTURE</li> <li>Accpac: I/C Transactions Assemblies</li> <li>Supports:<ul> <li>Comment</li> </ul> </li> <li>IntegrationPost:<ul> <li>False - Enters assembly</li> <li>True - Posts assembly</li> </ul> </li> <li>Returns:<ul> <li>Comma separated list of DOCNUM</li> </ul> </li> </ul> Granite Accpac SDK Required Accpac Table Behaviour MasterItemCode ITEMNO Y ICASEN Comment BOMNO Y ICASEN Must contain Accpac BOMNO FromLocation LOCATION Y ICASEN ActionQty QUANTITY Y ICASEN"},{"location":"integration/accpac/sdk-provider/#update_assemblies","title":"UPDATE_ASSEMBLIES","text":"<p>Note</p> <p>Granite document number must exist in Accpac as the Assembly number. If not found will throw error.</p> <ul> <li>Granite Transaction: MANUFACTURE</li> <li>Accpac: I/C Transactions Assemblies</li> <li>Supports:<ul> <li>Transaction IDs </li> </ul> </li> <li>IntegrationPost:<ul> <li>False - Enters assembly</li> <li>True - Posts assembly</li> </ul> </li> <li>Returns:<ul> <li>DOCNUM</li> </ul> </li> </ul> Granite Accpac SDK Required Accpac Table Behaviour Document DOCNUM Y ICASEN MasterItemCode ITEMNO Y ICASEN ActionQty QUANTITY Y ICASEN Transaction ID REFERENCE Y ICASEN"},{"location":"integration/accpac/sdk-provider/#internalusage","title":"***INTERNALUSAGE","text":"<p>Note</p> <p>Can be used with multiple Granite Transaction Types (Adjsutment, Scrap etc.).  Granite Transactions must be linked to a document with a number matching the Accpac Internal Usage number</p> <ul> <li>Granite Process IntegrationMethod: INTERNALUSAGE</li> <li>Accpac: I/C Transactions Internal Usage. <ul> <li>Based on document, update internal usage</li> </ul> </li> <li>IntegrationPost:<ul> <li>False - Saves internal usage</li> <li>True - Posts internal usage</li> <li>GLACCT (GL Account), mapped to Granite Comment</li> </ul> </li> <li>Returns:<ul> <li>DOCNUM</li> </ul> </li> </ul> Granite Accpac SDK Required Accpac Table Behaviour Document DOCNUM Y ICICEH Must be the Accpac Internal Usage DOCNUM \"GRANITE WMS\" REFERENCE Y ICICEH MasterItemCode ITEMNO Y ICICED FromLocation LOCATION Y ICICED ActionQty QUANTITY Y ICICED Comment GLACCT N ICICED if comment not empty, this is the GL account"},{"location":"integration/accpac/sdk-provider/#internalusagedynamic","title":"***INTERNALUSAGEDYNAMIC","text":"<p>Note</p> <p>Can be used with multiple Granite Transaction Types, set the Process' IntegrationMethod to INTERNALUSAGEDYNAMIC to post. </p> <ul> <li>Granite Process IntegrationMethod: INTERNALUSAGEDYNAMIC</li> <li>Accpac: I/C Transactions Internal Usage</li> <li>Supports: <ul> <li>Integration Reference (Accpac Internal Usage Number)</li> <li>Lots</li> </ul> </li> <li>IntegrationPost:<ul> <li>False - Saves internal usage</li> <li>True - Posts internal usage</li> </ul> </li> <li>Returns:<ul> <li>DOCNUM</li> </ul> </li> </ul> Granite Accpac SDK Required Accpac Table Behaviour IntegrationReference DOCNUM Y ICICEH Create or update if exists, if empty follows Accpac sequence \"GRANITE WMS\" REFERENCE Y ICICEH LineNumber LINENO Y ICICED ActionQty QUANTITY Y ICICED Batch LOTNUMF N ICICEDL ActionQty QTY N ICICEDL"},{"location":"integration/accpac/sdk-provider/#issue","title":"***ISSUE","text":"<p>Note</p> <p>Requires custom module (Pacific Technology Solutions' Internal Issues) Granite Document Description must be set to \"NormalPick\" to ensure that we post to an existing document in Accpac.  If this is not set, we still post to an existing document with matching Number when one is found - however if a matching document is not found we create it (DynamicIssue). Can be used with multiple Granite Transaction Types, set the Process' IntegrationMethod to ISSUE to post.  Granite Transactions must be linked to a document with a number matching the Accpac Internal Issue Number</p> <ul> <li>Granite Process IntegrationMethod: ISSUE</li> <li>Accpac: II Internal Issues Custom module (Pacific Technology Solutions' Internal Issues)</li> </ul>"},{"location":"integration/accpac/sdk-provider/#materialallocation","title":"***MATERIALALLOCATION","text":"<p>Note</p> <p>Granite Document Description must be set to CONTRACT/PROJECT/CATEGORY (in that order with slashes separating them).</p> <ul> <li>Granite Process IntegrationMethod: MATERIALALLOCATION</li> <li>Accpac: Project and Job Costing -&gt; PJC Transactions -&gt; Material Allocation</li> <li>IntegrationPost:<ul> <li>Not supported, will always create material allocation</li> </ul> </li> <li>Returns:<ul> <li>MALLOCNO</li> </ul> </li> </ul> Granite Accpac SDK Required Accpac Table \"GRANITE\" REFERENCE Y PMMTAH Document Description Contract FMTCONTNO Y PMMTAD Document Description Project PROJECT Y PMMTAD Document Description Category CATEGORY Y PMMTAD MasterItem Code RESOURCE Y PMMTAD ToLocation LOCATION Y PMMTAD ActionQty QUANTITY Y PMMTAD"},{"location":"integration/accpac/sdk-provider/#autosimply-10-oct-2023-under-construction","title":"AutoSimply (10 Oct 2023: under construction)","text":""},{"location":"integration/accpac/sdk-provider/#issuances","title":"Issuances","text":"<p>This method is used when you want to post the consumption of the work order seperate from the receipt  of the finish goods. It will post based on each CONSUME transaction.</p> <ul> <li>Granite Process IntegrationMethod: AUTOSIMPLY_ISSUANCES</li> <li>Accpac/AutoSimply: Manufacture -&gt; MF Transactions -&gt; Material Issuances -&gt; Issuances</li> <li>Support for: <ul> <li>Lots</li> </ul> </li> <li>Returns:<ul> <li>ISSUENO</li> </ul> </li> <li>Notes:</li> <li>Single MO (work order) per Issuances</li> <li>MO status released</li> </ul> Granite Accpac SDK Required Accpac Table Document Description ISSDESC N MFISSUH Document Number ToMO Y MFISSUH Document Number FromMO Y MFISSUH LineNumber DETAILNUM Y MFISSUD ActionQty ISSQTY Y MFISSUD ActionQty XGENALCQTY N MFISSUD"},{"location":"integration/accpac/sdk-provider/#receipts","title":"Receipts","text":"<p>This method is also used by Backflush. Perform an Receipt of finish goods based on the Granite Manufacture transactions for the WorkOrder. Prior to receipt typically the Issuances need to be done, or you need to perform a backflush as per below.</p> <ul> <li>Granite Process IntegrationMethod: AUTOSIMPLY_RECEIPTS</li> <li>Accpac/AutoSimply: Manufacture -&gt; MF Transactions -&gt; Material Receipt -&gt; Receipts</li> <li>Support for: <ul> <li>Lots</li> </ul> </li> </ul>"},{"location":"integration/accpac/sdk-provider/#backflush","title":"Backflush","text":"<p>Backflush will take the total based on manufactured transactions (finish goods) and will ask autosimply to \"automate\" the issuances. This method ignores Granite consume transactions.  The result will be both a Issuances and Receipt in one where only the Manufacture transactions of Granite is used.</p> <ul> <li>Granite Process IntegrationMethod: AUTOSIMPLY_BACKFLUSH</li> <li>Accpac/AutoSimply: Manufacture -&gt; MF Transactions -&gt; MO Backflush</li> </ul> Granite Accpac SDK Required Accpac Table Document Number ToMO Y MFISSUH Document Number FromMO Y MFISSUH ActionQty BaseQty Y MFISSUD"},{"location":"integration/acumatica/","title":"Acumatica","text":"<p>This document contains all of the information needed to set up and configure integration with Acumatica. There are two parts to the complete integration solution:</p> <ul> <li> <p>The SDK Provider is used by the Integration Service to map transactions performed in Granite to the relevant format for Acumatica.</p> </li> <li> <p>The integration jobs are used by the Scheduler to pull Acumatica's documents, item codes, and trading partners into Granite.</p> </li> </ul> <p>To get an overview of the Acumatica entities/objects that are used in integration see Acumatica Overview</p>"},{"location":"integration/acumatica/acumatica-overview/","title":"Acumatica Overview","text":"<p>The purpose of the this to provide of an overview of the parts of Acumatica's system that Granite interacts with in the upwards and downwards integration. </p>"},{"location":"integration/acumatica/acumatica-overview/#investigating-acumatica","title":"Investigating Acumatica","text":"<p>Acumatica has a useful feature that gives more detail on the details of the various fields in the system.  To use it, hover over the name of a field until the ? icon appears, select the icon and a description will appear on the right. </p> <p></p>"},{"location":"integration/acumatica/acumatica-overview/#stockitems","title":"StockItems","text":"<p>The StockItems are Acumatica's MasterItems. They can be found under Inventory &gt; Stock Items.</p> <p></p> <p>The most notable field is the Lot/Serial Class (this is only visible if Lot/Serial tracking is enabled). In Acumatica, Lot and Serial number share the same property call LotSerialNbr. This class determines if either lot, serial, or neither is tracked. </p> <p>Expiry date can only be tracked in the standard way if either lot or serial is tracked and cannot be tracked separately. </p>"},{"location":"integration/acumatica/acumatica-overview/#warehouses","title":"Warehouses","text":"<p>Warehouses in Acumatica represent a physical location where stock can be kept (a warehouse, a section of a warehouse, a store).</p> <p>The only relevant field for Granite is the WarehouseID which is the ERPLocation</p> <p>These are found under Inventory &gt; Warehouses.</p> <p></p>"},{"location":"integration/acumatica/acumatica-overview/#documents","title":"Documents","text":"<p>Documents follow a similar structure to Granite's documents with one main difference being Allocations. Allocations will only be visible if Lot/Serial Tracking is enabled.  The hierarchy is as follows: Document (Header) &gt; Details &gt; Allocations. Not all documents have Allocations. </p> <p>The header contains the info of the documents status, vendor/customer, and number.</p> <p>The Details contain the Inventory ID (MasterItem Code), Qty, and processed qty. </p> <p>The Allocations are seen under Line details and contain the serial numbers or lot numbers, Quantity, and expiry date if applicable. </p> <p> </p>"},{"location":"integration/acumatica/acumatica-overview/#document-types","title":"Document Types:","text":"<p>The following documents are used in the integration process:</p> <ul> <li>Purchase Orders</li> <li>Purchase Receipts</li> <li>Transfers</li> <li>Receipts</li> <li>Sales Orders</li> <li>Shipments</li> <li>Issues</li> </ul>"},{"location":"integration/acumatica/acumatica-overview/#purchase-orders","title":"Purchase Orders","text":"<p>Purchase orders are inbound documents and are brought into Granite as Receiving documents.  They do not have allocations (line details) as these are on the purchase receipt.</p> <p>These documents are not updated with directly with received quantities, rather, Purchase Receipts are created that specify the received quantities. </p> <p></p>"},{"location":"integration/acumatica/acumatica-overview/#purchase-receipts","title":"Purchase Receipts","text":"<p>Purchase receipts are associated with a Purchase order and represent what was actually received against the Purchase Order.  You can have multiple Purchase Receipts per Purchase order. </p> <p></p>"},{"location":"integration/acumatica/acumatica-overview/#transfers","title":"Transfers","text":"<p>Transfers are movements of goods between warehouses. </p> <p>There are 2 types of Transfers: 1-step and 2-step</p> <ul> <li>1-Step Transfers are the equivalent of Transfers in Granite. A difference to note is the the quantity on the document is the quantity that will be transferred when the document is marked as Released, there is no Action Qty. </li> </ul> <p></p> <ul> <li>2-Step Transfers are the equivalent of Intransit documents in Granite. Similar to the 1-Step, there is no Action Qty, the quantity on the document is the quantity that will be removed from the warehouse and marked as intransit when the document is marked as Released. </li> </ul> <p></p>"},{"location":"integration/acumatica/acumatica-overview/#receipts","title":"Receipts","text":"<p>Receipts are transactions that bring stock into Acumatica. For the purpose of our we will only be using Receipts that are associated with a Transfer and have a TransferNbr in the header. These receipts are brought into Granite as Receipt documents.</p> <p>As with transfers, they do not have an Action Qty and the quantity will be the quantity that is received at the warehouse when the document is marked as Released. </p> <p></p>"},{"location":"integration/acumatica/acumatica-overview/#sales-orders","title":"Sales Orders","text":"<p>These are outbound documents and are brought into Granite as Order documents.  Like Purchase orders, they do not have allocations (Line details), these are on the Shipment. </p> <p>These documents are not updated directly with picked quantities. Instead, shipments are created against it that specify the quantities picked. </p> <p></p>"},{"location":"integration/acumatica/acumatica-overview/#shipments","title":"Shipments","text":"<p>Shipments are associated with a Sales order and represent the quantities picked.  There can only one open Shipment against per Sales order. Once a Shipment is Released, a new shipment can be created if back orders are allowed on the Sales Order. </p> <p></p>"},{"location":"integration/acumatica/acumatica-overview/#issues","title":"Issues","text":"<p>Inventory Issues are used to issue inventory from stock. Once issued it is removed from stock and no further record is kept for it. This is currently not associated with any Granite document or process but is an integration method that can be used. For details please see the Acumatica SDK-Provider</p> <p></p>"},{"location":"integration/acumatica/integration-jobs/","title":"Integration Jobs","text":"<p>Integration jobs are a special type of Scheduler job called injected jobs.  See below for information for specifics on how document and master data jobs work</p>"},{"location":"integration/acumatica/integration-jobs/#supported-document-types","title":"Supported document types","text":"<ul> <li> <p>ORDER</p> <p>Acumatica type: Sales Order</p> </li> <li> <p>RECEIVING</p> <p>Acumatica type: Purchase Order</p> </li> <li> <p>TRANSFER</p> <p>Acumatica type: Transfer (1-Step)</p> </li> <li> <p>INTRANSIT</p> <p>Acumatica type: Transfer (2-Step)</p> </li> <li> <p>RECEIPT</p> <p>Acumatica type: Receipt (with TransferNbr)</p> </li> </ul>"},{"location":"integration/acumatica/integration-jobs/#how-it-works","title":"How it works","text":""},{"location":"integration/acumatica/integration-jobs/#document-jobs","title":"Document Jobs","text":"<p>All data is currently fetched through Acumatica's ODataV4 endpoint. The ODataV4 endpoint allows us to construct queries on the underlying DAC (Data Access classes). ODataV4 does not uses Generic Inquiries and as such no custom views are needed in Acumatica.</p> <p>GraniteScheduler runs injected jobs that check the IntegrationDocumentQueue for the lastUpdated time for the relevant document type(if no lastUpdated time is found it will use current time - 24hours). With this last updated time, it will then do a OData request for all relevant documents that have a last updated time greater than the lastUpdated time from the IntegrationDocumentQueue. If there are any documents that fit those criteria they are inserted into the IntegrationDocumentQueue. The job then runs this queue.</p> <p>When a record with Status 'ENTERED' is found, the job uses a OData request to fetch the information related to that document from the Acumatica and apply the changes to the Granite document. </p> <p>All valid changes to data in the Granite tables are logged to the Audit table, showing the previous value and the new value.</p> <p>If a change is made in the ERP system that would put Granite into an invalid state, no changes are applied. Instead, the ERPSyncFailed field is set to true and the ERPSyncFailedReason field shows the reason for the failure. The IntegrationLog table will contain further details on the failure if applicable.</p>"},{"location":"integration/acumatica/integration-jobs/#document-statuses","title":"Document Statuses","text":"<p>For Sales Orders the statuses are mapped in the following way:</p> Acumatica Status Granite Status Back Order, Open ENTERED Expired, Canceled, Rejected CANCELLED On Hold, Credit Hold, Risk Hold, Pending Approval, Pending Processing ONHOLD Completed, Invoiced, Shipping COMPLETE <p>For Purchase Orders the statuses are mapped in the following way:</p> Acumatica Status Granite Status Open ENTERED Canceled, Rejected CANCELLED On hold, Pending Approval, Pending Email, Pending Printing ONHOLD Completed, Closed COMPLETED <p>For Transfers and Receipts the statuses are mapped in the following way:</p> Acumatica Status Granite Status Balanced ENTERED On hold ONHOLD Released COMPLETED"},{"location":"integration/acumatica/integration-jobs/#master-data-jobs","title":"Master data jobs","text":"<p>MasterItems and TradingPartners have their own Jobs. These Jobs fetch all StockItems, Vendors, and Customers from  Acumatica and compares them to the MasterItems and TradingPartners in Granite. Any inserts / updates are done as required. </p> <p>The document jobs also sync changes to the MasterItems that are on the document. This means that on sites that do not make many changes to their MasterItems it is better to limit running this job to once a day or even less frequently. </p> <p>Document Jobs do not automatically sync trading partners as they are not required to create to the document in Granite and as such are only synced when the TradingPartner Job runs. </p>"},{"location":"integration/acumatica/integration-jobs/#install","title":"Install","text":""},{"location":"integration/acumatica/integration-jobs/#set-up-database-triggers-views-and-data","title":"Set up database triggers, views, and data","text":"<p>Run the <code>AcumaticaIntegrationJobs_Create.sql</code> script to insert the required SystemSettings and ScheduledJob table entries needed.  You can then just activate the Scheduled Jobs that are needed. </p> <p>The system setting AcumaticaApplicationName is defaulted to 'Acumatica'. If you change this then you should also change it in the Integration service config file so that the scheduled Jobs amd Integration service can share settings. If you wish to use different SystemSettings for each then you need to specify a different value. </p>"},{"location":"integration/acumatica/integration-jobs/#systemsettings","title":"SystemSettings","text":""},{"location":"integration/acumatica/integration-jobs/#base-url","title":"Base URL","text":"<p>The base url can be found in IIS if hosted locally or provided by the customer if hosted in the cloud.</p> <p> </p> <p>Note</p> <p>You need to set the password from inside the Webdesktop if you are going to encrypt the password. </p>"},{"location":"integration/acumatica/integration-jobs/#acumaticaintansitlocation","title":"AcumaticaIntansitLocation","text":"<p>Acumatica does not specify a intransit location on its 2-step transfers so it needs to be specified in this system setting. This is the ERP location for the location used in Intransit documents. </p> <p> </p>"},{"location":"integration/acumatica/integration-jobs/#add-the-injected-job-files-to-granitescheduler","title":"Add the Injected job files to GraniteScheduler","text":"<p>To add the injected job files to the GraniteScheduler, simply copy the dlls and xml files into the root folder of GraniteScheduler. </p>"},{"location":"integration/acumatica/integration-jobs/#configure","title":"Configure","text":""},{"location":"integration/acumatica/integration-jobs/#schedule-configuration","title":"Schedule configuration","text":"<p>See the GraniteScheduler manual for the details on how to configure injected jobs. Most of the work will have already been done for you by the <code>AcumaticaIntegrationJobs_Create.sql</code> script, you can simply activate the jobs you want to run.</p>"},{"location":"integration/acumatica/integration-jobs/#email-on-error","title":"Email on Error","text":"<p>Note</p> <p>Emailing functionality is now handled by the Custodian API, set up has changed from previous versions.</p> <p>Ensure that you have configured the CustodianApiUrl for the Scheduler in the <code>SystemSettings</code> table:</p> Application Key Value GraniteScheduler CustodianApiUrl https://localhost:5001/ <p>Ensure you have the <code>IntegrationError</code> email template in your database. This is the email template that is used for all error notifications in these injected jobs. </p> <p>Then for each job that needs to send failure notifications, add a job input for <code>MailOnError</code> and <code>MailOnErrorToAddresses</code>:</p> JobName Name Value &lt; JobName goes here &gt; MailOnError true &lt; JobName goes here &gt; MailOnErrorToAddresses name@client.co.za;name2@client.co.za"},{"location":"integration/acumatica/sdk-provider/","title":"SDK Provider","text":"<p>The Acumatica SDK provider is responsible for mapping Granite Transactions to the relevant format for posting to Acumatica. It makes use of the Acumatica REST API.</p>"},{"location":"integration/acumatica/sdk-provider/#how-it-connects","title":"How it connects","text":"<p>The upwards integration achieved using Acumatica's rest API. For more details on the Acumatica object's used in integration please consult the Acumatica Overview. </p>"},{"location":"integration/acumatica/sdk-provider/#setup","title":"Setup","text":"<ol> <li> <p>Copy everything in the <code>Providers\\Acumatica</code> folder into Integration Service folder (root folder).</p> </li> <li> <p>Ensure <code>SDKProvider.xml</code> setup or copied correctly     <pre><code>&lt;module name=\"Provider\"&gt;\n&lt;bind\n    service=\"Granite.Integration.Contract.IProvider, Granite.Integration.Contract\"\n    to=\"Granite.Integration.Acumatica.Provider, Granite.Integration.Acumatica\"/&gt;\n&lt;/module&gt;\n</code></pre></p> </li> <li> <p>Configure your connection string and endpoint in the <code>Granite.Integration.Web.exe.config</code> file</p> </li> </ol>"},{"location":"integration/acumatica/sdk-provider/#settings","title":"Settings","text":"<p>Note</p> <p>To pick up any changes to the SystemSettings table, the IntegrationService will need to be restarted. </p> <p>The settings for Acumatica are configured in the SystemSettings table. The IntegrationService will pick up the settings using the Application name specified in it's <code>.config</code> file: If this setting is missing from the config file or left empty, the IntegrationService will default to using <code>Acumatica</code> as the SystemSettingsApplicationName. You can browse the IntegrationService's <code>/config</code> page to have the IntegrationService create the default settings in the SystemSettings table for you. </p>"},{"location":"integration/acumatica/sdk-provider/#config-file-settings","title":"Config File Settings","text":"<pre><code>    &lt;add key=\"SystemSettingsApplicationName\" value=\"Acumatica\" /&gt;\n    &lt;add key=\"EndPoint\" value=\"http://:40091/\" /&gt;\n</code></pre>"},{"location":"integration/acumatica/sdk-provider/#systemsettingsapplicationname","title":"SystemSettingsApplicationName","text":"<p>The Application name of the entries in the SystemSettings table that you want to use for this integration service. If this setting is the same as Application name for the ScheduledJobs they can use the same SystemSettings.</p> <p>This setting allows you to have multiple integration services running with different settings.</p>"},{"location":"integration/acumatica/sdk-provider/#acumatica-settings","title":"Acumatica Settings","text":""},{"location":"integration/acumatica/sdk-provider/#lotserial-tracking","title":"Lot/Serial Tracking","text":"<p>For Granite to be able to post Serial Numbers or Batch back to Acumatica the feature in System Management &gt; Enable/Disable Features &gt; Lot and Serial Tracking needs to be turned on. </p> <p>After that a Lot/Serial class must be created and assigned to all Item Classes that require Lot/Serial tracking. </p> <p>If this is not done, acumatica will discard any Lot\\Serial information sent as part of the request. </p>"},{"location":"integration/acumatica/sdk-provider/#control-quantity","title":"Control Quantity","text":"<p>Acumatica has a feature that requires the user to validate the document quantity before changing the document status.  This needs to be disabled in order from Granite to post documents into the system. </p> <p>The setting needs to be disabled in the following places (if Granite is integrating these documents):</p> <ul> <li>Sales Order Preferences &gt; Validate Shipment Total on Confirmation</li> <li>Inventory Preferences &gt; Validate Document Totals on Entry</li> </ul>"},{"location":"integration/acumatica/sdk-provider/#integration-methods","title":"Integration Methods","text":"<p>By default if the method names below is the same as a Granite Transaction type, it will autowire the integration.  If you require a different integration action you can specify the name below in the Process IntegrationMethod property. </p>"},{"location":"integration/acumatica/sdk-provider/#adjustment","title":"ADJUSTMENT","text":"<ul> <li>Granite Transaction: ADJUSTMENT</li> <li>Acumatica: INVENTORY ADJUSTMENT</li> <li>Supports:<ul> <li>Lot</li> <li>Serial</li> </ul> </li> <li>Integration Post<ul> <li>False - Creates a new Inventory Adjustment with status Balanced</li> <li>True - Creates a new Inventory Adjustment and performs the Release action to change the Status to Released</li> </ul> </li> <li>Returns:     Reference Number </li> </ul> Granite Acumatica Entity Required Behavior Code InventoryID Y Qty Qty Y FromLocation WarehouseID Y UOM UOM Y Batch LotSerialNbr N Serial LotSerialNbr N ExpirationDate ExpiryDate N"},{"location":"integration/acumatica/sdk-provider/#scrap","title":"SCRAP","text":"<ul> <li>Granite Transaction: SCRAP</li> <li>Acumatica: INVENTORY ADJUSTMENT</li> <li>Supports:<ul> <li>Lot</li> <li>Serial</li> </ul> </li> <li>Integration Post<ul> <li>False - Creates a new Inventory Adjustment with status Balanced</li> <li>True - Creates a new Inventory Adjustment and performs the Release action to change the Status to Released</li> </ul> </li> <li>Returns:     Reference Number </li> </ul> Granite Acumatica Entity Required Behavior Code InventoryID Y Qty Qty Y FromLocation WarehouseID Y UOM UOM Y Batch LotSerialNbr N Serial LotSerialNbr N ExpirationDate ExpiryDate N"},{"location":"integration/acumatica/sdk-provider/#movereplenish","title":"MOVE/REPLENISH","text":"<p>MOVE and REPLENISH create the same transaction in Acumatica. They both share a transaction type in Acumatica with Transfers. To prevent them being brought into Granite as transfers the external reference populated with Granite Move or Granite Replenish as you can see below.</p> <p></p> <ul> <li>Granite Transaction: MOVE/REPLENISH</li> <li>Acumatica: TransferOrder</li> <li>Supports:<ul> <li>Serial</li> <li>Lot</li> </ul> </li> <li> <p>Return</p> <ul> <li>Transfer Number</li> </ul> </li> <li> <p>Integration Post</p> <ul> <li>False - Creates a 1-Step Transfer in Acumatica with status Balanced. </li> <li>True - Changes the status of the transfer from Balanced to Released</li> </ul> </li> <li>Returns:     TransferNumber</li> </ul> Granite Acumatica Entity Required Behavior Code InventoryID Y Qty Qty Y FromLocation WarehouseID Y ToLocation ToWarehouseID Y UOM UOM Y Batch LotSerialNbr N Serial LotSerialNbr N ExpirationDate ExpiryDate N"},{"location":"integration/acumatica/sdk-provider/#takeon","title":"TAKEON","text":"<p>TAKEON uses the same transaction type in Acumatica as Transfer receipts. To prevent takeon receipts from being pulled into Granite as Transfer receipts the Description is populated with \"Granite Takeon\".  The scheduled job will then exclude there from being integrated.</p> <p></p> <ul> <li>Granite Transaction: TAKEON</li> <li>Acumatica: Inventory Receipt</li> <li>Supports:<ul> <li>Serial</li> <li>Lot</li> </ul> </li> <li>Integration Post<ul> <li>False - Creates a Inventory Receipt in Acumatica with status Balanced</li> <li>True - Changes the status of the Inventory Receipt to from Balanced to Released</li> </ul> </li> <li>Return<ul> <li>Inventory Receipt Number</li> </ul> </li> </ul> Granite Acumatica Entity Required Behavior Code InventoryID Y Qty Qty Y ToLocation WarehouseID Y UOM UOM Y Batch LotSerialNbr N Serial LotSerialNbr N ExpirationDate ExpiryDate N"},{"location":"integration/acumatica/sdk-provider/#reclassify","title":"RECLASSIFY","text":"<p>This process first performs as Adjustment decreasing the stock and then a receipt of the new stock.</p> <ul> <li>Granite Transaction: RECLASSIFY</li> <li>Acumatica: Adjustment =&gt; Receipt</li> <li>Supports:<ul> <li>Serial</li> <li>Lot</li> </ul> </li> <li>Integration Post<ul> <li>False - Creates an Adjustment and Inventory Receipt in Acumatica with status Balanced</li> <li>True - Creates an Adjustment and Inventory Receipt and performs the Release action to change the Status to Released</li> </ul> </li> <li>Returns:     Receipt Number</li> </ul> Granite Acumatica Entity Required Behavior FromCode InventoryID Y ToCode InventoryID Y Qty Qty Y FromLocation WarehouseID Y ToLocation WarehouseID Y UOM UOM Y Batch LotSerialNbr N Serial LotSerialNbr N ExpirationDate ExpiryDate N"},{"location":"integration/acumatica/sdk-provider/#issue","title":"ISSUE","text":"<p>This process issues inventory from stock. After this point it is no longer tracked in Acumatica. This can be seen as a pick but not against a document.  It is not mapped to any specific Granite transaction type. If you have a requirement you will need to specify it as the integration method on the relevant process as you can see below. </p> <p></p> <ul> <li>Granite Transaction: NONE</li> <li>Acumatica: ISSUE</li> <li> <p>Supports:</p> <ul> <li>Lot</li> <li>Serial</li> </ul> </li> <li> <p>Integration Post</p> <ul> <li>False - Creates a new Issue with the status Balanced</li> <li>True - Creates a new Issue and performs the Release action to change the status from balanced to Released</li> </ul> </li> </ul> <p>-Returns      Issue Number</p> Granite Acumatica Entity Required Behavior Code InventoryID Y Qty ShippedQty Y FromLocation WarehouseID Y Lot LotSerialNbr N Serial LotSerialNbr N ExpirationDate ExpiryDate N"},{"location":"integration/acumatica/sdk-provider/#pick","title":"PICK","text":"<ul> <li>Granite Transaction: PICK</li> <li>Acumatica: CREATE SHIPMENT</li> <li> <p>Supports:</p> <ul> <li>Lot</li> <li>Serial</li> </ul> </li> <li> <p>Integration Post</p> <ul> <li>False - Creates a new Shipment with the status Balanced</li> <li>True - Creates a new shipment and performs the Release action to change the Status to Released</li> </ul> </li> <li> <p>Returns:     Shipment Number</p> </li> </ul> Granite Acumatica Entity Required Behavior Document OrderNumber Y LineNumber Y Qty ShippedQty Y DocumentTradingPartnerCode CustomerID Y FromLocation WarehouseID Y Lot LotSerialNbr N Serial LotSerialNbr N ExpirationDate ExpiryDate N"},{"location":"integration/acumatica/sdk-provider/#receive","title":"RECEIVE","text":"<ul> <li>Granite Transaction: RECEIVE</li> <li>Acumatica: CREATE PURCHASE RECEIPT</li> <li> <p>Supports:</p> <ul> <li>Lot</li> <li>Serial</li> </ul> </li> <li> <p>Integration Post</p> <ul> <li>False - Creates a new Purchase Order Receipt with the status Balanced</li> <li>True - Creates a new Purchase Order Receipt and performs the Release action to change the Status to Released. </li> </ul> </li> <li>Returns:     Purchase Order Receipt Number</li> </ul> Granite Acumatica Entity Required Behavior Document POOrderNumber Y LineNumber Y Qty ReceiptQty Y DocumentTradingPartnerCode VendorID Y TLocation WarehouseID Y Batch LotSerialNbr N Serial LotSerialNbr N ExpirationDate ExpiryDate N"},{"location":"integration/acumatica/sdk-provider/#transfer","title":"TRANSFER","text":"<p>Note</p> <p>Acumatica does not have separate fields on Transfers and Receipts for Qty vs ActionQty. As such, the current behavior is to only accept completed lines where the Qty and ActionQty in Granite are equal and therefore match the value in Acumatica.</p> <ul> <li>Granite Transaction: TRANSFER</li> <li>Acumatica: TransferOrder</li> <li>Supports:<ul> <li>Serial</li> <li>Lot</li> </ul> </li> <li> <p>Return</p> <ul> <li>Transfer Number</li> </ul> </li> <li> <p>Integration Post</p> <ul> <li>False - Changes the status of the transfer/receipt from On Hold to Balanced. </li> <li>True - Changes the status of the transfer/receipt from On Hold to Released</li> </ul> </li> <li>Returns:     Transfer/Receipt Number</li> </ul> Granite Acumatica Entity Required Behavior Document TransferOrder/InventoryReceipt Y LineNumber Y Qty Y Compares qty to acumatica document qty Batch LotSerialNbr N Serial LotSerialNbr N ExpirationDate ExpiryDate N"},{"location":"integration/cin7/","title":"CIN7","text":"<p>Note</p> <p>This documentation is a work in progress and is intended to show the development progress of the integration with CIN7. As such, it may be subject to change as progress is made. </p> <p>This document contains all of the information needed to set up and configure integration with CIN7. There are two parts to the complete integration solution:</p> <ul> <li> <p>The SDK Provider is used by the Integration Service to map transactions performed in Granite to the relevant format for CIN7.</p> </li> <li> <p>The integration jobs are used by the Scheduler to pull CIN7's documents, item codes, and trading partners into Granite.</p> </li> </ul> <p>To get an overview of the CIN7 entities/objects that are used in integration see CIN7 Overview</p>"},{"location":"integration/cin7/cin7-overview/","title":"CIN7 Overview","text":"<p>Note</p> <p>This documentation is a work in progress and is intended to show the development progress of the integration with CIN7. As such, it may be subject to change as progress is made. </p> <p>The purpose of this document is to provide an overview of CIN7 in terms of integrating with Granite. For details on how integration will take place and which Granite transactions are supported please see the SDK Provider and the integration jobs.</p>"},{"location":"integration/cin7/cin7-overview/#cin7-business-objects","title":"CIN7 Business Objects:","text":""},{"location":"integration/cin7/cin7-overview/#product","title":"Product","text":"<p>A product in CIN7 is what will be integrated into a Granite as a MasterItem. It has all normal fields like: SKU, Name, Barcode, ect...</p> <p></p>"},{"location":"integration/cin7/cin7-overview/#location","title":"Location","text":"<p>A Location in CIN7 will be used in Granite as an ERP Location. They can be hard to find, but are under Setting&gt;Reference Books&gt;Locations. It is important to have this set up in Granite as all CIN7 transactions require the location.</p> <p></p>"},{"location":"integration/cin7/cin7-overview/#stocktransfer","title":"StockTransfer","text":"<p>The first transaction type is StockTransfer. This is a movement of stock from one CIN7 location to another. This will occur only when stock moves from one ERPLocation to another as CIN7 locations are used as ERPLocations in Granite. The example below only has one item, but it supports multiple items on a single transfer. </p> <p></p>"},{"location":"integration/cin7/cin7-overview/#stocktakeadjustment","title":"StockTake/Adjustment","text":"<p>The next transaction type is StockTake/Adjustment. CIN7 used the same transaction type for both. As you can see at the bottom of the image below, it has tabs for Zero Stock and Non-zero Stock. These simply show if it is creating stock where there was now stock before in that location or if it is adjusting an existing stock level. An interesting thing to note about this transaction, is that you specify the total stock at the location, rather than the amount that you are adjusting by and it will work out how much the stock is changing by. </p> <p></p>"},{"location":"integration/cin7/cin7-overview/#purchase","title":"Purchase","text":"<p>Next up is Purchase. This CIN7 transaction is brought into Granite as Receiving document. Each Purchase will have a Supplier (Inbound Trading Partner in Granite) and a location specified where the stock is going to be received. Below you can see a example of a purchase and all the available statuses. </p> <p></p> <p></p>"},{"location":"integration/cin7/cin7-overview/#sale","title":"Sale","text":"<p>A CIN7 Sale is integrated into Granite as an Order document. It has a Customer(Outbound trading Partner) and a Location where the stock will be picked from. It is processed in three stages. Pick, Pack, and Ship. It must be processed in this order and each previous step needs to be completed before the next step. Below you can see an example and all of the available status. </p> <p></p> <p></p>"},{"location":"integration/cin7/cin7-overview/#production-orders","title":"Production Orders","text":"<p>Work in progress...</p>"},{"location":"integration/cin7/integration-jobs/","title":"Integration Jobs","text":"<p>Note</p> <p>This documentation is a work in progress and is intended to show the development progress of the integration with CIN7. As such, it may be subject to change as progress is made. </p> <p>Integration jobs are a special type of Scheduler job called injected jobs.  See below for information for specifics on how document and master data jobs work.</p>"},{"location":"integration/cin7/integration-jobs/#supported-document-types","title":"Supported document types","text":"<ul> <li> <p>ORDER</p> <p>CIN7 type: Sale</p> </li> <li> <p>RECEIVING</p> <p>CIN7 type: Advanced Purchase</p> </li> <li> <p>TRANSFER</p> <p>CIN7 type: Stock Transfer</p> </li> <li> <p>WORKORDER</p> <p>CIN7 type: Finished Good</p> </li> </ul>"},{"location":"integration/cin7/integration-jobs/#how-it-works","title":"How it works","text":"<p>The downwards integration, as with the upwards, is done though the CIN7 API. </p> <p>To be able to connect to the API you will need to create an API key in CIN7. To do so go to Integration&gt;CoreAPI&gt;AddNew as you can see in the image below. </p> <p></p> <p>Once created, it will generate an Account ID and a Key (as below). These need to be added to system settings in Granite into api-auth-accountid and api-auth-applicationkey respectively. These system settings will be generated when the scheduler is run for the first time. Once you have added these you will need to restart the scheduler.</p> <p></p>"},{"location":"integration/cin7/integration-jobs/#configure-scheduled-jobs","title":"Configure Scheduled Jobs","text":"<p>To create Scheduled Jobs run the following script:</p> <pre><code>INSERT INTO [GraniteDatabase].dbo.ScheduledJobs (isActive, JobName, JobDescription, [Type], InjectJob, Interval, IntervalFormat, AuditDate, AuditUser)\nSELECT 0, 'CIN7 MasterItem Job', 'Syncs MasterItems from CIN7', 'INJECTED', 'Granite.Integration.CIN7.Job.MasterItem', '24', 'HOURS', GETDATE(), 'AUTOMATION'\nWHERE NOT EXISTS (SELECT 1 FROM [GraniteDatabase].dbo.ScheduledJobs WHERE JobName = 'CIN7 MasterItem Job');\n\nINSERT INTO [GraniteDatabase].dbo.ScheduledJobs (isActive, JobName, JobDescription, [Type], InjectJob, Interval, IntervalFormat, AuditDate, AuditUser)\nSELECT 0, 'CIN7 Purchase Order ', 'Syncs PurchaseOrders from CIN7', 'INJECTED', 'Granite.Integration.CIN7.Job.PurchaseOrder', '5', 'MINUTES', GETDATE(), 'AUTOMATION'\nWHERE NOT EXISTS (SELECT 1 FROM [GraniteDatabase].dbo.ScheduledJobs WHERE JobName = 'CIN7 Purchase Order ');\n\nINSERT INTO [GraniteDatabase].dbo.ScheduledJobs (isActive, JobName, JobDescription, [Type], InjectJob, Interval, IntervalFormat, AuditDate, AuditUser)\nSELECT 0, 'CIN7 Sales Order', 'Syncs SalesOrders from CIN7', 'INJECTED', 'Granite.Integration.CIN7.Job.SalesOrder', '5', 'MINUTES', GETDATE(), 'AUTOMATION'\nWHERE NOT EXISTS (SELECT 1 FROM [GraniteDatabase].dbo.ScheduledJobs WHERE JobName = 'CIN7 Sales Order');\n\nINSERT INTO [GraniteDatabase].dbo.ScheduledJobs (isActive, JobName, JobDescription, [Type], InjectJob, Interval, IntervalFormat, AuditDate, AuditUser)\nSELECT 0, 'CIN7 Transfer Job', 'Syncs Transfers from CIN7', 'INJECTED', 'Granite.Integration.CIN7.Job.Transfer', '5', 'MINUTES', GETDATE(), 'AUTOMATION'\nWHERE NOT EXISTS (SELECT 1 FROM [GraniteDatabase].dbo.ScheduledJobs WHERE JobName = 'CIN7 Transfer Job');\n\nINSERT INTO [GraniteDatabase].dbo.ScheduledJobs (isActive, JobName, JobDescription, [Type], InjectJob, Interval, IntervalFormat, AuditDate, AuditUser)\nSELECT 0, 'CIN7 Trading Partner Job', 'Syncs TradingPartners from CIN7', 'INJECTED', 'Granite.Integration.CIN7.Job.TradingPartner', '4', 'HOURS', GETDATE(), 'AUTOMATION'\nWHERE NOT EXISTS (SELECT 1 FROM [GraniteDatabase].dbo.ScheduledJobs WHERE JobName = 'CIN7 Trading Partner Job');\n\nINSERT INTO [GraniteDatabase].dbo.ScheduledJobs (isActive, JobName, JobDescription, [Type], InjectJob, Interval, IntervalFormat, AuditDate, AuditUser)\nSELECT 0, 'CIN7 Product Availability Job', 'Syncs Product Availability from CIN7', 'INJECTED', 'Granite.Integration.CIN7.Job.ProductAvailability', '12', 'HOURS', GETDATE(), 'AUTOMATION'\nWHERE NOT EXISTS (SELECT 1 FROM [GraniteDatabase].dbo.ScheduledJobs WHERE JobName = 'CIN7 Product Availability Job');\n\nINSERT INTO [GraniteDatabase].dbo.ScheduledJobs (isActive, JobName, JobDescription, [Type], InjectJob, Interval, IntervalFormat, AuditDate, AuditUser)\nSELECT 0, 'CIN7 Finished Goods Job', 'Syncs Finished Goods from CIN7', 'INJECTED', 'Granite.Integration.CIN7.Job.WorkOrder', '5', 'MINUTES', GETDATE(), 'AUTOMATION'\nWHERE NOT EXISTS (SELECT 1 FROM [GraniteDatabase].dbo.ScheduledJobs WHERE JobName = 'CIN7 Finished Goods Job');\n</code></pre> <p>For the Product Availability Job you need this table.</p> <pre><code>CREATE TABLE [dbo].[Integration_ProductAvailability](\n    [ProductAvailabilityID] [bigint] IDENTITY(1,1) NOT NULL,\n    [ID] [uniqueidentifier] NOT NULL,\n    [SKU] [nvarchar](100) NOT NULL,\n    [Name] [nvarchar](500) NOT NULL,\n    [Barcode] [nvarchar](50) NULL,\n    [Location] [nvarchar](100) NOT NULL,\n    [Bin] [nvarchar](50) NULL,\n    [Batch] [nvarchar](50) NULL,\n    [ExpiryDate] [datetime2](7) NULL,\n    [OnHand] [decimal](18, 4) NOT NULL,\n    [Allocated] [decimal](18, 4) NOT NULL,\n    [Available] [decimal](18, 4) NOT NULL,\n    [OnOrder] [decimal](18, 4) NOT NULL,\n    [StockOnHand] [decimal](18, 4) NOT NULL,\n    [InTransit] [decimal](18, 4) NOT NULL,\n    [NextDeliveryDate] [datetime2](7) NULL,\n   [Updated] [bit] NULL,\nPRIMARY KEY CLUSTERED \n(\n    [ProductAvailabilityID] ASC\n)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]\n) ON [PRIMARY]\nGO\n</code></pre> <p>This view will populate the StockVariance screen using the ProductAvailability data.</p> <pre><code>CREATE VIEW [dbo].[ERP_StockOnHand]\nAS\nSELECT     Location AS LOCATION, Name AS ITEMNO, OnHand AS QTYONHAND, OnOrder AS QTYONORDER, 0 AS QTYSALORDR, 0 AS AVRCOST\nFROM Integration_ProductAvailability\nGO\n</code></pre>"},{"location":"integration/cin7/integration-jobs/#systemsetting","title":"SystemSetting","text":"<ul> <li><code>BaseUrl</code> - CIN7 API base URL. This is set by default to https://inventory.dearsystems.com/ExternalApi/v2/</li> <li><code>api-auth-accountid</code> - CIN7 API Account ID.</li> <li><code>api-auth-applicationkey</code> - CIN7 API Application Key (encrypted).</li> <li><code>SyncSuppliers</code> - Enable/disable syncing suppliers from CIN7 (default: true).</li> <li><code>SyncCustomers</code> - Enable/disable syncing customers from CIN7 (default: true).</li> <li><code>Locations</code> - CIN7 Locations to sync product availability for, comma delimited</li> </ul>"},{"location":"integration/cin7/integration-jobs/#f-mapping-scripts","title":"F# Mapping Scripts","text":"<p>The CIN7 integration uses F# scripts for configurable mapping between CIN7 entities and Granite entities. This allows customization of how data is transformed during integration without modifying compiled code.</p> Script Location <p>Mapping scripts are located in the <code>Configuration/Scripts/</code> directory within the integration job deployment folder. Each job type has its own configuration script:</p> <ul> <li><code>MasterItemJobConfiguration.fsx</code> - MasterItem mappings</li> <li><code>TradingPartnerJobConfiguration.fsx</code> - Trading Partner (Customer/Supplier) mappings</li> <li><code>SalesOrderJobConfiguration.fsx</code> - Sales Order document mappings</li> <li><code>PurchaseOrderJobConfiguration.fsx</code> - Purchase Order document mappings</li> <li><code>TransferJobConfiguration.fsx</code> - Stock Transfer document mappings</li> <li><code>FinishedGoodsJobConfiguration.fsx</code> - Finished Goods/Work Order document mappings</li> </ul> How It Works <ol> <li>On first run, the F# scripts are compiled into a DLL (<code>Granite.Integration.CIN7.Job.DynamicConfiguration.dll</code>)</li> <li>The compiled DLL is loaded and used for all mapping operations</li> <li>To apply changes to scripts, delete the compiled DLL and restart the scheduler - it will recompile automatically</li> </ol> Configuration Options <p>Each configuration script can define:</p> <p>Document Filtering:</p> <ul> <li><code>ManagedLocations</code> - Array of CIN7 location names. Only documents from these locations will be synced. If empty, all locations are synced.</li> <li><code>SalesRepresentatives</code> - (Sales Orders only) Array of sales rep names. Only orders from these reps will be synced. If empty, all reps are included.</li> <li><code>SkipDocument</code> - Custom function to skip specific documents based on any criteria.</li> </ul> <p>Field Configuration:</p> <ul> <li><code>ERPHeaderUpdateableFields</code> - Fields on the document header that can be updated from CIN7</li> <li><code>ERPHeaderViewIgnoreFields</code> - Fields to ignore when comparing header changes</li> <li><code>ERPDetailUpdateableFields</code> - Fields on document lines that can be updated from CIN7</li> <li><code>ERPDetailViewIgnoreFields</code> - Fields to ignore when comparing line changes</li> </ul> <p>Mapping Functions:</p> <ul> <li><code>MapToSalesOrder</code> / <code>MapToPurchaseOrder</code> / <code>MapToTransfer</code> / <code>MapToWorkOrder</code> - Transform CIN7 documents to Granite documents</li> <li><code>MapToMasterItem</code> - Transform CIN7 products to Granite MasterItems</li> <li><code>MapCustomerToTradingPartner</code> / <code>MapSupplierToTradingPartner</code> - Transform CIN7 customers/suppliers to Granite Trading Partners</li> </ul> Example: Filtering by Location <p>To sync only documents from specific warehouses, modify the <code>ManagedLocations</code> array in the relevant configuration script:</p> <pre><code>member this.ManagedLocations = [|\n    \"Main Warehouse\";\n    \"Distribution Center\";|]\n</code></pre> Example: Custom Document Filtering <p>To skip documents based on custom logic, modify the <code>SkipDocument</code> function:</p> <pre><code>member this.SkipDocument (sale: SaleResponse): bool = \n    // Skip draft orders\n    sale.Status = \"DRAFT\" ||\n    // Skip orders below minimum value\n    sale.Total &lt; 100.0m\n</code></pre> Example: Custom Field Mapping <p>To customize how fields are mapped, modify the mapping function. For example, to map a custom field to the Description:</p> <pre><code>let document = Entities.Granite.Document(\n    Number = sale.Order.SaleOrderNumber,\n    Description = sale.CustomerReference, // Use customer reference instead of note\n    // ... other fields\n)\n</code></pre> <p>Warning</p> <p>After modifying any F# script, you must delete the compiled DLL (<code>Configuration/Granite.Integration.CIN7.Job.DynamicConfiguration.dll</code>) and restart the scheduler for changes to take effect.</p>"},{"location":"integration/cin7/integration-jobs/#document-jobs","title":"Document Jobs","text":"<p>GraniteScheduler runs injected jobs that fetch documents from CIN7 based on their specific criteria (see below for details on each job type). Documents that meet the criteria are inserted into the IntegrationDocumentQueue. The job then processes this queue.</p> <p>When a record with Status 'ENTERED' is found, the job uses a CIN7 REST API request to fetch the information related to that document from CIN7 and apply the changes to the Granite document.</p> <p>All valid changes to data in the Granite tables are logged to the Audit table, showing the previous value and the new value.</p> <p>If a change is made in the ERP system that would put Granite into an invalid state, no changes are applied. Instead, the ERPSyncFailed field is set to true and the ERPSyncFailedReason field shows the reason for the failure. The IntegrationLog table will contain further details on the failure if applicable.</p> Sales Order (ORDER) <ul> <li>Fetches CIN7 Sales that have been updated since the last integration time</li> <li>Maps to Granite document type ORDER</li> <li>Can filter by ManagedLocations and SalesRepresentatives in configuration</li> <li>Uses FromLocation for document lines</li> </ul> Purchase Order (RECEIVING) <ul> <li>Fetches CIN7 Advanced Purchases that have been updated since the last integration time</li> <li>Maps to Granite document type RECEIVING</li> <li>Can filter by ManagedLocations in configuration</li> <li>Uses ToLocation for document lines</li> </ul> Transfer (TRANSFER) <ul> <li>Fetches CIN7 Stock Transfers with status \"ORDERED\"</li> <li>Document type is determined dynamically based on managed locations:<ul> <li>Both locations managed \u2192 TRANSFER</li> <li>Only FromLocation managed \u2192 ORDER (outbound)</li> <li>Only ToLocation managed \u2192 RECEIVING (inbound)</li> </ul> </li> <li>Can filter by ManagedLocations in configuration</li> <li>Uses both FromLocation and ToLocation for document lines</li> </ul> Work Order (WORKORDER) <ul> <li>Fetches CIN7 Finished Goods with status \"AUTHORISED\"</li> <li>Maps to Granite document type WORKORDER</li> <li>Document lines include:<ul> <li>INPUT lines: Raw materials from OrderLines with FromLocation</li> <li>OUTPUT line: Finished product with ToLocation and Batch</li> </ul> </li> <li>Can filter by ManagedLocations in configuration</li> </ul>"},{"location":"integration/cin7/integration-jobs/#master-data-jobs","title":"Master data jobs","text":"<p>MasterItems and TradingPartners have their own Jobs. These Jobs fetch all StockItems, Vendors, and Customers from  CIN7 and compares them to the MasterItems and TradingPartners in Granite. Any inserts / updates are done as required. </p> <p>The document jobs also sync changes to the MasterItems that are on the document. This means that on sites that do not make many changes to their MasterItems it is better to limit running this job to once a day or even less frequently. </p> <p>Document Jobs do not automatically sync trading partners as they are not required to create to the document in Granite and as such are only synced when the TradingPartner Job runs. </p> <p>The mapping below is an example of the standard that is in place. It is configurable through the F# mapping scripts as with the documents.</p> <p>MasterItem Mapping:</p> CIN7 Property Granite Property SKU Code, FormattedCode Name Description Category Category Status isActive UOM UOM ID ERPIdentification Length Length Width Width Height Height Weight UnitWeight Barcode MasterItemAlias <p>Trading Partner Mapping:</p> CIN7 (Customer) Property Granite Property Name Code, Description Status isActive ID ERPIdentification Contact.Name ContactPerson Contact.Phone Tel Contact.Fax Fax Contact.MobilePhone Mobile Contact.Email Email Address.Line1 Address1 Address.Line2 Address2 Address.City Address3 Address.State Address4 Address.Postcode Address5 <p>(Note: Suppliers are mapped similarly but with DocumentType set to \"RECEIVING\" instead of \"ORDER\")</p>"},{"location":"integration/cin7/integration-jobs/#product-availability-job","title":"Product Availability Job","text":"<ul> <li>The job pulls CIN7 product availability (optionally per location if Locations system setting is a comma-separated list; empty = all locations).</li> <li>For each run it:<ol> <li>Sets Updated = 0 on all rows in Integration_ProductAvailability.</li> <li>MERGEs incoming CIN7 rows on (ID, Location), updating quantities/barcodes/batches/expiry and sets Updated = 1. CIN7 ID is stored as a GUID (new GUID generated if CIN7 returns a non-GUID).</li> <li>Deletes any rows still Updated = 0, so only locations/items returned by CIN7 remain.</li> </ol> </li> <li>No IntegrationDocumentQueue is used; it writes directly to Integration_ProductAvailability, which feeds the ERP_StockOnHand view for StockVariance.</li> <li>Default schedule in the example is every 12 hours; adjust the ScheduledJobs interval if you need fresher availability.</li> </ul>"},{"location":"integration/cin7/sdk-provider/","title":"SDK Provider","text":"<p>Note</p> <p>This documentation is a work in progress and is intended to show the development progress of the integration with CIN7. As such, it may be subject to change as progress is made. </p>"},{"location":"integration/cin7/sdk-provider/#how-it-connects","title":"How it connects","text":"<p>The upwards integration, as with the downwards, is done though the CIN7 API. </p> <p>To be able to connect to the API you will need to create an API key in CIN7. To do so go to Integration&gt;CoreAPI&gt;AddNew as you can see in the image below. </p> <p></p> <p>Once created, it will generate an Account ID and a Key (as below). These need to be added to system settings in Granite into api-auth-accountid and api-auth-applicationkey respectively. These system settings will be generated when the integration service is run for the first time. Once you have added these you will need to restart the integration service.</p> <p></p>"},{"location":"integration/cin7/sdk-provider/#systemsetting","title":"SystemSetting","text":"<ul> <li><code>BaseUrl</code> - CIN7 API base URL. This is set by default to https://inventory.dearsystems.com/ExternalApi/v2/</li> <li><code>api-auth-accountid</code> - CIN7 API Account ID.</li> <li><code>api-auth-applicationkey</code> - CIN7 API Application Key (encrypted).</li> </ul>"},{"location":"integration/cin7/sdk-provider/#integration-methods","title":"Integration Methods","text":"<p>Currently, the support transaction are </p> <ul> <li>Move (Stock Transfer)</li> <li>Transfer (Stock Transfer)</li> <li>Adjustment (Stock Adjustment)</li> <li>Receive (Purchase Order Receipt)</li> <li>Pick (Sale Fulfilment Pick)</li> <li>Pack (Sale Fulfilment Pack)</li> </ul> <p>These transactions were done first as they cover all of the main transactions types in CIN7 and most other Granite transactions will be using the same base transactions types.  Outstanding transaction types: </p> <ul> <li>Replenish </li> <li>Reclassify</li> <li>Scrap</li> <li>Consume</li> <li>Manufacture</li> </ul>"},{"location":"integration/cin7/sdk-provider/#adjustment","title":"ADJUSTMENT","text":"<ul> <li>Granite Transaction: ADJUSTMENT</li> <li>CIN7: STOCK ADJUSTMENT</li> <li>Supports:<ul> <li>Batch</li> <li>Serial</li> <li>Expiration Date</li> </ul> </li> <li>Integration Post<ul> <li>False - Creates a new Stock Adjustment with the status Draft</li> <li>True - Creates a new Stock Adjustment with the status Authorized.</li> </ul> </li> <li>Returns:     Stock Adjustment Task ID</li> </ul> Granite Acumatica Entity Required Behavior Code SKU Y Qty Qty Y FromLocation Location Y Batch BatchSN N Serial BatchSN N ExpirationDate ExpiryDate N <p>The quantity filed that is sent to CIN7 is the total qty of the product in that location so the integration provider uses this view to get that qty for each item being adjusted. This view needs to be created on the Granite Database. </p> <pre><code>CREATE VIEW Integration_CIN7_StockOnHand\nAS\nselect MasterItem.Code, Location.ERPLocation, ExpiryDate, Batch, SerialNumber, SUM(Qty) Qty\nfrom TrackingEntity \n        INNER JOIN Location on TrackingEntity.Location_id = Location.ID\n        INNER JOIN MasterItem ON TrackingEntity.MasterItem_id = MasterItem.ID\nWHERE Location.NonStock = 0 AND TrackingEntity.InStock = 1\nGROUP BY MasterItem.Code, Location.ERPLocation, ExpiryDate, Batch, SerialNumber\n</code></pre>"},{"location":"integration/cin7/sdk-provider/#move","title":"MOVE","text":"<ul> <li>Granite Transaction: MOVE</li> <li>CIN7: STOCK Transfer</li> <li>Supports:<ul> <li>Batch</li> <li>Serial</li> <li>Expiration Date</li> </ul> </li> <li>Integration Post<ul> <li>False - Creates a new Stock Transfer with the status Draft</li> <li>True - Creates a new Stock Transfer with the status Authorized.</li> </ul> </li> <li>Returns:     Stock Transfer Task ID</li> </ul> Granite Acumatica Entity Required Behavior Code SKU Y Qty Qty Y FromLocation FromLocation Y ToLocation ToLocation Y Batch BatchSN N Serial BatchSN N ExpirationDate ExpiryDate N"},{"location":"integration/cin7/sdk-provider/#transfer","title":"TRANSFER","text":"<p>Currently only standard Transfers are implemented. Intransit and Receipt are still to be implemented. </p> <ul> <li>Granite Transaction: TRANSFER</li> <li>CIN7: STOCK Transfer</li> <li>Supports:<ul> <li>Batch</li> <li>Serial</li> <li>Expiration Date</li> </ul> </li> <li>Integration Post<ul> <li>False - Creates a new Stock Transfer with the status Draft</li> <li>True - Creates a new Stock Transfer with the status Authorized.</li> </ul> </li> <li>Returns:     Stock Transfer Task ID</li> </ul> Granite Acumatica Entity Required Behavior Document OrderNumber Y Code SKU Y Qty Qty Y FromLocation FromLocation Y ToLocation ToLocation Y Batch BatchSN N Serial BatchSN N ExpirationDate ExpiryDate N"},{"location":"integration/cin7/sdk-provider/#receive","title":"RECEIVE","text":"<ul> <li>Granite Transaction: RECEIVE</li> <li>CIN7: Purchase Stock Receive</li> <li>Supports:<ul> <li>Batch</li> <li>Serial</li> <li>Expiration Date</li> </ul> </li> <li>Integration Post<ul> <li>False - Creates a new Purchase Stock Receive with the status Draft</li> <li>True - Creates a new Purchase Stock Receive with the status Authorized.</li> </ul> </li> <li>Returns:     Purchase Task ID</li> </ul> Granite Acumatica Entity Required Behavior Document OrderNumber Y Code SKU Y Qty Qty Y ToLocation ToLocation Y Batch BatchSN N Serial BatchSN N ExpirationDate ExpiryDate N"},{"location":"integration/cin7/sdk-provider/#pick","title":"PICK","text":"<ul> <li>Granite Transaction: PICK</li> <li>CIN7: Sale Fulfilment Pick</li> <li>Supports:<ul> <li>Batch</li> <li>Serial</li> <li>Expiration Date</li> </ul> </li> <li>Integration Post<ul> <li>False - Creates a new Sale Fulfilment Pick with the status Draft</li> <li>True - Creates a new Sale Fulfilment Pick with the status Authorized.</li> </ul> </li> <li>Returns:     Sale Task ID</li> </ul> Granite Acumatica Entity Required Behavior Document OrderNumber Y Code SKU Y Qty Qty Y FromLocation Location Y Batch BatchSN N Serial BatchSN N ExpirationDate ExpiryDate N"},{"location":"integration/cin7/sdk-provider/#pack","title":"PACK","text":"<ul> <li>Granite Transaction: PACK</li> <li>CIN7: Sale Fulfilment Pack</li> <li>Supports:<ul> <li>Batch</li> <li>Serial</li> <li>Expiration Date</li> </ul> </li> <li>Integration Post<ul> <li>False - Creates a new Sale Fulfilment Pack with the status Draft</li> <li>True - Creates a new Sale Fulfilment Pack with the status Authorized.</li> </ul> </li> <li>Returns:     Sale Task ID</li> </ul> Granite Acumatica Entity Required Behavior Document OrderNumber Y Code SKU Y Qty Qty Y FromLocation Location Y Batch BatchSN N Serial BatchSN N ExpirationDate ExpiryDate N <p>If the item that was picked has a expiry date, serial/batch it then needs to  be packed using the tracking entity number so that the serial and batch gets sent with the Transactions.  You need a separate view for the pack transactions that changes the integration type from pack to something else.  You will also need to call integration through clr on a custom process. </p> <pre><code>CREATE VIEW [dbo].[Integration_Transactions_PACKINGPOST]\nAS\nSELECT * FROM \n(SELECT DISTINCT \n    dbo.[Transaction].ID, dbo.[Transaction].Date, dbo.Users.Name AS [User], dbo.[Transaction].IntegrationStatus, dbo.[Transaction].IntegrationReady, dbo.MasterItem.Code, ISNULL(dbo.[Transaction].UOM, dbo.MasterItem.UOM) \n    AS UOM, dbo.[Transaction].UOMConversion, dbo.[Transaction].FromQty, dbo.[Transaction].ToQty, dbo.[Transaction].ActionQty, dbo.Location.ERPLocation AS FromLocationERPLocation, \n    Location_1.ERPLocation AS ToLocationERPLocation, dbo.[Document].Number AS [Document], dbo.DocumentDetail.LineNumber, MasterItem_1.Code AS FromCode, MasterItem_2.Code AS ToCode, dbo.TrackingEntity.Batch, \n    dbo.[Transaction].Comment, \n    CASE \n    WHEN (dbo.[Transaction].Type = 'PACK')\n    THEN 'CUSTOMPACK'\n    ELSE dbo.[Transaction].Type\n    END AS Type, \n    dbo.[Transaction].Process, dbo.TrackingEntity.SerialNumber, dbo.[Document].Type AS DocumentType, dbo.[Transaction].IntegrationReference, \n    dbo.[Document].Description AS DocumentDescription, dbo.TrackingEntity.ExpiryDate, [log].Message, dbo.DocumentDetail.Cancelled AS DocumentLineCancelled, Location_1.Site AS ToSite, dbo.Location.Site AS FromSite, \n    Process.Name,\n    CASE \n    WHEN dbo.[Transaction].Process ='PACKING' AND dbo.Process.IntegrationIsActive = 0  THEN \n    (SELECT IntegrationIsActive FROM dbo.Process WHERE [Name] = 'PACKINGPOST')\n    ELSE dbo.Process.IntegrationIsActive END\n    as IntegrationIsActive, \n    dbo.[Document].TradingPartnerCode AS DocumentTradingPartnerCode, dbo.[Transaction].DocumentReference AS TransactionDocumentReference, dbo.[Transaction].ReversalTransaction_id\nFROM    dbo.[Transaction] INNER JOIN\n        dbo.TrackingEntity ON dbo.[Transaction].TrackingEntity_id = dbo.TrackingEntity.ID INNER JOIN\n        dbo.MasterItem ON dbo.TrackingEntity.MasterItem_id = dbo.MasterItem.ID INNER JOIN\n        dbo.Users ON dbo.[Transaction].User_id = dbo.Users.ID LEFT OUTER JOIN\n        dbo.Process ON dbo.[Transaction].Process = dbo.Process.Name LEFT OUTER JOIN\n        dbo.Location AS Location_1 ON dbo.[Transaction].ToLocation_id = Location_1.ID LEFT OUTER JOIN\n        dbo.Location ON dbo.[Transaction].FromLocation_id = dbo.Location.ID LEFT OUTER JOIN\n        dbo.[Document] ON dbo.[Transaction].Document_id = dbo.[Document].ID LEFT OUTER JOIN\n        dbo.MasterItem AS MasterItem_1 ON dbo.[Transaction].FromMasterItem_id = MasterItem_1.ID LEFT OUTER JOIN\n        dbo.MasterItem AS MasterItem_2 ON dbo.[Transaction].ToMasterItem_id = MasterItem_2.ID LEFT OUTER JOIN\n        dbo.DocumentDetail ON dbo.[Transaction].DocumentLine_id = dbo.DocumentDetail.ID OUTER APPLY\n        (\n            SELECT TOP(1) [Message]\n            FROM dbo.IntegrationLog\n            WHERE GraniteTransaction_id = [Transaction].ID\n            ORDER BY [Date] DESC\n        ) [log]\nWHERE       dbo.[Transaction].Type = 'PACK' AND \n            IntegrationStatus = 0 AND ISNULL(ReversalTransaction_id, 0) = 0\n) AS table_1\nWHERE table_1.IntegrationIsActive = 1\nGO\n</code></pre> <pre><code>CREATE PROCEDURE [dbo].PrescriptPackingPostDocument (\n   @input dbo.ScriptInputParameters READONLY \n)\nAS\nDECLARE @Output TABLE(\n  Name varchar(max),  \n  Value varchar(max)  \n  )\n\nSET NOCOUNT ON;\n\nDECLARE @valid bit\nDECLARE @message varchar(MAX)\nDECLARE @stepInput varchar(MAX) \nSELECT @stepInput = Value FROM @input WHERE Name = 'StepInput' \n\n\nEXEC    [dbo].[clr_IntegrationPost]\n        @transactionID = null,\n        @document = @stepInput,\n        @documents = null,\n        @reference = null,\n        @transactionType = N'CUSTOMPACK', -- Can be anything, just must match the view above\n        @processName = N'PACKINGPOST',\n        @success = @valid OUTPUT,\n        @message = @message OUTPUT\n\n\nINSERT INTO @Output\nSELECT 'Message', @message\nINSERT INTO @Output\nSELECT 'Valid', @valid\nINSERT INTO @Output\nSELECT 'StepInput', @stepInput\n\n\nSELECT * FROM @Output\n</code></pre>"},{"location":"integration/evo/","title":"Evolution","text":"<p>This document contains all of the information needed to set up and configure integration with Evolution. There are two parts to the complete integration solution:</p> <p>The SDK Provider is used by the Integration Service to map transactions performed in Granite to the relevant format for Evolution.</p> <p>The integration jobs are used by the Scheduler to pull Evolution's documents, item codes, and trading partners into Granite.</p>"},{"location":"integration/evo/integration-jobs/","title":"Integration Jobs","text":"<p>Integration jobs are a special type of Scheduler job called injected jobs.  See below for information for specifics on how document and master data jobs work</p>"},{"location":"integration/evo/integration-jobs/#supported-document-types","title":"Supported document types","text":"<ul> <li> <p>ORDER </p> <p>Evolution type: Sales Order</p> </li> <li> <p>RECEIVING</p> <p>Evolution type: Purchase Order</p> </li> <li> <p>INTRANSIT </p> <p>Evolution type: Inter Branch Transfer OR Inter Branch Requisition</p> </li> <li> <p>RECEIPT</p> <p>Evolution type: Inter Branch Receipt</p> </li> <li> <p>TRANSFER</p> <p>Evolution type: Warehouse Transfer</p> </li> <li> <p>WORKORDER</p> <p>Evolution type: Manufacture Process</p> </li> </ul>"},{"location":"integration/evo/integration-jobs/#how-it-works","title":"How it works","text":""},{"location":"integration/evo/integration-jobs/#document-jobs","title":"Document Jobs","text":"<p>Triggers on the ERP document tables insert a record into the Granite IntegrationDocumentQueue table whenever a change is applied to a document. </p> <p>Scheduler runs injected jobs that monitor the IntegrationDocumentQueue table for records that need to be processed.</p> <p>When a record with Status 'ENTERED' is found, the job uses views on the Granite database to fetch the  information related to that document from the ERP database and apply the changes to the Granite document. </p> <p>All valid changes to data in the Granite tables are logged to the Audit table, showing the previous value and the new value.</p> <p>If a change is made in the ERP system that would put Granite into an invalid state, no changes are applied. Instead, the ERPSyncFailed field is set to true and the ERPSyncFailedReason field shows the reason for the failure. The IntegrationLog table will contain futher details on the failure if applicable.</p>"},{"location":"integration/evo/integration-jobs/#master-data-jobs","title":"Master data jobs","text":"<p>MasterItems and TradingPartners have their own jobs. These jobs compare the results of their respective views to the data in the Granite tables and insert new records / update records as needed.</p> <p>The document jobs themselves also sync changes to the TradingPartners &amp; MasterItems that are on the document. This means that on sites that do not process a lot of changes to master data you can limit the MasterItem/TradingPartner jobs to running once a day or even less frequently.  The only thing they are really still needed for is setting isActive to false when something is deactivated in the ERP system.</p>"},{"location":"integration/evo/integration-jobs/#install","title":"Install","text":"<p>Note</p> <p>If you are upgrading from the old StoredProcedure/Trigger integration, ensure that ERPIdentification (Document, DocumentDetail, MasterItem, TradingPartner) column is populated with correct values before attempting to start the new jobs</p>"},{"location":"integration/evo/integration-jobs/#set-up-database-triggers-views-and-data","title":"Set up database triggers, views, and data","text":"<p>Run the <code>PastelEVOIntegrationJobs_Create.sql</code> or <code>PastelEVOIntegrationJobs_Create_Evo7.sql</code> script to create all the views, triggers and ScheduledJob table entries needed. </p> <p>Use the Evo7 script only for version 7.x sites, for version 9 and up use the standard one.</p>"},{"location":"integration/evo/integration-jobs/#add-the-injected-job-files-to-granitescheduler","title":"Add the Injected job files to GraniteScheduler","text":"<p>To add the injected job files to the GraniteScheduler, simply copy the dlls and xml files into the root folder of GraniteScheduler. </p> <p>Example:</p> <p></p>"},{"location":"integration/evo/integration-jobs/#configure","title":"Configure","text":""},{"location":"integration/evo/integration-jobs/#initial-import","title":"Initial Import","text":"<p>When you first set up a new site, there will be documents that are partially processed already in Evolution. The following document types now support setting an initial ActionQty:</p> <ul> <li>PurchaseOrder</li> <li>SalesOrder</li> </ul> <p>When ActionQty is a column returned by these types' Detail view, the ActionQty will be set to the same in Granite when the lines are inserted. This ensures that users cannot action more than the actual outstanding qty on the document.</p> <p>Note</p> <p>ActionQty will ONLY be used on insert of document lines, never on update as this would cause problems once the document is actioned in Granite.</p> <p>The ActionQty column should be removed from the detail views after the initial import has completed syncing documents.</p> <p>You can use the <code>InitialImport.sql</code> script to enter all of the Evolution documents not in a COMPLETE/CANCELLED statue into the IntegrationDocumentQueue table. The job will then pick these up and insert them once it is enabled.</p> <p>Note</p> <p>Reminder, ActionQty column should be removed from the detail views after the initial import is finished running.</p>"},{"location":"integration/evo/integration-jobs/#schedule-configuration","title":"Schedule configuration","text":"<p>See the GraniteScheduler manual for the basics on how to configure injected jobs. Most of the work will have already been done for you by the <code>PastelEVOIntegrationJobs_Create.sql</code> script, you can simply activate the jobs you want to run. </p> <p>Sometimes when the documents in Evo are very large, the lines will not be finished inserting before we start fetching the records to create in Granite. To circumvent this issue, we have a setting that allows you to configure an offset for the <code>LastUpdateDateTime</code> field in the <code>IntegrationDocumentQueue</code> table.</p> <p>To configure this you simply add an entry into the <code>ScheduledJobInputs</code> table with the Name <code>LastUpdateTimeOffset</code> and the Value in minutes that you want to offset by</p> JobName Name Value SalesOrderJob LastUpdateTimeOffset 5 <p>Using this example, the SalesOrderJob will only pick up documents that have been sitting in the IntegrationDocumentQueue for longer than 5 minutes at the time the job runs. This should give Evo the time it needs to insert all of the lines on a very large document. </p>"},{"location":"integration/evo/integration-jobs/#email-on-error","title":"Email on Error","text":"<p>Note</p> <p>Emailing functionality is now handled by the Custodian API, set up has changed from previous versions.</p> <p>Ensure that you have configured the CustodianApiUrl for the Scheduler in the <code>SystemSettings</code> table:</p> Application Key Value GraniteScheduler CustodianApiUrl https://localhost:5001/ <p>Ensure you have the <code>IntegrationError</code> email template in your database. This is the email template that is used for all error notifications in these injected jobs. </p> <p>Then for each job that needs to send failure notifications, add a job input for <code>MailOnError</code> and <code>MailOnErrorToAddresses</code>:</p> JobName Name Value &lt; JobName goes here &gt; MailOnError true &lt; JobName goes here &gt; MailOnErrorToAddresses name@client.co.za;name2@client.co.za"},{"location":"integration/evo/integration-jobs/#view-customisation","title":"View customisation","text":"<p>Each view can be customised to include custom logic or map extra fields to fields on the corresponding Granite table. </p> <p>All of the standard fields on Granite tables are supported, simply add the required field to your view with an alias matching the Granite field name on the table the view maps to.</p> <p>Non standard fields are also supported, but for these to work your column name on the destination table must start with 'Custom'. On the view, simply alias the name of the field to match the name of the field on the destination Granite table, including the 'Custom' prefix.</p> <p>For fields like Document.Status where you may have custom rules / statuses, use a CASE statement in your view definition so that the view returns the Status that you want to set on the Granite Document table.</p> <p>It is highly advised that you check the validity of yor job on the GraniteScheduler /config page after making a change to your view! Especially after changing filter criteria/joins, your view may be returning duplicate rows - the job validation will bring this to your attention.</p>"},{"location":"integration/evo/integration-jobs/#upgrading-to-version-6","title":"Upgrading to version 6","text":"<p>There are some significant changes that you need to be aware of when upgrading your injected jobs from an earlier version to version 6. When you upgrade, be sure to follow all of the steps below to ensure that all the new changes are applied. </p>"},{"location":"integration/evo/integration-jobs/#upgrade-scheduler-to-version-6","title":"Upgrade Scheduler to version 6","text":"<p>In version 6 there are changes to the contract between the Scheduler and the injected jobs.  This means that in order to run version 6 of the injected jobs, you will need to be using the version 6 release of the Scheduler. </p> <p>Older versions of the Scheduler will not be able to support the version 6 injected jobs.</p>"},{"location":"integration/evo/integration-jobs/#copy-in-new-dlls","title":"Copy in new dlls","text":"<p>Copy the new dlls from the Evolution injected job folder to replace the old ones.</p>"},{"location":"integration/evo/integration-jobs/#replace-triggers","title":"Replace triggers","text":"<p>All triggers have been updated to cater to documents deleted in Evolution.  You should apply the new triggers so that when documents are deleted in Evolution, they are set to CANCELLED status in Granite. </p>"},{"location":"integration/evo/integration-jobs/#update-views","title":"Update views","text":"<p>Almost all of the views have been updated based on feedback from sites using the injected jobs.  These changes include better handling of null values, as well as better mapping of document statuses.</p> <p>A few views also have the <code>ActionQty</code> field added.  If your site is already live, be sure not to add the ActionQty field to your views  With version 6 we have introduced the ability to set the ActionQty on insert for document types that support it.  This is intended for the initial import of open documents when taking a site live - it prevents Granite from being able to action what has already processed in Evolution before the go live. The ActionQty column is present in the views that support it by default.  If you are upgrading it is best to create the views without the ActionQty column. </p>"},{"location":"integration/evo/integration-jobs/#whats-different-about-evolution-jobs","title":"What's different about Evolution jobs","text":""},{"location":"integration/evo/integration-jobs/#single-line-per-masteritem-for-intransit-receipt-and-transfer","title":"Single line per MasterItem for INTRANSIT, RECEIPT, and TRANSFER","text":"<p>Because of the way that these documents are stored and managed on the Evolution database, we can only handle a single line per MasterItem on transfer documents. If a document of one of these types contains multiple lines for a MasterItem, the document insert/update will fail setting the ERPSyncFailedReason accordingly. </p>"},{"location":"integration/evo/integration-jobs/#salesorders-and-purchaseorders-line-mapping","title":"SalesOrders and PurchaseOrders line mapping","text":"<p>Because Evolution stores multiple copies of SalesOrders and PurchaseOrders when changes are made or the document changes status, there is special logic implemented to find the correct versions of lines on the Evolution database. It is calculated using the idInvoiceLines (DocumentDetail ERPIdentification) and the iOrigLineID field. For that reason, the SalesOrderDetail and PurchaseOrderDetail views MUST include all rows from the _btblInvoiceLines table for any given document. These views must not modify the values in ERPIdentification or iOrigLineID for any reason.</p>"},{"location":"integration/evo/integration-jobs/#changing-masteritem-codes","title":"Changing MasterItem codes","text":"<p>If Rename Item Code is used in Evolution to change an Item Code, we will update the MasterItem in Granite to match, thereby updating all of the TrackingEntities and Transactions to the new Code as well. </p> <p>We will not update the MasterItem in Granite if a new Item Code is created in Evolution and Global Item Change is used to change Evolution stock over to the new Item Code. In this case the new Item Code will be added to Granite, but all TrackingEntities will need to be reclassified to the new MasterItem.</p>"},{"location":"integration/evo/integration-jobs/#things-to-look-out-for","title":"Things to look out for","text":""},{"location":"integration/evo/integration-jobs/#importance-of-erpidentification","title":"Importance of ERPIdentification","text":"<p>The injected jobs use the ERPIdentification column on the Document, DocumentDetail and MasterItem tables to look for matching records in the corresponding view. It is very important that you ensure that these values are populated for all records in Granite if you are upgrading from the old Document stored procedures.</p>"},{"location":"integration/evo/integration-jobs/#validation","title":"Validation","text":"<p>Each job type has it's own validation criteria that must be passed before the job will execute. You can check the validity of injected jobs on the GraniteScheduler /config page. </p> <p>Here is an example of some failed validation:</p> <p></p>"},{"location":"integration/evo/sdk-provider/","title":"SDK Provider","text":"<p>The Evolution SDK provider is responsible for mapping Granite transactions to the relevant format for posting to Evolution. It makes use of the Evolution SDK in order to post.</p>"},{"location":"integration/evo/sdk-provider/#setup","title":"Setup","text":"<ol> <li> <p>Check the version of the Evolution SDK that is currently installed on the server. The SDK is usually found at <code>C:\\Program Files (x86)\\Sage Evolution</code>. Take note of the first two numbers of <code>Pastel.Evolution.dll</code> file version.</p> <p>Note</p> <p>If the SDK is not yet installed, please engage with the client's Evolution consultant - the SDK is required for Granite integration.</p> </li> <li> <p>In the <code>Providers\\Evo</code> folder, find the <code>EvoX.Y</code> folder matching the installed SDK version. <code>X.Y</code> must match the first two numbers of the installed SDK version. For example, if the installed SDK version is 7.20.0.14, you will take the files from the Evo7.20 folder</p> </li> <li> <p>Copy everything in the <code>Providers\\Evo\\EvoX.Y</code> folder into Integration Service folder (root folder).</p> </li> <li> <p>Ensure <code>SDKProvider.xml</code> setup or copied correctly     <pre><code>&lt;module name=\"Provider\"&gt;\n&lt;bind\n    service=\"Granite.Integration.Contract.IProvider, Granite.Integration.Contract\"\n    to=\"Granite.Integration.PastelEvo.Provider, Granite.Integration.PastelEvo\"/&gt;\n&lt;/module&gt;\n</code></pre></p> </li> <li> <p>Configure your connection string and endpoint in the <code>Granite.Integration.Web.exe.config</code> file</p> </li> </ol>"},{"location":"integration/evo/sdk-provider/#settings","title":"Settings","text":""},{"location":"integration/evo/sdk-provider/#config-file","title":"Config File","text":"<p>The settings for Sage 200 (Evo) are configured in the SystemSettings table. The IntegrationService will pick up the settings using the Application name specified in it's <code>.config</code> file: <pre><code>&lt;add key =\"SystemSettingsApplicationName\" value=\"IntegrationSage200\"/&gt;\n</code></pre> If this setting is missing from the config file or left empty, the IntegrationService will default to using <code>IntegrationSage200</code> as the SystemSettingsApplicationName</p> <p>You can browse the IntegrationService's <code>/config</code> page to have the IntegrationService create the default settings in the SystemSettings table for you.</p> <p>The script to insert the default settings is also located in the GraniteDatabase release: <pre><code>~\\GraniteDatabase\\Data\\SystemSettings\\SystemSettingsEvolution.sql\n</code></pre></p> <p>Note</p> <p>To pick up any changes to the SystemSettings table, the IntegrationService will need to be restarted.</p>"},{"location":"integration/evo/sdk-provider/#database-systemsettings","title":"Database SystemSettings","text":"Application Key Value Description IntegrationSage200 EvoSqlServer Evo database''s SqlServer instance IntegrationSage200 EvoDatabase Evo database name IntegrationSage200 EvoSqlUserName Sql user for Evo database IntegrationSage200 EvoSqlPassword Sql password for Evo database IntegrationSage200 EvoCommonSqlServer Evo Common database''s SqlServer instance IntegrationSage200 EvoCommonSqlUserName Sql user for Evo Common database IntegrationSage200 EvoCommonSqlPassword Sql password for Evo Common database IntegrationSage200 EvoCommonDatabase Evo Common database name IntegrationSage200 EvoSDKSerialNumber DE09110172 Evo SDK Serial number. Alternate value DE09110060 IntegrationSage200 EvoSDKAuthKey 1228187 Evo SDK auth key. Alternate value 4929466 IntegrationSage200 EvoBreakApartActive false IntegrationSage200 EvoBranchContextActive false IntegrationSage200 EvoBranchUseLocation false IntegrationSage200 EvoTransactionCodeGoodsReceiveVoucher RC IntegrationSage200 EvoTransactionCodeAdjustments ADJ IntegrationSage200 EvoTransactionCodeReclassifyAdjustments ADJ IntegrationSage200 EvoTransactionCodeIssue IIS IntegrationSage200 EvoTransactionCodeProjectsIssue IIS IntegrationSage200 EvoTransactionCodeMove WHT IntegrationSage200 EvoTransactionCodeTransfer WHT IntegrationSage200 EvoManufactureActive false IntegrationSage200 EvoManufactureCodes 2 List of comma separated codes <p>Note</p> <p>in most cases the Data and Common Pastel EVO database is on the same SQL instance and settings will be the same.</p>"},{"location":"integration/evo/sdk-provider/#evosqlserver","title":"EvoSqlServer","text":"<ul> <li>SQL server instance name</li> </ul>"},{"location":"integration/evo/sdk-provider/#evodatabase","title":"EvoDatabase","text":"<ul> <li>Pastel EVO database name</li> </ul>"},{"location":"integration/evo/sdk-provider/#evosqlusername","title":"EvoSqlUserName","text":"<ul> <li>SQL server username</li> </ul>"},{"location":"integration/evo/sdk-provider/#evosqlpassword","title":"EvoSqlPassword","text":"<ul> <li>SQL server password</li> </ul>"},{"location":"integration/evo/sdk-provider/#evocommonsqlserver","title":"EvoCommonSqlServer","text":"<ul> <li>SQL server instance name for common database</li> </ul>"},{"location":"integration/evo/sdk-provider/#evocommondatabase","title":"EvoCommonDatabase","text":"<ul> <li>Pastel EVO common database name</li> </ul>"},{"location":"integration/evo/sdk-provider/#evocommonsqlusername","title":"EvoCommonSqlUserName","text":"<ul> <li>SQL server username for common database</li> </ul>"},{"location":"integration/evo/sdk-provider/#evocommonsqlpassword","title":"EvoCommonSqlPassword","text":"<ul> <li>SQL server password for common database</li> </ul>"},{"location":"integration/evo/sdk-provider/#evosdkserialnumber","title":"EvoSDKSerialNumber","text":"<ul> <li>SDK serial number</li> </ul>"},{"location":"integration/evo/sdk-provider/#evosdkauthkey","title":"EvoSDKAuthKey","text":"<ul> <li>SDK Auth key</li> </ul>"},{"location":"integration/evo/sdk-provider/#evobreakapartactive","title":"EvoBreakApartActive","text":"<ul> <li>Options: true / false</li> <li>Used by: SCRAP</li> <li>When active validate the Batch against the EvoManufactureCodes (appsetting)</li> </ul>"},{"location":"integration/evo/sdk-provider/#evomanufactureactive","title":"EvoManufactureActive","text":"<ul> <li>Options: true / false</li> <li>Used by: TAKEON</li> <li>Workings: When active verify against EvoManufactureCodes (app setting) if valid perform custom Manufacture (MANUFACTURE post).</li> </ul>"},{"location":"integration/evo/sdk-provider/#evomanufacturecodes","title":"EvoManufactureCodes","text":"<ul> <li>Options: comma separated codes. Example : 3214, 3431, 9876</li> <li>Used by: EvoManufactureActive (TAKEON, SCRAP)</li> </ul>"},{"location":"integration/evo/sdk-provider/#evobranchcontextactive","title":"EvoBranchContextActive","text":"<ul> <li>Options: true / false</li> <li>Used by: Application level</li> <li>When active set branch. Branch based on Pastel item OR EvoBranchUseLocation setting.</li> <li>EvoBranchUseLocation: see setting.</li> </ul>"},{"location":"integration/evo/sdk-provider/#evobranchuselocation","title":"EvoBranchUseLocation","text":"<ul> <li>Options: true / false</li> <li>Used by: EvoBranchContextActive</li> <li>When active use Granite site on transaction as branch ID.</li> </ul>"},{"location":"integration/evo/sdk-provider/#evotransactioncodegoodsreceivevoucher","title":"EvoTransactionCodeGoodsReceiveVoucher","text":"<ul> <li>Options: string value representing GoodsReceive Voucher code</li> <li>Used by: TAKEON Inventory transaction code </li> </ul>"},{"location":"integration/evo/sdk-provider/#evotransactioncodeadjustments","title":"EvoTransactionCodeAdjustments","text":"<ul> <li>Options: string value representing transaction inventory code</li> <li>Used by: ADJUSTMENT Inventory transaction code </li> </ul>"},{"location":"integration/evo/sdk-provider/#evotransactioncodereclassifyadjustments","title":"EvoTransactionCodeReclassifyAdjustments","text":"<ul> <li>Options: string value representing transaction inventory code</li> <li>Used by: RECLASSIFY Inventory transaction code </li> </ul>"},{"location":"integration/evo/sdk-provider/#evotransactioncodemove","title":"EvoTransactionCodeMove","text":"<ul> <li>Options: string value representing transaction inventory code</li> <li>Used by: MOVE Inventory transaction code </li> </ul>"},{"location":"integration/evo/sdk-provider/#evotransactioncodetransfer","title":"EvoTransactionCodeTransfer","text":"<ul> <li>Options: string value representing transaction inventory code</li> <li>Used by: TRANSFER Inventory transaction code </li> </ul>"},{"location":"integration/evo/sdk-provider/#evotransactioncodeissue","title":"EvoTransactionCodeIssue","text":"<ul> <li>Options: string value representing transaction inventory code</li> <li>Used by: ISSUE Inventory transaction code </li> </ul>"},{"location":"integration/evo/sdk-provider/#integration-methods","title":"Integration Methods","text":"<p>By default if the method name below is the same as a Granite Transaction type, it will autowire the integration. If you require a different integration action you can specify the name below in the Process IntegrationMethod property.</p>"},{"location":"integration/evo/sdk-provider/#takeon","title":"TAKEON","text":"<p>Note</p> <p>If setting EvoManufactureActive is true and part of the batch of the item taken on is specified in setting EvoManufactureCodes, the item is posted using MANUFACTURE method</p> <ul> <li>Granite: Transaction type TAKEON </li> <li>Evolution: InventoryTransaction RC</li> <li>Supports: <ul> <li>Branch</li> <li>LOT</li> <li>Expiry</li> <li>Serial</li> </ul> </li> <li>IntegrationPost:<ul> <li>Not supported, will always Post InventoryTransaction </li> </ul> </li> <li>Pre-post validation:<ul> <li>ActionQty is greater than 0</li> </ul> </li> <li>Returns:<ul> <li>InventoryTransaction.Audit</li> </ul> </li> </ul> Granite Evo SDK Required Behaviour MasterItem Code InventoryTransaction.InventoryItem Y ToSite Branch N Applies if EvoBranchContextActive is true and EvoBranchUseLocation is true, if EvoBranchUseLocation is false uses InventoryItem's branch Batch InventoryTransaction.Lot.Code N Only applies if InventoryItem is Lot tracked in Evo ExpiryDate InventoryTransaction.Lot.ExpiryDate N Only applies if InventoryItem Lots expire in Evo SerialNumber InventoryTransaction.SerialNumbers N Only applies if InventoryItem is Serial tracked in Evo ToLocation InventoryTransaction.Warehouse Y If ToLocation is empty, uses FromLocation ActionQty InventoryTransaction.Quantity Y Transaction ID InventoryTransaction.Reference Y Prefixed with \"GRANITE ID: \" Comment InventoryTransaction.Reference2 N If Comment is empty, will be set to \"Granite TakeOn\""},{"location":"integration/evo/sdk-provider/#adjustment","title":"ADJUSTMENT","text":"<ul> <li>Granite: Transaction type ADJUSTMENT</li> <li>Evolution: InventoryTransaction ADJ - Inventory Adjustments<ul> <li>Inventory Adjustments Increase and Decrease. </li> </ul> </li> <li>Supports: <ul> <li>Branch</li> <li>LOT</li> <li>Expiry</li> <li>Serial</li> <li>Comment</li> </ul> </li> <li>IntegrationPost:<ul> <li>Not supported, will always Post InventoryTransaction </li> </ul> </li> <li>Pre-post validation:<ul> <li>ActionQty is greater than 0</li> </ul> </li> <li>Returns:<ul> <li>InventoryTransaction.Audit</li> </ul> </li> </ul> Granite Evo SDK Required Behaviour MasterItem Code InventoryTransaction.InventoryItem Y FromSite Branch N Applies if EvoBranchContextActive is true and EvoBranchUseLocation is true, if EvoBranchUseLocation is false uses InventoryItem's branch ToLocation InventoryTransaction.Warehouse Y If ToLocation is empty, uses FromLocation Comment InventoryTransaction.Reference2 N If Comment is empty, will be set to \"Granite Adjustment\" Batch InventoryTransaction.Lot.Code N Only applies if InventoryItem is Lot tracked in Evo ExpiryDate InventoryTransaction.Lot.ExpiryDate N Only applies if InventoryItem Lots expire in Evo SerialNumber InventoryTransaction.SerialNumbers N Only applies if InventoryItem is Serial tracked in Evo ActionQty InventoryTransaction.Quantity Y Transaction ID InventoryTransaction.Reference Y Prefixed with \"GRANITE ID: \""},{"location":"integration/evo/sdk-provider/#reclassify","title":"RECLASSIFY","text":"<p>Note</p> <p>Processes two InventoryAdjustments in Evo. One decreases the qty of the original item code, and the other increases the qty of the new item code.</p> <ul> <li>Granite: Transaction type RECLASSIFY</li> <li>Evolution: Inventory Transaction ADJ. <ul> <li>Inventory Adjustments Increase and Decrease. </li> </ul> </li> <li>Supports: <ul> <li>Branch</li> <li>LOT</li> <li>Expiry</li> </ul> </li> <li>IntegrationPost:<ul> <li>Not supported, will always Post InventoryTransaction </li> </ul> </li> <li>Returns:<ul> <li>InventoryTransaction.ID for QtyDecrease, InventoryTransaction.ID for QtyIncrease </li> </ul> </li> </ul> Granite Evo SDK Required Behaviour MasterItem Code InventoryTransaction.InventoryItem Y FromSite Branch N Applies if EvoBranchContextActive is true and EvoBranchUseLocation is true, if EvoBranchUseLocation is false uses InventoryItem's branch FromLocation InventoryTransaction.Warehouse Y This is the location used for the QtyDecrease transaction ToLocation InventoryTransaction.Warehouse Y This is the location used for the QtyIncrease transaction Comment InventoryTransaction.Reference2 N Batch InventoryTransaction.Lot.Code N Only applies if InventoryItem is Lot tracked in Evo ExpiryDate InventoryTransaction.Lot.ExpiryDate N Only applies if InventoryItem Lots expire in Evo ActionQty InventoryTransaction.Quantity Y Transaction ID InventoryTransaction.Reference Y Prefixed with \"GRANITE ID: \""},{"location":"integration/evo/sdk-provider/#replenish","title":"REPLENISH","text":"<ul> <li>Granite: Transaction type REPLENISH</li> <li>WarehouseTransfer. Inventory Warehouse Transfer. </li> <li>Supports: <ul> <li>Branch</li> <li>LOT</li> <li>Expiry</li> <li>Serial</li> <li>Comment</li> <li>EvoTransactionCodeMove</li> </ul> </li> <li>IntegrationPost:<ul> <li>Not supported, will always Post WarehouseTransfer </li> </ul> </li> <li>Pre-post validation:<ul> <li>ToLocation and FromLocation are not the same</li> <li>InventoryItem is warehouse tracked in Evo</li> </ul> </li> <li>Returns:<ul> <li>WarehouseTransfer.Audit</li> </ul> </li> </ul> Granite Evo SDK Required Behaviour MasterItem Code WarehouseTransfer.InventoryItem Y FromSite Branch N Applies if EvoBranchContextActive is true and EvoBranchUseLocation is true, if EvoBranchUseLocation is false uses InventoryItem's branch Batch WarehouseTransfer.Lot.Code N Only applies if InventoryItem is Lot tracked in Evo ExpiryDate WarehouseTransfer.Lot.ExpiryDate N Only applies if InventoryItem Lots expire in Evo SerialNumber WarehouseTransfer.SerialNumbers N Only applies if InventoryItem is Serial tracked in Evo ActionQty WarehouseTransfer.Quantity Y FromLocation WarehouseTransfer.FromWarehouse Y ToLocation WarehouseTransfer.ToWarehouse Y Transaction ID WarehouseTransfer.Reference Y Prefixed with \"GRANITE ID: \" Comment WarehouseTransfer.Description N If Comment is empty, will be set to \"Granite Move\""},{"location":"integration/evo/sdk-provider/#transfer","title":"TRANSFER","text":"<p>Note</p> <p>Transfer integration does NOT update an existing Transfer document in Evolution. It creates a new warehouse transfer in Evolution when posted. Transactions are grouped by Code, Batch, ExpiryDate, Serial, FromLocation, ToLocation and ActionQty is summed before posting</p> <ul> <li>WarehouseTransfer. Inventory Warehouse Transfer. </li> <li>Supports: <ul> <li>Branch</li> <li>LOT</li> <li>Expiry</li> <li>Serial</li> <li>Comment</li> <li>EvoTransactionCodeMove</li> </ul> </li> <li>IntegrationPost:<ul> <li>Not supported, will always Post WarehouseTransfer </li> </ul> </li> <li>Pre-post validation:<ul> <li>ToLocation and FromLocation are not the same</li> <li>InventoryItem is warehouse tracked in Evo</li> </ul> </li> <li>Returns:<ul> <li>WarehouseTransfer.Audit</li> </ul> </li> </ul> Granite Evo SDK Required Behaviour MasterItem Code WarehouseTransfer.InventoryItem Y FromSite Branch N Applies if EvoBranchContextActive is true and EvoBranchUseLocation is true, if EvoBranchUseLocation is false uses InventoryItem's branch Batch WarehouseTransfer.Lot.Code N Only applies if InventoryItem is Lot tracked in Evo ExpiryDate WarehouseTransfer.Lot.ExpiryDate N Only applies if InventoryItem Lots expire in Evo SerialNumber WarehouseTransfer.SerialNumbers N Only applies if InventoryItem is Serial tracked in Evo ActionQty WarehouseTransfer.Quantity Y FromLocation WarehouseTransfer.FromWarehouse Y ToLocation WarehouseTransfer.ToWarehouse Y Transaction ID WarehouseTransfer.Reference Y Prefixed with \"GRANITE ID: \" Comment WarehouseTransfer.Description N If Comment is empty, will be set to \"Granite Move\""},{"location":"integration/evo/sdk-provider/#dynamictransfer","title":"DYNAMICTRANSFER","text":"<ul> <li>WarehouseTransfer. Inventory Warehouse Transfer. </li> <li>Supports: <ul> <li>Branch</li> <li>LOT</li> <li>Expiry</li> <li>Serial</li> <li>Comment</li> <li>EvoTransactionCodeMove</li> </ul> </li> <li>IntegrationPost:<ul> <li>Not supported, will always Post WarehouseTransfer </li> </ul> </li> <li>Pre-post validation:<ul> <li>ToLocation and FromLocation are not the same</li> <li>InventoryItem is warehouse tracked in Evo</li> </ul> </li> <li>Returns:<ul> <li>WarehouseTransfer.Audit</li> </ul> </li> </ul> Granite Evo SDK Required Behaviour MasterItem Code WarehouseTransfer.InventoryItem Y FromSite Branch N Applies if EvoBranchContextActive is true and EvoBranchUseLocation is true, if EvoBranchUseLocation is false uses InventoryItem's branch Batch WarehouseTransfer.Lot.Code N Only applies if InventoryItem is Lot tracked in Evo ExpiryDate WarehouseTransfer.Lot.ExpiryDate N Only applies if InventoryItem Lots expire in Evo SerialNumber WarehouseTransfer.SerialNumbers N Only applies if InventoryItem is Serial tracked in Evo ActionQty WarehouseTransfer.Quantity Y FromLocation WarehouseTransfer.FromWarehouse Y ToLocation WarehouseTransfer.ToWarehouse Y Transaction ID WarehouseTransfer.Reference Y Prefixed with \"GRANITE ID: \" Comment WarehouseTransfer.Description N If Comment is empty, will be set to \"Granite Move\""},{"location":"integration/evo/sdk-provider/#move","title":"MOVE","text":"<ul> <li>WarehouseTransfer. Inventory Warehouse Transfer. </li> <li>Supports: <ul> <li>Branch</li> <li>LOT</li> <li>Expiry</li> <li>Serial</li> <li>Comment </li> <li>EvoTransactionCodeMove</li> </ul> </li> <li>IntegrationPost:<ul> <li>Not supported, will always Post WarehouseTransfer </li> </ul> </li> <li>Pre-post validation:<ul> <li>ToLocation and FromLocation are not the same</li> <li>InventoryItem is warehouse tracked in Evo</li> </ul> </li> <li>Returns:<ul> <li>WarehouseTransfer.Audit</li> </ul> </li> </ul> Granite Evo SDK Required Behaviour MasterItem Code WarehouseTransfer.InventoryItem Y FromSite Branch N Applies if EvoBranchContextActive is true and EvoBranchUseLocation is true, if EvoBranchUseLocation is false uses InventoryItem's branch Batch WarehouseTransfer.Lot.Code N Only applies if InventoryItem is Lot tracked in Evo ExpiryDate WarehouseTransfer.Lot.ExpiryDate N Only applies if InventoryItem Lots expire in Evo SerialNumber WarehouseTransfer.SerialNumbers N Only applies if InventoryItem is Serial tracked in Evo ActionQty WarehouseTransfer.Quantity Y FromLocation WarehouseTransfer.FromWarehouse Y ToLocation WarehouseTransfer.ToWarehouse Y Transaction ID WarehouseTransfer.Reference Y Prefixed with \"GRANITE ID: \" Comment WarehouseTransfer.Description N If Comment is empty, will be set to \"Granite Move\""},{"location":"integration/evo/sdk-provider/#scrap","title":"SCRAP","text":"<p>Note</p> <p>If setting EvoManufactureActive is true and part of the batch of the item scrapped is specified in setting EvoManufactureCodes, the item will attempt to post as a manufacturing transaction. This is not supported currently and will return an error.</p> <ul> <li>InventoryTransaction ADJ. Inventory Adjustments Decrease. </li> <li>Supports: <ul> <li>Branch</li> <li>LOT</li> <li>Expiry</li> <li>Serial</li> <li>Comment </li> </ul> </li> <li>IntegrationPost:<ul> <li>Not supported, will always Post InventoryTransaction </li> </ul> </li> <li>Pre-post validation:<ul> <li>ActionQty is greater than 0</li> </ul> </li> <li>Returns:<ul> <li>InventoryTransaction.Audit</li> </ul> </li> </ul> Granite Evo SDK Required Behaviour MasterItem Code InventoryTransaction.InventoryItem Y FromSite Branch N Applies if EvoBranchContextActive is true and EvoBranchUseLocation is true, if EvoBranchUseLocation is false uses InventoryItem's branch ToLocation InventoryTransaction.Warehouse Y If ToLocation is empty, uses FromLocation ActionQty InventoryTransaction.Quantity Y Comment InventoryTransaction.Reference2 N If Comment is empty, will be set to \"Granite Adjustment\" Batch InventoryTransaction.Lot.Code N Only applies if InventoryItem is Lot tracked in Evo ExpiryDate InventoryTransaction.Lot.ExpiryDate N Only applies if InventoryItem Lots expire in Evo SerialNumber InventoryTransaction.SerialNumbers N Only applies if InventoryItem is Serial tracked in Evo Transaction ID InventoryTransaction.Reference Y Prefixed with \"GRANITE ID: \""},{"location":"integration/evo/sdk-provider/#pick","title":"PICK","text":"<p>Note</p> <p>Branch can be set on the Sales Order header OR on the Sales Order line using the Inventory Item on the line. </p> <p>Lot support for picking does not work like it does on other integration methods. </p> <p>If the lot number is specified on a line in Evolution, we must pick the same lot in Granite.</p> <p>If we do not pick the same lot in Granite on the same line, we will not post the qty picked on the line in Granite.</p> <ul> <li>SalesOrder. Order Entry Sales Order.</li> <li>Supports: <ul> <li>Branch</li> <li>LOT</li> <li>Serial</li> <li>Comment</li> <li>DocumentReference</li> </ul> </li> <li>IntegrationPost:<ul> <li>False - Save SalesOrder</li> <li>True - Process SalesOrder</li> </ul> </li> <li>Returns:<ul> <li>SalesOrder number or Invoice number, depending on IntegrationPost setting</li> </ul> </li> </ul> Granite Evo SDK Required Behaviour ActionQty Detail.ToProcess Y Batch Detail.Note N Only applies if setting EvoBatchInNotes is true. Adds to comma separated list of unique batches SerialNumber Detail.SerialNumbers N Only applies if InventoryItem is Serial tracked in Evo Comment SalesOrder.ExternalOrderNo N Transaction.DocumentReference SalesOrder.MessageLine1 N"},{"location":"integration/evo/sdk-provider/#dynamicpick","title":"DYNAMICPICK","text":"<p>Note</p> <p>Branch is set based on the Sales Order header </p> <p>Transactions are grouped by Code, Batch, ExpiryDate, Serial, FromLocation, ToLocation and ActionQty is summed before posting</p> <ul> <li>SalesOrder. Order Entry Sales Order. </li> <li>Supports: <ul> <li>TradingPartner</li> <li>Branch</li> <li>Comment </li> </ul> </li> <li>IntegrationPost:<ul> <li>False - Save SalesOrder</li> <li>True - Process SalesOrder</li> </ul> </li> <li>Returns:<ul> <li>SalesOrder number or Invoice number, depending on IntegrationPost setting</li> </ul> </li> </ul> Granite Evo SDK Required Behaviour Document TradingPartnerCode SalesOrder.Customer Y MasterItem Code Detail.InventoryItem Y ActionQty Detail.Quantity Y ActionQty Detail.ToProcess Y Comment SalesOrder.ExternalOrderNo N"},{"location":"integration/evo/sdk-provider/#receive","title":"RECEIVE","text":"<p>Note</p> <p>Branch can be set on the Purchase Order header OR on the Purchase Order line using the Inventory Item on the line. </p> <p>Lot support for receiving does not work like it does on other integration methods.  If the lot number is specified on a line in Evolution, we must receive the same lot in Granite. If we do not receive the same lot in Granite on the same line, we will not post the qty received on the line in Granite. If the lot number is not specified on line in Evolution but the InventoryItem is Lot tracked, we will post the Batch received in Granite.</p> <p>Transactions are grouped by Code, Batch, ExpiryDate, Serial, FromLocation, ToLocation and ActionQty is summed before posting</p> <ul> <li>PurchaseOrder. Order Entry Purchase Order. </li> <li>Supports: <ul> <li>Branch</li> <li>LOT</li> <li>Expiry</li> <li>Serial</li> <li>Comment </li> </ul> </li> <li>IntegrationPost:<ul> <li>False - Save PurchaseOrder</li> <li>True - ProcessStock PurchaseOrder</li> </ul> </li> <li>Returns:<ul> <li>PurchaseOrder number or Receipt number, depending on IntegrationPost setting</li> </ul> </li> </ul> Granite Evo SDK Required Behaviour ActionQty Detail.ToProcess Y Batch Detail.Lot.Code N Only applies if InventoryItem is Lot tracked in Evo, and Lot is not specified on the line in Evo ExpiryDate Detail.Lot.Code N Only applies if InventoryItem Lots are set to expire in Evo SerialNumber Detail.SerialNumbers N Only applies if InventoryItem is Serial tracked in Evo Comment PurchaseOrder.ExternalOrderNo N"},{"location":"integration/evo/sdk-provider/#dynamicreceive","title":"DYNAMICRECEIVE","text":"<p>Note</p> <p>Branch is set based on the Purchase Order header.</p> <p>Transactions are grouped by Code, Batch, ExpiryDate, Serial, FromLocation, ToLocation and ActionQty is summed before posting</p> <ul> <li>PurchaseOrder. Order Entry Purchase Order. </li> <li>Supports: <ul> <li>TradingPartner</li> <li>Branch</li> <li>Comment </li> </ul> </li> <li>IntegrationPost:<ul> <li>False - Save PurchaseOrder</li> <li>True - Process PurchaseOrder</li> </ul> </li> <li>Returns:<ul> <li>PurchaseOrder number or Receipt number, depending on IntegrationPost setting</li> </ul> </li> </ul> Granite Evo SDK Required Behaviour Document TradingPartnerCode PurchaseOrder.Supplier Y MasterItem Code Detail.InventoryItem Y ActionQty Detail.Quantity Y ActionQty Detail.ToProcess Y Comment PurchaseOrder.ExternalOrderNo N"},{"location":"integration/evo/sdk-provider/#receiveline","title":"RECEIVELINE","text":"<p>Note</p> <p>Branch can be set on the Purchase Order header OR on the Purchase Order line using the Inventory Item on the line. </p> <p>Lot support for receiving does not work like it does on other integration methods.  If the lot number is specified on a line in Evolution, we must receive the same lot in Granite. If we do not receive the same lot in Granite on the same line, we will not post the qty received on the line in Granite. If the lot number is not specified on line in Evolution but the InventoryItem is Lot tracked, we will post the Batch received in Granite.</p> <p>Transactions are grouped by Code, Batch, ExpiryDate, Serial, FromLocation, ToLocation and ActionQty is summed before posting</p> <ul> <li>PurchaseOrder. Order Entry Purchase Order. </li> <li>Supports: <ul> <li>Branch</li> <li>LOT</li> <li>Expiry</li> <li>Serial</li> <li>Comment (Evolution ExternalOrderNo field)</li> </ul> </li> <li>IntegrationPost:<ul> <li>Not supported, will always Save PurchaseOrder</li> </ul> </li> <li>Returns:<ul> <li>PurchaseOrder number</li> </ul> </li> </ul> Granite Evo SDK Required Behaviour ActionQty Detail.ToProcess Y Batch Detail.Lot.Code N Only applies if InventoryItem is Lot tracked in Evo, and Lot is not specified on the line in Evo ExpiryDate Detail.Lot.Code N Only applies if InventoryItem Lots are set to expire in Evo SerialNumber Detail.SerialNumbers N Only applies if InventoryItem is Serial tracked in Evo Comment PurchaseOrder.ExternalOrderNo N"},{"location":"integration/evo/sdk-provider/#manufacture","title":"MANUFACTURE","text":"<p>Note</p> <p>Transactions are grouped by Code, Batch, ExpiryDate, Serial, FromLocation, ToLocation and ActionQty is summed before posting</p> <ul> <li> <p>Custom implementation using SDK GLTransaction MFMF, MFDR, MFR4M in conjunction with Database _bspPostStTrans.</p> </li> <li> <p>Posts 2 GL transactions with TransactionCode \"MFDR\" for each BOM Item</p> <ul> <li>Credit account is InventoryItem Group's StockAccount</li> <li>Debit account is GL Account \"7600\"</li> </ul> </li> <li> <p>Posts a GL transaction with transaction code \"MFMF\" for each BOM Item</p> <ul> <li>Credits GL account \"7600\"</li> </ul> </li> <li> <p>Posts a GL transaction with TransactionCode \"40\" for the manufactured item</p> <ul> <li>Debits manufactured item's group's StockAccount (if null defaults to \"7700&gt;020\")</li> </ul> </li> <li> <p>Executes procedure _bspPostStTrans twice for each BOM Item</p> <ul> <li>MFDR</li> <li>MFR4M</li> </ul> </li> <li> <p>Executes procedure _bspPostStTrans for the manufactured item</p> <ul> <li>MFMF</li> </ul> </li> <li> <p>Returns AutoIndex from final _bspPostStTrans if successful</p> </li> </ul>"},{"location":"integration/evo/sdk-provider/#issue","title":"ISSUE","text":"<ul> <li>InventoryTransaction IIS. Pastel OverrideCreditAccount based on Granite transaction Comment.</li> <li>Supports: <ul> <li>Branch</li> <li>LOT</li> <li>Expiry</li> <li>Comment (Evolution Reference2 field)</li> </ul> </li> <li>IntegrationPost:<ul> <li>Not supported, will always Post InventoryTransaction</li> </ul> </li> <li>Returns:<ul> <li>InventoryTransaction.Audit</li> </ul> </li> </ul> Granite Evo SDK Required Behaviour MasterItem Code InventoryTransaction.InventoryItem Y FromSite Branch N Applies if EvoBranchContextActive is true and EvoBranchUseLocation is true, if EvoBranchUseLocation is false uses InventoryItem's branch FromLocation InventoryTransaction.Warehouse Y ActionQty InventoryTransaction.Quantity Y Comment InventoryTransaction.Reference2 N If Comment is empty, will set \"Granite Issue\" Comment InventoryTransaction.OverrideCreditAccount N If Comment is a valid GL Account Code, it will override the default credit account Batch InventoryTransaction.Lot.Code N Only applies if InventoryItem is Lot tracked in Evo ExpiryDate InventoryTransaction.Lot.Code N Only applies if InventoryItem Lots are set to expire in Evo Transaction ID InventoryTransaction.Reference N Prefixed with \"GRANITE ID: \""},{"location":"integration/evo/sdk-provider/#projectissue","title":"PROJECTISSUE","text":"<ul> <li>InventoryTransaction. Qty decrease against a project</li> <li>Supports:<ul> <li>EvoTransactionCodeProjectsIssue (See settings detail)</li> <li>Branch</li> <li>LOT</li> <li>Expiry</li> <li>Comment (Evolution Reference2 field)</li> </ul> </li> <li>IntegrationPost:<ul> <li>Not supported, will always Post InventoryTransaction</li> </ul> </li> <li>Returns:<ul> <li>InventoryTransaction.Audit</li> </ul> </li> </ul> Granite Evo SDK Required Behaviour MasterItem Code InventoryTransaction.InventoryItem Y FromSite Branch N Applies if EvoBranchContextActive is true and EvoBranchUseLocation is true, if EvoBranchUseLocation is false uses InventoryItem's branch EvoTransactionCodeProjectsIssue InventoryTransaction.TransactionCode Y TransactionDocumentReference InventoryTransaction.Project Y FromLocation InventoryTransaction.Warehouse Y ActionQty InventoryTransaction.Quantity Y Comment InventoryTransaction.Reference2 N If Comment is empty, will set \"Granite Issue\" Batch InventoryTransaction.Lot.Code N Only applies if InventoryItem is Lot tracked in Evo ExpiryDate InventoryTransaction.Lot.Code N Only applies if InventoryItem Lots are set to expire in Evo Comment InventoryTransaction.OverrideCreditAccount N If Comment is a valid GL Account Code, it will override the default credit account Transaction ID InventoryTransaction.Reference N Prefixed with \"GRANITE ID: \""},{"location":"integration/evo/sdk-provider/#custom-methods-for-clients","title":"Custom Methods for clients","text":""},{"location":"integration/evo/sdk-provider/#ambro_adjustment","title":"AMBRO_ADJUSTMENT","text":"<ul> <li>Complete custom as per customer requirements.</li> </ul>"},{"location":"integration/evo/sdk-provider/#external-resources","title":"External Resources","text":""},{"location":"integration/evo/sdk-provider/#document-profilesagents","title":"Document Profiles/Agents","text":"<p>Video on Document profiles for agents. https://www.youtube.com/watch?v=Y-RUXaGBg9A</p>"},{"location":"integration/intacct/","title":"Sage Intacct","text":"<p>This document contains all of the information needed to set up and configure integration with Intacct. There are two parts to the complete integration solution:</p> <ul> <li> <p>The SDK Provider is used by the Integration Service to map transactions performed in Granite to the relevant format for Intacct.</p> </li> <li> <p>The integration jobs are used by the Scheduler to pull Intacct's documents, item codes, and trading partners into Granite.</p> </li> </ul>"},{"location":"integration/intacct/#resources","title":"Resources","text":"<ul> <li>Dev: https://developer.intacct.com/</li> </ul>"},{"location":"integration/intacct/integration-jobs/","title":"Integration Jobs","text":"<p>Integration jobs are a special type of Scheduler job called injected jobs. These jobs pull data from Sage Intacct into Granite, including master data (items and trading partners) and documents (orders, purchase orders, transfers).</p>"},{"location":"integration/intacct/integration-jobs/#architecture","title":"Architecture","text":"<p>The integration jobs use the Sage Intacct .NET SDK to communicate with the Intacct XML API, combined with a configurable F# mapping system that allows for easy customization without recompiling the entire application.</p> <ul> <li>Sage Intacct .NET SDK: Official SDK for communicating with the Sage Intacct XML API</li> <li>F# Mapping Scripts: Each job has a corresponding F# script file (<code>.fsx</code>) in the <code>Configuration\\Scripts</code> folder that defines what fields to fetch from Intacct, and how the XML response data maps to Granite entities</li> <li>Concurrent Request Protection: The Granite Scheduler ensures jobs do not run concurrently, preventing duplicate or conflicting sync operations</li> <li>Easy Customization: To customize field mappings, status translations, or add new fields, simply edit the F# script and restart the scheduler</li> </ul>"},{"location":"integration/intacct/integration-jobs/#supported-document-types","title":"Supported document types","text":"<ul> <li> <p>ORDER </p> <p>Sage Intacct type: SODOCUMENT</p> </li> <li> <p>RECEIVING</p> <p>Sage Intacct type: PODOCUMENT</p> </li> <li> <p>INTRANSIT</p> <p>Sage Intacct type: INVDOCUMENT</p> </li> <li> <p>RECEIPT</p> <p>Sage Intacct type: INVDOCUMENT</p> </li> <li> <p>TRANSFER</p> <p>Sage Intacct type: ICTRANSFER</p> </li> </ul>"},{"location":"integration/intacct/integration-jobs/#setup","title":"Setup","text":""},{"location":"integration/intacct/integration-jobs/#add-the-sage-intacct-providers-to-the-granite-scheduler","title":"Add the Sage Intacct providers to the Granite Scheduler","text":"<p>Copy the dlls and xml files from <code>GraniteScheduler\\Providers\\Intacct</code> into the root folder of GraniteScheduler. </p> <p>Example:</p> <p></p>"},{"location":"integration/intacct/integration-jobs/#configure-scheduled-jobs","title":"Configure Scheduled Jobs","text":"<p>To create Scheduled Jobs run the following script:</p> <pre><code>INSERT INTO ScheduledJobs (isActive, JobName, JobDescription, [Type], InjectJob, Interval, IntervalFormat, AuditDate, AuditUser)\nVALUES  (0, 'MasterItemSync', 'Syncs MasterItems from Intacct', 'INJECTED', 'Granite.Integration.SageIntacct.Job.MasterItemJob', '4', 'HOURS', GETDATE(), 'AUTOMATION'),\n        (0, 'PurchaseOrderSync', 'Syncs Purchase Orders from Intacct', 'INJECTED', 'Granite.Integration.SageIntacct.Job.PurchaseOrderJob', '5', 'MINUTES', GETDATE(), 'AUTOMATION'),\n        (0, 'SalesOrderSync', 'Syncs Sales Orders from Intacct', 'INJECTED', 'Granite.Integration.SageIntacct.Job.SalesOrderJob', '5', 'MINUTES', GETDATE(), 'AUTOMATION'),\n        (0, 'TradingPartnerSync', 'Syncs Trading Partners from Intacct', 'INJECTED', 'Granite.Integration.SageIntacct.Job.TradingPartnerJob', '4', 'HOURS', GETDATE(), 'AUTOMATION'),\n        (0, 'IntransitTransferSync', 'Syncs Intransit Transfers from Intacct', 'INJECTED', 'Granite.Integration.SageIntacct.Job.IntransitTransferJob', '5', 'MINUTES', GETDATE(), 'AUTOMATION'),\n        (0, 'ReceiptTransferSync', 'Syncs Receipt Transfers from Intacct', 'INJECTED', 'Granite.Integration.SageIntacct.Job.ReceiptTransferJob', '5', 'MINUTES', GETDATE(), 'AUTOMATION'),\n        (0, 'WarehouseTransferSync', 'Syncs Warehouse Transfers from Intacct', 'INJECTED', 'Granite.Integration.SageIntacct.Job.WarehouseTransferJob', '4', 'HOURS', GETDATE(), 'AUTOMATION')\n</code></pre> <p>For all the details on configuring scheduled jobs, see the scheduler documentation on configuring schedules.</p> <p>After configuring the schedules, be sure to set <code>isActive</code> true for the jobs that you want to run.</p>"},{"location":"integration/intacct/integration-jobs/#system-settings","title":"System Settings","text":"<p>The settings for Intacct Integration Jobs are all stored in the SystemSettings table.  When jobs run, any missing settings will be inserted automatically.</p> <p>To insert all of the settings upfront you can run this script:</p> <pre><code>INSERT INTO SystemSettings ([Application], [Key], [Value], [Description], isActive, isEncrypted, AuditDate, AuditUser, [Version])\nVALUES  ('Integration.SageIntacct.Job', 'SenderId', '', 'Sage Intacct API Sender ID', 1, 0, GETDATE(), 'AUTOMATION', 0),\n        ('Integration.SageIntacct.Job', 'SenderPassword', '', 'Sage Intacct API Sender Password', 1, 0, GETDATE(), 'AUTOMATION', 0),\n        ('Integration.SageIntacct.Job', 'CompanyId', '', 'Sage Intacct API Company ID', 1, 0, GETDATE(), 'AUTOMATION', 0),\n        ('Integration.SageIntacct.Job', 'EntityId', '', 'Sage Intacct API Entity ID', 1, 0, GETDATE(), 'AUTOMATION', 0),\n        ('Integration.SageIntacct.Job', 'UserId', '', 'Sage Intacct API User ID', 1, 0, GETDATE(), 'AUTOMATION', 0),\n        ('Integration.SageIntacct.Job', 'UserPassword', '', 'Sage Intacct API User Password', 1, 0, GETDATE(), 'AUTOMATION', 0),\n        ('Integration.SageIntacct.Job', 'SageDateFormat', 'MM/dd/yyyy HH:mm:ss', 'Sage Intacct Date Format', 1, 0, GETDATE(), 'AUTOMATION', 0),\n        ('Integration.SageIntacct.Job', 'ItemTypes', 'I,K,SK', 'Comma separated list of Item Types to sync from Intacct. Valid types are I, NI, NP, NS, K, SK', 1, 0, GETDATE(), 'AUTOMATION', 0),\n        ('Integration.SageIntacct.Job', 'SalesOrderTypes', 'Sales Order,Sales Order-Inventory', 'Comma separated list of Sales Order Types to sync from Intacct.', 1, 0, GETDATE(), 'AUTOMATION', 0),\n        ('Integration.SageIntacct.Job', 'PurchaseOrderTypes', 'Purchase Order,Purchase Order-Inventory', 'Comma separated list of Purchase Order Types to sync from Intacct.', 1, 0, GETDATE(), 'AUTOMATION', 0),\n        ('Integration.SageIntacct.Job', 'IntransitTransferTypes', 'Inventory Transfer Out', 'Comma separated list of Intransit Transfer Types to sync from Intacct.', 1, 0, GETDATE(), 'AUTOMATION', 0),\n        ('Integration.SageIntacct.Job', 'ReceiptTransferTypes', 'Inventory Transfer In', 'Comma separated list of Receipt Transfer Types to sync from Intacct.', 1, 0, GETDATE(), 'AUTOMATION', 0);\n</code></pre>"},{"location":"integration/intacct/integration-jobs/#senderid","title":"SenderId","text":"<p>Datatype: string Intacct Web Services Sender ID</p>"},{"location":"integration/intacct/integration-jobs/#senderpassword","title":"SenderPassword","text":"<p>Datatype: string Intacct Web Services Password</p>"},{"location":"integration/intacct/integration-jobs/#companyid","title":"CompanyId","text":"<p>Datatype: string Intacct Company name</p>"},{"location":"integration/intacct/integration-jobs/#entityid","title":"EntityId","text":"<p>Datatype: int Intacct Entity ID</p>"},{"location":"integration/intacct/integration-jobs/#userid","title":"UserId","text":"<p>Datatype: string Intacct user name</p>"},{"location":"integration/intacct/integration-jobs/#userpassword","title":"UserPassword","text":"<p>Datatype: string Intacct user password</p>"},{"location":"integration/intacct/integration-jobs/#sagedateformat","title":"SageDateFormat","text":"<p>Datatype: string Date format used by Intacct</p>"},{"location":"integration/intacct/integration-jobs/#itemtypes","title":"ItemTypes","text":"<p>Datatype: comma separated list</p> <p>This setting determines which types of Items in Intacct are valid MasterItems in Granite.  Each type of Item that you want to have as MasterItems in Granite must be in this list. Item types not specified here will not appear on documents fetched from Intacct.</p> <p>Valid values:</p> <ul> <li>I - Inventory</li> <li>NI - Non-Inventory</li> <li>NP - Non-Inventory (Purchase only)</li> <li>NS - Non-Inventory (Sales only)</li> <li>K - Kit</li> <li>SK - Stockable Kit</li> </ul> <p>To add multiple types, list them separated by commas e.g. <code>I,K,SK</code></p>"},{"location":"integration/intacct/integration-jobs/#sales-order-types","title":"Sales Order Types","text":"<p>Datatype: comma separated list This setting determines the types of SalesOrder documents that can be synced from Intacct.</p> <p>To specify multiple types, list them separated by commas e.g. <code>Sales Order,Sales Order-Inventory</code></p>"},{"location":"integration/intacct/integration-jobs/#purchase-order-types","title":"Purchase Order Types","text":"<p>Datatype: comma separated list This setting determines the types of PurchaseOrder documents that can be synced from Intacct.</p> <p>To specify multiple types, list them separated by commas e.g. <code>Purchase Order,Purchase Order-Inventory</code></p>"},{"location":"integration/intacct/integration-jobs/#intransit-transfer-types","title":"Intransit Transfer Types","text":"<p>Datatype: comma separated list This setting determines the types of Inventory Transfer documents that can be synced from Intacct.</p> <p>To specify multiple types, list them separated by commas e.g. <code>Inventory Transfer Out,CPT Transfer Out</code></p>"},{"location":"integration/intacct/integration-jobs/#receipt-transfer-types","title":"Receipt Transfer Types","text":"<p>Datatype: comma separated list This setting determines the types of Inventory Transfer documents that can be synced from Intacct.</p> <p>To specify multiple types, list them separated by commas e.g. <code>Inventory Transfer In,CPT Transfer In</code></p>"},{"location":"integration/intacct/integration-jobs/#customizing-mappings","title":"Customizing Mappings","text":"<p>The F# configuration scripts can be customized to adapt to client-specific requirements. After making changes, simply restart the Granite Scheduler to recompile the scripts.</p> <p>Example 1: Customizing Status Mapping</p> <p>In <code>SalesOrderJobConfiguration.fsx</code>, you can customize how Intacct states map to Granite statuses:</p> <pre><code>let status = \n    match intacctHeader.STATE with\n    | \"Submitted\" -&gt; \"ENTERED\"\n    | \"Approved\" -&gt; \"RELEASED\"\n    | \"Partially Approved\" -&gt; \"ENTERED\"\n    | \"Declined\" -&gt; \"CANCELLED\"\n    | \"Closed\" -&gt; \"CANCELLED\"\n    | \"Converted\" -&gt; \"COMPLETE\"\n    // Add custom status here:\n    | \"Custom Status\" -&gt; \"ONHOLD\"\n    | _ -&gt; \"ENTERED\"\n</code></pre> <p>Example 2: Adding New Fields</p> <p>To map additional Intacct fields to Granite:</p> <ol> <li> <p>Add the field to the XML type definition: <pre><code>[&lt;XmlRoot(\"SODOCUMENT\")&gt;]\ntype IntacctSalesOrderHeader() =\n    // ... existing fields ...\n    [&lt;XmlElement(\"CUSTOMFIELD1\")&gt;]\n    member val CUSTOMFIELD1 = \"\" with get, set\n</code></pre></p> </li> <li> <p>Add the field name to the query fields list: <pre><code>member this.DocumentHeaderQueryFields =\n    seq {\n        \"RECORDNO\"\n        \"DOCNO\"\n        // ... existing fields ...\n        \"CUSTOMFIELD1\"  // Add here\n    }\n</code></pre></p> </li> <li> <p>Map the field in the toDocument function: <pre><code>let document = Document(\n    // ... existing mappings ...\n    Comment = intacctHeader.CUSTOMFIELD1  // Map to appropriate Granite field\n)\n</code></pre></p> </li> </ol> <p>Example 3: Conditional Logic</p> <p>Apply business rules during mapping:</p> <pre><code>let toDocument (intacctHeader: IntacctSalesOrderHeader) =\n    // Set priority based on customer type\n    let priority = \n        if intacctHeader.CUSTOMER_CUSTOMERID.StartsWith(\"VIP\") then 1\n        else 0\n\n    let document = Document(\n        // ... other fields ...\n        Priority = priority\n    )\n    Ok document\n</code></pre> <p>Testing Your Changes</p> <p>After modifying F# scripts:</p> <ol> <li>Delete <code>Configuration\\Granite.Integration.SageIntacct.Job.DynamicConfiguration.dll</code> to force recompilation</li> <li>Restart the Granite Scheduler</li> <li>Check the scheduler <code>/config</code> page to ensure that there are no errors.</li> </ol>"},{"location":"integration/intacct/sdk-provider/","title":"SDK Provider","text":"<p>The Sage Intacct SDK provider is responsible for mapping Granite Transactions to the relevant format for posting to Intacct. It makes use of the Intacct REST API.</p>"},{"location":"integration/intacct/sdk-provider/#settings","title":"Settings","text":"<p>Note</p> <p>Transactions definitions are configured inside Sage Intacct. Go to Module (Inventory, Order Entry, Purchasing) -&gt; Setup -&gt; Transaction definitions</p> Application Key Value Description IntegrationSageIntacct SenderId Sage Intacct SenderId IntegrationSageIntacct SenderPassword Sage Intacct SenderPassword IntegrationSageIntacct CompanyId Sage Intacct CompanyId IntegrationSageIntacct EntityId Sage Intacct EntityId IntegrationSageIntacct UserId Sage Intacct UserId IntegrationSageIntacct UserPassword Sage Intacct UserPassword IntegrationSageIntacct TransactionDefinitionMove Warehouse Transfer Sage Intacct Transaction Definition Move IntegrationSageIntacct TransactionDefinitionScrap Inventory Scrap Sage Intacct Transaction Definition Scrap IntegrationSageIntacct TransactionDefinitionTakeOn Inventory Receipt Sage Intacct Transaction Definition TakeOn IntegrationSageIntacct TransactionDefinitionAdjustmentIncrease Adjustment Increase Sage Intacct Transaction Definition Adjustment Increase IntegrationSageIntacct TransactionDefinitionAdjustmentDecrease Adjustment Decrease Sage Intacct Transaction Definition Adjustment Decrease IntegrationSageIntacct TransactionDefinitionPick Sales Invoice-Inventory Sage Intacct Transaction Definition Pick IntegrationSageIntacct TransactionDefinitionPickOrigin Sales Order-Inventory Sage Intacct Transaction Definition PickOrigin IntegrationSageIntacct TransactionDefinitionReceive Purchase Invoice-Inventory Sage Intacct Transaction Definition Receive IntegrationSageIntacct TransactionDefinitionReceiveOrigin PO Receiver-Inventory Sage Intacct Transaction Definition ReceiveOrigin <pre><code>INSERT INTO [dbo].[SystemSettings] ([Application], [Key], [Value], [Description], [ValueDataType], [isActive], [isEncrypted], [EncryptionKey], [AuditDate], [AuditUser], [Version]) \nVALUES  (N'IntegrationSageIntacct', N'SenderId', N'', N'Sender Id for Sage Intacct', N'string', 1, 0, NULL, GETDATE(), N'AUTOMATION', NULL),\n        (N'IntegrationSageIntacct', N'SenderPassword', N'', N'Sage Intacct SenderPassword', N'string', 1, 0, NULL, GETDATE(), N'AUTOMATION', NULL),\n        (N'IntegrationSageIntacct', N'CompanyId', N'', N'Sage Intacct CompanyId', N'string', 1, 0, NULL, GETDATE(), N'AUTOMATION', NULL),\n        (N'IntegrationSageIntacct', N'EntityId', N'', N'Sage Intacct EntityId', N'string', 1, 0, NULL, GETDATE(), N'AUTOMATION', NULL),\n        (N'IntegrationSageIntacct', N'UserId', N'', N'Sage Intacct UserId', N'string', 1, 0, NULL, GETDATE(), N'AUTOMATION', NULL),\n        (N'IntegrationSageIntacct', N'UserPassword', N'', N'Sage Intacct UserPassword', N'string', 1, 0, NULL, GETDATE(), N'AUTOMATION', NULL),\n        (N'IntegrationSageIntacct', N'TransactionDefinitionMove', N'Warehouse Transfer', N'Sage Intacct Transaction Definition Move', N'string', 1, 0, NULL, GETDATE(), N'AUTOMATION', NULL),\n        (N'IntegrationSageIntacct', N'TransactionDefinitionScrap', N'Inventory Scrap', N'Sage Intacct Transaction Definition Scrap', N'string', 1, 0, NULL, GETDATE(), N'AUTOMATION', NULL),\n        (N'IntegrationSageIntacct', N'TransactionDefinitionTakeOn', N'Inventory Receipt', N'Sage Intacct Transaction Definition TakeOn', N'string', 1, 0, NULL, GETDATE(), N'AUTOMATION', NULL),\n        (N'IntegrationSageIntacct', N'TransactionDefinitionAdjustmentIncrease', N'Adjustment Increase', N'Sage Intacct Transaction Definition Adjustment Increase', N'string', 1, 0, NULL, GETDATE(), N'AUTOMATION', NULL),\n        (N'IntegrationSageIntacct', N'TransactionDefinitionAdjustmentDecrease', N'Adjustment Decrease', N'Sage Intacct Transaction Definition Adjustment Decrease', N'string', 1, 0, NULL, GETDATE(), N'AUTOMATION', NULL),\n        (N'IntegrationSageIntacct', N'TransactionDefinitionPick', N'Sales Invoice-Inventory', N'Sage Intacct Transaction Definition Pick', N'string', 1, 0, NULL, GETDATE(), N'AUTOMATION', NULL),\n        (N'IntegrationSageIntacct', N'TransactionDefinitionPickOrigin', N'Sales Order-Inventory', N'Sage Intacct Transaction Definition PickOrigin', N'string', 1, 0, NULL, GETDATE(), N'AUTOMATION', NULL),\n        (N'IntegrationSageIntacct', N'TransactionDefinitionReceive', N'Purchase Invoice-Inventory', N'Sage Intacct Transaction Definition Receive', N'string', 1, 0, NULL, GETDATE(), N'AUTOMATION', NULL),\n        (N'IntegrationSageIntacct', N'TransactionDefinitionReceiveOrigin', N'PO Receiver-Inventory', N'Sage Intacct Transaction Definition ReceiveOrigin', N'string', 1, 0, NULL, GETDATE(), N'AUTOMATION', NULL),\n</code></pre>"},{"location":"integration/intacct/sdk-provider/#integration-methods","title":"Integration Methods","text":""},{"location":"integration/intacct/sdk-provider/#takeon","title":"TAKEON","text":"Granite Field Intacct Required Behavior TransactionDefinitionTakeOn <code>TransactionDefinition</code> Yes TransactionDefinitionTakeOn setting. Default: Inventory Receipt ReferenceNumber <code>ReferenceNumber</code> Yes This is set to \"Granite\" in this example. Used as a unique reference for the transaction. TransactionDate <code>TransactionDate</code> Yes Automatically set to <code>DateTime.Now</code>, representing the date the transaction is created. EntityId <code>LocationId</code> Yes <code>EntityId</code> setting. ToLocation <code>WarehouseId</code> Yes The destination warehouse or location for the inventory, mapped from the transaction data (<code>transaction.ToLocation</code>). Code <code>ItemId</code> Yes The identifier for the item being transacted, mapped from the transaction code (<code>transaction.Code</code>). ActionQty <code>Quantity</code> Yes The quantity of the item being transacted, mapped from the transaction data (<code>transaction.ActionQty</code>). UOM <code>Unit</code> Yes The unit of measure for the item (e.g., boxes, kg), mapped from the transaction data (<code>transaction.UOM</code>). Batch <code>LotNumber</code> No Populated if <code>ENABLE_LOT_CATEGORY</code> is enabled for the item in Intacct. Taken from <code>transaction.Batch</code>. ExpiryDate <code>ItemExpiration</code> No Populated if <code>ENABLE_EXPIRATION</code> is enabled for the item in Intacct. Taken from <code>transaction.ExpiryDate</code>. SerialNumber <code>SerialNumber</code> No Populated if <code>ENABLE_SERIALNO</code> is enabled for the item in Intacct. Taken from <code>transaction.Serial</code>."},{"location":"integration/intacct/sdk-provider/#adjustment","title":"ADJUSTMENT","text":"Granite Field Intacct Required Behavior TransactionDefinitionAdjustment <code>TransactionDefinition</code> Yes Determines whether the transaction is an increase or decrease based on <code>FromQty</code> and <code>ToQty</code>. Defaults to <code>Adjustment Increase</code> or <code>Adjustment Decrease</code>. ReferenceNumber <code>ReferenceNumber</code> Yes This is set to \"Granite\" in this example. Used as a unique reference for the transaction. TransactionDate <code>TransactionDate</code> Yes Automatically set to <code>DateTime.Now</code>, representing the date the transaction is created. EntityId <code>LocationId</code> Yes <code>EntityId</code> setting. FromLocation <code>WarehouseId</code> Yes The source warehouse or location for the adjustment, mapped from the transaction data (<code>transaction.FromLocation</code>). Code <code>ItemId</code> Yes The identifier for the item being adjusted, mapped from the transaction code (<code>transaction.Code</code>). ActionQty <code>Quantity</code> Yes The quantity of the item being adjusted, mapped from the transaction data (<code>transaction.ActionQty</code>). UOM <code>Unit</code> Yes The unit of measure for the item (e.g., boxes, kg), mapped from the transaction data (<code>transaction.UOM</code>). Batch <code>LotNumber</code> No Populated if <code>ENABLE_LOT_CATEGORY</code> is enabled for the item in Intacct. Taken from <code>transaction.Batch</code>. ExpiryDate <code>ItemExpiration</code> No Populated if <code>ENABLE_EXPIRATION</code> is enabled for the item in Intacct. Taken from <code>transaction.ExpiryDate</code>. SerialNumber <code>SerialNumber</code> No Populated if <code>ENABLE_SERIALNO</code> is enabled for the item in Intacct. Taken from <code>transaction.Serial</code>."},{"location":"integration/intacct/sdk-provider/#move","title":"MOVE","text":"Granite Field Intacct Required Behavior TransactionDefinitionMove <code>TransactionDefinition</code> Yes Defines the move transaction type. Defaults to the <code>Move</code> transaction definition. ReferenceNumber <code>ReferenceNumber</code> Yes This is set to \"Granite\" in this example. Used as a unique reference for the transaction. EntityId <code>LocationId</code> Yes <code>EntityId</code> setting. ToLocation <code>WarehouseId</code> Yes The destination warehouse or location for the inventory move, mapped from <code>transaction.ToLocation</code>. Code <code>ItemId</code> Yes The identifier for the item being moved, mapped from <code>transaction.Code</code>. ActionQty <code>Quantity</code> Yes The quantity of the item being moved, mapped from <code>transaction.ActionQty</code>. UOM <code>Unit</code> Yes The unit of measure for the item (e.g., boxes, kg), mapped from <code>transaction.UOM</code>. Batch <code>LotNumber</code> No Populated if <code>ENABLE_LOT_CATEGORY</code> is enabled for the item in Intacct. Taken from <code>transaction.Batch</code>. ExpiryDate <code>ItemExpiration</code> No Populated if <code>ENABLE_EXPIRATION</code> is enabled for the item in Intacct. Taken from <code>transaction.ExpiryDate</code>. SerialNumber <code>SerialNumber</code> No Populated if <code>ENABLE_SERIALNO</code> is enabled for the item in Intacct. Taken from <code>transaction.Serial</code>."},{"location":"integration/intacct/sdk-provider/#reclassify","title":"RECLASSIFY","text":"Granite Field Intacct Required Behavior TransactionDefinitionAdjustmentDecrease <code>TransactionDefinition</code> Yes Defines the transaction type for decreasing inventory. TransactionDefinitionAdjustmentIncrease <code>TransactionDefinition</code> Yes Defines the transaction type for increasing inventory. ReferenceNumber <code>ReferenceNumber</code> Yes This is set to \"Granite\" in this example. Used as a unique reference for the transaction. TransactionDate <code>TransactionDate</code> Yes Automatically set to <code>DateTime.Now</code>, representing the date the transaction is created. FromLocation <code>WarehouseId</code> Yes The warehouse/location where the inventory is being decreased, mapped from <code>transaction.FromLocation</code>. FromCode <code>ItemId</code> Yes The item identifier for the inventory being decreased, mapped from <code>transaction.FromCode</code>. ActionQty <code>Quantity</code> Yes The quantity being moved, mapped from <code>transaction.ActionQty</code>. UOM <code>Unit</code> Yes The unit of measure for the item (e.g., boxes, kg), mapped from <code>transaction.UOM</code>. ToCode <code>ItemId</code> (Increase Transaction) Yes The item identifier for the inventory being increased, mapped from <code>transaction.ToCode</code>. Batch <code>LotNumber</code> No Populated if <code>ENABLE_LOT_CATEGORY</code> is enabled for the item in Intacct. Taken from <code>transaction.Batch</code>. ExpiryDate <code>ItemExpiration</code> No Populated if <code>ENABLE_EXPIRATION</code> is enabled for the item in Intacct. Taken from <code>transaction.ExpiryDate</code>. SerialNumber <code>SerialNumber</code> No Populated if <code>ENABLE_SERIALNO</code> is enabled for the item in Intacct. Taken from <code>transaction.Serial</code>."},{"location":"integration/intacct/sdk-provider/#scrap","title":"SCRAP","text":"Granite Field Intacct Required Behavior TransactionDefinitionScrap <code>TransactionDefinition</code> Yes Defines the transaction type for scrapping inventory. ReferenceNumber <code>ReferenceNumber</code> Yes This is set to \"Granite\" in this example. Used as a unique reference for the transaction. TransactionDate <code>TransactionDate</code> Yes Automatically set to <code>DateTime.Now</code>, representing the date the transaction is created. FromLocation <code>WarehouseId</code> Yes The warehouse or location where the inventory is being scrapped, mapped from <code>transaction.FromLocation</code>. Code <code>ItemId</code> Yes The identifier for the item being scrapped, mapped from <code>transaction.Code</code>. ActionQty <code>Quantity</code> Yes The quantity of the item being scrapped, mapped from <code>transaction.ActionQty</code>. UOM <code>Unit</code> Yes The unit of measure for the item (e.g., boxes, kg), mapped from <code>transaction.UOM</code>. Batch <code>LotNumber</code> No Populated if <code>ENABLE_LOT_CATEGORY</code> is enabled for the item in Intacct. Taken from <code>transaction.Batch</code>. ExpiryDate <code>ItemExpiration</code> No Populated if <code>ENABLE_EXPIRATION</code> is enabled for the item in Intacct. Taken from <code>transaction.ExpiryDate</code>. SerialNumber <code>SerialNumber</code> No Populated if <code>ENABLE_SERIALNO</code> is enabled for the item in Intacct. Taken from <code>transaction.Serial</code>."},{"location":"integration/intacct/sdk-provider/#pick","title":"PICK","text":"Granite Field Intacct Required Behavior TransactionDefinitionPick <code>TransactionDefinition</code> Yes Defines the transaction type for order entry (in this case, \"Pick\"). CustomerId <code>CustomerId</code> Yes The identifier of the customer (mapped from <code>transactions[0].DocumentTradingPartnerCode</code>). TransactionDate <code>TransactionDate</code> Yes Automatically set to <code>DateTime.Now</code>, representing the date the transaction is created. CreatedFrom <code>CreatedFrom</code> Yes Constructed as <code>\"AppConfig.TransactionDefinitionPickOrigin-{transactions[0].Document}\"</code>. State <code>State</code> Yes The state of the transaction, either \"Closed\" or \"Pending\", based on the <code>post</code> flag. FromLocation <code>WarehouseId</code> Yes The warehouse or location where the inventory is coming from, mapped from <code>transaction.FromLocation</code>. Code <code>ItemId</code> Yes The identifier for the item being processed, mapped from <code>transaction.Code</code>. ActionQty <code>Quantity</code> Yes The quantity of the item being processed, mapped from <code>transaction.ActionQty</code>. UOM <code>Unit</code> Yes The unit of measure for the item (e.g., boxes, kg), mapped from <code>transaction.UOM</code>. Batch <code>LotNumber</code> No Populated if <code>ENABLE_LOT_CATEGORY</code> is enabled for the item in Intacct. Taken from <code>transaction.Batch</code>. ExpiryDate <code>ItemExpiration</code> No Populated if <code>ENABLE_EXPIRATION</code> is enabled for the item in Intacct. Taken from <code>transaction.ExpiryDate</code>. SerialNumber <code>SerialNumber</code> No Populated if <code>ENABLE_SERIALNO</code> is enabled for the item in Intacct. Taken from <code>transaction.Serial</code>."},{"location":"integration/intacct/sdk-provider/#receive","title":"RECEIVE","text":"Granite Field Intacct Required Behavior TransactionDefinitionReceive <code>TransactionDefinition</code> Yes Defines the transaction type for purchasing (in this case, \"Receive\"). VendorId <code>VendorId</code> Yes The identifier for the vendor, mapped from <code>transactions[0].DocumentTradingPartnerCode</code>. VendorDocNumber <code>VendorDocNumber</code> Yes The vendor's document number, mapped from <code>transactions[0].Document</code>. TransactionDate <code>TransactionDate</code> Yes Automatically set to <code>DateTime.Now</code>, representing the date the transaction is created. DueDate <code>DueDate</code> Yes Automatically set to <code>DateTime.Now</code>, representing the due date for the transaction. CreatedFrom <code>CreatedFrom</code> Yes Constructed as <code>\"AppConfig.TransactionDefinitionReceiveOrigin-{transactions[0].Document}\"</code>. State <code>State</code> Yes The state of the transaction, either \"Closed\" or \"Pending\", based on the <code>post</code> flag. FromLocation <code>WarehouseId</code> Yes The warehouse or location where the inventory is coming from, mapped from <code>transaction.FromLocation</code>. Code <code>ItemId</code> Yes The identifier for the item being processed, mapped from <code>transaction.Code</code>. ActionQty <code>Quantity</code> Yes The quantity of the item being processed, mapped from <code>transaction.ActionQty</code>. UOM <code>Unit</code> Yes The unit of measure for the item (e.g., boxes, kg), mapped from <code>transaction.UOM</code>. Batch <code>LotNumber</code> No Populated if <code>ENABLE_LOT_CATEGORY</code> is enabled for the item in Intacct. Taken from <code>transaction.Batch</code>. ExpiryDate <code>ItemExpiration</code> No Populated if <code>ENABLE_EXPIRATION</code> is enabled for the item in Intacct. Taken from <code>transaction.ExpiryDate</code>. SerialNumber <code>SerialNumber</code> No Populated if <code>ENABLE_SERIALNO</code> is enabled for the item in Intacct. Taken from <code>transaction.Serial</code>."},{"location":"integration/intacct/sdk-provider/#transfer","title":"TRANSFER","text":"Granite Field Intacct Required Behavior Description <code>Description</code> Yes A description for the warehouse transfer, hardcoded to <code>\"Granite\"</code>. FromLocation <code>WarehouseId</code> Yes The warehouse or location from which the inventory is being transferred, mapped from <code>transaction.FromLocation</code>. Code <code>ItemId</code> Yes The identifier for the item being transferred, mapped from <code>transaction.Code</code>. ActionQty <code>Quantity</code> Yes The quantity of the item being transferred, mapped from <code>transaction.ActionQty</code>. UOM <code>Unit</code> Yes The unit of measure for the item (e.g., boxes, kg), mapped from <code>transaction.UOM</code>. ToLocation <code>WarehouseId</code> Yes The warehouse or location to which the inventory is being transferred, mapped from <code>transaction.ToLocation</code>. Batch <code>LotNumber</code> No Populated if <code>ENABLE_LOT_CATEGORY</code> is enabled for the item in Intacct. Taken from <code>transaction.Batch</code>. ExpiryDate <code>ItemExpiration</code> No Populated if <code>ENABLE_EXPIRATION</code> is enabled for the item in Intacct. Taken from <code>transaction.ExpiryDate</code>. SerialNumber <code>SerialNumber</code> No Populated if <code>ENABLE_SERIALNO</code> is enabled for the item in Intacct. Taken from <code>transaction.Serial</code>."},{"location":"integration/intacct/standalone-service/","title":"Standalone Integration Service","text":"<p>The Sage Intacct Standalone Integration Service is a modern ASP.NET Core 8 web service that handles upward integration from Granite to Sage Intacct. It replaces the older SDK Provider plugin and Windows Integration Service, providing a more reliable, scalable, and maintainable integration solution.</p> <p>Note</p> <p>This service only handles upward integration (posting transactions from Granite to Intacct). The integration jobs are still used for downward integration (syncing documents and master data from Intacct into Granite).</p>"},{"location":"integration/intacct/standalone-service/#architecture-overview","title":"Architecture Overview","text":"<p>The standalone service is built on:</p> <ul> <li>ASP.NET Core 8 - Modern cross-platform web framework</li> <li>ServiceStack - REST API framework for handling integration requests</li> <li>WorkflowCore - Workflow engine for orchestrating multi-step integration processes</li> <li>SQL Server - Database for workflow persistence and Granite data access</li> <li>Sage Intacct .NET SDK - Official SDK for communicating with the Sage Intacct XML API</li> </ul>"},{"location":"integration/intacct/standalone-service/#key-components","title":"Key Components","text":"<ul> <li>Integration Service - Main REST API endpoint that receives integration requests from Granite</li> <li>Workflow Engine - WorkflowCore manages the lifecycle of each integration transaction</li> <li>Repository Layer - Data access for Granite transactions, settings, and logs</li> <li>Sage Intacct Client - Handles communication with the Sage Intacct XML API using the official .NET SDK</li> <li>Configuration Service - <code>/config</code> endpoint for validation and troubleshooting</li> </ul>"},{"location":"integration/intacct/standalone-service/#setup","title":"Setup","text":""},{"location":"integration/intacct/standalone-service/#prerequisites","title":"Prerequisites","text":"<p>Before installing the service, ensure the following are in place:</p> <ol> <li>IIS - Installed and configured with ASP.NET Core 8 Hosting Bundle<ul> <li>See IIS Getting Started Guide for installation instructions</li> </ul> </li> <li>Granite Database - Service uses the existing Granite database<ul> <li>Workflow tables are created automatically on first run</li> </ul> </li> <li> <p>Sage Intacct Credentials :</p> <ul> <li>SenderId </li> <li>SenderPassword</li> <li>CompanyId</li> <li>EntityId </li> <li>UserId</li> <li>UserPassword</li> </ul> <p>The UserId that you use must be a Web Services user with the appropriate permissions.</p> </li> </ol>"},{"location":"integration/intacct/standalone-service/#installation","title":"Installation","text":"<ol> <li> <p>Configure Connection String</p> <p>Edit <code>appsettings.json</code> in the published folder to point to your Granite database: <pre><code>{\n  \"ConnectionStrings\": {\n    \"CONNECTION\": \"Server=YOUR_SERVER;Database=YOUR_GRANITE_DB;User ID=Granite;Password=YOUR_PASSWORD;TrustServerCertificate=true;\"\n  }\n}\n</code></pre></p> </li> <li> <p>Create IIS Site</p> <p>Add the service as a new site in IIS following the Adding a site to IIS guide.</p> </li> <li> <p>Verify Installation</p> <p>Browse to the <code>/config</code> to verify the service is running.</p> <p>The config page shows: - Connection String - Censored connection string to Granite database - Intacct Connection State - Tests connection to Sage Intacct API - System Settings - Lists all configured settings (passwords hidden)</p> <p>If everything is configured correctly, you should see \"Connected\" for the Intacct Connection State.</p> </li> <li> <p>Update ProcessApp appsettings</p> <p>Point the ProcessApp's IntegrationService setting to the endpoint that you have configured.</p> </li> </ol>"},{"location":"integration/intacct/standalone-service/#settings","title":"Settings","text":"<p>Settings are stored in the Granite database <code>SystemSettings</code> table. The service will automatically create missing settings with default values on first access.</p>"},{"location":"integration/intacct/standalone-service/#sage-intacct-api-credentials","title":"Sage Intacct API Credentials","text":"<p>The service requires two sets of credentials to authenticate with Sage Intacct:</p> <p>Web Services Credentials</p> Key Description Required SenderId Sage Intacct Sender ID Yes SenderPassword Sage Intacct Password Yes <p>Company Credentials</p> Key Description Required CompanyId Sage Intacct Company ID Yes EntityId Sage Intacct Entity ID Yes UserId Sage Intacct User ID Yes UserPassword Sage Intacct User Password Yes"},{"location":"integration/intacct/standalone-service/#transaction-definitions","title":"Transaction Definitions","text":"<p>Note</p> <p>Transaction definitions are configured inside Sage Intacct. They must be configured by the Intacct implementation partner before we can start posting transactions from Granite</p> Key Default Value Description TransactionDefinitionMove Warehouse Transfer Transaction definition for MOVE operations TransactionDefinitionScrap Inventory Scrap Transaction definition for SCRAP operations TransactionDefinitionTakeOn Inventory Receipt Transaction definition for TAKEON operations TransactionDefinitionAdjustmentIncrease Adjustment Increase Transaction definition for ADJUSTMENT increases TransactionDefinitionAdjustmentDecrease Adjustment Decrease Transaction definition for ADJUSTMENT decreases TransactionDefinitionPick Sales Invoice-Inventory Transaction definition for PICK operations TransactionDefinitionPickOrigin Sales Order-Inventory Origin transaction definition for PICK operations TransactionDefinitionReceive Purchase Invoice-Inventory Transaction definition for RECEIVE operations TransactionDefinitionReceiveOrigin PO Receiver-Inventory Origin transaction definition for RECEIVE operations"},{"location":"integration/intacct/standalone-service/#advanced-settings","title":"Advanced Settings","text":""},{"location":"integration/intacct/standalone-service/#waitforintacctseconds","title":"WaitForIntacctSeconds","text":"<p>Default: <code>10</code> Type: Integer</p> <p>Defines the maximum time (in seconds) that the integration service will wait for a workflow (i.e. an integration post) to complete before timing out.  When a timeout occurs, the request continues in the background and the user is notified to check back later to see if the request completed successfully.</p> <p>This setting is necessary because posting to the Intacct Api is slower than legacy on prem ERPs.  Sometimes posting a large invoice can take upwards of 30s to complete, which would mean that the user cannot do anything else on the scanner until posting is finalized.</p>"},{"location":"integration/intacct/standalone-service/#mapbatchtolinememo","title":"MapBatchToLineMemo","text":"<p>Default: <code>false</code> Type: Boolean</p> <p>When enabled, this setting copies the batch/lot number from Granite's TrackingEntity to the line memo field on Sage Intacct sales order lines during PICK operations.</p> <ul> <li><code>true</code> - Batch numbers are written to the invoice line memo</li> <li><code>false</code> - Batch numbers are not written to the memo field</li> </ul> <p>This is useful for customers who need batch/lot traceability visible in Intacct invoice line details but don't want to actually carry lot numbers in Intacct.</p>"},{"location":"integration/intacct/standalone-service/#salesorderitemtypesthatcopylines","title":"SalesOrderItemTypesThatCopyLines","text":"<p>Default: (empty) Type: Comma-separated string</p> <p>Specifies which Sage Intacct item types should be automatically copied from the original sales order to the invoice during PICK operations. This is used for non-inventory items that need to carry over from the order to the invoice.</p> <p>Example: <pre><code>Service,Charge\n</code></pre></p> <p>How it works:</p> <ol> <li>Service retrieves all lines from the original sales order in Intacct</li> <li>For each line, checks if the item's type matches any in this setting</li> <li>If matched, the entire line (quantity, price, description) is copied to the new invoice</li> <li>This happens in addition to the inventory lines being picked from Granite</li> </ol> <p>Leave empty if you only want inventory items from Granite to appear on invoices.</p>"},{"location":"integration/intacct/standalone-service/#sql-setup-script","title":"SQL Setup Script","text":"<p>To insert all settings at once:</p> <pre><code>INSERT INTO [dbo].[SystemSettings] \n    ([Application], [Key], [Value], [Description], [ValueDataType], [isActive], [isEncrypted], [EncryptionKey], [AuditDate], [AuditUser], [Version]) \nVALUES  \n    (N'IntegrationSageIntacct', N'SenderId', N'', N'Sage Intacct SenderId', N'string', 1, 0, NULL, GETDATE(), N'AUTOMATION', NULL),\n    (N'IntegrationSageIntacct', N'SenderPassword', N'', N'Sage Intacct SenderPassword', N'string', 1, 0, NULL, GETDATE(), N'AUTOMATION', NULL),\n    (N'IntegrationSageIntacct', N'CompanyId', N'', N'Sage Intacct CompanyId', N'string', 1, 0, NULL, GETDATE(), N'AUTOMATION', NULL),\n    (N'IntegrationSageIntacct', N'EntityId', N'', N'Sage Intacct EntityId', N'string', 1, 0, NULL, GETDATE(), N'AUTOMATION', NULL),\n    (N'IntegrationSageIntacct', N'UserId', N'', N'Sage Intacct UserId', N'string', 1, 0, NULL, GETDATE(), N'AUTOMATION', NULL),\n    (N'IntegrationSageIntacct', N'UserPassword', N'', N'Sage Intacct UserPassword', N'string', 1, 0, NULL, GETDATE(), N'AUTOMATION', NULL),\n    (N'IntegrationSageIntacct', N'TransactionDefinitionMove', N'Warehouse Transfer', N'Sage Intacct Transaction Definition Move', N'string', 1, 0, NULL, GETDATE(), N'AUTOMATION', NULL),\n    (N'IntegrationSageIntacct', N'TransactionDefinitionScrap', N'Inventory Scrap', N'Sage Intacct Transaction Definition Scrap', N'string', 1, 0, NULL, GETDATE(), N'AUTOMATION', NULL),\n    (N'IntegrationSageIntacct', N'TransactionDefinitionTakeOn', N'Inventory Receipt', N'Sage Intacct Transaction Definition TakeOn', N'string', 1, 0, NULL, GETDATE(), N'AUTOMATION', NULL),\n    (N'IntegrationSageIntacct', N'TransactionDefinitionAdjustmentIncrease', N'Adjustment Increase', N'Sage Intacct Transaction Definition Adjustment Increase', N'string', 1, 0, NULL, GETDATE(), N'AUTOMATION', NULL),\n    (N'IntegrationSageIntacct', N'TransactionDefinitionAdjustmentDecrease', N'Adjustment Decrease', N'Sage Intacct Transaction Definition Adjustment Decrease', N'string', 1, 0, NULL, GETDATE(), N'AUTOMATION', NULL),\n    (N'IntegrationSageIntacct', N'TransactionDefinitionPick', N'Sales Invoice-Inventory', N'Sage Intacct Transaction Definition Pick', N'string', 1, 0, NULL, GETDATE(), N'AUTOMATION', NULL),\n    (N'IntegrationSageIntacct', N'TransactionDefinitionPickOrigin', N'Sales Order-Inventory', N'Sage Intacct Transaction Definition PickOrigin', N'string', 1, 0, NULL, GETDATE(), N'AUTOMATION', NULL),\n    (N'IntegrationSageIntacct', N'TransactionDefinitionReceive', N'Purchase Invoice-Inventory', N'Sage Intacct Transaction Definition Receive', N'string', 1, 0, NULL, GETDATE(), N'AUTOMATION', NULL),\n    (N'IntegrationSageIntacct', N'TransactionDefinitionReceiveOrigin', N'PO Receiver-Inventory', N'Sage Intacct Transaction Definition ReceiveOrigin', N'string', 1, 0, NULL, GETDATE(), N'AUTOMATION', NULL),\n    (N'IntegrationSageIntacct', N'WaitForIntacctSeconds', N'10', N'Number of seconds to wait for Intacct when processing an integration request', N'int', 1, 0, NULL, GETDATE(), N'AUTOMATION', NULL),\n    (N'IntegrationSageIntacct', N'MapBatchToLineMemo', N'false', N'Update Sales Order line memo with the batch from the TrackingEntity', N'bool', 1, 0, NULL, GETDATE(), N'AUTOMATION', NULL),\n    (N'IntegrationSageIntacct', N'SalesOrderItemTypesThatCopyLines', N'', N'Comma separated list of Item Types that should be copied from SalesOrders to Invoices', N'string', 1, 0, NULL, GETDATE(), N'AUTOMATION', NULL);\n</code></pre> <p>Note</p> <p>After updating settings in the SystemSettings table, you must restart the IIS site for changes to take effect.</p>"},{"location":"integration/intacct/standalone-service/#integration-methods","title":"Integration Methods","text":"<p>The service supports the same integration methods as the old SDK Provider, with enhanced flexibility and extensibility.</p>"},{"location":"integration/intacct/standalone-service/#understanding-integration-methods-and-workflows","title":"Understanding Integration Methods and Workflows","text":"<p>An integration method (e.g., TAKEON, PICK, RECEIVE) is essentially a workflow - a series of steps that execute in sequence to complete an integration operation. Each workflow is built using WorkflowCore and consists of one or more steps:</p> <p>Workflow Steps</p> <p>A typical integration workflow includes:</p> <ol> <li>API Call Step - Communicates with Sage Intacct API to create or update transactions</li> <li>Update Transactions Step - Marks Granite transactions as integrated and stores the Intacct reference</li> <li>Error Handling - Captures and logs any failures for troubleshooting</li> </ol> <p>For example, the PICK workflow: - CreateInvoiceStep - Creates the sales invoice in Intacct - UpdateTransactionsStep - Updates Granite transactions with the invoice number</p> <p>The workflow-based architecture allows for custom integration methods to be added for specific client requirements:</p> <ul> <li>New workflows can be created by combining existing steps or writing new steps</li> <li>Custom logic can be added for specific scenarios without affecting standard methods</li> <li>Process-specific methods can be configured via the <code>IntegrationMethod</code> field in the Process settings</li> </ul> <p>Custom Method Example</p> <p>If a client needs a special \"TRANSFER\" operation that performs additional validation or custom field mapping, a new workflow can be created (e.g., <code>CustomTransferWorkflow</code>) with the required steps. The Process in Granite is then linked to this new <code>CustomTransferWorkflow</code> workflow in place of the default TRANSFER integration method.</p> <p>This design provides both standard methods that work out of the box and the flexibility to adapt to unique business requirements.</p>"},{"location":"integration/intacct/standalone-service/#standard-integration-methods","title":"Standard Integration Methods","text":"<p>The following methods are available by default:</p>"},{"location":"integration/intacct/standalone-service/#takeon","title":"TAKEON","text":"<p>Creates an Inventory Transaction for initial stock receipt.</p> <ul> <li>Granite Transaction Type: TAKEON</li> <li>Intacct Transaction: Inventory Transaction (configured via TransactionDefinitionTakeOn)</li> <li>Supports: Lot tracking, Serial numbers, Expiry dates</li> </ul> Granite Field Intacct Field Required Behavior TransactionDefinitionTakeOn TransactionDefinition Yes From system setting ReferenceNumber ReferenceNumber Yes Set to \"Granite\" TransactionDate TransactionDate Yes Current date/time EntityId LocationId Yes From system setting ToLocation WarehouseId Yes Destination warehouse Code ItemId Yes Item identifier ActionQty Quantity Yes Quantity to receive UOM Unit Yes Unit of measure Batch LotNumber No If ENABLE_LOT_CATEGORY enabled ExpiryDate ItemExpiration No If ENABLE_EXPIRATION enabled SerialNumber SerialNumber No If ENABLE_SERIALNO enabled"},{"location":"integration/intacct/standalone-service/#adjustment","title":"ADJUSTMENT","text":"<p>Adjusts inventory quantities up or down.</p> <ul> <li>Granite Transaction Type: ADJUSTMENT</li> <li>Intacct Transaction: Inventory Transaction (Increase or Decrease based on qty)</li> <li>Supports: Lot tracking, Serial numbers, Expiry dates</li> </ul> <p>The service automatically determines whether to use TransactionDefinitionAdjustmentIncrease or TransactionDefinitionAdjustmentDecrease based on the FromQty and ToQty values.</p> Granite Field Intacct Field Required Behavior TransactionDefinitionAdjustment TransactionDefinition Yes Auto-selected (Increase/Decrease) ReferenceNumber ReferenceNumber Yes Set to \"Granite\" TransactionDate TransactionDate Yes Current date/time EntityId LocationId Yes From system setting FromLocation WarehouseId Yes Source warehouse Code ItemId Yes Item identifier ActionQty Quantity Yes Quantity to adjust UOM Unit Yes Unit of measure Batch LotNumber No If ENABLE_LOT_CATEGORY enabled ExpiryDate ItemExpiration No If ENABLE_EXPIRATION enabled SerialNumber SerialNumber No If ENABLE_SERIALNO enabled"},{"location":"integration/intacct/standalone-service/#move","title":"MOVE","text":"<p>Moves inventory between warehouses within the same location.</p> <ul> <li>Granite Transaction Type: MOVE</li> <li>Intacct Transaction: Inventory Transaction (configured via TransactionDefinitionMove)</li> <li>Supports: Lot tracking, Serial numbers, Expiry dates</li> </ul> Granite Field Intacct Field Required Behavior TransactionDefinitionMove TransactionDefinition Yes From system setting ReferenceNumber ReferenceNumber Yes Set to \"Granite\" EntityId LocationId Yes From system setting ToLocation WarehouseId Yes Destination warehouse Code ItemId Yes Item identifier ActionQty Quantity Yes Quantity to move UOM Unit Yes Unit of measure Batch LotNumber No If ENABLE_LOT_CATEGORY enabled ExpiryDate ItemExpiration No If ENABLE_EXPIRATION enabled SerialNumber SerialNumber No If ENABLE_SERIALNO enabled"},{"location":"integration/intacct/standalone-service/#reclassify","title":"RECLASSIFY","text":"<p>Changes item code while adjusting inventory (decrease old code, increase new code).</p> <ul> <li>Granite Transaction Type: RECLASSIFY</li> <li>Intacct Transaction: Two Inventory Transactions (Decrease + Increase)</li> <li>Supports: Lot tracking, Serial numbers, Expiry dates</li> </ul> <p>The service creates two transactions: one to decrease the FromCode item and one to increase the ToCode item.</p> Granite Field Intacct Field Required Behavior TransactionDefinitionAdjustmentDecrease TransactionDefinition Yes For decrease transaction TransactionDefinitionAdjustmentIncrease TransactionDefinition Yes For increase transaction ReferenceNumber ReferenceNumber Yes Set to \"Granite\" TransactionDate TransactionDate Yes Current date/time FromLocation WarehouseId Yes Warehouse location FromCode ItemId (Decrease) Yes Original item code ToCode ItemId (Increase) Yes New item code ActionQty Quantity Yes Quantity to reclassify UOM Unit Yes Unit of measure Batch LotNumber No If ENABLE_LOT_CATEGORY enabled ExpiryDate ItemExpiration No If ENABLE_EXPIRATION enabled SerialNumber SerialNumber No If ENABLE_SERIALNO enabled"},{"location":"integration/intacct/standalone-service/#scrap","title":"SCRAP","text":"<p>Records scrapped/disposed inventory.</p> <ul> <li>Granite Transaction Type: SCRAP</li> <li>Intacct Transaction: Inventory Transaction (configured via TransactionDefinitionScrap)</li> <li>Supports: Lot tracking, Serial numbers, Expiry dates</li> </ul> Granite Field Intacct Field Required Behavior TransactionDefinitionScrap TransactionDefinition Yes From system setting ReferenceNumber ReferenceNumber Yes Set to \"Granite\" TransactionDate TransactionDate Yes Current date/time FromLocation WarehouseId Yes Source warehouse Code ItemId Yes Item identifier ActionQty Quantity Yes Quantity to scrap UOM Unit Yes Unit of measure Batch LotNumber No If ENABLE_LOT_CATEGORY enabled ExpiryDate ItemExpiration No If ENABLE_EXPIRATION enabled SerialNumber SerialNumber No If ENABLE_SERIALNO enabled"},{"location":"integration/intacct/standalone-service/#pick","title":"PICK","text":"<p>Creates or updates sales order invoices.</p> <ul> <li>Granite Transaction Type: PICK</li> <li>Intacct Transaction: Order Entry Transaction (Sales Invoice)</li> <li>Supports: Lot tracking, Serial numbers, Expiry dates</li> </ul> Granite Field Intacct Field Required Behavior TransactionDefinitionPick TransactionDefinition Yes From system setting CustomerId CustomerId Yes From DocumentTradingPartnerCode TransactionDate TransactionDate Yes Current date/time CreatedFrom CreatedFrom Yes \"{PickOrigin}-{Document}\" State State Yes \"Closed\" or \"Pending\" based on post flag FromLocation WarehouseId Yes Source warehouse Code ItemId Yes Item identifier ActionQty Quantity Yes Quantity to pick UOM Unit Yes Unit of measure Batch LotNumber No If ENABLE_LOT_CATEGORY enabled ExpiryDate ItemExpiration No If ENABLE_EXPIRATION enabled SerialNumber SerialNumber No If ENABLE_SERIALNO enabled"},{"location":"integration/intacct/standalone-service/#receive","title":"RECEIVE","text":"<p>Creates or updates purchase order receipts.</p> <ul> <li>Granite Transaction Type: RECEIVE</li> <li>Intacct Transaction: Purchasing Transaction (Purchase Invoice)</li> <li>Supports: Lot tracking, Serial numbers, Expiry dates</li> </ul> Granite Field Intacct Field Required Behavior TransactionDefinitionReceive TransactionDefinition Yes From system setting VendorId VendorId Yes From DocumentTradingPartnerCode VendorDocNumber VendorDocNumber Yes From Document TransactionDate TransactionDate Yes Current date/time DueDate DueDate Yes Current date/time CreatedFrom CreatedFrom Yes \"{ReceiveOrigin}-{Document}\" State State Yes \"Closed\" or \"Pending\" based on post flag FromLocation WarehouseId Yes Destination warehouse Code ItemId Yes Item identifier ActionQty Quantity Yes Quantity to receive UOM Unit Yes Unit of measure Batch LotNumber No If ENABLE_LOT_CATEGORY enabled ExpiryDate ItemExpiration No If ENABLE_EXPIRATION enabled SerialNumber SerialNumber No If ENABLE_SERIALNO enabled"},{"location":"integration/intacct/standalone-service/#transfer","title":"TRANSFER","text":"<p>Creates or updates warehouse transfers between locations.</p> <ul> <li>Granite Transaction Type: TRANSFER</li> <li>Intacct Transaction: Warehouse Transfer</li> <li>Supports: Lot tracking, Serial numbers, Expiry dates</li> </ul> Granite Field Intacct Field Required Behavior Description Description Yes Set to \"Granite\" FromLocation WarehouseId Yes Source warehouse ToLocation WarehouseId Yes Destination warehouse Code ItemId Yes Item identifier ActionQty Quantity Yes Quantity to transfer UOM Unit Yes Unit of measure Batch LotNumber No If ENABLE_LOT_CATEGORY enabled ExpiryDate ItemExpiration No If ENABLE_EXPIRATION enabled SerialNumber SerialNumber No If ENABLE_SERIALNO enabled"},{"location":"integration/intacct/standalone-service/#performance-considerations","title":"Performance Considerations","text":""},{"location":"integration/intacct/standalone-service/#request-deduplication-and-concurrency-protection","title":"Request Deduplication and Concurrency Protection","text":"<p>The service implements robust protection against duplicate and concurrent requests to prevent double-posting to Intacct:</p> <p>Queue Key Generation</p> <p>Each integration request generates a unique queue key based on: - Transaction IDs - Document number - Process name - Transaction type</p> <p>This key uniquely identifies the work being requested.</p> <p>Duplicate Request Handling</p> <p>When a request is received, the service checks for existing workflows with the same queue key:</p> <ul> <li>New Request: If no existing workflow is found, a new workflow is created and started</li> <li>Duplicate Request (In Progress): If an active workflow exists for the same data, the service returns an error indicating a request is already in progress. This prevents concurrent processing of the same transactions</li> <li>Suspended Workflow: If a suspended workflow is found (e.g., after a timeout), the service automatically resumes it rather than creating a duplicate</li> </ul> <p>Benefits</p> <ul> <li>Prevents Double-Posting: The same transaction cannot be posted to Intacct multiple times</li> <li>Safe Retries: If a request times out, retrying the same request will resume the original workflow</li> <li>Concurrent Safety: Multiple users or processes cannot accidentally post the same data simultaneously</li> <li>Automatic Recovery: Workflows that were interrupted can be resumed without manual intervention</li> </ul>"},{"location":"integration/intacct/standalone-service/#database-connection-pooling","title":"Database Connection Pooling","text":"<p>SQL Server connection pooling is enabled by default. The service efficiently reuses database connections across requests, reducing overhead and improving throughput.</p>"},{"location":"integration/intacct/standalone-service/#resources","title":"Resources","text":"<ul> <li>Developer Documentation: https://developer.intacct.com/</li> <li>Integration Jobs: See integration-jobs.md for downward sync</li> <li>IIS Setup: See IIS Getting Started</li> </ul>"},{"location":"integration/isync/","title":"ISync","text":"<p>Note</p> <p>This provider has been specifically created for integration with ISync for a single customer. As such, there may be aspects of the code which have been tailored for their specific requirement. If needed for another customer please reach out to the development team to discuss. </p> <p>This document contains all of the information needed to set up and configure integration with ISync. There are two parts to the complete integration solution:</p> <ul> <li> <p>The SDK Provider is used by the Integration Service to map transactions performed in Granite to the relevant format for ISync.</p> </li> <li> <p>The integration jobs are used by the Scheduler to pull ISync's documents and item codes into Granite.</p> </li> </ul>"},{"location":"integration/isync/integration-jobs/","title":"Integration Jobs","text":""},{"location":"integration/isync/integration-jobs/#overview","title":"Overview","text":"<p>Integration with ISync is done through xml files shared with ISync via SFTP. For the integration jobs this involves reading the xml files in the steps below. </p> <ol> <li>The files are inserted into the respective folder <code>ISyncFilePath</code>/Inbound/<code>FileName</code>.</li> <li>The scheduled job fires and discovers the new files. </li> <li>The data is read from the files and mapped to the relevant Granite type (see mappings below).</li> <li>The job will then attempt to either insert or update existing records in Granite. </li> <li>The file is then moved to the Archive file path to either the success or failure folder depending on if it integrated successfully or not. </li> </ol> <p>Note</p> <p>The audit user for any changes in Granite will be the name of the xml file that contained the data rather than the standard integration. </p>"},{"location":"integration/isync/integration-jobs/#configure","title":"Configure","text":""},{"location":"integration/isync/integration-jobs/#email-on-error","title":"Email on Error","text":"<p>Note</p> <p>Emailing functionality is now handled by the Custodian API, set up has changed from previous versions.</p> <p>Ensure that you have configured the CustodianApiUrl for the Scheduler in the <code>SystemSettings</code> table:</p> Application Key Value GraniteScheduler CustodianApiUrl https://localhost:5001/ <p>Ensure you have the <code>IntegrationError</code> email template in your database. This is the email template that is used for all error notifications in these injected jobs. </p> <p>Then for each job that needs to send failure notifications, add a job input for <code>MailOnError</code> and <code>MailOnErrorToAddresses</code>:</p> JobName Name Value &lt; JobName goes here &gt; MailOnError true &lt; JobName goes here &gt; MailOnErrorToAddresses name@client.co.za;name2@client.co.za"},{"location":"integration/isync/integration-jobs/#system-settings","title":"System Settings","text":"Key Description Example Value ISyncFilePath ISync File Path C:\\ISync ArchiveFilePath Archive File Path C:\\Archive ISyncFilePath <p>This is the base file path where files are used to integrate with ISync will be. Files for integration into Granite will be in the Inbound folder. This will then be further divided into each document type (ItemCatalogue, PurchaseOrders, WarehouseShipmentOrders).</p> ArchiveFilePath <p>This folder is used to keep a backup of the files exchanged with ISync. This will have the same file structure as the ISyncFilePath with the exception that the InBound folders will also have a success and failure folder.</p>"},{"location":"integration/isync/integration-jobs/#datagrid-log","title":"Datagrid Log","text":"<p>Bellow are the details for the datagrid that can be used to show errors in downwards/inbound integration jobs.</p> <pre><code>CREATE VIEW ISyncIntegrationDownwards\nAS\nSELECT  IntegrationLog.Date, \n        LogOrigin, \n        LogLevel, \n        IntegrationLog.[User] FileName,\n        Document.Number Document,\n        MasterItem.Code, \n        MasterItem.Description,\n        ISNULL(DocumentDetail.Qty, 0) Qty,\n        ISNULL(DocumentDetail.ActionQty, 0) ActionQty,\n        Message\nFROM    IntegrationLog \n        INNER JOIN Document ON IntegrationLog.Document_id = Document.ID\n        LEFT JOIN DocumentDetail ON DocumentDetail_id = DocumentDetail.ID\n        LEFT JOIN MasterItem ON DocumentDetail.Item_id = MasterItem.ID\n</code></pre> <pre><code>[\n  {\n    \"field\": \"Date\",\n    \"width\": 105,\n    \"filter\": \"agDateColumnFilter\"\n  },\n  {\n    \"field\": \"LogOrigin\",\n    \"width\": 100,\n    \"filter\": \"agTextColumnFilter\"\n  },\n  {\n    \"field\": \"LogLevel\",\n    \"width\": 111,\n    \"filter\": \"agTextColumnFilter\",\n    \"cellClassRules\": {\n      \"bg-error\": \"x == 'ERROR'\"\n    }\n  },\n  {\n    \"field\": \"FileName\",\n    \"width\": 135,\n    \"filter\": \"agTextColumnFilter\"\n  },\n  {\n    \"field\": \"Document\",\n    \"width\": 117,\n    \"filter\": \"agTextColumnFilter\"\n  },\n  {\n    \"field\": \"Code\",\n    \"width\": 128,\n    \"filter\": \"agTextColumnFilter\"\n  },\n  {\n    \"field\": \"Description\",\n    \"width\": 279,\n    \"filter\": \"agTextColumnFilter\"\n  },\n  {\n    \"field\": \"Qty\",\n    \"width\": 80,\n    \"filter\": \"agTextColumnFilter\"\n  },\n  {\n    \"field\": \"ActionQty\",\n    \"width\": 118,\n    \"filter\": \"agTextColumnFilter\"\n  },\n  {\n    \"field\": \"Message\",\n    \"width\": 451,\n    \"filter\": \"agTextColumnFilter\"\n  }\n]\n</code></pre>"},{"location":"integration/isync/integration-jobs/#mapping","title":"Mapping","text":""},{"location":"integration/isync/integration-jobs/#sales-order-mapping","title":"Sales Order mapping:","text":"WarehouseShipmentOrder Property Document Property Mapping Logic DepositorOrderNumber Number <code>documentNumberPrefix + order.DepositorOrderNumber</code> BillToCode TradingPartnerCode <code>order.BillToCode</code> BillToCompany TradingPartnerDescription <code>order.BillToCompany</code> N/A CreateDate <code>DateTime.Now</code> N/A isActive <code>true</code> N/A AuditDate <code>DateTime.Now</code> N/A AuditUser <code>order.FileName</code> N/A Site <code>\"\"</code> N/A Type <code>\"ORDER\"</code> N/A Status <code>\"ENTERED\"</code> DepositorOrderNumber ERPIdentification <code>order.DepositorOrderNumber</code> FileName FileName <code>order.FileName</code> CarrierName RouteName <code>order.CarrierName</code> WarehouseShipmentOrderLineItem Property DocumentDetail Property Mapping Logic N/A LineNumber <code>((index + 1) * 10).ToString()</code> OrderedQty Qty <code>item.OrderedQty</code> OrderedQtyUOM UOM <code>item.OrderedQtyUOM</code> UPC MasterItem_Code <code>item.UPC.ToString()</code> UPC-ShipmentOrderItemId ERPIdentification <code>{item.UPC.ToString()}-{item.ShipmentOrderItemId.ToString()}</code> N/A AuditDate <code>DateTime.Now</code> N/A AuditUser <code>order.FileName</code>"},{"location":"integration/isync/integration-jobs/#purchase-order-mapping","title":"Purchase Order Mapping","text":"PurchaseOrder Property Document Property Mapping Logic DepositorOrderNumber Number <code>documentNumberPrefix + po.DepositorOrderNumber</code> DepositorCode TradingPartnerCode <code>po.DepositorCode</code> Comments Description <code>po.Comments</code> PurchaseOrderDate CreateDate <code>po.PurchaseOrderDate</code> DueDate ExpectedDate <code>po.DueDate</code> N/A isActive <code>true</code> N/A AuditDate <code>DateTime.Now</code> N/A AuditUser <code>po.FileName</code> N/A Site <code>\"\"</code> N/A Type <code>\"RECEIVING\"</code> N/A Status <code>\"ENTERED\"</code> DepositorOrderNumber ERPIdentification <code>po.DepositorOrderNumber</code> FileName FileName <code>po.FileName</code> PurchaseOrderItem Property DocumentDetail Property Mapping Logic N/A LineNumber <code>((index + 1) * 10).ToString()</code> OrderedQty Qty <code>item.OrderedQty</code> OrderedQtyUOM UOM <code>item.OrderedQtyUOM</code> UPC MasterItem_Code <code>item.UPC.ToString()</code> UPC-PurchaseOrderItemId ERPIdentification <code>{item.UPC.ToString()}-{item.PurchaseOrderItemId.ToString()</code> N/A AuditDate <code>DateTime.Now</code> N/A AuditUser <code>po.FileName</code>"},{"location":"integration/isync/integration-jobs/#masteritem-mapping","title":"MasterItem Mapping","text":"ItemCatalogueItem Property MasterItem Property Mapping Logic UPC Code <code>item.UPC.ToString()</code> ProductCode FormattedCode <code>$\"{item.ProductCode}-{item.UPC.ToString()}\"</code> ProductDescription Description <code>item.ProductDescription</code> Category RST_StyleName <code>item.Category</code> SizeDescription SIZ_SizeDesc <code>item.SizeDescription</code> N/A UOM <code>\"EACH\"</code> N/A isActive <code>true</code> N/A AuditDate <code>DateTime.Now</code> N/A AuditUser <code>Path.GetFileNameWithoutExtension(filePath)</code> ProductCode ERPIdentification <code>item.ProductCode</code>"},{"location":"integration/isync/sdk-provider/","title":"SDK Provider","text":""},{"location":"integration/isync/sdk-provider/#overview","title":"Overview","text":"<p>Integration with ISync is done through xml files shared with ISync via SFTP. For the integration service (upwards to ISync), this involves creating xml files in the relevant folder with ISync will then read. See the basic steps below. </p> <ol> <li>Transactions are sent to the integration service and are processed by one of the supported methods (see supported methods below)</li> <li>The transactions are then mapped to the relevant xml file type and written to the <code>ISyncFilePath</code>/Outbound/<code>FileTypeName</code> folder as well as the to the <code>ArchiveFilePath</code>/Outbound/<code>FileTypeName</code></li> <li>ISync will then read from the folder and remove any integrated files. </li> </ol> <p>Note</p> <p>The integration reference is the name of the xml file generated by the integration service. This file name is a GUID and will always be unique. </p>"},{"location":"integration/isync/sdk-provider/#database-table-logging","title":"Database Table Logging","text":"<p>The sdk provider logs additional information to the custom table below. This table needs to be created on the Granite database. You can then create the Datagrid below that uses the table. </p> <pre><code>CREATE TABLE [dbo].[Custom_ISyncIntegrationLog](\n    [ArchiveFilePath] [varchar](250) NULL,\n    [IntegrationFilePath] [varchar](250) NULL,\n    [IntegrationReference] [varchar](250) NOT NULL,\n    [CreatedDate] [datetime] NOT NULL,\n    [TransactionIds] [varchar](1000) NULL\n) ON [PRIMARY]\n</code></pre> <pre><code>CREATE VIEW [dbo].[ISyncIntegrationUpwards]\nAS\nSELECT  ISIL.IntegrationReference, \n        ISNULL(Document.Number, '') Document,\n        MasterItem.Code, \n        MasterItem.ERPIdentification,\n        TR.Type,\n        tr.ActionQty,\n        ISIL.IntegrationFilePath,\n        ISIL.ArchiveFilePath\nFROM    Custom_ISyncIntegrationLog ISIL\n        INNER JOIN [Transaction] TR ON TR.IntegrationReference = ISIL.IntegrationReference\n        LEFT JOIN Document ON TR.Document_id = Document.ID\n        LEFT JOIN DocumentDetail ON TR.DocumentLine_id = DocumentDetail.ID\n        LEFT JOIN MasterItem ON TR.FromMasterItem_id = MasterItem.ID\n</code></pre> <pre><code>[\n  {\n    \"field\": \"IntegrationReference\",\n    \"width\": 262,\n    \"filter\": \"agTextColumnFilter\",\n    \"cellClassRules\": {\n      \"bg-success\": \"x === x\"\n    }\n  },\n  {\n    \"field\": \"Document\",\n    \"width\": 117,\n    \"filter\": \"agTextColumnFilter\"\n  },\n  {\n    \"field\": \"Code\",\n    \"width\": 128,\n    \"filter\": \"agTextColumnFilter\"\n  },\n  {\n    \"field\": \"ERPIdentification\",\n    \"width\": 156,\n    \"filter\": \"agTextColumnFilter\"\n  },\n  {\n    \"field\": \"Type\",\n    \"width\": 87,\n    \"filter\": \"agTextColumnFilter\"\n  },\n  {\n    \"field\": \"ActionQty\",\n    \"width\": 118,\n    \"filter\": \"agTextColumnFilter\"\n  },\n  {\n    \"field\": \"IntegrationFilePath\",\n    \"width\": 710,\n    \"filter\": \"agTextColumnFilter\"\n  },\n  {\n    \"field\": \"ArchiveFilePath\",\n    \"width\": 750,\n    \"filter\": \"agTextColumnFilter\"\n  }\n]\n</code></pre>"},{"location":"integration/isync/sdk-provider/#settings","title":"Settings","text":"<p>Note</p> <p>To pick up any changes to the SystemSettings table, the IntegrationService will need to be restarted.</p> <p>The settings for ISync are configured in the SystemSettings table. The IntegrationService will pick up the settings using the Application name specified in it's <code>.config</code> file: If this setting is missing from the config file or left empty, the IntegrationService will default to using <code>ISync</code> as the SystemSettingsApplicationName You can browse the IntegrationService's <code>/config</code> page to have the IntegrationService create the default settings in the SystemSettings table for you.</p>"},{"location":"integration/isync/sdk-provider/#config-file-settings","title":"Config File Settings","text":"<pre><code>    &lt;add key=\"SystemSettingsApplicationName\" value=\"ISync\" /&gt;\n    &lt;add key=\"EndPoint\" value=\"http://:40091/\" /&gt;\n</code></pre>"},{"location":"integration/isync/sdk-provider/#database-settings","title":"Database Settings","text":"Key Description Example Value ISyncFilePath File path for iSync files \"C:\\iSyncDirectory\" ArchiveFilePath File path for archived files \"C:\\ArchiveDirectory\" WarehouseName Name of the warehouse used for posting upwards \"MainWarehouse\" ClientCode Client code used as DepositorCode in XML documents \"Client123\" ISyncFilePath <p>This is the base file path where files are used to integrate with ISync will be written. </p> ArchiveFilePath <p>This folder is used to keep a backup of the files sent to ISync. </p> WarehouseName <p>This is used to set the name of the Warehouse in ISync where the transactions will take place. This will have to be obtained from ISync.</p> ClientCode <p>This is used as the DepositorCode in the XML documents and is static for the customer. This will have to be obtained from ISync.</p>"},{"location":"integration/isync/sdk-provider/#integration-methods","title":"Integration Methods","text":"<p>By default if the method name below is the same as a Granite Transaction type, it will autowire the integration. If you require a different integration action you can specify the name below in the Process IntegrationMethod property.</p>"},{"location":"integration/isync/sdk-provider/#adjustment","title":"ADJUSTMENT","text":"<ul> <li>Granite Transaction: ADJUSTMENT</li> <li> <p>ISync Transaction Type: Inventory Adjustment Advice</p> </li> <li> <p>Returns</p> <ul> <li>XML File Name </li> </ul> </li> </ul> <p>InventoryAdjustmentAdvice Mapping </p> <code>Transaction</code> Property <code>InventoryAdjustmentAdvice</code> Property Mapping Logic <code>transactions.FirstOrDefault().TransactionDocumentReference</code> <code>AdjustmentNumber</code> Direct assignment from the first transaction's <code>TransactionDocumentReference</code> <code>DateTime.Now</code> <code>AdjustmentDate</code> Current date and time <code>System Settings ClientCode</code> <code>DepositorCode</code> Direct assignment from <code>System Settings ClientCode</code> <code>System Settings WarehouseName</code> <code>WarehouseName</code> Direct assignment from <code>System Settings WarehouseName</code> <code>transactions.GroupBy(t =&gt; new { t.Code })</code> <code>Items</code> Grouped by <code>Code</code> and mapped to <code>InventoryAdjustmentAdviceItem</code> <p>InventoryAdjustmentAdviceItem Mapping</p> <code>Transaction</code> Property <code>InventoryAdjustmentAdviceItem</code> Property Mapping Logic <code>t.Code</code> <code>ProductCode</code> Mapped using <code>graniteRepository.GetMasterItemErpIdentification(t.Code)</code> <code>t.Code</code> <code>UPC</code> Direct assignment from <code>t.Code</code> <code>t.ToQty - t.FromQty</code> <code>AdjustedQty</code> Calculated as the difference between <code>ToQty</code> and <code>FromQty</code> <code>t.UOM</code> <code>AdjustedQtyUOM</code> Direct assignment from <code>t.UOM</code>"},{"location":"integration/isync/sdk-provider/#stocktake","title":"STOCKTAKE","text":"<ul> <li>Granite Transaction: STOCKTAKE</li> <li> <p>ISync Transaction Type: Inventory Adjustment Advice</p> </li> <li> <p>Returns</p> <ul> <li>XML File Name </li> </ul> </li> </ul> <p>InventoryAdjustmentAdvice Mapping </p> <code>Transaction</code> Property <code>InventoryAdjustmentAdvice</code> Property Mapping Logic <code>transactions.FirstOrDefault().TransactionDocumentReference</code> <code>AdjustmentNumber</code> Direct assignment from the first transaction's <code>TransactionDocumentReference</code> <code>DateTime.Now</code> <code>AdjustmentDate</code> Current date and time <code>System Settings ClientCode</code> <code>DepositorCode</code> Direct assignment from <code>System Settings ClientCode</code> <code>System Settings WarehouseName</code> <code>WarehouseName</code> Direct assignment from <code>System Settings WarehouseName</code> <code>transactions.GroupBy(t =&gt; new { t.Code })</code> <code>Items</code> Grouped by <code>Code</code> and mapped to <code>InventoryAdjustmentAdviceItem</code> <p>InventoryAdjustmentAdviceItem Mapping</p> <code>Transaction</code> Property <code>InventoryAdjustmentAdviceItem</code> Property Mapping Logic <code>t.Code</code> <code>ProductCode</code> Mapped using <code>graniteRepository.GetMasterItemErpIdentification(t.Code)</code> <code>t.Code</code> <code>UPC</code> Direct assignment from <code>t.Code</code> <code>t.ToQty - t.FromQty</code> <code>AdjustedQty</code> Calculated as the difference between <code>ToQty</code> and <code>FromQty</code> <code>t.UOM</code> <code>AdjustedQtyUOM</code> Direct assignment from <code>t.UOM</code>"},{"location":"integration/isync/sdk-provider/#scrap","title":"SCRAP","text":"<ul> <li>Granite Transaction: SCRAP</li> <li> <p>ISync Transaction Type: Inventory Adjustment Advice</p> </li> <li> <p>Returns</p> <ul> <li>XML File Name </li> </ul> </li> </ul> <p>InventoryAdjustmentAdvice Mapping</p> <code>Transaction</code> Property <code>InventoryAdjustmentAdvice</code> Property Mapping Logic <code>transactions.FirstOrDefault().TransactionDocumentReference</code> <code>AdjustmentNumber</code> Direct assignment from the first transaction's <code>TransactionDocumentReference</code> <code>DateTime.Now</code> <code>AdjustmentDate</code> Current date and time <code>System Settings ClientCode</code> <code>DepositorCode</code> Direct assignment from <code>System Settings ClientCode</code> <code>System Settings WarehouseName</code> <code>WarehouseName</code> Direct assignment from <code>System Settings WarehouseName</code> <code>transactions.GroupBy(t =&gt; new { t.Code })</code> <code>Items</code> Grouped by <code>Code</code> and mapped to <code>InventoryAdjustmentAdviceItem</code> <p>InventoryAdjustmentAdviceItem Mapping</p> <code>Transaction</code> Property <code>InventoryAdjustmentAdviceItem</code> Property Mapping Logic <code>t.Code</code> <code>ProductCode</code> Mapped using <code>graniteRepository.GetMasterItemErpIdentification(t.Code)</code> <code>t.Code</code> <code>UPC</code> Direct assignment from <code>t.Code</code> <code>-t.ActionQty</code> <code>AdjustedQty</code> Negated value of <code>ActionQty</code> <code>t.UOM</code> <code>AdjustedQtyUOM</code> Direct assignment from <code>t.UOM</code>"},{"location":"integration/isync/sdk-provider/#pick","title":"PICK","text":"<ul> <li>Granite Transaction: PICK</li> <li> <p>ISync Transaction Type: Warehouse Shipment Advise</p> </li> <li> <p>Returns</p> <ul> <li>XML File Name </li> </ul> </li> </ul> <p>WarehouseShipmentAdvise Mapping</p> <code>Transaction</code> Property <code>WarehouseShipmentAdvise</code> Property Mapping Logic <code>System Settings ClientCode</code> <code>DepositorCode</code> Direct assignment from <code>System Settings ClientCode</code> <code>\"Shipped\"</code> <code>ShipmentOrderStatus</code> Static string assignment <code>transactions.FirstOrDefault().TransactionDocumentReference</code> <code>ShipmentNumber</code> Direct assignment from the first transaction's <code>TransactionDocumentReference</code> <code>DateTime.Now</code> <code>ShipDate</code> Current date and time <code>transactions.FirstOrDefault().Document</code> <code>DepositorOrderNumber</code> Direct assignment from the first transaction's <code>Document</code> <code>transactions.FirstOrDefault().Document</code> <code>PurchaseOrderNumber</code> Direct assignment from the first transaction's <code>Document</code> <code>\"Shipped from Granite\"</code> <code>TransportReference</code> Static string assignment <code>graniteRepository.GetCarrierName(document)</code> <code>CarrierName</code> Mapped using <code>graniteRepository.GetCarrierName(document)</code> <code>transactions.GroupBy(t =&gt; new { t.Code })</code> <code>Items</code> Grouped by <code>Code</code> and mapped to <code>WarehouseShipmentAdviseItem</code> <p>WarehouseShipmentAdviseItem Mapping</p> <code>Transaction</code> Property <code>WarehouseShipmentAdviseItem</code> Property Mapping Logic <code>t.Code</code> <code>ProductCode</code> Mapped using <code>graniteRepository.GetMasterItemErpIdentification(t.Code)</code> <code>t.Code</code> <code>UPC</code> Direct assignment from <code>t.Code</code> <code>graniteRepository.GetOrderQty(t.Code)</code> <code>OrderedQty</code> Mapped using <code>graniteRepository.GetOrderQty(t.Code)</code> <code>t.UOM</code> <code>OrderedQtyUOM</code> Direct assignment from <code>t.UOM</code> <code>t.ActionQty</code> <code>ShippedQty</code> Direct assignment from <code>ActionQty</code> <code>t.UOM</code> <code>ShippedQtyUOM</code> Direct assignment from <code>t.UOM</code> <code>documentDetailErpId.Split('-').Last()</code> <code>ShipmentOrderItemId</code> Mapped using <code>graniteRepository.GetDocumentDetailErpId(t.LineNumber, t.Document, t.Code)</code>"},{"location":"integration/isync/sdk-provider/#receive","title":"RECEIVE","text":"<ul> <li>Granite Transaction: RECEIVE</li> <li> <p>ISync Transaction Type: Inventory Receipt Advice</p> </li> <li> <p>Returns</p> <ul> <li>XML File Name </li> </ul> </li> </ul> <p>InventoryReceiptAdvice Mapping</p> <code>Transaction</code> Property <code>InventoryReceiptAdvice</code> Property Mapping Logic <code>System Settings ClientCode</code> <code>DepositorCode</code> Direct assignment from <code>System Settings ClientCode</code> <code>transactions.FirstOrDefault().Document</code> <code>DepositorOrderNumber</code> Direct assignment from the first transaction's <code>Document</code> <code>transactions.FirstOrDefault().TransactionDocumentReference</code> <code>WarehouseReceiptNumber</code> Direct assignment from the first transaction's <code>TransactionDocumentReference</code> <code>DateTime.Now.ToString(\"yyyy-MM-dd\")</code> <code>ReceiptDate</code> Current date formatted as <code>yyyy-MM-dd</code> <code>System Settings WarehouseName</code> <code>WarehouseName</code> Direct assignment from <code>System Settings WarehouseName</code> <code>\"Received in Granite\"</code> <code>Comments</code> Static string assignment <code>transactions.GroupBy(t =&gt; new { t.Code })</code> <code>Items</code> Grouped by <code>Code</code> and mapped to <code>InventoryReceiptItem</code> <p>InventoryReceiptItem Mapping</p> <code>Transaction</code> Property <code>InventoryReceiptItem</code> Property Mapping Logic <code>t.Code</code> <code>ProductCode</code> Mapped using <code>graniteRepository.GetMasterItemErpIdentification(t.Code)</code> <code>t.Code</code> <code>UPC</code> Direct assignment from <code>t.Code</code> <code>t.ActionQty</code> <code>ReceivedQty</code> Direct assignment from <code>ActionQty</code> (Summed by masteritem code) <code>t.UOM</code> <code>ReceivedQtyUOM</code> Direct assignment from <code>t.UOM</code> N/A <code>ReceivingConditionCode</code> Static string assignment <code>\"00\"</code> <code>documentDetailErpId.Split('-').Last()</code> <code>PurchaseOrderLineId</code> Mapped using <code>graniteRepository.GetDocumentDetailErpId(t.LineNumber, t.Document, t.Code)</code>"},{"location":"integration/isync/sdk-provider/#return","title":"RETURN","text":"<ul> <li>Granite Transaction: RECEIVE</li> <li> <p>ISync Transaction Type: Return Authorization Receipt Advice</p> </li> <li> <p>Returns</p> <ul> <li>XML File Name </li> </ul> </li> </ul> <p>ReturnAuthorizationReceiptAdvice Mapping</p> <code>Transaction</code> Property <code>ReturnAuthorization</code> Property Mapping Logic <code>System Settings ClientCode</code> <code>DepositorCode</code> Direct assignment from <code>System Settings ClientCode</code> <code>transactions.FirstOrDefault().TransactionDocumentReference</code> <code>DepositorOrderNumber</code> Direct assignment from the first transaction's <code>TransactionDocumentReference</code> <code>DateTime.Now</code> <code>ReturnDate</code> Current date and time <code>\"Returned in Granite\"</code> <code>Comments</code> Static string assignment <code>transactions.GroupBy(t =&gt; new { t.Code })</code> <code>Items</code> Grouped by <code>Code</code> and mapped to <code>ReturnAuthorizationReceiptAdviceItem</code> <p>ReturnAuthorizationReceiptAdviceItem Mapping</p> <code>Transaction</code> Property <code>ReturnAuthorizationReceiptAdviceItem</code> Property Mapping Logic <code>t.Code</code> <code>ProductCode</code> Mapped using <code>graniteRepository.GetMasterItemErpIdentification(t.Code)</code> <code>t.Code</code> <code>UPC</code> Direct assignment from <code>t.Code</code> <code>t.ActionQty</code> <code>ReturnedQty</code> Direct assignment from <code>ActionQty</code> <code>t.UOM</code> <code>ReturnedQtyUOM</code> Direct assignment from <code>t.UOM</code> N/A <code>ReceivingConditionCode</code> Static string assignment <code>\"00\"</code>"},{"location":"integration/lightspeed/","title":"LightSpeed","text":"<p>Note</p> <p>This documentation is a work in progress and is intended to show the development progress of the integration with LightSpeed. As such, it may be subject to change as progress is made. It is also specific to Lightspeed R-Series. This is a older Lighspeed offering and is not longer available to new customers. </p> <p>This document contains all of the information needed to set up and configure integration with LightSpeed. There are two parts to the complete integration solution:</p> <ul> <li> <p>The SDK Provider is used by the Integration Service to map transactions performed in Granite to the relevant format for LightSpeed.</p> </li> <li> <p>The integration jobs are used by the Scheduler to pull LightSpeed's documents, item codes, and trading partners into Granite.</p> </li> </ul> <p>To get an overview of the LightSpeed entities/objects that are used in integration see LightSpeed Overview</p>"},{"location":"integration/lightspeed/#external-resources","title":"External Resources","text":"<ul> <li>LightSpeed API Documentation</li> </ul>"},{"location":"integration/lightspeed/integration-jobs/","title":"Integration Jobs","text":"<p>Integration jobs are a special type of Scheduler job called injected jobs.  See below for information for specifics on how document and master data jobs work</p>"},{"location":"integration/lightspeed/integration-jobs/#supported-document-types","title":"Supported document types","text":"<ul> <li> <p>ORDER     ---     LightSpeed type: Sales Order</p> </li> <li> <p>RECEIVING     ---     LightSpeed type: Purchase Order</p> </li> <li> <p>TRANSFER     ---     LightSpeed type: Transfer Order</p> </li> </ul>"},{"location":"integration/lightspeed/integration-jobs/#how-it-works","title":"How it works","text":""},{"location":"integration/lightspeed/integration-jobs/#document-jobs","title":"Document Jobs","text":"<p>The LightSpeed integration connects to the LightSpeed REST API using OAuth 2.0 authentication. The integration jobs check for updated documents by comparing the last update time stored in Granite with the TimeStamp field from LightSpeed.</p> <p>The workflow operates as follows: 1. Jobs retrieve the last successful integration timestamp from Granite 2. Query the LightSpeed API for documents updated since the last timestamp 3. Compare retrieved documents with those currently queued for integration 4. Queue new or updated documents for integration into Granite 5. Process queued documents by fetching full document details and updating Granite entities 6. Update the integration timestamp upon successful completion</p> <p>Error handling includes validation of required fields, connection testing, and detailed logging of any failures.</p>"},{"location":"integration/lightspeed/integration-jobs/#mapping-logic-per-job","title":"Mapping logic per job","text":""},{"location":"integration/lightspeed/integration-jobs/#sales-order-order","title":"Sales Order (ORDER)","text":"<ul> <li>Status: completed == \"true\" -&gt; ENTERED; else ONHOLD</li> <li>Header:<ul> <li>ERPIdentification = saleID</li> <li>Number = SalesOrderPrefix + saleID</li> <li>Description = referenceNumber</li> <li>isActive = archived != \"true\"</li> <li>ERPLocation = shopID</li> <li>TradingPartnerCode/Description from ShipTo/Customer</li> </ul> </li> <li>Lines:<ul> <li>ERPIdentification = saleLineID; LineNumber = saleLineID</li> <li>ERP_ItemID = itemID; Qty = unitQuantity; FromLocation = shopID</li> <li>Completed/Cancelled = false</li> </ul> </li> </ul>"},{"location":"integration/lightspeed/integration-jobs/#purchase-order-receiving","title":"Purchase Order (RECEIVING)","text":"<ul> <li>Status: complete == \"true\" -&gt; COMPLETE; else ENTERED</li> <li>Header:<ul> <li>ERPIdentification = orderID</li> <li>Number = PurchaseOrderPrefix + orderID</li> <li>Description = stockInstructions; ERPLocation = shopID</li> <li>isActive = archived != \"true\"</li> <li>TradingPartnerCode/Description = Vendor.name</li> </ul> </li> <li>Lines:<ul> <li>ERPIdentification = orderLineID; LineNumber = 10,20,..</li> <li>ERP_ItemID = itemID; Qty = quantity; ToLocation = shopID</li> <li>Completed = (quantity == numReceived); Cancelled = false</li> </ul> </li> </ul>"},{"location":"integration/lightspeed/integration-jobs/#transfer-order-transfer","title":"Transfer Order (TRANSFER)","text":"<ul> <li>Status: always ENTERED</li> <li>Header:<ul> <li>ERPIdentification = transferID</li> <li>Number = TransferPrefix + transferID</li> <li>Description = \"{SendingShop}&gt;{ReceivingShop} {note}\" (trimmed)</li> <li>isActive = archived != \"true\"; ERPLocation = sendingShopID</li> </ul> </li> <li>Lines (from TransferItems):<ul> <li>ERPIdentification = transferItemID; LineNumber = 10,20,..</li> <li>ERP_ItemID = itemID; Qty = sent; FromLocation = sendingShopID; ToLocation = receivingShopID</li> </ul> </li> </ul>"},{"location":"integration/lightspeed/integration-jobs/#document-statuses","title":"Document Statuses","text":"<p>Based on sc/Granite.Integration.LightSpeed.Job/Granite.Integration.LightSpeed.Job/Repository/LightSpeedRepository.cs:</p> <p>For Sales Orders (Sale):</p> LightSpeed Field Condition Granite Status completed == \"true\" ENTERED completed != \"true\" ONHOLD <p>For Purchase Orders (Order):</p> LightSpeed Field Condition Granite Status complete == \"true\" COMPLETE complete != \"true\" ENTERED <p>For Transfer Orders (InventoryTransfer):</p> LightSpeed Field Condition Granite Status n/a always ENTERED"},{"location":"integration/lightspeed/integration-jobs/#master-data-jobs","title":"Master data jobs","text":"<p>The master data synchronization handles both MasterItems and ItemShop (inventory) data.</p>"},{"location":"integration/lightspeed/integration-jobs/#masteritem-job","title":"MasterItem Job","text":"<ul> <li>Item -&gt; Granite MasterItem mapping:<ul> <li>ERPIdentification = itemID</li> <li>Code/FormattedCode = systemSku</li> <li>Description = description</li> <li>isActive = archived == \"false\"</li> <li>Type = itemType</li> <li>UOM = \"EACH\"</li> <li>Category = Category.name</li> <li>Aliases from ean/upc when present</li> </ul> </li> <li>Updateable fields: Code, FormattedCode, Description, isActive, UOM, Category</li> </ul>"},{"location":"integration/lightspeed/integration-jobs/#itemshop-job","title":"ItemShop Job","text":"<ul> <li>ItemShop -&gt; Granite inventory snapshot:<ul> <li>itemShopID, qoh, sellable, backorder, componentQoh, componentBackorder, reorderPoint, reorderLevel, timeStamp, itemID, shopID</li> </ul> </li> <li>Initial sync: qoh &gt; 0; Incremental: timeStamp &gt; last</li> <li>Respects ShopIds filter when configured</li> </ul>"},{"location":"integration/lightspeed/integration-jobs/#install","title":"Install","text":""},{"location":"integration/lightspeed/integration-jobs/#set-up-database-triggers-views-and-data","title":"Set up database triggers, views, and data","text":"<p>Run the <code>LightSpeedIntegrationJobs_Create.sql</code> script to insert the required SystemSettings and ScheduledJob table entries needed.  You can then just activate the Scheduled Jobs that are needed.</p> <p>The script creates the following scheduled jobs: - LightSpeed Sales Order Job - LightSpeed Purchase Order Job - LightSpeed Transfer Job - LightSpeed Master Item Job - LightSpeed Item Shop Job</p>"},{"location":"integration/lightspeed/integration-jobs/#systemsettings","title":"SystemSettings","text":"BaseUrl <p>The base URL for the LightSpeed REST API. Default value is <code>https://api.lightspeedapp.com/API/V3/Account/</code></p> AuthUrl <p>The authentication URL for OAuth token requests. Default value is <code>https://cloud.lightspeedapp.com/auth/oauth/token</code></p> client_id <p>The OAuth client ID provided by LightSpeed for API access.</p> client_secret <p>The OAuth client secret provided by LightSpeed for API access. This setting is encrypted for security.</p> AccountID <p>The LightSpeed Account ID that identifies your specific LightSpeed account.</p> access_token <p>The OAuth access token for API authentication. This is automatically managed by the integration.</p> refresh_token <p>The OAuth refresh token used to renew access tokens. This is automatically managed by the integration.</p> ShopIds <p>A comma-separated list of LightSpeed Shop IDs to filter data synchronization (e.g., 7,9,12). Default value is empty (no filtering).</p> <p>How it's used:</p> <ul> <li>When empty: The integration synchronizes data from all shops in your LightSpeed account</li> <li>When populated: The integration only synchronizes data from the specified shops</li> <li>Sales Orders: Filters by shopID parameter in the API call</li> <li>Purchase Orders: Filters by shopID parameter in the API call  </li> <li>Transfer Orders: Filters by both sendingShopID and receivingShopID parameters</li> <li>ItemShop (Inventory): Filters by shopID parameter to only sync inventory from specified locations</li> </ul> <p>This setting is useful when you only want to integrate specific locations/shops from a multi-location LightSpeed setup into Granite, rather than synchronizing all locations.</p> PurchaseOrderPrefix <p>Prefix applied to Purchase Order document numbers in Granite. Default value is PO.</p> SalesOrderPrefix <p>Prefix applied to Sales Order document numbers in Granite. Default value is SO.</p> TransferPrefix <p>Prefix applied to Transfer Order document numbers in Granite. Default value is TR.</p>"},{"location":"integration/lightspeed/integration-jobs/#add-the-injected-job-files-to-granitescheduler","title":"Add the Injected job files to GraniteScheduler","text":"<p>To add the injected job files to the GraniteScheduler, simply copy the dlls and xml files into the root folder of GraniteScheduler.</p> <p>Required files: - <code>Granite.Integration.LightSpeed.Job.dll</code> - <code>Granite.Integration.LightSpeed.Job.SalesOrder.xml</code> - <code>Granite.Integration.LightSpeed.Job.PurchaseOrder.xml</code> - <code>Granite.Integration.LightSpeed.Job.Transfer.xml</code> - <code>Granite.Integration.LightSpeed.Job.MasterItem.xml</code> - <code>Granite.Integration.LightSpeed.Job.ItemShop.xml</code></p>"},{"location":"integration/lightspeed/integration-jobs/#configure","title":"Configure","text":""},{"location":"integration/lightspeed/integration-jobs/#schedule-configuration","title":"Schedule configuration","text":"<p>See the GraniteScheduler manual for the details on how to configure injected jobs. Most of the work will have already been done for you by the <code>LightSpeedIntegrationJobs_Create.sql</code> script, you can simply activate the jobs you want to run.</p>"},{"location":"integration/lightspeed/lightspeed-overview/","title":"Lightspeed POS Overview &amp; Core Objects","text":""},{"location":"integration/lightspeed/lightspeed-overview/#introduction-what-is-lightspeed-pos","title":"Introduction: What is Lightspeed POS?","text":"<p>Lightspeed POS is a cloud-based point-of-sale and retail platform designed for small and medium businesses, particularly in retail, hospitality, and e-commerce.  </p> <p>It helps businesses run day-to-day operations such as: - Register sales (POS) - Inventory across multiple shops - Purchases and supplier orders - Transfers between locations - Customer loyalty and e-commerce</p>"},{"location":"integration/lightspeed/lightspeed-overview/#lightspeed-pos-vs-traditional-erp-eg-sage-300","title":"Lightspeed POS vs Traditional ERP (e.g. Sage 300)","text":"Feature Lightspeed POS ERP (e.g. Sage 300) Purpose Retail and shop-floor operations Full enterprise management Focus POS, inventory, purchasing, e-commerce Accounting, financials, procurement, operations Strengths Cloud-native, multi-location, user-friendly POS Deep financials, compliance, wide module coverage Weaknesses Limited accounting, fewer workflows Complex setup, weaker retail/POS interface Best For Retailers, restaurants, businesses needing fast POS &amp; stock control Companies needing full back-office financial integration <p>\ud83d\udc49 In many setups, Lightspeed handles the front-end retail operations (sales, stock, customer transactions), while an ERP like Sage 300 manages the back-office accounting and financials.</p>"},{"location":"integration/lightspeed/lightspeed-overview/#core-lightspeed-objects-their-states","title":"Core Lightspeed Objects &amp; Their States","text":""},{"location":"integration/lightspeed/lightspeed-overview/#1-sales-sale","title":"1. Sales (<code>Sale</code>)","text":"<ul> <li>Purpose: Records a customer transaction (like an invoice/order in ERP).</li> <li>Key States:</li> <li><code>quote</code> \u2192 not committed yet</li> <li><code>open</code> \u2192 in-progress (cart)</li> <li><code>complete</code> \u2192 finalized, paid</li> <li><code>workorder</code> / <code>layaway</code> \u2192 pending fulfillment</li> <li><code>voided</code> / <code>refunded</code> \u2192 cancelled or reversed</li> <li>Sub-objects:</li> <li><code>SaleLine</code> (line items)</li> <li><code>Payment</code> (tender details)</li> </ul>"},{"location":"integration/lightspeed/lightspeed-overview/#2-purchases-purchaseorder","title":"2. Purchases (<code>PurchaseOrder</code>)","text":"<ul> <li>Purpose: Ordering stock from a supplier.</li> <li>Key States:</li> <li><code>new</code> \u2192 created, not sent</li> <li><code>ordered</code> \u2192 submitted to vendor</li> <li><code>received</code> \u2192 goods received</li> <li><code>partial</code> \u2192 partially received</li> <li><code>voided</code> \u2192 cancelled</li> <li>Sub-objects:</li> <li><code>PurchaseLine</code> (items ordered)</li> </ul>"},{"location":"integration/lightspeed/lightspeed-overview/#3-transfers-transfer","title":"3. Transfers (<code>Transfer</code>)","text":"<ul> <li>Purpose: Moving inventory between shops/warehouses.</li> <li>Key States:</li> <li><code>new</code> \u2192 created, not shipped</li> <li><code>in_transit</code> \u2192 shipped, not received</li> <li><code>received</code> \u2192 received at destination</li> <li><code>cancelled</code> \u2192 aborted</li> </ul>"},{"location":"integration/lightspeed/lightspeed-overview/#4-shops-shop","title":"4. Shops (<code>Shop</code>)","text":"<ul> <li>Purpose: Represents a store, warehouse, or location.</li> <li>Attributes:</li> <li>Name, address, tax settings</li> <li>Stock levels per item</li> <li>States:</li> <li><code>active</code></li> <li><code>inactive</code></li> </ul>"},{"location":"integration/lightspeed/lightspeed-overview/#5-items-item","title":"5. Items (<code>Item</code>)","text":"<ul> <li>Purpose: Product catalog (SKUs).</li> <li>Attributes:</li> <li>Code/SKU, description, supplier, category, brand</li> <li>Stock quantities per shop</li> <li>Pricing (base, default, customer group)</li> <li>States:</li> <li><code>active</code> \u2192 available for sale</li> <li><code>archived</code> \u2192 retired, kept for history</li> <li><code>non-inventory</code> \u2192 services, not stock-tracked</li> <li>Features:</li> <li>Variants (matrix items: size, color, etc.)</li> </ul>"},{"location":"integration/lightspeed/sdk-provider/","title":"SDK Provider","text":"<p>The LightSpeed SDK provider is responsible for mapping Granite Transactions to the relevant format for posting to LightSpeed. It makes use of the LightSpeed REST API with OAuth 2.0 authentication.</p>"},{"location":"integration/lightspeed/sdk-provider/#how-it-connects","title":"How it connects","text":"<p>The provider connects to LightSpeed using OAuth 2.0 authentication flow. The connection requires: - Client ID and Client Secret for API access - Account ID to identify the specific LightSpeed account - Access and refresh tokens for authentication (automatically managed)</p>"},{"location":"integration/lightspeed/sdk-provider/#setup","title":"Setup","text":"<ol> <li> <p>Copy everything in the <code>Providers\\\\LightSpeed</code> folder into Integration Service folder (root folder).</p> </li> <li> <p>Ensure <code>SDKProvider.xml</code> setup or copied correctly     <pre><code>&lt;module name=\"Provider\"&gt;\n&lt;bind\n    service=\"Granite.Integration.Contract.IProvider, Granite.Integration.Contract\"\n    to=\"Granite.Integration.LightSpeed.Provider, Granite.Integration.LightSpeed\"/&gt;\n&lt;/module&gt;\n</code></pre></p> </li> <li> <p>Configure your connection string and endpoint in the <code>Granite.Integration.Web.exe.config</code> file</p> </li> </ol>"},{"location":"integration/lightspeed/sdk-provider/#settings","title":"Settings","text":"<p>Note</p> <p>To pick up any changes to the SystemSettings table, the IntegrationService will need to be restarted. </p> <p>The settings for LightSpeed are configured in the SystemSettings table. The IntegrationService will pick up the settings using the Application name specified in it's <code>.config</code> file: If this setting is missing from the config file or left empty, the IntegrationService will default to using <code>LightSpeed</code> as the SystemSettingsApplicationName. You can browse the IntegrationService's <code>/config</code> page to have the IntegrationService create the default settings in the SystemSettings table for you.</p>"},{"location":"integration/lightspeed/sdk-provider/#config-file-settings","title":"Config File Settings","text":"<pre><code>    &lt;add key=\"SystemSettingsApplicationName\" value=\"LightSpeed\" /&gt;\n    &lt;add key=\"EndPoint\" value=\"http://localhost:40091/\" /&gt;\n</code></pre>"},{"location":"integration/lightspeed/sdk-provider/#systemsettingsapplicationname","title":"SystemSettingsApplicationName","text":"<p>The Application name of the entries in the SystemSettings table that you want to use for this integration service. If this setting is the same as Application name for the ScheduledJobs they can use the same SystemSettings.</p> <p>This setting allows you to have multiple integration services running with different settings.</p>"},{"location":"integration/lightspeed/sdk-provider/#systemsettings","title":"SystemSettings","text":""},{"location":"integration/lightspeed/sdk-provider/#baseurl","title":"BaseUrl","text":"<p>The base URL for the LightSpeed REST API. Default value is <code>https://api.lightspeedapp.com/API/V3/Account/</code></p>"},{"location":"integration/lightspeed/sdk-provider/#authurl","title":"AuthUrl","text":"<p>The authentication URL for OAuth token requests. Default value is <code>https://cloud.lightspeedapp.com/auth/oauth/token</code></p>"},{"location":"integration/lightspeed/sdk-provider/#client_id","title":"client_id","text":"<p>The OAuth client ID provided by LightSpeed for API access.</p>"},{"location":"integration/lightspeed/sdk-provider/#client_secret","title":"client_secret","text":"<p>The OAuth client secret provided by LightSpeed for API access. This setting is encrypted for security.</p>"},{"location":"integration/lightspeed/sdk-provider/#accountid","title":"AccountID","text":"<p>The LightSpeed Account ID that identifies your specific LightSpeed account.</p>"},{"location":"integration/lightspeed/sdk-provider/#access_token","title":"access_token","text":"<p>The OAuth access token for API authentication. This is automatically managed by the integration.</p>"},{"location":"integration/lightspeed/sdk-provider/#refresh_token","title":"refresh_token","text":"<p>The OAuth refresh token used to renew access tokens. This is automatically managed by the integration.</p>"},{"location":"integration/lightspeed/sdk-provider/#dryrun","title":"DryRun","text":"<p>Boolean setting to enable dry run mode for testing. When set to true, the integration will log actions without making actual API calls. Default value is <code>false</code>.</p>"},{"location":"integration/lightspeed/sdk-provider/#lightspeed-settings","title":"LightSpeed Settings","text":"<p>The LightSpeed integration requires OAuth 2.0 credentials and configuration settings to be properly configured in the SystemSettings table before the integration can function.</p>"},{"location":"integration/lightspeed/sdk-provider/#integration-methods","title":"Integration Methods","text":"<p>By default if the method names below is the same as a Granite Transaction type, it will autowire the integration.  If you require a different integration action you can specify the name below in the Process IntegrationMethod property.</p>"},{"location":"integration/lightspeed/sdk-provider/#receive","title":"RECEIVE","text":"<ul> <li>Granite Transaction: RECEIVE</li> <li>LightSpeed: Order Line Update (numReceived)</li> <li>Supports:<ul> <li>Multiple items per document</li> <li>Partial receiving</li> <li>Quantity validation</li> </ul> </li> <li>Integration Post<ul> <li>False - Updates the numReceived field on the corresponding LightSpeed purchase order lines</li> <li>True - Updates the numReceived field on the corresponding LightSpeed purchase order lines and sets the document status to Check-In</li> </ul> </li> <li>Returns:     Order ID and timestamp of the successful posting</li> </ul> Granite LightSpeed Entity Required Behavior Document Purchase Order ID Y Maps to the ERP ID of the purchase order LineNumber Order Line Y Maps to the specific line within the purchase order ActionQty numReceived Y Updates the quantity received on the order line Code Item Y Used for validation and item lookup"},{"location":"integration/lightspeed/sdk-provider/#transferdynamictransfer","title":"TRANSFER/DYNAMICTRANSFER","text":"<ul> <li>Granite Transaction: TRANSFER</li> <li>LightSpeed: Inventory Transfer Creation</li> <li>Supports:<ul> <li>Multi-item transfers</li> <li>Location-to-location transfers</li> <li>Document reference tracking</li> </ul> </li> <li>Returns:     Inventory Transfer ID</li> </ul> Granite LightSpeed Entity Required Behavior Document Transfer Note Y Creates reference note in transfer DocumentDescription Transfer Note N Appended to reference note FromLocation SendingShopID Y Source location for the transfer ToLocation ReceivingShopID Y Destination location for the transfer Code ItemID Y Items to be transferred ActionQty ToSend Y Quantity to transfer for each item"},{"location":"integration/lightspeed/sdk-provider/#error-handling","title":"Error Handling","text":"<p>The provider includes comprehensive error handling:</p> <ul> <li>Connection validation before processing</li> <li>Single document/location validation for consistency</li> <li>Quantity validation to prevent invalid states</li> <li>Detailed error messages for troubleshooting</li> <li>Dry run mode for testing without affecting live data</li> </ul>"},{"location":"integration/omni/sdk-provider/","title":"Omni","text":"<p>Note</p> <p>Requirements for Omni integration need to be assessed carefully before it is offered to any potential clients. The Omni API is limited in the functionality that it offers, and it usually does not behave in the same way that the Omni Desktop application does.</p>"},{"location":"integration/omni/sdk-provider/#setup","title":"Setup","text":"<ol> <li> <p>Copy everything in the <code>Providers\\Omni</code> folder into Integration Service folder (root folder).</p> </li> <li> <p>Ensure <code>SDKProvider.xml</code> setup or copied correctly     <pre><code>&lt;module name=\"Provider\"&gt;\n&lt;bind\n    service=\"Granite.Integration.Contract.IProvider, Granite.Integration.Contract\"\n    to=\"Granite.Integration.OMNI.Provider, Granite.Integration.OMNI\"/&gt;\n&lt;/module&gt;\n</code></pre></p> </li> <li> <p>Configure your connection string and endpoint in the <code>Granite.Integration.Web.exe.config</code> file</p> </li> </ol>"},{"location":"integration/omni/sdk-provider/#settings","title":"Settings","text":"<p>The settings for Omni are configured in the SystemSettings table. The IntegrationService will pick up the settings using the Application name specified in it's <code>.config</code> file: <pre><code>&lt;add key =\"SystemSettingsApplicationName\" value=\"IntegrationOmni\"/&gt;\n</code></pre> If this setting is missing from the config file or left empty, the IntegrationService will default to using <code>IntegrationOmni</code> as the SystemSettingsApplicationName</p> <p>You can browse the IntegrationService's <code>/config</code> page to have the IntegrationService create the default settings in the SystemSettings table for you.</p> <p>The script to insert the default settings is also located in the GraniteDatabase release: <pre><code>~\\GraniteDatabase\\Data\\SystemSettings\\SystemSettingsOmni.sql\n</code></pre></p> <p>Note</p> <p>To pick up any changes to the SystemSettings table, the IntegrationService will need to be restarted.</p>"},{"location":"integration/omni/sdk-provider/#example-systemsettings-in-database","title":"Example SystemSettings in database","text":"Application Key Value Description IntegrationOmni Host Server name or IP of the server where the Omni API is hosted IntegrationOmni Port Port number that the Omni API is running on IntegrationOmni UserName Omni user name that is used to transact via the API IntegrationOmni Password Password for the Omni user IntegrationOmni CompanyName Omni company name to post to IntegrationOmni AdjustmentAccount Account that adjustments will post to IntegrationOmni ScrapAccount Account that scrap transactions will post to IntegrationOmni IntransitWarehouse The intransit warehouse that will be used IntegrationOmni PostDynamicTransferReceipt true or false. Determines whether Omni transfer is auto posted for Granite DynamicTransfers"},{"location":"integration/omni/sdk-provider/#integration-methods","title":"Integration Methods","text":"<p>Note</p> <p>This is the complete list of supported integration methods at present.  There is no support for manufacturing or receiving at this time.</p>"},{"location":"integration/omni/sdk-provider/#adjustment","title":"ADJUSTMENT","text":"<ul> <li>Granite: Transaction type ADJUSTMENT </li> <li>Omni: Stock Journal Entry</li> <li>IntegrationPost:<ul> <li>Not supported, will always post Stock Journal Entry </li> </ul> </li> <li>Supports:<ul> <li>AdjustmentAccount SystemSetting</li> </ul> </li> </ul> Granite Omni API Required Behavior MasterItem Code stockjournalentry.stock_code Y FromLocation stockjournalentry.warehouse_code Y TransactionDocumentReference stockjournalentry.reference Y Comment stockjournalentry.narrative N ActionQty stockjournalentry.quantity Y AdjustmentAccount SystemSetting stockjournalentry.to_ledger_account Y stockjournalentry.transaction_type Y Will be set to \"Adjustment In\" or \"Adjustment Out\" based on whether the transaction was an increase or decrease in Granite"},{"location":"integration/omni/sdk-provider/#transfer","title":"TRANSFER","text":"<ul> <li>Granite: Transaction type TRANSFER </li> <li>Omni: Warehouse Transfer</li> <li>IntegrationPost:<ul> <li>Not supported</li> </ul> </li> <li>Supports:<ul> <li>IntransitWarehouse SystemSetting</li> </ul> </li> </ul> Granite Omni API Required Behavior Document inter_warehouse_transfer.req_no Y IntransitWarehouse SystemSetting inter_warehouse_transfer.in_transit_warehouse_code Y User inter_warehouse_transfer.internal_reference Y DocumentDescription inter_warehouse_transfer.delivery_details N LineNumber inter_warehouse_transfer_lines.line_no Y MasterItem Code inter_warehouse_transfer_lines.stock_code Y ActionQty inter_warehouse_transfer_lines.quantity Y"},{"location":"integration/omni/sdk-provider/#transferreceipt","title":"TRANSFERRECEIPT","text":"<p>Note</p> <p>The Omni API does not support partial processing of a transfer. When you post a transfer receipt, it simply completes the transfer in Omni.</p> <p>For this reason, no transaction information is posted to Omni when a transfer receipt is posted.</p> <ul> <li>Granite: Transaction type TRANSFER </li> <li>Omni: Warehouse Transfer</li> <li>IntegrationPost:<ul> <li>Not supported</li> </ul> </li> </ul>"},{"location":"integration/omni/sdk-provider/#transferdynamic","title":"TRANSFERDYNAMIC","text":"<ul> <li>Granite: Transaction type TRANSFERDYNAMIC </li> <li>Omni: Warehouse Requisition</li> <li>IntegrationPost:<ul> <li>If true, processes a warehouse transfer against the created requisition</li> </ul> </li> <li>Supports:<ul> <li>IntransitWarehouse SystemSetting</li> </ul> </li> </ul> Granite Omni API Required Behavior Document inter_warehouse_transfer.req_no Y FromLocation inter_warehouse_requisition.source_warehouse_code Y ToLocation inter_warehouse_requisition.destination_warehouse_code Y IntransitWarehouse SystemSetting inter_warehouse_requisition.in_transit_warehouse_code Y User inter_warehouse_requisition.internal_reference Y DocumentDescription inter_warehouse_requisition.delivery_details N LineNumber inter_warehouse_requisition_lines.line_no Y MasterItem Code inter_warehouse_requisition_lines.stock_code Y ActionQty inter_warehouse_requisition_lines.quantity Y"},{"location":"integration/omni/sdk-provider/#scrap","title":"SCRAP","text":"<ul> <li>Granite: Transaction type ADJUSTMENT </li> <li>Omni: Stock Journal Entry</li> <li>IntegrationPost:<ul> <li>Not supported, will always post Stock Journal Entry </li> </ul> </li> <li>Supports:<ul> <li>ScrapAccount SystemSetting</li> </ul> </li> </ul> Granite Omni API Required Behavior stockjournalentry.reference Y Will be set to \"SCRAP\" stockjournalentry.transaction_type Y Will be set to \"Issue\" MasterItem Code stockjournalentry.stock_code Y FromLocation stockjournalentry.warehouse_code Y Comment stockjournalentry.narrative N ActionQty stockjournalentry.quantity Y ScrapAccount SystemSetting stockjournalentry.to_ledger_account Y"},{"location":"integration/omni/sdk-provider/#pick","title":"PICK","text":"<ul> <li>Granite: Transaction type PICK </li> <li>Omni: Delivery Note / Invoice</li> <li>IntegrationPost:<ul> <li>If true, posts an invoice instead of a delivery note</li> </ul> </li> </ul> <p>Delivery note mapping:</p> Granite Omni API Required Behavior delivery_note.source_type Will be set to \"ORDER\" delivery_note.customer_branch_code Will be set to \"HO\" Document delivery_note.source_reference Y DocumentTradingPartnerCode delivery_note.customer_account_code Y FromLocation delivery_note.warehouse_code Y delivery_note_lines.line_type Will be set to \"Stock\" LineNumber delivery_note_lines.line_no Y MasterItem Code delivery_note_lines.stock_code Y FromLocation delivery_note_lines.warehouse_code Y ActionQty delivery_note_lines.quantity Y <p>Invoice mapping:</p> Granite Omni API Required Behavior invoice.source_type Will be set to \"ORDER\" Document invoice.source_reference Y DocumentTradingPartnerCode invoice.customer_account_code Y invoice_lines.line_type Will be set to \"Stock\" LineNumber invoice_lines.line_no Y MasterItem Code invoice_lines.stock_code Y ActionQty invoice_lines.quantity Y"},{"location":"integration/quickbooks/native-app/","title":"QuickBooks Desktop","text":"<p>This document contains all of the information needed to install and configure QuickBooks Desktop integration.</p> <p>QuickBooks integration works a bit differently from integration with other ERP systems. Because of the limitations imposed by the QuickBooks Desktop SDK, we cannot use the standard integration service and scheduler as we normally would. Instead, QuickBooks integration is implemented using a native Windows Forms application.</p> <p>Note</p> <p>At the moment only downward integration is supported in the QuickBooks integration application.</p> <p>Currently there are jobs for fetching the following from QuickBooks into Granite:</p> <ul> <li>Master Items</li> <li>Trading Partners</li> <li>Invoices</li> <li>Sales Orders</li> <li>Purchase Orders</li> </ul>"},{"location":"integration/quickbooks/native-app/#setup","title":"Setup","text":"<p>QuickBooks integration must be installed on the same machine as the QuickBooks SDK. It is best to put the integration application on the same machine as the QuickBooks company file, but if this is not possible the company file MUST at least be accessible from the machine you install on.</p> <p>Note</p> <p>You will need the QuickBooks Admin user credentials to allow the integration application to connect to QuickBooks.  You will also need a dedicated QuickBooks user that the integration application can use.</p> <ol> <li> <p>Check if the client's version of QuickBooks is 32bit or 64bit. You can check by opening QuickBooks Desktop and pressing F2:     </p> </li> <li> <p>Ensure you have the matching bitness Granite.Integration.QuickBooks.Native install files from the release folder</p> </li> <li> <p>Paste the folder containing the application into the standard install directory <code>C:\\Program Files (x86)\\Granite WMS\\</code></p> </li> <li> <p>In the <code>Granite.Integration.QuickBooks.Native.exe.config</code> file, configure your connection string to the Granite database: <pre><code>&lt;connectionStrings&gt;\n    &lt;add name=\"CONNECTION\" connectionString=\"Data Source=.\\SQL2019;Initial Catalog=Granite;Persist Security Info=True;User ID=******;Password=*******\" providerName=\"System.Data.SqlClient\" /&gt;\n&lt;/connectionStrings&gt;\n</code></pre></p> </li> <li> <p>Configure the <code>QuickBooksCompanyFile</code> in the SystemSettings table, and enable the scheduled jobs that you want to run.</p> </li> <li> <p>Log in to the QuickBooks company with the <code>Admin</code> user, and then run the integration application.  QuickBooks will pop up a dialog where you need to give permission for the application to connect to QuickBooks, and select a user for it to use:     </p> </li> </ol>"},{"location":"integration/quickbooks/native-app/#settings","title":"Settings","text":"<p>The settings for QuickBooks integration are configured in the SystemSettings table in the Granite database.  You can configure these from the Webdesktop as well if it is already installed.  This section describes each of the settings.</p>"},{"location":"integration/quickbooks/native-app/#quickbookscompanyfile","title":"QuickBooksCompanyFile","text":"<p>This is the file path to the QuickBooks company file that the integration application will connect to.</p>"},{"location":"integration/quickbooks/native-app/#masteritemsyncenable","title":"MasterItemSyncEnable","text":"<p>Enables syncing MasterItems from QuickBooks to Granite</p>"},{"location":"integration/quickbooks/native-app/#masteritemsyncinterval","title":"MasterItemSyncInterval","text":"<p>Interval to sync MasterItems at. Measured in seconds</p>"},{"location":"integration/quickbooks/native-app/#masteritemsyncinventoryitems","title":"MasterItemSyncInventoryItems","text":"<p>Enable or disable syncing Inventory Items</p>"},{"location":"integration/quickbooks/native-app/#masteritemsyncassemblyitems","title":"MasterItemSyncAssemblyItems","text":"<p>Enable or disable syncing Assembly Items</p>"},{"location":"integration/quickbooks/native-app/#masteritemsyncserviceitems","title":"MasterItemSyncServiceItems","text":"<p>Enable or disable syncing Service Items</p>"},{"location":"integration/quickbooks/native-app/#salesordersyncenable","title":"SalesOrderSyncEnable","text":"<p>Enables syncing Sales Orders from QuickBooks to Granite</p>"},{"location":"integration/quickbooks/native-app/#salesordersyncinterval","title":"SalesOrderSyncInterval","text":"<p>Interval to sync Sales Orders at. Measured in seconds</p>"},{"location":"integration/quickbooks/native-app/#salesorderprefix","title":"SalesOrderPrefix","text":"<p>Prefix that will be applied to Sales Order numbers when they are synced to Granite. This setting is not required, but it is useful to avoid conflicts if different document types are using the same prefix (or none at all) in QuickBooks.</p>"},{"location":"integration/quickbooks/native-app/#salesorderafterheadersyncprocedure","title":"SalesOrderAfterHeaderSyncProcedure","text":"<p>Name of stored procedure that will run after each SalesOrder header is synced to Granite.</p> <p><code>See Also</code> After Header Sync Procedures</p>"},{"location":"integration/quickbooks/native-app/#invoicesyncenable","title":"InvoiceSyncEnable","text":"<p>Enables syncing Invoices from QuickBooks to Granite</p>"},{"location":"integration/quickbooks/native-app/#invoicesyncinterval","title":"InvoiceSyncInterval","text":"<p>Interval to sync Invoices at. Measured in seconds</p>"},{"location":"integration/quickbooks/native-app/#invoiceprefix","title":"InvoicePrefix","text":"<p>Prefix that will be applied to Invoice numbers when they are synced to Granite. This setting is not required, but it is useful to avoid conflicts if different document types are using the same prefix (or none at all) in QuickBooks.</p>"},{"location":"integration/quickbooks/native-app/#invoiceafterheadersyncprocedure","title":"InvoiceAfterHeaderSyncProcedure","text":"<p>Name of stored procedure that will run after each Invoice header is synced to Granite</p> <p><code>See Also</code> After Header Sync Procedures</p>"},{"location":"integration/quickbooks/native-app/#purchaseordersyncenable","title":"PurchaseOrderSyncEnable","text":"<p>Enables syncing Purchase Orders from QuickBooks to Granite</p>"},{"location":"integration/quickbooks/native-app/#purchaseordersyncinterval","title":"PurchaseOrderSyncInterval","text":"<p>Interval to sync Purchase Orders at. Measured in seconds</p>"},{"location":"integration/quickbooks/native-app/#purchaseorderprefix","title":"PurchaseOrderPrefix","text":"<p>Prefix that will be applied to Purchase Order numbers when they are synced to Granite. This setting is not required, but it is useful to avoid conflicts if different document types are using the same prefix (or none at all) in QuickBooks.</p>"},{"location":"integration/quickbooks/native-app/#purchaseorderafterheadersyncprocedure","title":"PurchaseOrderAfterHeaderSyncProcedure","text":"<p>Name of stored procedure that will run after each PurchaseOrder header is synced to Granite</p> <p><code>See Also</code> After Header Sync Procedures</p>"},{"location":"integration/quickbooks/native-app/#tradingpartnersyncenable","title":"TradingPartnerSyncEnable","text":"<p>Enables syncing TradingPartners from QuickBooks to Granite</p>"},{"location":"integration/quickbooks/native-app/#tradingpartnersyncinterval","title":"TradingPartnerSyncInterval","text":"<p>Interval to sync TradingPartners at. Measured in seconds</p>"},{"location":"integration/quickbooks/native-app/#how-it-works","title":"How it works","text":"<p>The QuickBooks integration app makes use of the QuickBooks Desktop SDK to connect to the company file and copy data into Granite. This is the method that we use for all data access in QuickBooks</p>"},{"location":"integration/quickbooks/native-app/#document-jobs","title":"Document Jobs","text":"<p>Each time a document sync job runs, it queries QuickBooks for the documents that have been edited on the current date.  The application then checks the Granite <code>IntegrationDocumentQueue</code> table to see if the modified documents have already been integrated or are already queued. It does this by comparing the edited documents <code>ModifiedDate</code> timestamp to the <code>LastUpdateDateTime</code> timestamp and checking the <code>Status</code> field in the <code>IntegrationDocumentQueue</code> table.</p> <p>If the <code>ModifiedDate</code> is newer than the last successfully synced entry in the <code>IntegrationDocumentQueue</code> table, a new entry will be added to the table queuing the document for integration.</p> <p>After entering all of the documents that need to be synced into the <code>IntegrationDocumentQueue</code> table, the application will go through the entries in the table one by one and ensure that each document is copied into Granite.</p> <p>If there is a after header sync procedure configured for the document type, after each Document record is created/updated and before the lines are synced the procedure will fire. </p> <p>Next, all MasterItems specified on the document being synced are inserted if they are missing, or updated if there are any changes.</p> <p>Finally, each document line is inserted if it is missing, or updated if there are any applicable changes.</p>"},{"location":"integration/quickbooks/native-app/#syncing-a-specific-document","title":"Syncing a specific document","text":"<p>It is possible to manually add a record to the <code>IntegrationDocumentQueue</code> table if you need a specific document to sync.  If you have the ERP_id of the document it is best to specify it - but if not, the application should be able to find the document using only the document number and type.</p>"},{"location":"integration/quickbooks/native-app/#after-header-sync-procedures","title":"After Header Sync Procedures","text":"<p>After header sync procedures can be configured for each type of document.  These are SQL stored procedures that allow you to apply any necessary custom logic to documents as they sync.  The stored procedure must take the document ID as an input like this: </p> <pre><code>CREATE PROCEDURE [dbo].[InvoiceAfterHeaderSync] \n    @DocumentID bigint\n    ...\n</code></pre>"},{"location":"integration/quickbooks/native-app/#masteritem-job","title":"MasterItem Job","text":"<p>The MasterItem job can fetch three types of items from QuickBooks:</p> <ul> <li>Inventory Items</li> <li>Assembly Items</li> <li>Service Items</li> </ul> <p>Each of these can be enabled or disabled individually in SystemSettings.</p> <p>When the MasterItem job runs, it will fetch items only from the lists that are enabled in SystemSettings.</p>"},{"location":"integration/quickbooks/native-app/#tradingpartner-job","title":"TradingPartner Job","text":"<p>The TradingPartner job syncs two types of trading partners from QuickBooks:</p> <ul> <li>Customers</li> <li>Vendors</li> </ul>"},{"location":"integration/quickbooks/native-app/#manual-job-execution","title":"Manual Job Execution","text":"<p>If you click the <code>Tools</code> button near the top of the integration application interface, you will see an option to execute a manual sync of each job type. For document jobs, the calendar allows you to select a range of dates to fetch the modified documents from. </p> <p>Note</p> <p>It can be a slow process to fetch multiple days worth of documents. On a moderately busy site it would be advisable to manually sync jobs in batches of 3 to 4 days at a time.</p> <p>The MasterItem and TradingPartner jobs do not make use of the calendar - they will always fetch the full list from QuickBooks for comparison to Granite.</p>"},{"location":"integration/sage100/","title":"Sage 100","text":"<p>This document contains all of the information needed to set up and configure integration with Sage 100. There are two parts to the complete integration solution:</p> <p>The SDK Provider is used by the Integration Service to map transactions performed in Granite to the relevant format for Sage 100.</p> <p>The integration jobs are used by the Scheduler to pull Sage 100's documents, item codes, and trading partners into Granite.</p>"},{"location":"integration/sage100/integration-jobs/","title":"Integration Jobs","text":"<p>Note</p> <p>The Sage 100 integration jobs only work with version 6 of the scheduler onwards.</p> <p>Integration jobs are a special type of Scheduler job called injected jobs.  See below for information for specifics on how document and master data jobs work</p>"},{"location":"integration/sage100/integration-jobs/#supported-document-types","title":"Supported document types","text":"<ul> <li> <p>ORDER </p> <p>Sage 100 type: Sales Order</p> </li> <li> <p>RECEIVING</p> <p>Sage 100 type: Purchase Order</p> </li> </ul>"},{"location":"integration/sage100/integration-jobs/#how-it-works","title":"How it works","text":""},{"location":"integration/sage100/integration-jobs/#document-jobs","title":"Document jobs","text":"<p>Triggers on the ERP document tables insert a record into the Granite IntegrationDocumentQueue table whenever a change is applied to a document. </p> <p>GraniteScheduler runs injected jobs that monitor the IntegrationDocumentQueue table for records that need to be processed.</p> <p>When a record with Status 'ENTERED' is found, the job uses views on the Granite database to fetch the  information related to that document from the ERP database and apply the changes to the Granite document. </p> <p>All valid changes to data in the Granite tables are logged to the Audit table, showing the previous value and the new value.</p> <p>If a change is made in the ERP system that would put Granite into an invalid state, no changes are applied. Instead, the ERPSyncFailed field is set to true and the ERPSyncFailedReason field shows the reason for the failure. The IntegrationLog table will contain further details on the failure if applicable.</p>"},{"location":"integration/sage100/integration-jobs/#master-data-jobs","title":"Master data jobs","text":"<p>MasterItems and TradingPartners have their own jobs. These jobs compare the results of their respective views to the data in the Granite tables and insert new records / update records as needed.</p> <p>The document jobs themselves also sync changes to the TradingPartners &amp; MasterItems that are on the document. This means that on sites that do not process a lot of changes to master data you can limit the MasterItem/TradingPartner jobs to running once a day or even less frequently. The only thing they are really still needed for is setting isActive to false when something is deactivated in the ERP system.</p>"},{"location":"integration/sage100/integration-jobs/#install","title":"Install","text":""},{"location":"integration/sage100/integration-jobs/#set-up-database-triggers-views-and-data","title":"Set up database triggers, views, and data","text":""},{"location":"integration/sage100/integration-jobs/#add-the-injected-job-files-to-granitescheduler","title":"Add the Injected job files to GraniteScheduler","text":"<p>To add the injected job files to the GraniteScheduler, simply copy the dlls and xml files into the root folder of GraniteScheduler. </p>"},{"location":"integration/sage100/integration-jobs/#configure","title":"Configure","text":""},{"location":"integration/sage100/integration-jobs/#schedule-configuration","title":"Schedule configuration","text":"<p>See the GraniteScheduler manual for the details on how to configure injected jobs. Most of the work will have already been done for you by the <code>Sage100IntegrationJobs_Create.sql</code> script, you can simply activate the jobs you want to run. </p>"},{"location":"integration/sage100/integration-jobs/#view-customisation","title":"View customisation","text":"<p>Each view can be customised to include custom logic or map extra fields to fields on the corresponding Granite table. </p> <p>All of the standard fields on Granite tables are supported, simply add the required field to your view with an alias matching the Granite field name on the table the view maps to.</p> <p>Non standard fields are also supported, but for these to work your column name on the destination table must start with 'Custom'. On the view, simply alias the name of the field to match the name of the field on the destination Granite table, including the 'Custom' prefix.</p> <p>For fields like Document.Status where you may have custom rules / statuses, use a CASE statement in your view definition so that the view returns the Status that you want to set on the Granite Document table.</p> <p>It is highly advised that you check the validity of yor job on the GraniteScheduler /config page after making a change to your view! Especially after changing filter criteria/joins, your view may be returning duplicate rows - the job validation will bring this to your attention.</p>"},{"location":"integration/sage100/sdk-provider/","title":"SDK Provider","text":"<p>The Sage 100 SDK provider is responsible for mapping Granite transactions to the relevant format for posting to Sage 100. It makes use of the Sage 100 Business Object Interface to post to Sage 100.</p> <p>The Business Object Interface is access through an instance of ProvideX OLE Server. The ProvideX OLE Server is a COM-based automation server used by Sage 100 (formerly MAS 90/200) to provide access to its Business Object Interface (BOI). This server facilitates communication between external applications and Sage 100\u2019s internal business logic and data. The ProvideX OLE Server is created from the pvxcom.exe. The default pathway is C:\\Program Files (x86)\\Common Files\\Sage\\Common Components</p> <p></p>"},{"location":"integration/sage100/sdk-provider/#setup","title":"Setup","text":"<ol> <li> <p>The Sage 100 SDK provider has currently only been tested against the 2018 version. If not on this version please reach out to the Development team. </p> </li> <li> <p>Copy everything in the <code>Providers\\Sage100\\2018</code> folder into the Integration Service folder (root folder).</p> </li> <li> <p>Ensure that the <code>SDKProvider.config</code> copied correctly     <pre><code>    &lt;unity xmlns=\"http://schemas.microsoft.com/practices/2010/unity\"&gt;\n        &lt;assembly name=\"Granite.Integration.Sage100\" /&gt;\n        &lt;namespace name=\"Granite.Integration.Sage100\" /&gt;\n        &lt;containers&gt;\n            &lt;container name=\"Provider\"&gt;\n                &lt;register type=\"Granite.Integration.Contract.IProvider, Granite.Integration.Contract\"\n                            mapTo=\"Granite.Integration.Sage100.Provider, Granite.Integration.Sage100\"&gt;\n                &lt;/register&gt;\n            &lt;/container&gt;\n        &lt;/containers&gt;\n    &lt;/unity&gt;\n</code></pre></p> </li> <li> <p>Configure your connection string and endpoint in the <code>Granite.Integration.Web.exe.config</code> file</p> </li> <li> <p>Ensure that the Sage 100 company is setup to allow external access. This setting seen below can be found under company maintenance &gt; preferences</p> </li> </ol> <p></p>"},{"location":"integration/sage100/sdk-provider/#settings","title":"Settings","text":"<p>Note</p> <p>To pick up any changes to the SystemSettings table, the integrationService will need to be restarted.</p> <p>The settings for Sage 11 are configures in the SystemSettings table. The IntegrationService will pick up the settings using the Application name specified in it's <code>.config</code> file: IF the setting is missing from the config file or left empty, the IntegrationService will default to using <code>IntegrationSage100</code> as the SystemSettingsApplicationName. You can browse to the IntegrationService's <code>/config</code> page to have the IntegrationService create the default setting in the SystemSettings table for you.</p>"},{"location":"integration/sage100/sdk-provider/#config-file-settings","title":"Config File Settings","text":"<pre><code>    &lt;add key=\"SystemSettingsApplicationName\" value=\"IntegrationSage100\" /&gt;\n    &lt;add key=\"EndPoint\" value=\"http://:40091/\" /&gt;\n</code></pre>"},{"location":"integration/sage100/sdk-provider/#systemsettingsapplicationname","title":"SystemSettingsApplicationName","text":"<p>The Application name of the entries in the SystemSettings table that you want to use for this integration service. This setting allows you to have multiple integration services running with different settings.</p>"},{"location":"integration/sage100/sdk-provider/#database-systemsettings","title":"Database SystemSettings","text":"<p>The script to insert the default settings is located in the GraniteDatabase release. <pre><code>~\\GraniteDatabase\\Data\\SystemSettings\\SystemSettingsSage100.sql\n</code></pre></p> Application Key Value Description IntegrationSage100 UserName Sage100 user name IntegrationSage100 Password Sage100 user password IntegrationSage100 CompanyCode Sage100 company ID IntegrationSage100 homePath C:\\Sage\\Sage 100 Premium\\MAS90 Path to folder where sage is installed"},{"location":"integration/sage100/sdk-provider/#integration-methods","title":"Integration Methods","text":"<p>By default if the method name below is the same as a Granite Transaction type, it will autowire the integration. If you require a different integration action you can specify the name below in the Process IntegrationMethod property.                                   </p>"},{"location":"integration/sage100/sdk-provider/#takeon","title":"TAKEON","text":"<ul> <li>Granite Transaction: TAKEON</li> <li>Sage100: IM Transaction Receipt</li> <li>Supports: <ul> <li>Integration Reference</li> </ul> </li> <li>IntegrationPost:<ul> <li>False - Saves transaction</li> <li>True - Saves transaction</li> </ul> </li> <li>Returns:<ul> <li>EntryNo</li> </ul> </li> </ul> Granite Sage 100 BOI Required Sage 100 Table Behaviour Reference Batch N GL_CompanyActiveBatch If batch grouping of transactions is enabled, reference will be used as the BatchNo MasterItemCode ItemCode Y IM_TransactionDetail FromLocation WarehouseCode Y IM_TransactionDetail Qty TransactionQty Y IM_TransactionDetail"},{"location":"integration/sage100/sdk-provider/#adjustment-scrap","title":"ADJUSTMENT / SCRAP","text":"<ul> <li>Granite Transaction: ADJUSTMENT / SCRAP</li> <li>Sage100: IM Transaction Adjustment</li> <li>Supports: <ul> <li>Integration Reference</li> </ul> </li> <li>IntegrationPost:<ul> <li>False - Saves transaction</li> <li>True - Saves transaction</li> </ul> </li> <li>Returns:<ul> <li>EntryNo</li> </ul> </li> </ul> Granite Sage 100 BOI Required Sage 100 Table Behaviour Reference Batch N GL_CompanyActiveBatch If batch grouping of transactions is enabled, reference will be used as the BatchNo MasterItemCode ItemCode Y IM_TransactionDetail FromLocation WarehouseCode Y IM_TransactionDetail Qty TransactionQty Y IM_TransactionDetail"},{"location":"integration/sage100/sdk-provider/#reclassify","title":"RECLASSIFY","text":"<ul> <li>Granite Transaction: RECLASSIFY</li> <li>Sage100: IM Transaction Adjustment</li> <li>Supports: <ul> <li>Integration Reference</li> </ul> </li> <li>IntegrationPost:<ul> <li>False - Saves transaction</li> <li>True - Saves transaction</li> </ul> </li> <li>Returns:<ul> <li>EntryNo</li> </ul> </li> </ul> Granite Sage 100 BOI Required Sage 100 Table Behaviour Reference Batch N GL_CompanyActiveBatch If batch grouping of transactions is enabled, reference will be used as the BatchNo FromMasterItemCode ItemCode Y IM_TransactionDetail FromLocation WarehouseCode Y IM_TransactionDetail ToMasterItemCode ItemCode Y IM_TransactionDetail ToLocation WarehouseCode Y IM_TransactionDetail Qty TransactionQty Y IM_TransactionDetail"},{"location":"integration/sage100/sdk-provider/#move-transfer-replenish","title":"MOVE / TRANSFER / REPLENISH","text":"<ul> <li>Granite Transaction: MOVE / TRANSFER / REPLENISH</li> <li>Sage100: IM Transaction Transfer</li> <li>Supports: <ul> <li>Integration Reference</li> </ul> </li> <li>IntegrationPost:<ul> <li>False - Saves transaction</li> <li>True - Saves transaction</li> </ul> </li> <li>Returns:<ul> <li>EntryNo</li> </ul> </li> </ul> Granite Sage 100 BOI Required Sage 100 Table Behaviour Reference Batch N GL_CompanyActiveBatch If batch grouping of transactions is enabled, reference will be used as the BatchNo MasterItemCode ItemCode Y IM_TransactionDetail FromLocation WarehouseCode Y IM_TransactionDetail ToLocation ToWarehouseCode Y IM_TransactionDetail Qty TransactionQty Y IM_TransactionDetail"},{"location":"integration/sage100/sdk-provider/#receive","title":"RECEIVE","text":"<ul> <li>Granite Transaction: RECEIVE</li> <li>Sage100: PO Receipt of Goods</li> <li>Supports: <ul> <li>Integration Reference</li> </ul> </li> <li>IntegrationPost:<ul> <li>False - Saves receipt</li> <li>True - Saves receipt</li> </ul> </li> <li>Returns:<ul> <li>ReceiptNo</li> </ul> </li> </ul> Granite Sage 100 BOI Required Sage 100 Table Behaviour Reference Batch N GL_CompanyActiveBatch If batch grouping of receipts is enabled, reference will be used as the BatchNo MasterItemCode ItemCode Y PO_ReceiptDetail FromLocation WarehouseCode Y PO_ReceiptDetail Qty QuantityReceived Y PO_ReceiptDetail"},{"location":"integration/sage100/sdk-provider/#pick","title":"PICK","text":"<ul> <li>Granite Transaction: PICK</li> <li>Sage100: SO Invoice</li> <li>Supports: <ul> <li>Integration Reference</li> </ul> </li> <li>IntegrationPost:<ul> <li>False - Saves invoice</li> <li>True - Saves invoice</li> </ul> </li> <li>Returns:<ul> <li>ReceiptNo</li> </ul> </li> </ul> Granite Sage 100 BOI Required Sage 100 Table Behaviour Reference Batch N GL_CompanyActiveBatch If batch grouping of receipts is enabled, reference will be used as the BatchNo MasterItemCode ItemCode Y SO_InvoiceDetail FromLocation WarehouseCode Y SO_InvoiceDetail Qty QuantityShipped Y SO_InvoiceDetail"},{"location":"integration/sage100/sdk-provider/#createshipment","title":"CREATESHIPMENT","text":"<p>Note</p> <p>This is alternative method to be used on Pick transactions. Creates a shipment in Sage100 rather than an invoice.</p> <p>To create a shipment a Shipper ID is needed. Currently the system is using the login user in SystemSettings as the shipper ID so a login with the Shipper ID that is going to be used will need to be created.  If the BackOrder Quantity needs to be set then the shipper id must have the 'Allow Changes to Backordered Quantity on Lines' option checked. </p> <p></p> <ul> <li>Granite Process IntegrationMethod: CREATESHIPMENT</li> <li>Sage100: SO Invoice</li> <li>Supports: <ul> <li>Integration Reference</li> </ul> </li> <li>IntegrationPost:<ul> <li>False - Saves shipment</li> <li>True - Saves shipment</li> </ul> </li> <li>Returns:<ul> <li>ReceiptNo</li> </ul> </li> </ul> Granite Sage 100 BOI Required Sage 100 Table Behaviour Reference Batch N GL_CompanyActiveBatch If batch grouping of receipts is enabled, reference will be used as the BatchNo MasterItemCode ItemCode Y SO_InvoiceDetail FromLocation WarehouseCode Y SO_InvoiceDetail Qty QuantityShipped Y SO_InvoiceDetail"},{"location":"integration/sagex3/","title":"Sage X3","text":"<p>Note</p> <p>This documentation is a work in progress and is intended to show the development progress of the integration with Sage X3. As such, it may be subject to change as progress is made. Due to the nature of Sage X3, there will have to be custom integration work done per customer. Please reach out to the development team if you have a Sage X3 site.</p> <p>This document contains all of the information needed to set up and configure integration with Sage X3. There are two parts to the complete integration solution:</p> <ul> <li> <p>The SDK Provider is used by the Integration Service to map transactions performed in Granite to the relevant format for Sage X3.</p> </li> <li> <p>The integration jobs are used by the Scheduler to pull Sage X3's documents, item codes, and trading partners into Granite.</p> </li> </ul> <p>To get an overview of the Sage X3 entities/objects that are used in integration see Sage X3 Overview</p>"},{"location":"integration/sagex3/integration-jobs/","title":"Integration Jobs","text":"<p>Note</p> <p>The Sage X3 integration jobs only work with version 6 of the scheduler onwards.</p> <p>Integration jobs are a special type of Scheduler job called injected jobs.  See below for information for specifics on how document and master data jobs work</p>"},{"location":"integration/sagex3/integration-jobs/#supported-document-types","title":"Supported document types","text":"<ul> <li> <p>ORDER </p> <p>Sage X3 type: Sales Order</p> </li> <li> <p>RECEIVING</p> <p>Sage X3 type: Purchase Order</p> </li> </ul>"},{"location":"integration/sagex3/integration-jobs/#how-it-works","title":"How it works","text":""},{"location":"integration/sagex3/integration-jobs/#document-jobs","title":"Document jobs","text":"<p>Stored procedures run to find recently updated documents in the Sage X3 database and insert a record into the Granite IntegrationDocumentQueue table whenever a change is applied to a document. </p> <p>GraniteScheduler runs injected jobs that monitor the IntegrationDocumentQueue table for records that need to be processed.</p> <p>When a record with Status 'ENTERED' is found, the job uses views on the Granite database to fetch the  information related to that document from the ERP database and apply the changes to the Granite document. </p> <p>All valid changes to data in the Granite tables are logged to the Audit table, showing the previous value and the new value.</p> <p>If a change is made in the ERP system that would put Granite into an invalid state, no changes are applied. Instead, the ERPSyncFailed field is set to true and the ERPSyncFailedReason field shows the reason for the failure. The IntegrationLog table will contain further details on the failure if applicable.</p>"},{"location":"integration/sagex3/integration-jobs/#master-data-jobs","title":"Master data jobs","text":"<p>MasterItems and TradingPartners have their own jobs. These jobs compare the results of their respective views to the data in the Granite tables and insert new records / update records as needed.</p> <p>The document jobs themselves also sync changes to the TradingPartners &amp; MasterItems that are on the document. This means that on sites that do not process a lot of changes to master data you can limit the MasterItem/TradingPartner jobs to running once a day or even less frequently. The only thing they are really still needed for is setting isActive to false when something is deactivated in the ERP system.</p>"},{"location":"integration/sagex3/integration-jobs/#install","title":"Install","text":""},{"location":"integration/sagex3/integration-jobs/#set-up-views-and-data","title":"Set up views and data","text":"<p>Run the <code>SageX3Integration_Create.sql</code> script to create all the views and ScheduledJob table entries needed. </p> <p>Note</p> <p>You may have to update the .dbo. on the references to Sage X3 tables as this will change depending on the data you are accessing. It could be SageDatabase.TEST.TableName for example. Be sure to confirm with the Sage consultants which data set you are accessing. </p>"},{"location":"integration/sagex3/integration-jobs/#add-the-injected-job-files-to-granitescheduler","title":"Add the Injected job files to GraniteScheduler","text":"<p>To add the injected job files to the GraniteScheduler, simply copy the dlls and xml files into the root folder of GraniteScheduler. </p>"},{"location":"integration/sagex3/integration-jobs/#configure","title":"Configure","text":""},{"location":"integration/sagex3/integration-jobs/#schedule-configuration","title":"Schedule configuration","text":"<p>See the GraniteScheduler manual for the details on how to configure injected jobs. Most of the work will have already been done for you by the <code>SageX3Integration_Create.sql</code> script, you can simply activate the jobs you want to run. </p>"},{"location":"integration/sagex3/integration-jobs/#view-customisation","title":"View customisation","text":"<p>Each view can be customised to include custom logic or map extra fields to fields on the corresponding Granite table. </p> <p>All of the standard fields on Granite tables are supported, simply add the required field to your view with an alias matching the Granite field name on the table the view maps to.</p> <p>Non standard fields are also supported, but for these to work your column name on the destination table must start with 'Custom'. On the view, simply alias the name of the field to match the name of the field on the destination Granite table, including the 'Custom' prefix.</p> <p>For fields like Document.Status where you may have custom rules / statuses, use a CASE statement in your view definition so that the view returns the Status that you want to set on the Granite Document table.</p> <p>It is highly advised that you check the validity of yor job on the GraniteScheduler /config page after making a change to your view! Especially after changing filter criteria/joins, your view may be returning duplicate rows - the job validation will bring this to your attention.</p>"},{"location":"integration/sagex3/sagex3-overview/","title":"Sage X3 Overview","text":"<p>The purpose of this document is to provide an overview of Sage X3 in terms of integrating with Granite. For details on how integration will take place and which Granite transactions are supported please see the SDK Provider.</p> <p>Sage X3 is a comprehensive enterprise resource planning (ERP) solution designed for mid-market and enterprise organizations. It provides integrated business management capabilities across finance, manufacturing, distribution, and customer relationship management. Sage X3 offers flexible deployment options and strong integration capabilities through its web service interface.</p>"},{"location":"integration/sagex3/sagex3-overview/#sage-x3-business-objects","title":"Sage X3 Business Objects:","text":""},{"location":"integration/sagex3/sagex3-overview/#items-products","title":"Items (Products)","text":"<p>An item in Sage X3 represents a product, service, or component that can be bought, sold, manufactured, or tracked. Items in Sage X3 have comprehensive attributes including SKU (Item Reference), descriptions, units of measure, costing methods, and inventory parameters. These items integrate into Granite as MasterItems.</p> <p></p>"},{"location":"integration/sagex3/sagex3-overview/#sites-and-storage-locations","title":"Sites and Storage Locations","text":"<p>Sage X3 uses a hierarchical location structure with Sites (facilities) at the top level and Storage Locations within each site. Sites represent physical locations like warehouses or manufacturing plants, while storage locations provide detailed bin-level tracking. These Sites are used in Granite as ERP Locations and are essential for all inventory transactions.</p>"},{"location":"integration/sagex3/sagex3-overview/#sales-orders","title":"Sales Orders","text":"<p>Sales Orders in Sage X3 manage customer demand from quotation through delivery and invoicing. The sales order process includes order entry, allocation, picking, packing, delivery, and invoicing stages. Each sales order contains header information (customer, delivery address, terms) and line details (items, quantities, pricing). These are brought into Granite as Sales Orders</p> <p></p>"},{"location":"integration/sagex3/sagex3-overview/#sales-deliveries","title":"Sales Deliveries","text":"<p>Sales Deliveries represent the physical fulfillment of sales orders. They track the actual goods shipped to customers and include delivery notes, shipping information, and quantity confirmations. Sales deliveries can be created from one or multiple sales orders and form the basis for customer invoicing. A sales delivery is created when posting picking transactions from Granite</p> <p></p>"},{"location":"integration/sagex3/sagex3-overview/#purchase-orders","title":"Purchase Orders","text":"<p>Purchase Orders manage supplier relationships and procurement processes. They include supplier information, delivery terms, item details, quantities, and pricing. Purchase orders in Sage X3 support complex approval workflows, multi-site deliveries, and integration with budgeting and requisition systems. These documents are brought into Granite as Purchase orders</p> <p></p>"},{"location":"integration/sagex3/sagex3-overview/#purchase-receipts","title":"Purchase Receipts","text":"<p>Purchase Receipts document the physical receipt of goods from suppliers. They validate quantities received against purchase orders, handle quality control processes, and trigger accounts payable processes. Purchase receipts support partial deliveries, over-receipts, and integration with inspection workflows. A purchase receipt is created when posting receiving transactions from Granite.</p> <p></p>"},{"location":"integration/sagex3/sagex3-overview/#stock-movements","title":"Stock Movements","text":"<p>Stock Movements in Sage X3 provide comprehensive inventory transaction tracking. This includes transfers between locations, adjustments for cycle counts, allocations for sales orders, and consumption for manufacturing. All stock movements maintain complete audit trails with timestamps, user information, and reason codes.</p>"},{"location":"integration/sagex3/sdk-provider/","title":"SDK Provider","text":"<p>The Sage X3 SDK provider is responsible for mapping Granite transactions to the relevant format for posting to Sage X3. It makes use of the Sage X3 Web Service to communicate with the Sage X3 system through XML-based operations.</p> <p>The Web Service connection utilizes the CAdxWebServiceXmlCCService with basic authentication support. The provider implements a custom authentication class <code>CAdxWebServiceXmlCCServiceBasicAuth</code> that extends the base web service to handle HTTP Basic Authentication with proper domain, username, and password credentials.</p>"},{"location":"integration/sagex3/sdk-provider/#setup","title":"Setup","text":"<ol> <li> <p>Ensure that the Sage X3 Web Service is properly configured and accessible from the Integration Service server.</p> </li> <li> <p>Copy everything in the <code>Providers\\SageX3</code> folder into the Integration Service folder (root folder).</p> </li> <li> <p>Ensure that the <code>SDKProvider.config</code> copied correctly</p> </li> </ol> <pre><code>&lt;unity xmlns=\"http://schemas.microsoft.com/practices/2010/unity\"&gt;\n    &lt;assembly name=\"Granite.Integration.SageX3\" /&gt;\n    &lt;namespace name=\"Granite.Integration.SageX3\" /&gt;\n    &lt;containers&gt;\n        &lt;container name=\"Provider\"&gt;\n            &lt;register type=\"Granite.Integration.Contract.IProvider, Granite.Integration.Contract\"\n                        mapTo=\"Granite.Integration.SageX3.Provider, Granite.Integration.SageX3\"&gt;\n            &lt;/register&gt;\n        &lt;/container&gt;\n    &lt;/containers&gt;\n&lt;/unity&gt;\n</code></pre> <ol> <li> <p>Configure your connection string and endpoint in the <code>Granite.Integration.Web.exe.config</code> file</p> </li> <li> <p>Ensure that the Sage X3 system is configured to allow web service access and that the specified user has appropriate permissions.</p> </li> </ol>"},{"location":"integration/sagex3/sdk-provider/#settings","title":"Settings","text":"<p>Note</p> <p>To pick up any changes to the SystemSettings table, the IntegrationService will need to be restarted.</p> <p>The settings for Sage X3 are configured in the SystemSettings table. The IntegrationService will pick up the settings using the Application name specified in its <code>.config</code> file: If the setting is missing from the config file or left empty, the IntegrationService will default to using <code>SageX3</code> as the SystemSettingsApplicationName. You can browse to the IntegrationService's <code>/config</code> page to have the IntegrationService create the default settings in the SystemSettings table for you.</p>"},{"location":"integration/sagex3/sdk-provider/#config-file-settings","title":"Config File Settings","text":"<pre><code>    &lt;add key=\"SystemSettingsApplicationName\" value=\"SageX3\" /&gt;\n    &lt;add key=\"EndPoint\" value=\"http://:40091/\" /&gt;\n</code></pre>"},{"location":"integration/sagex3/sdk-provider/#systemsettingsapplicationname","title":"SystemSettingsApplicationName","text":"<p>The Application name of the entries in the SystemSettings table that you want to use for this integration service. This setting allows you to have multiple integration services running with different settings.</p> Application Key Value Description SageX3 BaseUrl Sage X3 Web Service URL endpoint SageX3 X3Username Sage X3 username for web service authentication SageX3 X3Password Sage X3 password for web service authentication (encrypted) SageX3 PoolAlias Sage X3 pool alias for connection context"},{"location":"integration/sagex3/sdk-provider/#baseurl","title":"BaseUrl","text":"<p>The complete URL to the Sage X3 Web Service endpoint. This should include the protocol (http/https) and the full path to the web service.</p>"},{"location":"integration/sagex3/sdk-provider/#x3username","title":"X3Username","text":"<p>The username that will be used to authenticate against the Sage X3 Web Service. This user must have appropriate permissions in Sage X3.</p>"},{"location":"integration/sagex3/sdk-provider/#x3password","title":"X3Password","text":"<p>The password for the Sage X3 user. This setting is encrypted in the SystemSettings table for security.</p>"},{"location":"integration/sagex3/sdk-provider/#poolalias","title":"PoolAlias","text":"<p>The Sage X3 pool alias that defines the connection context and database instance to use.</p>"},{"location":"integration/sagex3/sdk-provider/#web-service-operations","title":"Web Service Operations","text":"<p>The Sage X3 SDK provider supports the following core web service operations:</p>"},{"location":"integration/sagex3/sdk-provider/#connection-testing","title":"Connection Testing","text":"<ul> <li>Method: <code>Connect()</code></li> <li>Purpose: Tests connectivity to the Sage X3 Web Service</li> <li>Operation: Executes a query against the \"ZGPOH\" object to verify connection</li> <li>Returns: Boolean success status and connection message</li> </ul>"},{"location":"integration/sagex3/sdk-provider/#data-operations","title":"Data Operations","text":""},{"location":"integration/sagex3/sdk-provider/#read-operation","title":"Read Operation","text":"<ul> <li>Method: <code>Read(string x3ObjectName, CAdxParamKeyValue cAdxParamKeyValue)</code></li> <li>Purpose: Reads data from Sage X3 objects</li> <li>Parameters:</li> <li><code>x3ObjectName</code>: The name of the X3 object to read from</li> <li><code>cAdxParamKeyValue</code>: Key-value parameters for the read operation</li> <li>Returns: <code>CAdxResultXml</code> containing the result data</li> </ul>"},{"location":"integration/sagex3/sdk-provider/#save-operation","title":"Save Operation","text":"<ul> <li>Method: <code>Save(string x3ObjectName, string xmlObject)</code></li> <li>Purpose: Saves data to Sage X3 objects</li> <li>Parameters:</li> <li><code>x3ObjectName</code>: The name of the X3 object to save to</li> <li><code>xmlObject</code>: XML representation of the object data</li> <li>Returns: <code>CAdxResultXml</code> containing the save result</li> </ul>"},{"location":"integration/sagex3/sdk-provider/#run-operation","title":"Run Operation","text":"<ul> <li>Method: <code>Run(string x3SubProgram, string inputXml)</code></li> <li>Purpose: Executes Sage X3 sub-programs</li> <li>Parameters:</li> <li><code>x3SubProgram</code>: The name of the X3 sub-program to execute</li> <li><code>inputXml</code>: XML input parameters for the sub-program</li> <li>Returns: <code>CAdxResultXml</code> containing the execution result</li> </ul>"},{"location":"integration/sagex3/sdk-provider/#authentication","title":"Authentication","text":"<p>The provider implements HTTP Basic Authentication through a custom web service class that:</p> <ol> <li>Extends the base <code>CAdxWebServiceXmlCCService</code> class</li> <li>Overrides the <code>GetWebRequest</code> method to add authentication headers</li> <li>Supports both domain\\username and username-only authentication formats</li> <li>Encodes credentials using Base64 encoding</li> <li>Sets the <code>PreAuthenticate</code> property to true for improved performance</li> </ol>"},{"location":"integration/sagex3/sdk-provider/#call-context-configuration","title":"Call Context Configuration","text":"<p>Each web service call uses a standardized call context with: - Language Code: \"ENG\" (English) - Pool Alias: Retrieved from configuration - Request Config: \"adxwss.optreturn=JSON\" for JSON response format</p>"},{"location":"integration/sagex3/sdk-provider/#integration-methods","title":"Integration Methods","text":"<p>By default, if the method name below is the same as a Granite Transaction type, it will autowire the integration. If you require a different integration action, you can specify the name below in the Process IntegrationMethod property.</p>"},{"location":"integration/sagex3/sdk-provider/#pick","title":"PICK","text":"<ul> <li>Granite Transaction: PICK</li> <li>Sage X3: Sales Order Delivery (ZGSDHI subprogram)</li> <li>Supports:<ul> <li>Line Numbers</li> <li>Site/Location mapping</li> </ul> </li> <li>IntegrationPost:<ul> <li>False - Creates sales order delivery</li> <li>True - Creates sales order delivery</li> </ul> </li> <li>Returns:<ul> <li>SDHNUM (Sales Delivery Number)</li> </ul> </li> </ul> Granite Sage X3 Field Required Sage X3 Object Behaviour Document SOHNUM Y SDH0_1 Sales Order Number DocumentTradingPartnerCode BPCORD Y SDH0_1 Business Partner Order FromLocation STOFCY Y SDH0_1 Site/Facility LineNumber SOPLIN Y SDH1_4 Sales Order Line Number Code ITMREF Y SDH1_4 Item Reference ActionQty QTY Y SDH1_4 Quantity - CCE1 N SDH1_4 Cost Center 1 (defaults to \"WHG\") - CCE2 N SDH1_4 Cost Center 2 (defaults to \"STS7\") - CCE3 N SDH1_4 Cost Center 3 (defaults to \"HO\")"},{"location":"integration/sagex3/sdk-provider/#receive","title":"RECEIVE","text":"<ul> <li>Granite Transaction: RECEIVE</li> <li>Sage X3: Purchase Order Receipt (ZGPTH2 object)</li> <li>Supports:<ul> <li>UOM (Unit of Measure)</li> <li>Site/Location mapping</li> </ul> </li> <li>IntegrationPost:<ul> <li>False - Saves purchase order receipt</li> <li>True - Saves purchase order receipt</li> </ul> </li> <li>Returns:<ul> <li>PTHNUM (Purchase Receipt Number)</li> </ul> </li> </ul> Granite Sage X3 Field Required Sage X3 Object Behaviour Document POHNUM Y PTH1_2 Purchase Order Number DocumentTradingPartnerCode BPSNUM Y PTH0_1 Business Partner Supplier ToLocation PRHFCY Y PTH0_1 Receipt Facility Code ITMREF Y PTH1_2 Item Reference ActionQty QTYUOM Y PTH1_2 Quantity in UOM UOM UOM Y PTH1_2 Unit of Measure - STA N PTH1_2 Status (defaults to \"A\" - Active)"},{"location":"integration/sagex3/sdk-provider/#transaction-grouping","title":"Transaction Grouping","text":"<p>Both PICK and RECEIVE transactions implement intelligent grouping logic:</p>"},{"location":"integration/sagex3/sdk-provider/#pick-grouping","title":"PICK Grouping","text":"<p>Transactions are grouped by: - Document - LineNumber - Code (Item) - FromLocation - FromSite</p> <p>ActionQty values are summed for grouped transactions.</p>"},{"location":"integration/sagex3/sdk-provider/#receive-grouping","title":"RECEIVE Grouping","text":"<p>Transactions are grouped by: - Document - LineNumber - Code (Item) - ToLocation - ToSite - UOM</p> <p>ActionQty values are summed for grouped transactions.</p>"},{"location":"integration/sapb1/sdk-provider/","title":"SAP B1","text":"<p>This document contains all the information needed to setup and configure SAP B1 integration. The Data Interface API (DI API) is part of the SAP Business One Software Development Kit (SDK). </p>"},{"location":"integration/sapb1/sdk-provider/#setup","title":"Setup","text":""},{"location":"integration/sapb1/sdk-provider/#prerequisites","title":"Prerequisites","text":"<ul> <li>The server running the Granite WMS service require the DI API to be locally installed and permissions setup in order for Granite to work.  This should be done by the client or SAP consultant.</li> <li>Granite WMS Integration service should be installed and all settings in regard to database and endpoints setup.</li> </ul>"},{"location":"integration/sapb1/sdk-provider/#sdk-provider","title":"SDK provider","text":"<ol> <li>Copy <code>Granite.Integration.SAPB1.dll</code> into the root folder of the Integration Service</li> <li>Copy <code>SDKProvider.xml</code> into the root folder of the Integration Service</li> </ol> <p>Preview of the  <code>SDKProvider.xml</code> file <pre><code>&lt;module name=\"Provider\"&gt;\n  &lt;bind\n    service=\"Granite.Integration.Contract.IProvider, Granite.Integration.Contract\"\n    to=\"Granite.Integration.SAPB1.Provider, Granite.Integration.SAPB1\"/&gt;\n&lt;/module&gt;\n</code></pre></p>"},{"location":"integration/sapb1/sdk-provider/#application-settings","title":"Application Settings","text":"<p>The following is a list of settings that must be configured in the SystemSettings table. It is advisable to schedule time to obtain these settings from the client or SAP consultant beforehand.</p> <p>You can locate the database script to create these records in the following path: <pre><code>~\\GraniteDatabase\\Data\\SystemSettings\\SystemSettingsSAPB1.sql\n</code></pre></p>"},{"location":"integration/sapb1/sdk-provider/#settings","title":"Settings","text":"Application Key Value Description IntegrationSAPB1 Server Integration provider SAP IntegrationSAPB1 LicenseServer SAP License server address <code>*see note*</code> IntegrationSAPB1 DbUserName Database user name IntegrationSAPB1 DbPassword Database password IntegrationSAPB1 CompanyDB SAP company database name IntegrationSAPB1 DbServerType SQL dialect. dst_MSSQL2012 dst_MSSQL2014 dst_MSSQL2016 dst_MSSQL2017 dst_MSSQL2019 IntegrationSAPB1 UserName SAP application user name IntegrationSAPB1 Password SAP application user password IntegrationSAPB1 InventoryAccountCode TAKEON AccountCode IntegrationSAPB1 BinEntry Greater than 0. The BinEntry will be used by TAKEON, SCRAP and ADJUSTMENT <p>Note</p> <p>LicenseServer address found in <code>C:\\Program Files (x86)\\SAP\\SAP Business One DI API\\Conf\\B1_Local_machine.xml</code></p> <p>Note</p> <p>Once the settings are captured please test the SAP connection by browsing to the <code>/config</code> page on the integration service.</p>"},{"location":"integration/sapb1/sdk-provider/#integration-methods","title":"Integration Methods","text":"<p>Integration Methods refer to the specific functionalities supported for the given provider. This documentation serves as a crucial resource when engaging with a client, providing insights into our supported operations and the manner in which we support them.</p> <p>Integration Methods are predefined values, each corresponding to an operation within SAP B1. These methods are configured at a process level in the database table <code>Process.IntegrationMethod</code>. In cases where the IntegrationMethod in the database is left empty, Granite will automatically use <code>Transaction.Type</code> as the default Integration Method.</p> <p><code>See Also</code> The <code>Integration_Transactions</code> SQL view is responsible for determining the information sent to each operation.</p>"},{"location":"integration/sapb1/sdk-provider/#goodissue","title":"GOODISSUE","text":"<ul> <li>Not supported (future development)</li> </ul>"},{"location":"integration/sapb1/sdk-provider/#goodreceipt","title":"GOODRECEIPT","text":"<ul> <li>Not supported (future development)</li> </ul>"},{"location":"integration/sapb1/sdk-provider/#reclassify","title":"RECLASSIFY","text":"<ul> <li>Not supported (future development)</li> </ul>"},{"location":"integration/sapb1/sdk-provider/#dynamicpick","title":"DYNAMICPICK","text":"<ul> <li>Not supported (future development)</li> </ul>"},{"location":"integration/sapb1/sdk-provider/#takeon","title":"TAKEON","text":"<ul> <li>Post :SAPbobsCOM.BoObjectTypes.oInventoryGenEntry</li> <li>Documents object for entering general items to inventory</li> <li> <p>Table: OIGN</p> </li> <li> <p>Supports: </p> <ul> <li>BinAllocations (Appsetting BinEntry)</li> </ul> </li> </ul>"},{"location":"integration/sapb1/sdk-provider/#adjustment","title":"ADJUSTMENT","text":"<ul> <li>Post : SAPbobsCOM.InventoryPostingsServiceDataInterfaces.ipsInventoryPosting</li> <li>The InventoryPostingsService service enables you to add, look up, and update inventory posting transactions.</li> <li>Table: OIQR</li> </ul>"},{"location":"integration/sapb1/sdk-provider/#scrap","title":"SCRAP","text":"<ul> <li>Post :SAPbobsCOM.InventoryPostingsServiceDataInterfaces.ipsInventoryPosting</li> <li>The InventoryPostingsService service enables you to add, look up, and update inventory posting transactions.</li> <li> <p>Table: OIQR</p> </li> <li> <p>Supports: </p> <ul> <li>BinAllocations (Appsetting BinEntry)</li> </ul> </li> </ul>"},{"location":"integration/sapb1/sdk-provider/#replenish","title":"REPLENISH","text":"<ul> <li>Post :SAPbobsCOM.BoObjectTypes.oStockTransfer</li> <li>StockTransfer is a business object that represents items to transfer from one warehouse to another. This object is part of the Inventory and Production module.</li> <li> <p>Table: OWTR</p> </li> <li> <p>Supports: </p> <ul> <li>SerialNumbers</li> <li>BatchNumbers</li> </ul> </li> </ul>"},{"location":"integration/sapb1/sdk-provider/#move","title":"MOVE","text":"<ul> <li>Post :SAPbobsCOM.BoObjectTypes.oStockTransfer</li> <li>StockTransfer is a business object that represents items to transfer from one warehouse to another. This object is part of the Inventory and Production module.</li> <li> <p>Table: OWTR</p> </li> <li> <p>Supports: </p> <ul> <li>BinAllocations (Appsetting BinEntry)</li> <li>SerialNumbers</li> <li>BatchNumbers</li> </ul> </li> </ul>"},{"location":"integration/sapb1/sdk-provider/#transfer","title":"TRANSFER","text":"<ul> <li>Post :SAPbobsCOM.BoObjectTypes.oStockTransfer</li> <li>StockTransfer is a business object that represents items to transfer from one warehouse to another. This object is part of the Inventory and Production module.</li> <li>Table: OWTR</li> </ul>"},{"location":"integration/sapb1/sdk-provider/#transferdraft","title":"TRANSFERDRAFT","text":"<ul> <li>Post :SAPbobsCOM.BoObjectTypes.oStockTransferDraft</li> <li>Documents object that represents a draft document</li> <li>Table: ODRF</li> </ul>"},{"location":"integration/sapb1/sdk-provider/#receive","title":"RECEIVE","text":"<ul> <li>Post :oPurchaseOrders -&gt; SAPbobsCOM.BoObjectTypes.oPurchaseDeliveryNotes</li> <li>Documents object that represents a purchase delivery note document</li> <li>Table: OPDN</li> </ul>"},{"location":"integration/sapb1/sdk-provider/#receivingpostmultiple","title":"RECEIVINGPOSTMULTIPLE","text":"<ul> <li>Post :oPurchaseOrders -&gt; SAPbobsCOM.BoObjectTypes.oPurchaseDeliveryNotes</li> <li>Documents object that represents a purchase delivery note document</li> <li>Table: OPDN</li> <li>Note: same as RECEIVING but instead of using Document Number we use all the IntegrationReference as PO Numbers.</li> </ul>"},{"location":"integration/sapb1/sdk-provider/#purchaseorderdraft","title":"PURCHASEORDERDRAFT","text":"<ul> <li>Post :oPurchaseOrders -&gt; SAPbobsCOM.BoObjectTypes.oDrafts</li> <li>Documents object that represents a draft document</li> <li>Table: ODRF</li> </ul>"},{"location":"integration/sapb1/sdk-provider/#purchasecreditnotes","title":"PURCHASECREDITNOTES","text":"<ul> <li>Post :oGoodsReturnRequest -&gt; oPurchaseCreditNotes</li> <li>Documents object that represents a draft of purchase credit note document</li> <li>Table: ORPC</li> </ul>"},{"location":"integration/sapb1/sdk-provider/#pick","title":"PICK","text":"<ul> <li>Post :oOrders -&gt; SAPbobsCOM.BoObjectTypes.oDeliveryNotes</li> <li>Documents object that represents a sales delivery note document</li> <li>Table: ODLN</li> </ul>"},{"location":"integration/sapb1/sdk-provider/#salesorderreturnrequest","title":"SALESORDERRETURNREQUEST","text":"<ul> <li>Post :SAPbobsCOM.BoObjectTypes.oReturns -&gt; SAPbobsCOM.BoObjectTypes.oReturnRequest</li> <li>Documents object that represents a sales return document</li> <li>Table: ORDN</li> </ul>"},{"location":"integration/sapb1/sdk-provider/#salesorderinvoice","title":"SALESORDERINVOICE","text":"<ul> <li>Post :oOrders -&gt; SAPbobsCOM.BoObjectTypes.oInvoices</li> <li>Documents object that represents a sales invoice document</li> <li>Table: OINV</li> </ul>"},{"location":"integration/sapb1/sdk-provider/#salesordercreditmemo","title":"SALESORDERCREDITMEMO","text":"<ul> <li>Post : SAPbobsCOM.BoObjectTypes.oInvoices -&gt; SAPbobsCOM.BoObjectTypes.oCreditNotes</li> <li>Documents object that represents a sales Credit Memo</li> <li>Table: OINV</li> <li></li> </ul>"},{"location":"integration/sapb1/sdk-provider/#salesorderdraft","title":"SALESORDERDRAFT","text":"<ul> <li>Post :SAPbobsCOM.BoObjectTypes.oOrders -&gt; SAPbobsCOM.BoObjectTypes.oDrafts</li> <li>Documents object that represents a draft document</li> <li>Table: ODRF</li> </ul>"},{"location":"integration/sapb1/sdk-provider/#sap-table-names","title":"SAP Table Names","text":"<ul> <li>OINV table = Sales A/R &gt; A/R Invoice.</li> <li>ORIN table = Sales A/R &gt; A/R Credit Memo.</li> <li>ODLN table = Sales A/R &gt; Delivery.</li> <li>ORDN table = Sales A/R &gt; Returns.</li> <li>ORDR table = Sales A/R &gt; Order.</li> <li>OQUT table = Sales A/R &gt; Quotation.</li> <li>OPCH table = Purchasing A/P &gt; A/P Invoice.</li> <li>ORPC table = Purchasing A/P &gt; A/P Credit Memo.</li> <li>OPDN table = Purchasing A/P &gt; Goods Receipt PO.</li> <li>ORPD table = Purchasing A/P &gt; Goods Returns.</li> <li>OPOR table = Purchasing A/P &gt; A/R Invoice.</li> <li>OPQT table = Purchasing A/P &gt; Purchase Quotation.</li> <li>OIGN table = Inventory &gt; Inventory Transactions &gt; Goods Receipt. Or, in case of receipt from production, select Production &gt; Receipt from Production (see ProductionOrders).</li> <li>OIGE table = Inventory &gt; Inventory Transactions &gt; Goods Issue. Or, in case of issue for production, select Production &gt; Issue for Production (see ProductionOrders).</li> <li>ODRF table = Sales A/R (or Purchasing - A/P) &gt; Document Draft. Set your selection criteria, and click OK.</li> </ul>"},{"location":"integration/sapb1/sdk-provider/#sap-error-codes","title":"SAP Error Codes","text":"<ul> <li>0     Success.</li> <li>10    Seems to be a generic code. Need to troubleshoot issue to determine exact reason.</li> <li>103   Connection to the company database has failed.</li> <li>104   Connection to the license database has failed.</li> <li>105   The observer.dll init has failed.</li> <li>106   You are not connected to a company.</li> <li>107   Wrong username and/or password.</li> <li>108   Error reading company definitions.</li> <li>109   Error copying dll to temp directory.</li> <li>110   Error opening observer.dll.</li> <li>111   Connection to SBO-Common has failed.</li> <li>112   Error extracting dll from cab.</li> <li>113   Error creating temporary dll folder.</li> <li>114   No server defined.</li> <li>115   No database defined.</li> <li>116   Already connected to a company database.</li> <li>117   Language is not supported.</li> <li>118   Exceeded the number of max concurrent users.</li> <li>125   SAP connection issue, SQL version incorrect. Appsetting DbServerType, version might not be supported in release.</li> <li>132   Cannot connect to SAP, SAP Database names are case-sensitive.</li> <li>111   Similar issue to 125, DbServerType incorrect. Verify DbServerType setting, must be correct 2012, 2014 ect.</li> <li>1001  The field is to small to accept the data.</li> <li>1002  Invalid row.</li> <li>1103  Object not supported.</li> <li>1104  Invalid XML file.</li> <li>1105  Invalid index.</li> <li>1106  Invalid field name.</li> <li>1107  Wrong object state.</li> <li>1108  The transaction is already active.</li> <li>1109  There is no active transaction in progress.</li> <li>1110  Invalid user entered.</li> <li>1111  Invalid file name.</li> <li>1112  Could not save the XML file.</li> <li>1113  Function not implemented.</li> <li>1114  XML validation failed.</li> <li>1115  No XML schema was found to support this object.</li> <li>1120  Ref count for this object is higher then 0.</li> <li>1130  Invalid edit state.</li> <li>2000  SQL native error.</li> <li>2050  No query string entered.</li> <li>2051  No value found.</li> <li>2052  No records found.</li> <li>2053  Invalid object.</li> <li>2054  Either BOF or EOF have been reached.</li> <li>2055  The value entered is invalid.</li> <li>3000  The logged-on user does not have permission to use this object.</li> <li>3001  You do not have a permission to view this fields data.</li> <li>8004  Company connection is dead.</li> <li>8005  Server connection is dead.</li> <li>8006  Error opening language resource.</li> <li>8007  License failure.</li> <li>8008  Error initializing the DB layer.</li> <li>8009  Too many users connected.</li> <li>8010  No valid license is present.</li> <li>8011  Error initializing Business objects layer.</li> <li>8012  Company version mismatch.</li> <li>8013  Error initializing the application environment.</li> <li>8014  Invalid command.</li> <li>8015  Missing parameter.</li> <li>8016  Unsupported object.</li> <li>8017  Invalid command for this object.</li> <li>8018  Internal permission error.</li> <li>8019  DLL is not initialized.</li> <li>8020  Language init error.</li> <li>8021  Timeout encountered.</li> <li>8022  Init error.</li> <li>8023  Wrong user or password.</li> </ul>"},{"location":"integration/sapb1/sdk-provider/#known-issues","title":"Known issues","text":""},{"location":"integration/sapb1/sdk-provider/#integration-slow","title":"Integration Slow","text":"<p>The DI API could slow down due to the number of SAP log files (~b1logger.~.csv). The default path for log files:</p> <p>C:\\ProgramData\\SAP\\SAP Business One\\Log\\SAP Business One</p> <p>The number of files will impact the connection speed to the DI API, and can ultimately cause timeouts. Deleting these files should resolve the issue, but the path will often grew again within a few days. You can schedule a task to clear the path or switch logging off the logging.</p> <p>C:\\Program Files (x86)\\SAP\\SAP Business One DI API\\Conf\\b1LogConfig.xml</p> <p><code>Set Activate = \"0\"</code> <pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-16\"?&gt;\n&lt;log FolderSize=\"50\"&gt;\n&lt;b1logger Mode=\"A\" MaxFileSize=\"5\" MaxNumOfMsg=\"500\" LogStack=\"0\" Activate = \"0\"&gt;\n</code></pre></p> <p><code>See Also</code>  https://www.youtube.com/watch?v=kGueS8LdF-w</p> <p>If the IIS (app pool) user does not have permissions it can cause issues.</p>"},{"location":"integration/sapb1/sdk-provider/#further-reading","title":"Further Reading","text":"<ul> <li>Complete list of DI API (SDK) Document objects (https://biuan.com/Documents/).</li> <li>SAP Tables https://sap.erpref.com/</li> <li>https://www.sap-business-one-tips.com/</li> <li>https://support.boyum-it.com/hc/en-us/articles/360021794234-SAP-Object-Types</li> </ul>"},{"location":"integration/syspro/sdk-provider/","title":"Syspro","text":""},{"location":"integration/syspro/sdk-provider/#setup","title":"Setup","text":"<ol> <li> <p>Copy everything in the <code>Providers\\Syspro</code> folder into Integration Service folder (root folder).</p> </li> <li> <p>Ensure <code>SDKProvider.xml</code> setup or copied correctly     <pre><code>&lt;module name=\"Provider\"&gt;\n&lt;bind\n    service=\"Granite.Integration.Contract.IProvider, Granite.Integration.Contract\"\n    to=\"Granite.Integration.Syspro.Provider, Granite.Integration.Syspro\"/&gt;\n&lt;/module&gt;\n</code></pre></p> </li> <li> <p>Configure your connection string and endpoint in the <code>Granite.Integration.Web.exe.config</code> file</p> </li> </ol>"},{"location":"integration/syspro/sdk-provider/#settings","title":"Settings","text":"<p>The settings for Syspro are configured in the SystemSettings table. The IntegrationService will pick up the settings using the Application name specified in it's <code>.config</code> file: <pre><code>&lt;add key =\"SystemSettingsApplicationName\" value=\"IntegrationSyspro\"/&gt;\n</code></pre> If this setting is missing from the config file or left empty, the IntegrationService will default to using <code>IntegrationSyspro</code> as the SystemSettingsApplicationName</p> <p>You can browse the IntegrationService's <code>/config</code> page to have the IntegrationService create the default settings in the SystemSettings table for you.</p> <p>The script to insert the default settings is also located in the GraniteDatabase release: <pre><code>~\\GraniteDatabase\\Data\\SystemSettings\\SystemSettingSyspro.sql\n</code></pre></p> <p>Note</p> <p>To pick up any changes to the SystemSettings table, the IntegrationService will need to be restarted.</p>"},{"location":"integration/syspro/sdk-provider/#example-systemsettings-in-database","title":"Example SystemSettings in database","text":"Application Key Value Description IntegrationSyspro SysproWriteXML If true, logs XML that would be posted to C drive instead of posting to Syspro IntegrationSyspro Operator Syspro Operator name IntegrationSyspro OperatorPassword Syspro Operator password IntegrationSyspro CompanyId Syspro CompanyID IntegrationSyspro CompanyPassword Syspro Company password IntegrationSyspro SalesOrderPosting Syspro business object to use for SalesOrder posting (SORTBO or SORTOS or ALL) IntegrationSyspro TransferPosting Syspro integration method for Transfers (GIT or INVT) IntegrationSyspro Instance Syspro Instance to use (empty for default) IntegrationSyspro MultipleBins true or false. Set to true when Syspro has multiple bins enabled IntegrationSyspro SerialNumbers true or false. Set to true when Syspro has SerialNumbers enabled"},{"location":"integration/syspro/sdk-provider/#sysprowritexml","title":"SysproWriteXML","text":"<ul> <li>Instead of posting the transaction write to xml. Output will be in root C:</li> </ul>"},{"location":"integration/syspro/sdk-provider/#operator","title":"Operator","text":"<ul> <li>Syspro operator name</li> </ul>"},{"location":"integration/syspro/sdk-provider/#operatorpassword","title":"OperatorPassword","text":"<ul> <li>Syspro operator password</li> </ul>"},{"location":"integration/syspro/sdk-provider/#companyid","title":"CompanyId","text":"<ul> <li>Syspro company name</li> </ul>"},{"location":"integration/syspro/sdk-provider/#companypassword","title":"CompanyPassword","text":"<ul> <li>Syspro company password</li> </ul>"},{"location":"integration/syspro/sdk-provider/#salesorderposting","title":"SalesOrderPosting","text":"<ul> <li>Options: SORTBO / SORTOS / ALL</li> <li>Used By: PICKING</li> <li>SORTBO: post to business object SORTBO</li> <li>SORTOS: post to business object SORTOS</li> <li>ALL: Clear SORTBO, post SORTBO, post SORTOS</li> </ul>"},{"location":"integration/syspro/sdk-provider/#transferposting","title":"TransferPosting","text":"<ul> <li>Options: INVT / GIT</li> <li>Used By: TRANSFER (TRANSFER / INTRANSIT / RECEIPT)</li> </ul>"},{"location":"integration/syspro/sdk-provider/#instance","title":"Instance","text":"<ul> <li>The instance to use when connecting to Syspro</li> <li>Leave empty for default</li> </ul>"},{"location":"integration/syspro/sdk-provider/#multiplebins","title":"MultipleBins","text":"<ul> <li>Not fully implemented</li> <li>Set to true when Syspro has multiple bins enabled</li> </ul>"},{"location":"integration/syspro/sdk-provider/#serialnumbers","title":"SerialNumbers","text":"<ul> <li>Not fully implemented</li> <li>Set to true when Syspro has SerialNumbers enabled</li> </ul>"},{"location":"integration/syspro/sdk-provider/#integration-methods","title":"Integration Methods","text":""},{"location":"integration/syspro/sdk-provider/#takeon","title":"TAKEON","text":"<ul> <li>INVTMR. Inventory Receipts</li> </ul> <p>INVTMR Parameters:</p> Parameter Name Value TransactionDate DateTime.Now IgnoreWarnings N ApplyIfEntireDocumentValid Y ValidateOnly N ManualSerialTransfersAllowed N ReturnDetailedReceipt N IgnoreAnalysis Y <p>INVTMRDOC Items mapping:</p> Granite Syspro ToLocation Warehouse Code StockCode ActionQty Quantity Batch Lot UOM UnitOfMeasure"},{"location":"integration/syspro/sdk-provider/#adjustment","title":"ADJUSTMENT","text":"<ul> <li>INVTMA. Inventory Adjustments</li> </ul> <p>INVMA Parameters:</p> Parameter Name Value TransactionDate DateTime.Now PhysicalCount N PostingPeriod C IgnoreAnalysis Y IgnoreWarnings N ApplyIfEntireDocumentValid Y ValidateOnly N <p>INVTMADOC Items mapping:</p> Granite Syspro ToLocation Warehouse Code StockCode ActionQty Quantity Batch Lot UOM UnitOfMeasure"},{"location":"integration/syspro/sdk-provider/#reclassify","title":"RECLASSIFY","text":"<ul> <li>Not implemented/supported</li> </ul>"},{"location":"integration/syspro/sdk-provider/#replenish","title":"REPLENISH","text":"<ul> <li>INVTMO. Inventory Warehouse Transfer</li> </ul> <p>INVTMO Parameters:</p> Parameter Name Value IgnoreWarnings Y CreateDestinationWarehouse N ApplyIfEntireDocumentValid Y ValidateOnly N <p>INVTMODOC Items mapping:</p> Granite Syspro Behaviour Immediate Set to Y NoDestination Set to N FromLocation FromWarehouse ToLocation ToWarehouse Code StockCode ActionQty Quantity Batch Lot UOM UnitOfMeasure"},{"location":"integration/syspro/sdk-provider/#transfer","title":"TRANSFER","text":"<p>Based on setting TransferPosting (INVT or GIT)</p> <ul> <li>INVT<ul> <li>TRANSFER/INTRANSIT: INVTMO</li> <li>RECEIPT: INVTMI</li> </ul> </li> <li>GIT <ul> <li>TRANSFER/INTRANSIT: SORTBO</li> <li>RECEIPT: INVTMN</li> </ul> </li> </ul> <p>INVTMO Parameters:</p> Parameter Name Value IgnoreWarnings Y CreateDestinationWarehouse N ApplyIfEntireDocumentValid Y ValidateOnly N <p>INVTMODOC Items mapping:</p> Granite Syspro Behaviour Immediate Set to Y NoDestination Set to N DocumentDescription Reference FromLocation FromWarehouse ToLocation ToWarehouse Code StockCode ActionQty Quantity Batch Lot UOM UnitOfMeasure <p>SORTBO Parameters:</p> Parameter Name Value IgnoreWarnings Y ApplyIfEntireDocumentValid Y ValidateOnly N <p>SORTBODOC Item mapping:</p> Granite Syspro N ZeroShipQuantity Item8 OrderStatus Document SalesOrder LineNumber SalesOrderLine Code StockCode ToLocation Warehouse ActionQty Quantity Batch Lot UOM UnitOfMeasure <p>INVTMI Parameters:</p> Parameter Name Value IgnoreWarnings Y ApplyIfEntireDocumentValid Y ValidateOnly N <p>INVTMIDOC Item mapping</p> Granite Syspro DocumentDescription Reference ToLocation Warehouse Code StockCode ActionQty Quantity Batch Lot UOM UnitOfMeasure <p>INVTMN Parameters:</p> Parameter Name Value IgnoreWarnings Y ApplyIfEntireDocumentValid Y ValidateOnly N <p>INVTMNDOC Item mapping:</p> Granite Syspro LineNumber Key.LineNumber ToLocation Key.TargetWarehouse FromLocation Key.SourceWarehouse DocumentDescription Key.GtrReference ActionQty Quantity"},{"location":"integration/syspro/sdk-provider/#move","title":"MOVE","text":"<ul> <li>INVTMO. Inventory Warehouse Transfer</li> </ul> <p>INVTMO Parameters:</p> Parameter Name Value IgnoreWarnings Y CreateDestinationWarehouse N ApplyIfEntireDocumentValid Y ValidateOnly N <p>INVTMODOC Items mapping:</p> Granite Syspro Behaviour Immediate Set to Y NoDestination Set to N FromLocation FromWarehouse ToLocation ToWarehouse Code StockCode ActionQty Quantity Batch Lot UOM UnitOfMeasure"},{"location":"integration/syspro/sdk-provider/#scrap","title":"SCRAP","text":"<ul> <li>INVTMA. Inventory Adjustments</li> </ul> <p>INVMA Parameters:</p> Parameter Name Value TransactionDate DateTime.Now PhysicalCount N PostingPeriod C IgnoreAnalysis Y IgnoreWarnings N ApplyIfEntireDocumentValid Y ValidateOnly N <p>INVTMADOC Items mapping:</p> Granite Syspro Code StockCode ActionQty Quantity Batch Lot UOM UnitOfMeasure ToLocation Warehouse"},{"location":"integration/syspro/sdk-provider/#pick","title":"PICK","text":"<p>Based on setting SalesOrderPosting (SORTBO/SORTOS/ALL)</p> <ul> <li>SORTBO<ul> <li>SORTBO PostSorBackOrderRelease</li> </ul> </li> <li>SORTOS<ul> <li>SORTOS PostSorOrderStatus</li> </ul> </li> <li>ALL<ul> <li>SORTBO PostSorBackOrderRelease Clear (Set qty 0)</li> <li>SORTBO PostSorBackOrderRelease set qty from Granite</li> <li>SORTOS PostSorOrderStatus</li> <li>SORTIC PostSalesOrderInvoice</li> </ul> </li> </ul>"},{"location":"integration/syspro/sdk-provider/#sortbo-setting","title":"SORTBO Setting","text":"<p>SORTBO Parameters:</p> Parameter Name Value IgnoreWarnings Y ApplyIfEntireDocumentValid Y ValidateOnly N <p>SORTBODOC Item mapping:</p> Granite Syspro Behaviour ZeroShipQuantity Set to N ReleaseFromShip Set to N OrderStatus Set to Item8 Document SalesOrder LineNumber SalesOrderLine Code StockCode ToLocation Warehouse ActionQty Quantity Batch Lot UOM UnitOfMeasure"},{"location":"integration/syspro/sdk-provider/#sortos-setting","title":"SORTOS Setting","text":"<p>SORTOS Parameters:</p> Parameter Name Value IgnoreWarnings Y ApplyIfEntireDocumentValid Y ValidateOnly N <p>SORTOSDOC Item mapping:</p> Granite Syspro Behaviour OrderStatus Set to Item NewOrderStatus Set to Item8 Document SalesOrder"},{"location":"integration/syspro/sdk-provider/#all-setting","title":"ALL Setting","text":"<p>Clear SORTBO Parameters:</p> Parameter Name Value IgnoreWarnings Y ApplyIfEntireDocumentValid Y ValidateOnly N <p>Clear SORTBODOC Item mapping:</p> Granite Syspro Behaviour CompleteLine Set to N ReleaseFromMultipleLines Set to N AdjustOrderQuantity Set to N ZeroShipQuantity Set to Y ReleaseFromShip Set to Y OrderStatus Set to N Document SalesOrder LineNumber SalesOrderLine Code StockCode ToLocation Warehouse Quantity Set to 0 Batch Lot UOM UnitOfMeasure <p>SORTBO Parameters:</p> Parameter Name Value IgnoreWarnings Y ApplyIfEntireDocumentValid Y ValidateOnly N <p>SORTBODOC Item mapping:</p> Granite Syspro Behaviour ZeroShipQuantity Set to N ReleaseFromMultipleLines Set to N AdjustOrderQuantity Set to N OrderStatus Set to N ReleaseFromShip Set to N AllocateSerialNumbers Set to N Document SalesOrder LineNumber SalesOrderLine Code StockCode ToLocation Warehouse ActionQty Quantity Batch Lot UOM UnitOfMeasure <p>SORTOS Parameters:</p> Parameter Name Value IgnoreWarnings Y ApplyIfEntireDocumentValid Y ValidateOnly N <p>SORTOSDOC Item mapping:</p> Granite Syspro Behaviour OrderStatus Set to Item OrderStatus Set to Item8 Document SalesOrder <p>SORTIC Parameters:</p> Parameter Name Value IgnoreWarnings Y ApplyIfEntireDocumentValid Y ValidateOnly N <p>SORTICDOC Item mapping:</p> Granite Syspro Behaviour Document SalesOrder LineNumber SalesOrderLineList Comma separated list of line numbers"},{"location":"integration/syspro/sdk-provider/#receive","title":"RECEIVE","text":"<ul> <li>PORTOR. Purchase Order Receipts</li> </ul> <p>PORTOR Parameters:</p> Parameter Name Value TransactionDate Empty string IgnoreWarnings Y GRNMatchingAction A ApplyIfEntireDocumentValid Y ValidateOnly N ManualSerialTransfersAllowed N IgnoreAnalysis Y <p>PORTORDOC Item mapping:</p> Granite Syspro Behaviour ReceiptFromInspection Set to null ReceiptIntoInspection Set to null Receipt.SwitchOnGRNMatching Set to N Receipt.Units Set to empty string Receipt.Cost Set to empty string Receipt.CostBasis Set to P Receipt.DeliveryNote Set to empty string Document Receipt.PurchaseOrder LineNumber Receipt.PurchaseOrderLine Code Receipt.StockCode ActionQty Receipt.Quantity UOM Receipt.UnitOfMeasure Comment Receipt.Reference ToLocation Receipt.Warehouse Batch Receipt.Lot ExpiryDate Receipt.LotExpiryDate"},{"location":"integration/syspro/sdk-provider/#dynamicpick","title":"DYNAMICPICK","text":"<ul> <li>Not Implemented/supported</li> </ul>"},{"location":"label-printing/bartender/manual/","title":"Bartender","text":"<p>The Bartender LabelPrint service is a Window Service that enables other Granite applications to print Bartender labels.</p> <p>Each type of label that can be printed has a corresponding SQL view that returns the information/data that displays on the label. The application will query this view with a key (Barcode, Item Code, etc) to fetch the relevant information. After that, the application will map the data returned by the SQL view to the matching Named Data Source in the Bartender label format. </p> <p>Supported Bartender Versions:</p> <ul> <li> <p>32 bit versions</p> <ul> <li>10.1 R1, R4</li> <li>2016, R1, R4</li> </ul> </li> <li> <p>64 bit versions</p> <ul> <li>2016 R9</li> <li>2019 R6, R10</li> <li>2020</li> <li>2021, R7 </li> </ul> </li> </ul>"},{"location":"label-printing/bartender/manual/#setup","title":"Setup","text":""},{"location":"label-printing/bartender/manual/#prerequisites","title":"Prerequisites","text":"<ul> <li>Bartender</li> <li>.NET Framework 4.5</li> </ul>"},{"location":"label-printing/bartender/manual/#installation","title":"Installation","text":"<ol> <li> <p>Check the version of Bartender that is currently installed. You can check by opening Bartender Designer, and selecting Help -&gt; About. Take note of the release number ant the bitness as shown here:</p> <p></p> </li> <li> <p>Copy the version of GraniteLabelPrinting that matches the bitness of Bartender that you have installed.</p> </li> <li> <p>In the <code>Granite.LabelPrinting.exe.config</code> file, configure your connection string to the Granite database     <pre><code>&lt;connectionStrings&gt;\n    &lt;add name=\"CONNECTION\" connectionString=\"Data Source=.\\;Initial Catalog=Granite;Persist Security Info=True;User ID=******;Password=****\" providerName=\"System.Data.SqlClient\" /&gt;\n&lt;/connectionStrings&gt;\n</code></pre></p> </li> <li> <p>In the <code>Granite.LabelPrinting.exe.config</code> file, configure your <code>EndPoint</code> setting. This is the address that the LabelPrintService will run on.     <pre><code>&lt;add key=\"EndPoint\" value=\"http://localhost:2077/\"/&gt;\n</code></pre></p> </li> <li> <p>In the <code>Granite.LabelPrinting.exe.config</code> file, ensure that the <code>Provider</code> setting is set to <code>Bartender</code> <pre><code>&lt;add key=\"Provider\" value=\"Bartender\"/&gt; \n</code></pre></p> </li> <li> <p>Run <code>Granite.LabelPrinting.exe</code> and follow the instructions to complete the install. </p> </li> </ol> <p>Note</p> <p>It is advisable to run the service from the console and test print before installing as a service.</p> <p>You may need to run the the Granite Label Printing service as administrator, depending on the permissions yor user account has.</p>"},{"location":"label-printing/bartender/manual/#app-settings","title":"App Settings","text":""},{"location":"label-printing/bartender/manual/#endpoint","title":"EndPoint","text":"<p>The endpoint address of the printing service. Hosted via windows service. <pre><code>&lt;add key=\"EndPoint\" value=\"http://localhost:2077/\"/&gt;\n</code></pre></p>"},{"location":"label-printing/bartender/manual/#provider","title":"Provider","text":"<p>Provider options ZPL OR Bartender. </p> <p><code>Take Note</code> while this service is still capable of printing ZPL labels, it is highly advised to use the new IIS ZPL Label Print Service instead.  ZPL printing via this service will not receive any further support, and will eventually be removed.  If you do choose to use this service to print ZPL labels, nsure that the default labels below is relevant to your provider. The extension and file needs to be setup correctly .zpl or .btw </p> <pre><code>&lt;add key=\"Provider\" value=\"Bartender\"/&gt;  &lt;!--Bartender or ZPL--&gt;\n</code></pre>"},{"location":"label-printing/bartender/manual/#printername","title":"PrinterName","text":"<p>Default printer for the instance of the service, you can override the windows default printer by specifying a printer name. <pre><code>&lt;add key=\"PrinterName\" value=\"\"/&gt;\n</code></pre></p>"},{"location":"label-printing/bartender/manual/#printernameerrorlabel","title":"PrinterNameErrorLabel","text":"<p>Printer name for error label printing. If configured a label with information about the application error will print. This will typical be the error you see on the screen but just printed out. Used to keep track of errors. <pre><code>&lt;add key=\"PrinterNameErrorLabel\" value=\"\"/&gt;\n</code></pre></p>"},{"location":"label-printing/bartender/manual/#defaultlabelpath","title":"DefaultLabelPath","text":"<p>Path to the default labels location <pre><code>&lt;add key=\"DefaultLabelPath\" value=\"C:\\Program Files\\Common Files\\Cradle Technology Services\\Granite\\Labels\\\"/&gt;\n</code></pre></p>"},{"location":"label-printing/bartender/manual/#settings-label-configuration","title":"Settings Label configuration","text":"<p>The tables below documents all the appsettings related to changing the label format and data.  Each Default label is linked to a setting that below that configures the SQL view.</p> <p><code>Settings for label path (.btw or .zpl)</code></p> Key Value Setting name for SQL View DefaultTrackingEntityLabel TrackingEntity.btw ViewTrackingEntityLabel DefaultMasterItemLabel MasterItem.btw ViewMasterItemLabel DefaultLocationLabel Location.btw ViewLocationLabel DefaultUserLabel User.btw ViewUserLabel DefaultPalletLabel Pallet.btw PalletLabel DefaultBoxLabel Box.btw ViewBoxLabel <p><code>Settings for label data (SQL view)</code></p> Key Value (SQl View Name) ViewTrackingEntityLabel Label_TrackingEntity ViewMasterItemLabel Label_MasterItem ViewLocationLabel Label_Location ViewUserLabel Label_Users PalletLabel Label_Pallet ViewBoxLabel Label_Box"},{"location":"label-printing/bartender/manual/#logging","title":"Logging","text":"<p>Logging can be configured in the nlog.config file</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;\n&lt;nlog xmlns=\"http://www.nlog-project.org/schemas/NLog.xsd\"\n      xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n      autoReload=\"true\"\n      internalLogLevel=\"Info\"\n      internalLogFile=\"c:\\temp\\internal-nlog-AspNet.txt\"&gt;\n\n    &lt;!-- enable asp.net core layout renderers --&gt;\n    &lt;extensions&gt;\n        &lt;add assembly=\"NLog.Web\"/&gt;\n    &lt;/extensions&gt;\n\n    &lt;targets&gt;\n    &lt;target xsi:type=\"File\"\n        name=\"applicationLogs\"\n        fileName=\"Granite.LabelPrinting.log\"\n        layout=\"${longdate}|${event-properties:item=EventId:whenEmpty=0}|${level:uppercase=true}|${mdlc:userName}|${logger}|${message} ${exception:format=tostring}\"\n        archiveFileName=\"Granite.LabelPrinting.{#}.log\"\n        archiveNumbering=\"DateAndSequence\"\n        archiveEvery=\"Day\"\n        archiveAboveSize=\"10485760\"\n        archiveDateFormat=\"yyyy-MM-dd\"\n        maxArchiveFiles=\"7\" /&gt;\n        &lt;!-- File Target for own log messages with extra web details using some ASP.NET core renderers --&gt;\n    &lt;target xsi:type=\"File\"\n        name=\"innerWorkingsLogs\"\n        fileName=\"Granite.LabelPrinting-${shortdate}.Inner.log\"\n        layout=\"${longdate}|${event-properties:item=EventId:whenEmpty=0}|${level:uppercase=true}|${logger}|${mdlc:userName}|${message} ${exception:format=tostring}|url: ${aspnet-request-url}|action: ${aspnet-mvc-action}|${callsite}\" /&gt;\n\n    &lt;target xsi:type=\"Console\"\n        name=\"lifetimeConsole\"\n        layout=\"${MicrosoftConsoleLayout}\" /&gt;\n    &lt;/targets&gt;\n    &lt;rules&gt;\n        &lt;!-- minlevel=\"Error\"--&gt;\n        &lt;!-- minlevel=\"Info\"--&gt;\n        &lt;logger name=\"*\" minlevel=\"Error\" writeTo=\"applicationLogs\" /&gt;\n    &lt;/rules&gt;\n&lt;/nlog&gt;\n</code></pre> <p>The minlevel setting near the end of the file is what determines how much information is logged. You can set it to Info or Error</p>"},{"location":"label-printing/zpl/manual/","title":"ZPL","text":""},{"location":"label-printing/zpl/manual/#setup","title":"Setup","text":""},{"location":"label-printing/zpl/manual/#prerequisites","title":"Prerequisites","text":"<ul> <li>ASP.NET Core 8 Hosting Bundle</li> <li>IIS</li> </ul>"},{"location":"label-printing/zpl/manual/#installation","title":"Installation","text":"<ul> <li> <p>Ensure that the folder that you have installed GraniteLabelPrintingZPL to has full access enabled for all users. This will ensure that the application log files can be created</p> </li> <li> <p>Add GraniteLabelPrintingZPL to IIS</p> </li> </ul> <p>Note</p> <p>Take note of the new <code>IsPublic</code> setting in the <code>appsettings.json</code> file below. This is used to configure security settings for the site. If set to false you can run GraniteLabelPrintingZPL as http instead of https</p> <p>If you are running GraniteLabelPrintingZPL as https, you can use the same certificate as the WebDesktop</p>"},{"location":"label-printing/zpl/manual/#appsettings","title":"AppSettings","text":"<p>The appsettings.json file is where you configure the application. </p> <p>The Width and Height for each label do not affect the size that the label prints at. These parameters actually set the size that label previews render at</p> <p>If you are running GraniteLabelPrintingZPL as https, AllowedOrigins must specify all addresses that can print to the LabelPrintService. You should include WebApp, Webservice, WebDesktop, and RepoAPI as needed.</p> <pre><code>{\n  \"ConnectionStrings\": {\n    \"CONNECTION\": \"Data Source=.\\\\SQL2019;Initial Catalog=Granite;Persist Security Info=True;User ID=username;Password=password\"\n  },\n  \"IsPublic\":  false,\n  \"AllowedOrigins\": [ \"https://my-pcname:40099\", \"http://my-pcname:40081\", \"http://my-pcname:40086\" ],\n  \"DefaultLabelPath\": \"C:\\\\Program Files (x86)\\\\Granite WMS\\\\Labels\\\\\",\n  \"PrinterName\": \"REC\",\n  \"DefaultTrackingEntityLabel\": {\n    \"ViewName\": \"Label_TrackingEntity\",\n    \"LabelName\": \"TrackingEntity.zpl\",\n    \"Width\": \"100\",\n    \"Height\": \"30\"\n  },\n  \"DefaultMasterItemLabel\": {\n    \"ViewName\": \"Label_MasterItem\",\n    \"LabelName\": \"MasterItem.zpl\",\n    \"Width\": \"75\",\n    \"Height\": \"20\"\n  },\n  \"DefaultLocationLabel\": {\n    \"ViewName\": \"Label_Location\",\n    \"LabelName\": \"Location.zpl\",\n    \"Width\": \"80\",\n    \"Height\": \"40\"\n  },\n  \"DefaultUserLabel\": {\n    \"ViewName\": \"Label_Users\",\n    \"LabelName\": \"User.zpl\",\n    \"Width\": \"100\",\n    \"Height\": \"20\"\n  },\n  \"DefaultPalletLabel\": {\n    \"ViewName\": \"Label_Pallet\",\n    \"LabelName\": \"Pallet.zpl\",\n    \"Width\": \"100\",\n    \"Height\": \"20\"\n  },\n  \"DefaultBoxLabel\": {\n    \"ViewName\": \"Label_Box\",\n    \"LabelName\": \"Box.zpl\",\n    \"Width\": \"100\",\n    \"Height\": \"20\"\n  },\n  \"DefaultErrorLabel\": {\n    \"ViewName\": \"\",\n    \"LabelName\": \"ErrorLabel.zpl\",\n    \"Width\": \"100\",\n    \"Height\": \"20\"\n  },\n  \"ViewTrackingEntityLabel\": \"Label_TrackingEntity\",\n  \"ViewMasterItemLabel\": \"Label_MasterItem\",\n  \"ViewLocationLabel\": \"Label_Location\",\n  \"ViewUserLabel\": \"Label_Users\",\n  \"ViewPalletLabel\": \"Label_Pallet\",\n  \"ViewBoxLabel\": \"Label_Box\",\n  \"Logging\": {\n    \"LogLevel\": {\n      \"Default\": \"Information\",\n      \"Microsoft.AspNetCore\": \"Warning\"\n    }\n  },\n  \"AllowedHosts\": \"*\"\n}\n</code></pre>"},{"location":"label-printing/zpl/manual/#logging","title":"Logging","text":"<p>Logging can be configured in the nlog.config file</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;\n&lt;nlog xmlns=\"http://www.nlog-project.org/schemas/NLog.xsd\"\n      xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n      autoReload=\"true\"\n      internalLogLevel=\"Info\"\n      internalLogFile=\"c:\\temp\\internal-nlog-AspNet.txt\"&gt;\n\n    &lt;!-- enable asp.net core layout renderers --&gt;\n    &lt;extensions&gt;\n        &lt;add assembly=\"NLog.Web\"/&gt;\n    &lt;/extensions&gt;\n\n    &lt;targets&gt;\n        &lt;target xsi:type=\"File\" \n            name=\"applicationLogs\" \n            fileName=\"GraniteLabelPrintingZPL.log\"\n            layout=\"${longdate}|${event-properties:item=EventId:whenEmpty=0}|${level:uppercase=true}|${mdlc:userName}|${logger}|${message} ${exception:format=tostring}\" \n            archiveFileName=\"GraniteLabelPrintingZPL.{#}.log\"\n            archiveNumbering=\"DateAndSequence\"\n            archiveEvery=\"Day\"\n            archiveAboveSize=\"10485760\"\n            archiveDateFormat=\"yyyy-MM-dd\"\n            maxArchiveFiles=\"7\" /&gt;\n\n        &lt;!-- File Target for own log messages with extra web details using some ASP.NET core renderers --&gt;\n        &lt;target xsi:type=\"File\" \n            name=\"innerWorkingsLogs\" \n            fileName=\"GraniteLabelPrintingZPL-${shortdate}.Inner.log\"\n            layout=\"${longdate}|${event-properties:item=EventId:whenEmpty=0}|${level:uppercase=true}|${logger}|${mdlc:userName}|${message} ${exception:format=tostring}|url: ${aspnet-request-url}|action: ${aspnet-mvc-action}|${callsite}\" /&gt;\n\n        &lt;!--Console Target for hosting lifetime messages to improve Docker / Visual Studio startup detection --&gt;\n        &lt;target xsi:type=\"Console\" name=\"lifetimeConsole\" layout=\"${MicrosoftConsoleLayout}\" /&gt;\n    &lt;/targets&gt;\n    &lt;rules&gt;\n        &lt;!-- minlevel=\"Error\"--&gt;\n        &lt;!-- minlevel=\"Info\"--&gt;\n        &lt;logger name=\"*\" minlevel=\"Error\" writeTo=\"applicationLogs\" /&gt;\n    &lt;/rules&gt;\n&lt;/nlog&gt;\n</code></pre> <p>The minlevel setting near the end of the file is what determines how much information is logged. You can set it to Info or Error</p>"},{"location":"label-printing/zpl/manual/#label-preview","title":"Label Preview","text":""},{"location":"label-printing/zpl/manual/#previewing-a-template","title":"Previewing a template","text":"<p>You can preview a label by browsing to https://[hostname]:[port number]/preview/[Label key] </p> <p>[LabelKey] must be one of the label types from the appsettings.json file:</p> <pre><code>\"DefaultTrackingEntityLabel\": {\n    \"ViewName\": \"Label_TrackingEntity\",\n    \"LabelName\": \"TrackingEntity.zpl\",\n    \"Width\": \"100\",\n    \"Height\": \"30\"\n  },\n  \"DefaultMasterItemLabel\": {\n    \"ViewName\": \"Label_MasterItem\",\n    \"LabelName\": \"MasterItem.zpl\",\n    \"Width\": \"75\",\n    \"Height\": \"20\"\n  },\n  \"DefaultLocationLabel\": {\n    \"ViewName\": \"Label_Location\",\n    \"LabelName\": \"Location.zpl\",\n    \"Width\": \"80\",\n    \"Height\": \"40\"\n  },\n  \"DefaultUserLabel\": {\n    \"ViewName\": \"Label_Users\",\n    \"LabelName\": \"User.zpl\",\n    \"Width\": \"100\",\n    \"Height\": \"20\"\n  },\n  \"DefaultPalletLabel\": {\n    \"ViewName\": \"Label_Pallet\",\n    \"LabelName\": \"Pallet.zpl\",\n    \"Width\": \"100\",\n    \"Height\": \"20\"\n  },\n  \"DefaultBoxLabel\": {\n    \"ViewName\": \"Label_Box\",\n    \"LabelName\": \"Box.zpl\",\n    \"Width\": \"100\",\n    \"Height\": \"20\"\n  }\n</code></pre> <p>For example browsing to https://my-pcname:5001/preview/DefaultTrackingEntityLabel will render the TrackingEntity.zpl label using the dimensions specified in appsettings.json:</p> <p></p>"},{"location":"label-printing/zpl/manual/#previewing-with-data","title":"Previewing with data","text":"<p>By making a LabelDataPreviewRequest (see API metadata), you can view a label template populated with actual data from your database</p> <p>Sample request:</p> <p></p> <p>Response:</p> <p></p>"},{"location":"label-printing/zpl/manual/#troubleshooting","title":"Troubleshooting","text":"<p>If you get an error message relating to ASP.Net when browsing GraniteLabelPrintingZPL, ensure that you have the correct hosting bundle installed. The Webdesktop uses version 5, which will not work with GraniteLabelPrintingZPL. You can safely install version 6 alongside version 5</p> <p>If you are running GraniteLabelPrintingZPL as http, be sure that you have allowed InsecureContent on the WebDesktop:    <pre><code> ...\\Dropbox\\Software Installs\\Granite\\Granite V3.4.4\\Documentation\\WebDesktop Browser Insecure Content.docx\n</code></pre></p> <p>Always be sure to check your GraniteLabelPrintingZPL log file</p>"},{"location":"label-printing/zpl/release-notes/","title":"Release notes","text":""},{"location":"label-printing/zpl/release-notes/#zpl-release-notes","title":"ZPL Release Notes","text":""},{"location":"label-printing/zpl/release-notes/#september-2023-4520","title":"September 2023 (4.5.2.0)","text":""},{"location":"label-printing/zpl/release-notes/#new","title":"New","text":"<ul> <li>(RFC-78) Add validation of printer name</li> </ul>"},{"location":"label-printing/zpl/release-notes/#august-2023-4510","title":"August 2023 (4.5.1.0)","text":""},{"location":"label-printing/zpl/release-notes/#change","title":"Change","text":"<ul> <li>Variables in ZPL file must be prefixed with @</li> </ul>"},{"location":"label-printing/zpl/release-notes/#2-june-2023-4500","title":"2 June 2023 (4.5.0.0)","text":""},{"location":"label-printing/zpl/release-notes/#new_1","title":"New","text":"<ul> <li>Print multiple Pallet labels</li> <li>Print multiple Box labels</li> </ul>"},{"location":"label-printing/zpl/release-notes/#changes","title":"Changes","text":"<ul> <li>Switch from Log4Net to NLog</li> <li>Each class uses own logger instead of logger inherited from BaseService</li> <li>Updated to ServiceStack 6.8.0</li> <li>Switch from ImageSharp to ImageMagick</li> </ul>"},{"location":"label-printing/zpl/release-notes/#06-jan-2023-4201","title":"06 Jan 2023 (4.2.0.1)","text":""},{"location":"label-printing/zpl/release-notes/#new_2","title":"New","text":"<ul> <li>LabelDataPreview allows populating a preview with actual data</li> </ul>"},{"location":"label-printing/zpl/release-notes/#changes_1","title":"Changes","text":"<ul> <li>Default labels in appsettings.json settings changed. Take note LabelName replaces Name. ViewName setting added.     <pre><code>  \"DefaultTrackingEntityLabel\": {\n    \"ViewName\": \"Label_TrackingEntity\",\n    \"LabelName\": \"TrackingEntity.zpl\",\n    \"Width\": \"100\",\n    \"Height\": \"30\"\n  }\n</code></pre></li> <li>Reworked inline SQL to limit injection risk</li> <li>Minor cleaning up</li> </ul>"},{"location":"label-printing/zpl/release-notes/#24-may-2022","title":"24 May 2022","text":"<ul> <li>New appsettings.json setting     <pre><code>\"IsPublic\":  false\n</code></pre></li> </ul>"},{"location":"label-printing/zpl/release-notes/#28-feb-2022","title":"28 Feb 2022","text":"<ul> <li>New Label preview functionality</li> </ul>"},{"location":"playbook/","title":"Index","text":"<p>The Granite Playbook is a structured guide to our implementation methodology, designed to reduce risk, create value, and ensure repeatability in every project.</p>"},{"location":"playbook/#security-policies-requested","title":"Security policies requested","text":"<p>Client: Our IT team requires security information.</p> <p><code>This request can arise for various reasons. The IT administrator might need details to set up and commission resources for us, or the client may need to comply with industry standards and security regulations. Understanding the purpose of the request helps us respond effectively.</code></p> <p>Actions:  1. Send email with a link to our Security Policies and Measure page. 2. In email ask client what the requirement/reason is for them asking this information. 3. Offer assistance by suggesting a meeting with a consultant if they need further explanation. </p> <p>We are not required to fill in any documentation or answer any questions, and you want to avoid this. We should always insist on a online meeting with all relevant parties to walk the client through our security policies. </p> <p>Process Overview This process is simple yet value-driven. We recognize that many organizations must adhere to strict security policies, and our goal is to:</p> <p>\u2714 Understand why the information is being requested.</p> <p>\u2714 Provide the necessary security details.</p> <p>\u2714 Ensure the client has access to further assistance if needed.</p>"},{"location":"playbook/#api-access-request","title":"API access request","text":"<p>Client: will it be possible to use the Granite API for customization?</p> <p>``</p> <p>Actions: </p> <p>Process Overview</p>"},{"location":"playbook/compliance/","title":"Vendor Compliance Approach \u2013 Granite WMS","text":""},{"location":"playbook/compliance/#1-purpose","title":"1. Purpose","text":"<p>This document outlines our approach as a vendor to supporting compliance, governance, and security best practices within the Granite WMS platform. It is intended to guide both our internal team and our clients in understanding the shared responsibility model we use to maintain secure, reliable, and auditable systems.</p> <p>Note: Our goal is not to comply with every formal standard, but to follow widely accepted best practices and guidelines that align with frameworks like COBIT, ISO 27001, NIST, and others. We aim to provide a secure and well-governed system while allowing flexibility for our clients\u2019 specific compliance needs.</p>"},{"location":"playbook/compliance/#2-our-compliance-philosophy","title":"2. Our Compliance Philosophy","text":"<p>We recognize that system compliance is a shared responsibility between the vendor (us) and the client (you). We aim to:</p> <ul> <li>Provide the technical controls, features, and logging required to support your compliance frameworks.</li> <li>Maintain secure coding and system design standards.</li> <li>Collaborate with clients to support audit preparation, incident response, and governance processes.</li> </ul>"},{"location":"playbook/compliance/#3-shared-responsibility-model","title":"3. Shared Responsibility Model","text":"<p>Compliance is a joint effort. Here's how we define responsibilities:</p>"},{"location":"playbook/compliance/#31-summary-table","title":"3.1 Summary Table","text":"Area Our Responsibility (Vendor) Your Responsibility (Client) Shared Responsibility User Access Management Provide Role-Based Access Control (RBAC) and audit logs Define roles, assign access, and review users regularly Configure roles properly and remove unused accounts Authentication &amp; Passwords Support password complexity, expiry, and lockout settings Set and enforce policy rules, train users Monitor for weak credentials, handle password reset processes Security Monitoring Provide logs, audit trails, and error reports Monitor and alert on suspicious behavior using internal tools Enable alerts and reporting features where available Integration Monitoring Provide logs for sync events and errors Monitor sync accuracy and reconcile data Work together to resolve interface issues and discrepancies Privileged Access Ensure logs capture admin activity Restrict access to privileged functions Review elevated access regularly and remove where unnecessary Audit Support Provide system documentation, logs, and feature overviews Manage audit response, collect evidence Collaborate on any client-requested audit deliverables"},{"location":"playbook/compliance/#4-what-we-build-in","title":"4. What We Build In","text":"<p>We embed the following practices into our systems and development lifecycle: | \u2705 Practice                    | Category                   | Description                                                                                   | |-------------------------------|----------------------------|-----------------------------------------------------------------------------------------------| | \ud83d\udd10 Security by Design      | Architecture &amp; Access       | System is designed with secure authentication, access control, and role-based permissions.    | | \ud83d\udcdc Audit Logging           | Monitoring &amp; Auditing       | User actions, data changes, and access events are logged for traceability and accountability. | | \ud83d\udea8 Error Reporting         | Monitoring &amp; Integration    | Integration and system errors are captured, with logs available to assist in troubleshooting. | | \ud83d\udd11 Data Access &amp; Encryption| Data Protection &amp; Security  | Data is secured at rest and in transit, with appropriate encryption and access restrictions.  | | \ud83d\udc65 User &amp; Role Review Support | Governance &amp; Operations   | Tools and reports are available to help clients review and manage user roles and permissions. | | \ud83d\udce3 Change Notifications    | Change Management           | Clients are notified in advance of major updates, system changes, or planned downtime.        | | \ud83c\udf10 API Security            | Integration &amp; Interfaces    | Secure access to APIs is supported via tokens, API keys, and usage limits where appropriate.  |</p>"},{"location":"playbook/compliance/#5-your-role-as-the-client","title":"5. Your Role as the Client","text":"<p>To ensure effective compliance, clients are expected to:</p> <ul> <li>Assign dedicated users to review access permissions and usage  </li> <li>Define and apply password and access policies using provided system settings  </li> <li>Refrain from using shared or generic user accounts  </li> <li>Regularly review activity and reconciliation logs  </li> <li>Alert our team promptly when anomalies or potential breaches are detected  </li> </ul>"},{"location":"playbook/compliance/#6-collaboration-for-compliance","title":"6. Collaboration for Compliance","text":"<p>We actively support clients during:</p> <ul> <li>\ud83d\udd0d Internal and external audits </li> <li>\ud83d\udee0\ufe0f Security reviews </li> <li>\ud83d\udcac Risk assessments and incident investigations </li> <li>\ud83d\udce4 Evidence preparation </li> </ul>"},{"location":"playbook/compliance/#7-review-improvements","title":"7. Review &amp; Improvements","text":"<p>We continuously review our compliance capabilities and update this document annually or in response to:</p> <ul> <li>Major product changes  </li> <li>Regulatory developments  </li> <li>Client feedback or audit outcomes  </li> </ul> <p>\ud83d\udccc Final Thought  We are committed to supporting your compliance and governance efforts by embedding best practices into the design and operation of Granite WMS.</p> <p>While we do not claim to comply with every global standard, we align with widely accepted frameworks such as COBIT, ISO 27001, and NIST to ensure a secure, reliable, and auditable platform.</p> <p>Our role is to provide the tools, controls, and transparency needed for you to meet your own internal and regulatory compliance requirements.</p> <p>We welcome collaboration and are always ready to support your team during audits, reviews, or security assessments.</p>"},{"location":"playbook/guidelines/","title":"Guidelines","text":"<p>Should be done so we can share directly with client.</p>"},{"location":"playbook/guidelines/#general","title":"General","text":""},{"location":"playbook/guidelines/#custom-integration","title":"Custom Integration","text":"<p>API documentation, or any other documentation should not just change hands but discussed. Open the API documentation that was handed to you, and discuss in a meeting.</p>"},{"location":"playbook/guidelines/#-meeting-to-go-through-assessment-questionary","title":"- Meeting to go through assessment questionary","text":""},{"location":"playbook/guidelines/#require-security-information","title":"Require Security information","text":"<ul> <li>Send link to client (security policies) </li> <li>Follow up     </li> </ul>"},{"location":"playbook/guidelines/#rfc","title":"RFC","text":""},{"location":"playbook/guidelines/#access-to-our-api-s","title":"Access to our API s","text":"<ul> <li>Kickoff meeting</li> <li>Technical session (handover and deliver all resources)</li> <li>Follow up</li> </ul>"},{"location":"process-app/","title":"Process App","text":"<p>The Granite Process App is an ASP.NET Core mobile application designed specifically for warehouse operations. It provides users with intuitive, step-driven workflows to perform various warehouse transactions directly from mobile devices.</p> <p>The application guides users through structured processes, ensuring accuracy and efficiency in warehouse operations such as receiving, picking, shipping, and inventory management. Each workflow is designed to be simple and user-friendly, and ensure all warehouse activities are properly recorded and tracked.</p>"},{"location":"process-app/#setup","title":"Setup","text":""},{"location":"process-app/#requirements","title":"Requirements","text":"<ul> <li>ASP.NET Core 8 Hosting Bundle</li> <li>IIS</li> </ul>"},{"location":"process-app/#configuration","title":"Configuration","text":""},{"location":"process-app/#menu-layout","title":"Menu Layout","text":"<p>You can configure the menu layout in the appSettings.json:</p> <pre><code>    \"MenuLayout\": \"Default\", /* Options: Default, Collapsible, Tree */\n</code></pre>"},{"location":"process-app/#process-layout","title":"Process Layout","text":"<p>In the Process table you can configure the layout that the process should use. </p> <p>The default is <code>StepSequence</code>, but you can select a <code>Form</code> layout as well.</p>"},{"location":"process-app/#process-functions","title":"Process Functions","text":"<p>Process functions are configured in the following two database tables:</p> <ul> <li>[dbo].[ProcessFunction]</li> <li>[dbo].[ProcessFunctionMapping]</li> </ul>"},{"location":"process-app/#processfunction","title":"ProcessFunction","text":"<p>Links a process as function to a specific parent process step or parent process.</p> <pre><code>INSERT INTO [dbo].[ProcessFunction]\n(\n    Process_id,                 -- the ID of the Process that will be available as a function\n    ParentProcessStep_id,       -- the ID of the ProcessStep that the function will be available on. EITHER this OR ParentProcess_id must be set\n    ParentProcess_id,           -- the ID of the Process that the function will be available on. EITHER this OR ParentProcessStep_id must be set\n    IsActive,                   -- is the process function enabled?\n    ProcessFunctionMenuIndex,   -- determines the order of the process function menu\n    FinalStepBehavior,          -- CLOSE or CONTINUE.\n    ProcessLayoutOverride,      -- leave empty to use the process' layout, or specify StepSequence or Form to override.\n    AuditUser,                  -- user that edited this record.\n    AuditDate,                  -- date this record was edited. \n    Version                     -- number of times this record has changed\n)\nVALUES\n(\n    101,                \n    5,                  \n    1,                  \n    1,                  \n    1,                  \n    'CLOSE',   \n    NULL,       \n    '0',       \n    GETDATE(),          \n    1                   \n);\n</code></pre>"},{"location":"process-app/#processfunctionmapping","title":"ProcessFunctionMapping","text":"<p>Maps steps between the parent process and the function process.</p> <pre><code>INSERT INTO [dbo].[ProcessFunctionMapping]\n(\n    ProcessFunction_id,\n    ParentProcessStep,\n    FunctionStep\n)\nVALUES\n(\n    10,            -- ProcessFunction ID\n    'FromLocation', -- Step in parent process\n    'ToLocation'   -- Step in function process\n);\n</code></pre> <p>Notes Step names in ProcessFunctionMapping must exist in their respective process definitions.</p> <p>You can define multiple mappings for a single function if more than one step needs to be passed through.</p>"},{"location":"process-app/#business-rules","title":"Business Rules","text":""},{"location":"process-app/#picking","title":"Picking","text":"<p>BestBeforeOverride - When BestBeforeOverride's value is 'YES', users will be allowed to pick stock that is past the ExpiryDate</p> <p>OnHoldOverride - When OnHoldOverride's value is 'YES', users will be allowed to pick stock that is on hold</p> <p>SerialValidationOverride - When SerialValidationOverride's value is 'YES', the Business API will not validate the picked serial number against the document lines</p>"},{"location":"process-app/#transfer","title":"Transfer","text":"<p>ActionQtyAllowance - When set to a value above 0, allows the user to transfer the specified percentage more than the document requires</p>"},{"location":"process-app/#receive","title":"Receive","text":"<p>SerialValidationOverride - When SerialValidationOverride's value is 'YES', the Business API will not validate the received serial number against the document lines</p>"},{"location":"process-app/#manufacture","title":"Manufacture","text":"<p>ActionQtyAllowance - Percentage allowance for manufacturing more than the document line quantity. Default is 0%</p>"},{"location":"process-app/#consume","title":"Consume","text":"<p>ActionQtyAllowance - Percentage allowance for consuming more than the document line quantity. Default is 0%</p>"},{"location":"process-app/#correction","title":"Correction","text":"<p>PreventInStockCorrection - Prevent not in stock tracking entities from being placed back into stock</p>"},{"location":"scaffold/manual/","title":"Scaffold","text":"<p>Scaffold is a straightforward command line interface that makes it easy to install, setup, and configure Granite WMS.</p>"},{"location":"scaffold/manual/#requirements","title":"Requirements","text":"<p>Before you get started, ensure that you have done the following: </p> <ul> <li> <p>All Granite applications (including Scaffold) that you want to install are copied to the folder where they will be installed.</p> <p>Scaffold looks for applications to install in the parent folder of the Scaffold application.  This means that you need to have everything you want to install already in place before you start Scaffold.</p> </li> <li> <p>The application requires administrative privileges to run.</p> <p>Ensure that you have the necessary permissions. Admin privileges are required to do things like add sites to IIS and change folder permissions for logging.</p> </li> <li> <p>Ensure that a SQL instance is properly configured and you have credentials before starting the installation.</p> <p>Scaffold does not install SQL, but you can use it to run the Granite database create script.  To do this you will need SQL credentials with sysadmin privilege.</p> </li> <li> <p>Ensure that required label printing software (Bartender) and ERP software is already installed.</p> <p>Scaffold does not support installing ERPs or other 3rd party software.</p> </li> </ul>"},{"location":"scaffold/manual/#functionality-menu-options","title":"Functionality (Menu Options)","text":"<ul> <li>View : View existing Granite IIS applications</li> <li>Prerequisites : Check and install prerequisites (IIS, .Net)</li> <li>Database : Create Granite database</li> <li>Install : Install Granite</li> </ul>"},{"location":"scaffold/manual/#view","title":"View","text":"<p>Show all applications currently hosted in IIS. From here you can also easily select sites to remove from IIS.</p>"},{"location":"scaffold/manual/#prerequisites","title":"Prerequisites","text":"<p>Allows you to install and configure IIS and .NET Hosting bundles.</p> <p>Running the IIS install option will install the following components:</p> <ul> <li>IIS-WebServerRole</li> <li>IIS-WebServer</li> <li>IIS-CommonHttpFeatures</li> <li>IIS-HttpErrors</li> <li>IIS-HttpRedirect</li> <li>IIS-ApplicationDevelopment</li> <li>IIS-ManagementConsole</li> <li>NetFx4Extended-ASPNET45</li> <li>IIS-NetFxExtensibility45</li> <li>IIS-ISAPIExtensions</li> <li>IIS-ISAPIFilter</li> <li>IIS-ASPNET45</li> <li>IIS-ApplicationInit</li> <li>URL Rewrite Module</li> </ul> <p>The .NET option will allow you to install the .NET 6 and .NET 8 Hosting bundles. Granite version 5 requires both hosting bundles, but Granite version 6 only requires .NET 8</p>"},{"location":"scaffold/manual/#database","title":"Database","text":"<p>Allows you to run the Granite database create script against a SQL server connection.  This can be useful if SQL Server Management Studio is not yet installed.</p>"},{"location":"scaffold/manual/#install","title":"Install","text":"<p>When you install applications using Scaffold, you will specify an Environment name to install.  The Environment name becomes the prefix for the sites in IIS, this makes it easy to see which applications are connected to each other at a glance - especially when there are multiple installs (e.g. TEST and LIVE).</p> <p>As you progress through the installation process, you will be prompted for SQL connection details, SSL certificate details, and port numbers for each of the applications being installed.</p> <p>Scaffold will configure the connection strings for all of the applications being installed, as well configuring the endpoints in each of the configuration files and SystemSettings table.</p> <p>Any out of the ordinary settings in IIS that are required for specific applications (e.g. the Scheduler app pool settings) will also be configured.</p>"},{"location":"scheduler/manual/","title":"Manual","text":"<p>The Granite Scheduler is an IIS application that can be used to schedule execution of SQL stored procedures, sending emails using the Utility API, and special integration jobs for fetching documents from ERP systems.</p>"},{"location":"scheduler/manual/#setup","title":"Setup","text":""},{"location":"scheduler/manual/#prerequisites","title":"Prerequisites","text":"<ul> <li>IIS</li> <li>ASP.NET Core 8 Hosting Bundle</li> <li>Database tables:<ul> <li><code>ScheduledJobs</code></li> <li><code>ScheduledJobsHistory</code></li> <li><code>ScheduledJobInput</code></li> <li><code>SystemSettings</code></li> </ul> </li> </ul>"},{"location":"scheduler/manual/#installation","title":"Installation","text":"<ul> <li> <p>Ensure that your SystemSettings table contains the default settings that GraniteScheduler uses:  <pre><code>INSERT [dbo].[SystemSettings] ([Application], [Key], [Value], [Description], [ValueDataType], [isEncrypted], [isActive], [AuditDate], [AuditUser])\nVALUES  ('GraniteScheduler', 'TimeZone', '', 'The time zone that will be used when scheduling CRON jobs', 'string', 0, 1, GETDATE(), 'AUTOMATION'),\n        ('GraniteScheduler', 'UtilityApiUrl', '', 'The UtilityAPI URL', 'string', 0, 1, GETDATE(), 'AUTOMATION')\n</code></pre></p> </li> <li> <p>Ensure that the folder that you have installed GraniteScheduler to has full access enabled for all users. This will ensure that the application log files can be created</p> </li> <li> <p>Add GraniteScheduler to IIS running as <code>https</code></p> </li> </ul>"},{"location":"scheduler/manual/#appsettings","title":"Appsettings","text":"<p>Configure your database connection in appsettings.json: <pre><code>  \"ConnectionStrings\": {\n    \"GraniteConnection\": \"Server=.\\\\sql2019dev;Database=GraniteLIVE;User ID=username;Password=password;\"\n  }\n</code></pre></p>"},{"location":"scheduler/manual/#iis","title":"IIS","text":"<p>In order for GraniteScheduler to start up when the server boots up, ensure that the IIS Application Initilization module is installed:</p> <p></p> <p>Next, go to Application Pools in IIS, right click the GraniteScheduler application pool and select Advanced Settings.</p> <p>Ensure that you set the Start Mode to AlwaysRunning and the Idle Time-Out to 0:</p> <p></p> <p>Right click the application pool again and select Recycling. Untick the Regular Intervals checkbox:</p> <p></p> <p>Now right click on the GraniteScheduler site in the left pane, go to Manage Website and select Advanced Settings. Change Preload Enabled to true</p> <p></p>"},{"location":"scheduler/manual/#logging","title":"Logging","text":"<p>Logging can be configured in the nlog.config file</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;\n&lt;nlog xmlns=\"http://www.nlog-project.org/schemas/NLog.xsd\"\n      xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n      autoReload=\"true\"\n      internalLogLevel=\"Info\"\n      internalLogFile=\"c:\\temp\\internal-nlog-AspNet.txt\"&gt;\n\n    &lt;!-- enable asp.net core layout renderers --&gt;\n    &lt;extensions&gt;\n        &lt;add assembly=\"NLog.Web\"/&gt;\n    &lt;/extensions&gt;\n\n    &lt;targets&gt;\n    &lt;target xsi:type=\"File\"\n        name=\"applicationLogs\"\n        fileName=\"Granite.Scheduler.log\"\n        layout=\"${longdate}|${event-properties:item=EventId:whenEmpty=0}|${level:uppercase=true}|${mdlc:userName}|${logger}|${message} ${exception:format=tostring}\"\n        archiveFileName=\"Granite.Scheduler.{#}.log\"\n        archiveNumbering=\"DateAndSequence\"\n        archiveEvery=\"Day\"\n        archiveAboveSize=\"10485760\"\n        archiveDateFormat=\"yyyy-MM-dd\"\n        maxArchiveFiles=\"7\" /&gt;\n        &lt;!-- File Target for own log messages with extra web details using some ASP.NET core renderers --&gt;\n    &lt;target xsi:type=\"File\"\n        name=\"innerWorkigsLogs\"\n        fileName=\"Granite.Scheduler-${shortdate}.Inner.log\"\n        layout=\"${longdate}|${event-properties:item=EventId:whenEmpty=0}|${level:uppercase=true}|${logger}|${mdlc:userName}|${message} ${exception:format=tostring}|url: ${aspnet-request-url}|action: ${aspnet-mvc-action}|${callsite}\" /&gt;\n\n    &lt;target xsi:type=\"Console\"\n        name=\"lifetimeConsole\"\n        layout=\"${MicrosoftConsoleLayout}\" /&gt;\n    &lt;/targets&gt;\n    &lt;rules&gt;\n        &lt;!-- minlevel=\"Error\"--&gt;\n        &lt;!-- minlevel=\"Info\"--&gt;\n        &lt;logger name=\"*\" minlevel=\"Error\" writeTo=\"applicationLogs\" /&gt;\n    &lt;/rules&gt;\n&lt;/nlog&gt;\n</code></pre> <p>To configure the level of logging, set the minlevel value for logger name=\"*\" in the rules section.</p>"},{"location":"scheduler/manual/#config-page","title":"Config page","text":"<p>Once you have set up GraniteScheduler as described above, be sure to browse to the <code>/config</code> page to check that everything is configured correctly and that the application is connecting to the Granite database</p> <p>Here is an example of a config page after some jobs have been added to the ScheduledJobs table:</p> <p></p>"},{"location":"scheduler/manual/#how-it-works","title":"How it works","text":"<p>Granite Scheduler picks up jobs from the <code>ScheduledJobs</code> table and executes them based on the configured schedule.  When a job executes, the Scheduler will check for any inputs in the <code>ScheduledJobInputs</code> table.  After the job has executed, an entry is logged in the <code>ScheduledJobsHistory</code> table. Here you can see the result of the execution, as well as what inputs were used when executing the job.</p> <p>For more information on what you can do with job inputs, see the job types section for the details of what each job type can do.</p>"},{"location":"scheduler/manual/#configuring-schedules","title":"Configuring Schedules","text":"<p>In this section we'll take a look at the various ways you can configure recurring jobs, as well as how to configure once off jobs.</p>"},{"location":"scheduler/manual/#interval","title":"Interval","text":"<p>The simplest way to set up your schedule is using a timed interval. To do this, set your <code>IntervalFormat</code> to one of the following:</p> <ul> <li>Seconds</li> <li>Minutes</li> <li>Hours</li> </ul> <p>Then set the <code>Interval</code> column to the number of seconds, minutes, or hours you want the job to recur on.</p> <p>This is how we would set a procedure to execute every ten minutes:</p> ID isActive JobName JobDescription Type StoredProcedure Interval IntervalFormat Status LastExecutionTime LastExecutionResult AuditDate AuditUser 1 True SyncDocuments Fetch documents from ERP STOREDPROCEDURE SyncProcedure 10 MINUTES NULL NULL NULL 2022-05-23 08:35:50.427 0"},{"location":"scheduler/manual/#cron-expressions","title":"CRON Expressions","text":"<p>CRON expressions are what will allow us to schedule jobs to run at a specific time of day and even on specific days of the week. </p> <p>They can be a little tricky to get right, but the basics are that there are 5 places (separated by spaces) where you can specify values, each corresponding to a different measure of time:</p> <p><pre><code>* * * * *\n| | | | |_ day of week\n| | | |___ month\n| | |_____ day of month\n| |_______ hour\n|_________ minute\n</code></pre> So for example if we want to send a mail at 9:30am every Monday we woud use this: <pre><code>30 09 * * 1\n</code></pre> You can also specify ranges. So to run a job every 2nd hour of every weekday between 8am and 5pm we could do this: <pre><code>0 08-17/2 * * 1-5\n</code></pre></p> <p>To use a CRON expression on your job, set your <code>IntervalFormat</code> to CRON and put your expression (with spaces) in the <code>Interval</code> field. For example:</p> ID isActive JobName JobDescription Type StoredProcedure Interval IntervalFormat Status LastExecutionTime LastExecutionResult AuditDate AuditUser 1 True SendMondayReport Job to send reports EMAIL EmailExample 30 09 * * 1 CRON NULL NULL NULL 2022-05-23 08:35:50.427 0 <p>Note</p> <p>There are different implementations of CRON syntax, some have special tags that are not usable outside of that specific software.</p> <p>Your best bet is to use https://crontab.guru/ to work out an expression that works for you while avoiding any tags marked as non-standard</p> <p>Be sure to test your CRON expression before deploying! </p> <p>If your CRON expression is not triggering your job as you'd expect it to, try explicitly setting the timezone for the Scheduler to use in the SystemSettings table (schedules and tokens use the server's local time):</p> <p></p> List of valid time zones <ul> <li>Dateline Standard Time</li> <li>UTC-11</li> <li>Aleutian Standard Time</li> <li>Hawaiian Standard Time</li> <li>Marquesas Standard Time</li> <li>Alaskan Standard Time</li> <li>UTC-09</li> <li>Pacific Standard Time (Mexico)</li> <li>UTC-08</li> <li>Pacific Standard Time</li> <li>US Mountain Standard Time</li> <li>Mountain Standard Time (Mexico)</li> <li>Mountain Standard Time</li> <li>Yukon Standard Time</li> <li>Central America Standard Time</li> <li>Central Standard Time</li> <li>Easter Island Standard Time</li> <li>Central Standard Time (Mexico)</li> <li>Canada Central Standard Time</li> <li>SA Pacific Standard Time</li> <li>Eastern Standard Time (Mexico)</li> <li>Eastern Standard Time</li> <li>Haiti Standard Time</li> <li>Cuba Standard Time</li> <li>US Eastern Standard Time</li> <li>Turks and Caicos Standard Time</li> <li>Paraguay Standard Time</li> <li>Atlantic Standard Time</li> <li>Venezuela Standard Time</li> <li>Central Brazilian Standard Time</li> <li>SA Western Standard Time</li> <li>Pacific SA Standard Time</li> <li>Newfoundland Standard Time</li> <li>Tocantins Standard Time</li> <li>E. South America Standard Time</li> <li>SA Eastern Standard Time</li> <li>Argentina Standard Time</li> <li>Greenland Standard Time</li> <li>Montevideo Standard Time</li> <li>Magallanes Standard Time</li> <li>Saint Pierre Standard Time</li> <li>Bahia Standard Time</li> <li>UTC-02</li> <li>Mid-Atlantic Standard Time</li> <li>Azores Standard Time</li> <li>Cabo Verde Standard Time</li> <li>Coordinated Universal Time</li> <li>GMT Standard Time</li> <li>Greenwich Standard Time</li> <li>Sao Tome Standard Time</li> <li>Morocco Standard Time</li> <li>W. Europe Standard Time</li> <li>Central Europe Standard Time</li> <li>Romance Standard Time</li> <li>Central European Standard Time</li> <li>W. Central Africa Standard Time</li> <li>GTB Standard Time</li> <li>Middle East Standard Time</li> <li>Egypt Standard Time</li> <li>E. Europe Standard Time</li> <li>Syria Standard Time</li> <li>West Bank Gaza Standard Time</li> <li>South Africa Standard Time</li> <li>FLE Standard Time</li> <li>Jerusalem Standard Time</li> <li>South Sudan Standard Time</li> <li>Russia TZ 1 Standard Time</li> <li>Sudan Standard Time</li> <li>Libya Standard Time</li> <li>Namibia Standard Time</li> <li>Jordan Standard Time</li> <li>Arabic Standard Time</li> <li>Turkey Standard Time</li> <li>Arab Standard Time</li> <li>Belarus Standard Time</li> <li>Russia TZ 2 Standard Time</li> <li>E. Africa Standard Time</li> <li>Volgograd Standard Time</li> <li>Iran Standard Time</li> <li>Arabian Standard Time</li> <li>Astrakhan Standard Time</li> <li>Azerbaijan Standard Time</li> <li>Russia TZ 3 Standard Time</li> <li>Mauritius Standard Time</li> <li>Saratov Standard Time</li> <li>Georgian Standard Time</li> <li>Caucasus Standard Time</li> <li>Afghanistan Standard Time</li> <li>West Asia Standard Time</li> <li>Russia TZ 4 Standard Time</li> <li>Pakistan Standard Time</li> <li>Qyzylorda Standard Time</li> <li>India Standard Time</li> <li>Sri Lanka Standard Time</li> <li>Nepal Standard Time</li> <li>Central Asia Standard Time</li> <li>Bangladesh Standard Time</li> <li>Omsk Standard Time</li> <li>Myanmar Standard Time</li> <li>SE Asia Standard Time</li> <li>Altai Standard Time</li> <li>W. Mongolia Standard Time</li> <li>Russia TZ 6 Standard Time</li> <li>Novosibirsk Standard Time</li> <li>Tomsk Standard Time</li> <li>China Standard Time</li> <li>Russia TZ 7 Standard Time</li> <li>Malay Peninsula Standard Time</li> <li>W. Australia Standard Time</li> <li>Taipei Standard Time</li> <li>Ulaanbaatar Standard Time</li> <li>Aus Central W. Standard Time</li> <li>Transbaikal Standard Time</li> <li>Tokyo Standard Time</li> <li>North Korea Standard Time</li> <li>Korea Standard Time</li> <li>Russia TZ 8 Standard Time</li> <li>Cen. Australia Standard Time</li> <li>AUS Central Standard Time</li> <li>E. Australia Standard Time</li> <li>AUS Eastern Standard Time</li> <li>West Pacific Standard Time</li> <li>Tasmania Standard Time</li> <li>Russia TZ 9 Standard Time</li> <li>Lord Howe Standard Time</li> <li>Bougainville Standard Time</li> <li>Russia TZ 10 Standard Time</li> <li>Magadan Standard Time</li> <li>Norfolk Standard Time</li> <li>Sakhalin Standard Time</li> <li>Central Pacific Standard Time</li> <li>Russia TZ 11 Standard Time</li> <li>New Zealand Standard Time</li> <li>UTC+12</li> <li>Fiji Standard Time</li> <li>Kamchatka Standard Time</li> <li>Chatham Islands Standard Time</li> <li>UTC+13</li> <li>Tonga Standard Time</li> <li>Samoa Standard Time</li> <li>Line Islands Standard Time</li> </ul>"},{"location":"scheduler/manual/#run-once","title":"Run once","text":"<p>You can use the ONCE <code>IntervalFormat</code> to schedule a job to run one time only. This is useful for running ad hoc tasks that might take too long to execute within a prescript, or sending once off mails like a picking complete notification.</p> <p>When the <code>IntervalFormat</code> is set to ONCE, the <code>Interval</code> field is not taken into account - it can be left empty.</p> <p>On completion of a ONCE job, the job will be removed from the <code>ScheduledJobs</code> table. It's inputs will also be removed from the <code>ScheduledJobInput</code> table. These are removed after execution regardless of whether the job was successful. </p> <p>The job's execution can still be viewed in the <code>ScheduledJobsHistory</code> table, and you will be able to see it's inputs in JSON format in the Inputs column.</p>"},{"location":"scheduler/manual/#job-types","title":"Job types","text":"<p>This section shows you the basics of configuring each job type in the <code>ScheduledJobs</code> and <code>ScheduledJobInputs</code> tables. The currenlty supported job types are:</p> <ul> <li>Stored Procedure Jobs</li> <li>Email Jobs</li> <li>Injected Jobs</li> <li>SQL Table Jobs</li> </ul>"},{"location":"scheduler/manual/#stored-procedure-jobs","title":"Stored Procedure Jobs","text":"<p>To schedule a Stored Procedure to run, simply add a row to the <code>ScheduledJobs</code> table. For example:</p> ID isActive JobName JobDescription Type StoredProcedure InjectJob Interval IntervalFormat Status LastExecutionTime LastExecutionResult AuditDate AuditUser 1 True MyJob Test job that executes a stored procedure STOREDPROCEDURE MyProcedure NULL 5 MINUTES NULL NULL NULL 2022-05-23 08:35:50.427 0 <p>If you need to pass values from the <code>ScheduledJobInput</code> table into your stored procedure, you can do so by adding the @input table parameter to your stored procedure like this:</p> <pre><code>CREATE OR ALTER PROCEDURE [MyProcedure]\n    @input dbo.ScriptInputParameters READONLY\n</code></pre> <p>The <code>@input</code> table will contain all of the entries from the <code>ScheduledJobInput</code> table that are configured for your job. </p> <p>If your <code>ScheduledJobInput</code> contains the following:</p> ID JobName Name Value 1 MyJob Category PACK 2 MyJob Location REC <p>Inside <code>[MyProcedure]</code> we can fetch the values from <code>@input</code> like this:</p> <pre><code>CREATE OR ALTER PROCEDURE [MyProcedure]\n    @input dbo.ScriptInputParameters READONLY\n\n    DECLARE @Category varchar(50)\n    DECLARE @Location varchar(50)\n\n    SELECT @Category = [Value] FROM @input WHERE [Name] = 'Category'\n    SELECT @Location = [Value] FROM @input WHERE [Name] = 'Location'\n</code></pre>"},{"location":"scheduler/manual/#email-jobs","title":"Email Jobs","text":"<p>Email jobs make use of the Custodian API to send emails. Ensure that the <code>CustodianApiUrl</code> entry in <code>SystemSettings</code> is configured correctly before you try to schedule any emails.</p> <p>To schedule an email to be sent, we add a record to the <code>ScheduledJobs</code> table</p> ID isActive JobName JobDescription Type StoredProcedure InjectJob Interval IntervalFormat Status LastExecutionTime LastExecutionResult AuditDate AuditUser 1 True EmailMorningReports Send daily reports to management EMAIL NULL NULL 0 8 * * 1-5 CRON NULL NULL NULL 2022-05-23 08:35:50.427 0 <p>We also need to add some entries to the <code>ScheduledJobInput</code> table to specify recipients, email content, and any attachments we want to send.</p> <p>The parameters available to Email jobs are as follows:</p> Name Required Description Subject Y The subject line of the email EmailTemplate N The name of the email template you want to use. If EmailTemplate is used, the content of the mail will be the rendered template EmailBody N The content of the email you want to send. Use instead of EmailTemplate to send a simple mail using just the text in EmailBody as the body of the email ToEmailAddresses N Semicolon delimited list of email addresses to send the mail to CcEmailAddresses N Semicolon delimited list of email addresses to CC the mail to BccEmailAddresses N Semicolon delimited list of email addresses to BCC the mail to ReportAttachment N SSRS Report path of the report you want to attach ExcelAttachment N Table or view name that you want to attach as an excel sheet FileAttachment N File path of the file you want to attach. NB this path is relative to wherever the Utility API is installed. <p>Let's add the details we need to send our email to the <code>ScheduledJobInput</code> table:</p> ID JobName Name Value 1 EmailMorningReports Subject Morning reports 2 EmailMorningReports EmailBody Please see attached your daily reports 3 EmailMorningReports ToEmailAddresses manager@warehouse.com;finance@warehouse.com 4 EmailMorningReports ReportAttachment /PickingReport 5 EmailMorningReports ReportAttachment /ReceivingReport <p>As you can see, all of the inputs reference job using <code>JobName</code>. For each of the attachment types you can add multiple entries to attach multiple reports of the same type, as we have done here. </p> <p>Note</p> <p>There is no way to pass parameters to SSRS reports that are to be attached to an email.  You may need to edit your report so that it can be executed without the need to pass parameters. Likewise for Excel attachments, it would be best to create a view that returns only the results you want to attach to your email. </p>"},{"location":"scheduler/manual/#injected-jobs-integration-jobs","title":"Injected Jobs (Integration Jobs)","text":"<p>Injected jobs allow us to run code from an external DLL. At the moment the main reason to use this is for integration jobs. More Injectable jobs may be released in the future as required.</p> <p>For this to work, the DLL and an XML provider file must be copied into the root path of the GraniteScheduler:</p> <p></p> <p>The provider file needs to bind the GraniteScheduler IInjectableJob interface to a specific class within your DLL. See the below example of a provider file:</p> <pre><code>&lt;module name=\"Provider\"&gt;\n    &lt;bind\n      service=\"GraniteScheduler.ServiceModel.Types.IInjectableJob, GraniteScheduler.ServiceModel\"\n      to=\"Granite.Integration.Evo.Job.SalesOrder, Granite.Integration.Evo.Job\"/&gt;\n&lt;/module&gt;\n</code></pre> <p>When you configure an InjectedJob the <code>InjectJob</code> field on the <code>ScheduledJobs</code> table must contain the name of the XML provider file (without the file extension) that you wish to use:</p> ID isActive JobName JobDescription Type StoredProcedure InjectJob Interval IntervalFormat Status LastExecutionTime LastExecutionResult AuditDate AuditUser 1 True SalesOrderSync Sync SOs from Evo using IntegrationDocumentQueue INJECTED NULL Granite.Integration.Evo.Job.SalesOrder 1 HOURS NULL NULL NULL 2022-05-23 08:35:50.427 0 <p>GraniteScheduler will use the XML file to find the DLL file and execute the required code</p>"},{"location":"scheduler/manual/#sql-table-jobs","title":"SQL Table JobsRequired JobInputs","text":"<ul> <li>Archive Table Jobs</li> <li>Delete Table Jobs</li> </ul> <p>The following is the information common to the two jobs above. </p> <p>You can get sql insert scripts for example jobs here.</p> <ul> <li><code>TableName</code> (string): The source table to either Archive or Delete from (e.g. <code>MyBigTable</code>). Avoid special characters like <code>;</code>, <code>--</code>, <code>/*</code>. For Delete Table Jobs specifically, only a limited set of tables is allowed and must be provided as the bare table name without schema; see the safety restrictions under Delete Table Jobs.</li> <li><code>WhereTemplate</code> (string): A SQL predicate that filters rows to either Archive or Delete, using parameter placeholders like <code>@FromDate</code>, <code>@Status</code> (e.g. <code>CreatedOn &lt; @Cutoff AND Status = @Status</code>). Injection characters like <code>;</code>, <code>--</code>, <code>/*</code> are rejected.</li> <li><code>WhereParams</code> (JSON object): Name/value map for parameters referenced in <code>WhereTemplate</code>. Values are parsed into appropriate types when possible (null, bool, numbers, Guid, DateTime/DateTimeOffset). Example: <code>{ \"Cutoff\": \"2024-01-01T00:00:00Z\", \"Status\": \"Closed\" }</code>.</li> </ul> <p>If any parameters referenced in <code>WhereTemplate</code> are missing from <code>WhereParams</code> (or vice versa), the job will not run.</p> Optional JobInputs and defaults <ul> <li><code>BatchSize</code> (int, default 1000, valid 1\u201310000): Number of rows to move per batch. The job loops batches until no rows remain or time limit is reached.</li> <li><code>MaxExecutionMinutes</code> (int, default 30, valid 1\u2013480): Upper limit for a single run. The job stops gracefully when the time limit is reached.</li> <li><code>DryRun</code> (bool, default false): If true, estimates and logs the number of rows matching the filter but does not modify any data.</li> <li><code>OptimizeTable</code> (bool, default false): If true and rows were removed, runs table maintenance on the source table after processing.</li> <li><code>OptimizeMode</code> (string, default <code>Reorganize</code>): Table maintenance mode. Accepted values: <code>Reorganize</code>, <code>Rebuild</code>, <code>Auto</code>.</li> <li><code>OnlineIndexRebuild</code> (bool, default true): Applies when <code>OptimizeMode</code> is <code>Rebuild</code>; attempts an ONLINE rebuild when supported.</li> <li><code>UpdateStatisticsAfterOptimization</code> (bool, default depends on mode): After <code>Reorganize</code> default is true; after <code>Rebuild</code> default is false (since rebuild updates stats).</li> <li><code>UpdateStatisticsFullScan</code> (bool, default false): When updating statistics, use FULLSCAN.</li> <li><code>OptimizationThreshold</code> (int, default 1000): Threshold for deciding whether to optimize after data movement. Note: validated by the system; current archive flow optimizes when rows were archived, independent of this threshold.</li> </ul> Date/Time Tokens for WhereParams <p>You can use dynamic, server-local date/time tokens in <code>WhereParams</code> to filter rows relative to \u201cnow\u201d or \u201ctoday\u201d without hard-coding timestamps.</p> <ul> <li>Where they\u2019re used: Only as values within <code>WhereParams</code> (not inside <code>WhereTemplate</code>).</li> <li>What they produce: A <code>DateTimeOffset</code> value bound as a SQL <code>datetimeoffset</code> parameter.</li> <li>Validation: Tokens are validated before execution. Invalid tokens will fail the job\u2019s input validation.</li> </ul> <p>Syntax</p> <ul> <li><code>${base[offsets][|rounding]}</code><ul> <li><code>base</code> (required): <code>now</code> or <code>today</code><ul> <li><code>now</code> = current server local date/time (DateTimeOffset.Now).</li> <li><code>today</code> = current server local date at 00:00:00.000 (midnight).</li> </ul> </li> <li><code>offsets</code> (optional, repeatable): One or more signed adjustments with a unit. Chaining is allowed.<ul> <li>Format: <code>+Nunit</code> or <code>-Nunit</code> (no spaces), where N is an integer.</li> <li>Units (case-sensitive):<ul> <li><code>s</code> = seconds</li> <li><code>m</code> = minutes</li> <li><code>h</code> = hours</li> <li><code>d</code> = days</li> <li><code>w</code> = weeks (7 days each)</li> <li><code>M</code> = months (uppercase M)</li> <li><code>y</code> = years</li> </ul> </li> <li>Examples: <code>-30d</code>, <code>+2h-15m</code>, <code>-1M+7d</code>, <code>-1y</code></li> </ul> </li> <li><code>rounding</code> (optional, after a single <code>|</code>):<ul> <li><code>startOfDay</code> \u2192 00:00:00.000</li> <li><code>endOfDay</code>   \u2192 23:59:59.9999999</li> <li><code>startOfMonth</code> \u2192 first day of month at 00:00:00.000</li> <li><code>endOfMonth</code>   \u2192 last moment of the month (23:59:59.9999999)</li> </ul> </li> </ul> </li> </ul> <p>Evaluation order 1) Start from <code>base</code> (server local time). 2) Apply all <code>offsets</code> left-to-right. 3) Apply <code>rounding</code> if present.</p> <p>Important notes</p> <ul> <li>Units are case-sensitive: <code>m</code> = minutes, <code>M</code> = months.</li> <li>All calculations use the server's local time zone.</li> <li>Multiple offsets can be chained; they are applied in sequence.</li> </ul> <p>Examples</p> <ul> <li>Rows older than 30 days:<ul> <li>WhereTemplate: <code>CreatedOn &lt; @Cutoff</code></li> <li>WhereParams: <code>{ \"Cutoff\": \"${now-30d}\" }</code></li> </ul> </li> <li>All of yesterday (inclusive):<ul> <li>WhereTemplate: <code>CreatedOn &gt;= @From AND CreatedOn &lt;= @To</code></li> <li>WhereParams: <code>{ \"From\": \"${today-1d|startOfDay}\", \"To\": \"${today-1d|endOfDay}\" }</code></li> </ul> </li> <li>First day of last month at midnight:<ul> <li><code>${today-1M|startOfMonth}</code></li> </ul> </li> <li>End of current month:<ul> <li><code>${now|endOfMonth}</code></li> </ul> </li> <li>Two hours and 15 minutes from now:<ul> <li><code>${now+2h-15m}</code></li> </ul> </li> <li>One year ago, end of that month:<ul> <li><code>${now-1y|endOfMonth}</code></li> </ul> </li> </ul> <p>Sample configuration</p> <ul> <li>Purge rows created before the start of the current day:<ul> <li>WhereTemplate: <code>CreatedOn &lt; @Cutoff</code></li> <li>WhereParams: <code>{ \"Cutoff\": \"${today|startOfDay}\" }</code></li> </ul> </li> <li>Archive rows created on or before the end of last month:<ul> <li>WhereTemplate: <code>CreatedOn &lt;= @Cutoff</code></li> <li>WhereParams: <code>{ \"Cutoff\": \"${now-1M|endOfMonth}\" }</code></li> </ul> </li> </ul> <p>Troubleshooting tokens</p> <ul> <li>If a token is malformed (e.g., unknown base, bad unit, or syntax), the job input validation will fail with a log message indicating the problematic parameter.</li> <li>If you need fixed timestamps instead, provide ISO 8601 strings (e.g., \"2025-08-01T00:00:00Z\") instead of a token.</li> </ul>"},{"location":"scheduler/manual/#archive-table-jobs","title":"Archive Table JobsArchive table specific Optional JobInputs and defaultsBehavior and guaranteesExample configuration","text":"<p>Use this job type to move rows from a source table into an archive table in batches, then delete the moved rows from the source. This helps keep operational tables lean while retaining data in an archive table.</p> <ul> <li>Job <code>Type</code>: <code>ARCHIVETABLE</code></li> <li>Connection: Always uses the <code>GraniteConnection</code> from <code>appsettings.json</code>.</li> <li>Archive table name: <code>archive.&lt;TableName&gt;</code> (created automatically if missing, using <code>SELECT INTO</code> from the source structure). Note that indexes, keys, and constraints are not copied by <code>SELECT INTO</code> and may need to be created manually if required.</li> </ul> <ul> <li><code>OptimizeArchiveTable</code> (bool, default false): If true and rows were archived, also runs table maintenance on the archive table.</li> </ul> <ul> <li>Batching and atomicity: Each batch performs INSERT into the archive table and DELETE from the source within a single transaction. If the DELETE fails, the batch is rolled back.</li> <li>Row selection: Uses a CTE to delete from and insert the output into the archive table.</li> <li>Estimation: Before modifying data, the job estimates the row count matching the filter for logging and dry runs.</li> <li>Time cap: The job respects <code>MaxExecutionMinutes</code> and will pause further work when the limit is reached; subsequent scheduler runs continue from where it left off.</li> </ul> <p><code>ScheduledJobs</code> (example):</p> ID isActive JobName JobDescription Type StoredProcedure InjectJob Interval IntervalFormat Status LastExecutionTime LastExecutionResult AuditDate AuditUser 42 True ArchiveOldOrders Move closed orders older than 180 days ARCHIVETABLE NULL NULL 1 HOURS NULL NULL NULL 2025-08-18 08:00:00.000 admin <p><code>ScheduledJobInputs</code> for <code>ArchiveOldOrders</code>:</p> ID JobName Name Value 1 ArchiveOldOrders TableName dbo.Orders 2 ArchiveOldOrders WhereTemplate CreatedOn &lt; @Cutoff AND Status = @Status 3 ArchiveOldOrders WhereParams { \"Cutoff\": \"${now-180d}\", \"Status\": \"Closed\" } 4 ArchiveOldOrders BatchSize 2000 5 ArchiveOldOrders MaxExecutionMinutes 20 6 ArchiveOldOrders DryRun false 7 ArchiveOldOrders OptimizeTable true 8 ArchiveOldOrders OptimizeArchiveTable false 9 ArchiveOldOrders OptimizeMode Reorganize <p>Notes: - The job runs hourly. Adjust <code>Interval</code>/<code>IntervalFormat</code> as needed, or use a CRON schedule. - <code>WhereParams</code> values are parsed into appropriate types; strings can be used when you want literal comparisons. Token-style values like <code>${...}</code> resolve using server local time (e.g., <code>${now-180d}</code>). - The archive table <code>dbo.OrdersArchive</code> is created automatically if it does not exist.</p>"},{"location":"scheduler/manual/#delete-table-jobs","title":"Delete Table JobsBehaviorExample configuration","text":"<p>Use this job type to delete rows from a table in safe, bounded batches using a parameterized WHERE filter.</p> <ul> <li>Job <code>Type</code>: <code>DELETETABLEDATA</code></li> <li>Connection: Uses the <code>GraniteConnection</code> from <code>appsettings.json</code>.</li> </ul> <ul> <li>Estimation: Before deleting, the job estimates the row count matching the filter for logging and dry runs.</li> <li>Batching: Executes <code>DELETE TOP(@BatchSize) ... WHERE {WhereTemplate}</code> repeatedly until no rows match or the time cap is hit. No explicit ORDER BY; when many rows match, the specific rows deleted per batch are not ordered.</li> <li>Time cap: Respects <code>MaxExecutionMinutes</code> and continues on the next scheduled run.</li> <li>Optimization: When enabled, runs post-delete maintenance on the source table using the configured options.</li> </ul> <p>Warning</p> <p>Safety restrictions: Delete Table Jobs are allowlisted to prevent accidental data loss. Only the following tables are permitted:</p> <ul> <li>ScheduledJobsHistory</li> <li>IntegrationLog</li> <li>LabelPrintQueue</li> <li>IntegrationDocumentQueue</li> <li>EmailLog</li> <li>InventoryDailyBalance</li> </ul> <p>Notes: - Provide <code>TableName</code> as shown above (bare table name, no schema). For example, use <code>IntegrationLog</code>, not <code>dbo.IntegrationLog</code>. - Jobs targeting any other table will fail input validation and will not run.</p> <p><code>ScheduledJobs</code> (example):</p> ID isActive JobName JobDescription Type StoredProcedure InjectJob Interval IntervalFormat Status LastExecutionTime LastExecutionResult AuditDate AuditUser 43 True PurgeOldIntegrationLog Delete IntegrationLog rows older than 7 days DELETETABLEDATA NULL NULL 0 2 * * * CRON NULL NULL NULL 2025-08-18 08:00:00.000 admin <p><code>ScheduledJobInputs</code> for <code>PurgeOldIntegrationLog</code>:</p> ID JobName Name Value 1 PurgeOldIntegrationLog TableName IntegrationLog 2 PurgeOldIntegrationLog WhereTemplate AuditDate &lt; @Cutoff 3 PurgeOldIntegrationLog WhereParams { \"Cutoff\": \"${now-7d}\" } 4 PurgeOldIntegrationLog BatchSize 5000 5 PurgeOldIntegrationLog MaxExecutionMinutes 15 6 PurgeOldIntegrationLog DryRun false 7 PurgeOldIntegrationLog OptimizeTable true 8 PurgeOldIntegrationLog OptimizeMode Reorganize <p>Notes: - The CRON example runs daily at 02:00 (server local time). You can use minutes/hours intervals as well. - <code>TableName</code> must be one of the allowlisted tables and provided as a bare name (e.g., <code>IntegrationLog</code>). - <code>WhereParams</code> values can be typed (dates, numbers, booleans) and token-style values like <code>${now-7d}</code> are resolved relative to server local time. - Optimization is optional and only runs if rows were deleted during this run.</p>"},{"location":"scheduler/manual/#troubleshooting","title":"Troubleshooting","text":"<p>If you get an error message relating to ASP.Net when browsing GraniteScheduler, ensure that you have the correct hosting bundle installed.  The Webdesktop uses version 5, which will not work with GraniteScheduler. You can safely install version 6 alongside version 5</p> <p>Always be sure to check your GraniteScheduler log file for more info. If your job is failing, the log will most likely tell you why</p>"},{"location":"scheduler/manual/#tips-tricks-and-reminders","title":"Tips, tricks, and reminders","text":"<ul> <li>If isActive on the ScheduledJob table is set to False the job will not be scheduled to run.</li> <li>The JobName must be unique, it is the value that links ScheduledJobs to ScheduledJobInput</li> <li>You can have multiple inputs per job in the ScheduledJobInput table</li> <li>Status, LastExecutionTime and LastExecutionResult will be updated automatically by GraniteScheduler</li> <li>The ScheduledJobsHistory table will contain an entry for each execution of a job. Think of it as the Transactions table for jobs</li> </ul>"},{"location":"scheduler/release-notes/","title":"Release Notes","text":""},{"location":"scheduler/release-notes/#5000-tba","title":"5.0.0.0 (TBA)","text":""},{"location":"scheduler/release-notes/#changes","title":"Changes","text":"<ul> <li>Email jobs updated to use new Utility API</li> </ul>"},{"location":"scheduler/release-notes/#4510-september-2023","title":"4.5.1.0 (September 2023)","text":""},{"location":"scheduler/release-notes/#changes_1","title":"Changes","text":"<ul> <li>Improved log file archival</li> </ul>"},{"location":"scheduler/release-notes/#4502-27-july-2023","title":"4.5.0.2 (27 July 2023)","text":""},{"location":"scheduler/release-notes/#changes_2","title":"Changes","text":"<ul> <li>Remove execution timeout for Sql jobs.</li> </ul>"},{"location":"scheduler/release-notes/#4500-31-may-2023","title":"4.5.0.0 (31 May 2023)","text":""},{"location":"scheduler/release-notes/#changes_3","title":"Changes","text":"<ul> <li>New setting for EmailAddress</li> <li>Switch from Log4Net to Nlog</li> <li>Update dependencies<ul> <li>ServiceStack 6.8.0</li> <li>Coravel 4.2.1</li> <li>Mailkit 4.0.0</li> <li>EmailValidation 1.0.9</li> </ul> </li> </ul>"},{"location":"scheduler/release-notes/#4204-08-march-2023","title":"4.2.0.4 (08 March 2023)","text":""},{"location":"scheduler/release-notes/#new","title":"New","text":"<ul> <li>Add TimeZone configuration option for CRON jobs.</li> </ul>"},{"location":"scheduler/release-notes/#4203-22-november-2022","title":"4.2.0.3 (22 November 2022)","text":""},{"location":"scheduler/release-notes/#bug-fix","title":"Bug fix","text":"<ul> <li>Fix only check for @input table if job is of type EMAIL or STOREDPROCEDURE and has inputs</li> <li>Fix handle null AuditDate on ScheduledJobs table when recording an execution to ScheduledJobsHistory</li> <li>Fix handle null Status for ONCE jobs</li> <li>Fix handle null email attachment path</li> <li>Fix set NOT SCHEDULED for non active jobs</li> </ul>"},{"location":"scheduler/release-notes/#changes_4","title":"Changes","text":"<ul> <li>Move SQL queries to OrmLite</li> <li>Update to ServiceStack 6.3.0</li> <li>Move interfaces to ServiceModel.Interfaces</li> <li>Move ScheduledJobs, ScheduledJobInputs, ScheduledJobHistory to GraniteScheduler.Entities</li> </ul>"},{"location":"scheduler/release-notes/#4202-15-september-2022","title":"4.2.0.2 (15 September 2022)","text":""},{"location":"scheduler/release-notes/#bug-fix_1","title":"Bug fix","text":"<ul> <li>Prevent System.InvalidOperationException error when a job is added/removed while application is running</li> </ul>"},{"location":"scheduler/release-notes/#4201-5-september-2022","title":"4.2.0.1 (5 September 2022)","text":""},{"location":"scheduler/release-notes/#bug-fixes","title":"Bug fixes","text":"<ul> <li>Fix injected jobs not getting a reference to application configuration</li> <li>Fix email jobs not getting some values from stored procedure correctly</li> <li>Fix jobs that have status SCHEDULED but are inactive not being set to NOT SCHEDULED</li> <li>Fix /config does not load when connection string is invalid</li> </ul>"},{"location":"scheduler/release-notes/#injected-jobs","title":"Injected Jobs","text":"<ul> <li>Add validation of Injected jobs</li> <li>Update IInjectableJob (Required for new downward integration jobs)</li> </ul>"},{"location":"scheduler/release-notes/#config","title":"/config","text":"<ul> <li>Add Injected jobs validation results to /config</li> </ul>"},{"location":"scheduler/release-notes/#change","title":"Change","text":"<ul> <li>Upgrade to ServiceStack 6.2</li> <li>Change default log level to INFO</li> </ul>"},{"location":"scheduler/release-notes/#4200-29-july-2022","title":"4.2.0.0 (29 July 2022)","text":"<p>Initial release</p>"},{"location":"scheduler/release-notes/#supported-job-types","title":"Supported job types","text":"<ul> <li>StoredProcedure</li> <li>Email</li> <li>Injected</li> </ul>"},{"location":"scheduler/release-notes/#supported-interval-formats","title":"Supported interval formats","text":"<ul> <li>Once</li> <li>Seconds</li> <li>Minutes</li> <li>Hours</li> <li>CRON </li> </ul>"},{"location":"scheduler/exampleJobs/sql-table-job-examples/","title":"SQL Table Job Examples","text":"<p>Use the following to create example jobs for the SQL Table Jobs. </p>"},{"location":"scheduler/exampleJobs/sql-table-job-examples/#archive-table-job","title":"Archive Table Job","text":"<pre><code>INSERT INTO [dbo].[ScheduledJobs] (\n      [isActive]\n    , [JobName]\n    , [JobDescription]\n    , [Type]\n    , [StoredProcedure]\n    , [InjectJob]\n    , [Interval]\n    , [IntervalFormat]\n    , [Status]\n    , [LastExecutionTime]\n    , [LastExecutionResult]\n    , [AuditDate]\n    , [AuditUser]\n)\nVALUES (\n      0                  -- default switch off\n    , 'ArchiveAuditData'\n    , 'Archive Audit data older than 6 months'\n    , 'ARCHIVETABLE'\n    , NULL\n    , NULL\n    , '00 00 * * *'                \n    , 'CRON'           \n    , 'PENDING'          -- initial status\n    , NULL\n    , NULL\n    , GETDATE()\n    , 'SYSTEM'\n);\nGO\n\n-- Table to clean\nINSERT INTO [dbo].[ScheduledJobInput] (\n      [JobName]\n    , [Name]\n    , [Value]\n)\nVALUES (\n      'ArchiveAuditData'\n    , 'TableName'\n    , 'Audit'\n);\nGO\n\n-- Initial Run as dry run\nINSERT INTO [dbo].[ScheduledJobInput] (\n      [JobName]\n    , [Name]\n    , [Value]\n)\nVALUES (\n      'ArchiveAuditData'\n    , 'DryRun'\n    , 'true'\n);\nGO\n\n-- Safer, parameterized filter (preferred)\n-- Example: delete rows with Date &lt; @Cutoff\nINSERT INTO [dbo].[ScheduledJobInput] (\n      [JobName]\n    , [Name]\n    , [Value]\n)\nVALUES (\n      'ArchiveAuditData'\n    , 'WhereTemplate'\n    , 'AuditDate &lt; @Cutoff'\n);\nGO\n\n-- JSON parameters for the template (adjust Cutoff as needed)\nINSERT INTO [dbo].[ScheduledJobInput] (\n      [JobName]\n    , [Name]\n    , [Value]\n)\nVALUES (\n      'ArchiveAuditData'\n    , 'WhereParams'\n    , '{\"Cutoff\":\"${now-6M}\"}'\n);\nGO\n\n-- Optional: table optimization configuration\nINSERT INTO [dbo].[ScheduledJobInput] (\n      [JobName]\n    , [Name]\n    , [Value]\n)\nVALUES (\n      'ArchiveAuditData'\n    , 'OptimizeTable'\n    , 'true'\n);\nGO\n\nINSERT INTO [dbo].[ScheduledJobInput] (\n      [JobName]\n    , [Name]\n    , [Value]\n)\nVALUES (\n      'ArchiveAuditData'\n    , 'OptimizeArchiveTable'\n    , 'true'\n);\nGO\n\nINSERT INTO [dbo].[ScheduledJobInput] (\n      [JobName]\n    , [Name]\n    , [Value]\n)\nVALUES (\n      'ArchiveAuditData'\n    , 'OptimizeMode'                     -- options: Reorganize | Rebuild | Auto\n    , 'Rebuild'\n);\nGO\n\nINSERT INTO [dbo].[ScheduledJobInput] (\n      [JobName]\n    , [Name]\n    , [Value]\n)\nVALUES (\n      'ArchiveAuditData'\n    , 'OnlineIndexRebuild'               -- used if OptimizeMode = Rebuild\n    , 'true'\n);\nGO\n\nINSERT INTO [dbo].[ScheduledJobInput] (\n      [JobName]\n    , [Name]\n    , [Value]\n)\nVALUES (\n      'ArchiveAuditData'\n    , 'UpdateStatisticsAfterOptimization' -- default true for Reorganize; false for Rebuild\n    , 'true'\n);\nGO\n\nINSERT INTO [dbo].[ScheduledJobInput] (\n      [JobName]\n    , [Name]\n    , [Value]\n)\nVALUES (\n      'ArchiveAuditData'\n    , 'UpdateStatisticsFullScan'          -- set true to use FULLSCAN on stats\n    , 'false'\n);\nGO\n</code></pre>"},{"location":"scheduler/exampleJobs/sql-table-job-examples/#delete-table-data-job","title":"Delete Table Data Job","text":"<pre><code>INSERT INTO [dbo].[ScheduledJobs] (\n      [isActive]\n    , [JobName]\n    , [JobDescription]\n    , [Type]\n    , [StoredProcedure]\n    , [InjectJob]\n    , [Interval]\n    , [IntervalFormat]\n    , [Status]\n    , [LastExecutionTime]\n    , [LastExecutionResult]\n    , [AuditDate]\n    , [AuditUser]\n)\nVALUES (\n      0                  -- default switch off\n    , 'CleanScheduledJobsHistory'\n    , 'Delete ScheduledJobsHistory older than 3 months'\n    , 'DELETETABLEDATA'\n    , NULL\n    , NULL\n    , '00 00 * * *'                \n    , 'CRON'           \n    , 'PENDING'          -- initial status\n    , NULL\n    , NULL\n    , GETDATE()\n    , 'SYSTEM'\n);\nGO\n\n-- Table to clean\nINSERT INTO [dbo].[ScheduledJobInput] (\n      [JobName]\n    , [Name]\n    , [Value]\n)\nVALUES (\n      'CleanScheduledJobsHistory'\n    , 'TableName'\n    , 'ScheduledJobsHistory'\n);\nGO\n\n-- Initial Run as dry run\nINSERT INTO [dbo].[ScheduledJobInput] (\n      [JobName]\n    , [Name]\n    , [Value]\n)\nVALUES (\n      'CleanScheduledJobsHistory'\n    , 'DryRun'\n    , 'true'\n);\nGO\n\n-- Safer, parameterized filter (preferred)\n-- Example: delete rows with Date &lt; @Cutoff\nINSERT INTO [dbo].[ScheduledJobInput] (\n      [JobName]\n    , [Name]\n    , [Value]\n)\nVALUES (\n      'CleanScheduledJobsHistory'\n    , 'WhereTemplate'\n    , 'Date &lt; @Cutoff'\n);\nGO\n\n-- JSON parameters for the template (adjust Cutoff as needed)\nINSERT INTO [dbo].[ScheduledJobInput] (\n      [JobName]\n    , [Name]\n    , [Value]\n)\nVALUES (\n      'CleanScheduledJobsHistory'\n    , 'WhereParams'\n    , '{\"Cutoff\":\"${now-3M}\"}'\n);\nGO\n\n-- Optional: table optimization configuration\nINSERT INTO [dbo].[ScheduledJobInput] (\n      [JobName]\n    , [Name]\n    , [Value]\n)\nVALUES (\n      'CleanScheduledJobsHistory'\n    , 'OptimizeTable'\n    , 'true'\n);\nGO\n\nINSERT INTO [dbo].[ScheduledJobInput] (\n      [JobName]\n    , [Name]\n    , [Value]\n)\nVALUES (\n      'CleanScheduledJobsHistory'\n    , 'OptimizeMode'                     -- options: Reorganize | Rebuild | Auto\n    , 'Reorganize'\n);\nGO\n\nINSERT INTO [dbo].[ScheduledJobInput] (\n      [JobName]\n    , [Name]\n    , [Value]\n)\nVALUES (\n      'CleanScheduledJobsHistory'\n    , 'OnlineIndexRebuild'               -- used if OptimizeMode = Rebuild\n    , 'true'\n);\nGO\n\nINSERT INTO [dbo].[ScheduledJobInput] (\n      [JobName]\n    , [Name]\n    , [Value]\n)\nVALUES (\n      'CleanScheduledJobsHistory'\n    , 'UpdateStatisticsAfterOptimization' -- default true for Reorganize; false for Rebuild\n    , 'true'\n);\nGO\n\nINSERT INTO [dbo].[ScheduledJobInput] (\n      [JobName]\n    , [Name]\n    , [Value]\n)\nVALUES (\n      'CleanScheduledJobsHistory'\n    , 'UpdateStatisticsFullScan'          -- set true to use FULLSCAN on stats\n    , 'false'\n);\nGO\n</code></pre>"},{"location":"security/","title":"Security and Permissions","text":""},{"location":"security/#granite-wms-security-policies-and-measures","title":"Granite WMS Security Policies and Measures","text":"<p>The following security measures should be considered within the context of on-premises hosting, which provides several inherent benefits that enhance overall security, control, and data protection:</p> <ul> <li> <p>Complete Control Over Security: On-premises hosting allows organizations to fully manage their security infrastructure, with the ability to implement and adjust tailored configurations as needed.</p> </li> <li> <p>Physical Security: With servers located on-site, organizations benefit from direct physical security measures, such as secure access and surveillance, which add an extra layer of protection against unauthorized access.</p> </li> <li> <p>Data Privacy and Compliance: On-premises environments allow organizations to keep sensitive data under their direct control, making it easier to comply with privacy regulations and reducing the risk of third-party access.</p> </li> <li> <p>Custom Security Measures: On-premises hosting enables organizations to implement custom security solutions tailored to their specific requirements, offering flexibility beyond what\u2019s typically available with cloud-based services.</p> </li> <li> <p>Reduced Dependency on Internet Connectivity: Systems hosted on-premises can continue to function during internet outages, providing increased reliability and security in the event of connectivity issues.</p> </li> <li> <p>Controlled Access: Access to on-premises systems is tightly controlled and can be secured through internal policies and technologies like VPNs, adding further protection from external threats.</p> </li> </ul>"},{"location":"security/#application-security","title":"Application Security","text":""},{"location":"security/#authentication-and-authorization","title":"Authentication and Authorization","text":"<ul> <li>Custom Application Authentication: We use our own custom authentication mechanisms tailored specifically to our application's requirements, ensuring secure user access control.</li> <li>Access to application features is managed through permission-based authorization, ensuring users can only perform actions that align with their assigned roles.</li> </ul>"},{"location":"security/#password-encryption","title":"Password Encryption","text":"<ul> <li>Salt and Hashing: Passwords are securely hashed with a unique salt for each user, making it harder for attackers to crack passwords.</li> </ul>"},{"location":"security/#session-management","title":"Session Management","text":"<ul> <li>UseSecureCookies: Cookies are only sent over HTTPS connections, preventing them from being transmitted in plaintext over insecure networks.</li> <li>UseHttpOnlyCookies: Cookies cannot be accessed by client-side scripts, which mitigates Cross-Site Scripting (XSS) attacks.</li> <li>UseSameSiteCookies: Cross-Site Request Forgery (CSRF) attacks are prevented by restricting cookies from being sent with cross-site requests.</li> <li>Session Timeout: Sessions are time-limited, with automatic logouts occurring after periods of inactivity.</li> </ul>"},{"location":"security/#allowed-origins-and-cross-origin-resource-sharing-cors","title":"Allowed Origins and Cross-Origin Resource Sharing (CORS)","text":"<ul> <li>CORS Implementation: Strict CORS policies are enforced to control which domains can interact with our .NET applications, preventing unauthorized cross-origin requests.</li> <li>Allowed Origins: Only explicitly allowed origins are permitted to interact with the APIs and web services, ensuring that only trusted sources can access sensitive resources.</li> </ul>"},{"location":"security/#application-patching-and-updates","title":"Application Patching and Updates","text":"<ul> <li>We use the GitHub Dependencies Bot to monitor and manage updates to .NET Framework, libraries, and dependencies. This ensures that any vulnerabilities in third-party libraries are addressed promptly and efficiently.</li> </ul>"},{"location":"security/#application-configurations","title":"Application Configurations","text":"<ul> <li>DebugMode: Debug mode is set to false by default, ensuring that sensitive information, such as stack traces and error messages, is not exposed to users in production. This prevents attackers from gaining insights into the internal workings of the application.</li> </ul>"},{"location":"security/#web-server-security","title":"Web Server Security","text":""},{"location":"security/#iis-hardening","title":"IIS Hardening","text":"<ul> <li>Disable Unnecessary Features: All unnecessary IIS modules (e.g., WebDAV, FTP) are disabled to minimize the attack surface.</li> <li>Application Pool Isolation: Each application is hosted in its own dedicated application pool. This ensures that if one application is compromised, others remain unaffected.</li> </ul>"},{"location":"security/#secure-communication","title":"Secure Communication","text":"<ul> <li>SSL/TLS Encryption: All communication with the IIS-hosted applications is encrypted via SSL/TLS to ensure data integrity and confidentiality.</li> </ul> <p>Learn how to secure your system with API keys, manage user permissions, and implement best practices for system security. This section covers everything you need to control access, authenticate users, and protect sensitive data. Explore the guides below to ensure your setup is both secure and efficient.</p> <ul> <li> <p>System Security</p> <p>Optional settings allowing you to enforce industry standard policies, like account lockouts and password expiration.</p> </li> <li> <p>User Permissions</p> <p>A complete list of the user permissions in Granite and what they map to.</p> </li> <li> <p>API Keys </p> <p>A guide on using API Keys to authenticate with our APIs.</p> </li> </ul>"},{"location":"security/api-keys/","title":"API Keys","text":""},{"location":"security/api-keys/#_1","title":"API Keys","text":"<p>Warning</p> <p>This is V6 functionality, not yet released</p>"},{"location":"security/api-keys/#what-are-api-keys","title":"What are API Keys","text":"<p>API Keys are an authentication mechanism used to identify and authorize users or applications accessing an API, without using a user name and password.  The key itself is simply a long string of characters and each one is unique to each Granite user.  Here is an example of what a Granite API Key can look like: <code>TsIPsMSGzqYDjwTc-bd2CtrGU7FHwydPeuZ7ruA1DpPnzr7R3Swk8o_Nlkwd5Bty</code></p>"},{"location":"security/api-keys/#why-do-we-need-api-keys-in-granite-v6","title":"Why do we need API Keys in Granite V6","text":"<p>Mainly, its because of the stricter security requirements on our new APIs. API Keys allow V6 SQLCLR procedures to connect securely to our APIs without needing the user's password. API keys also provider a better experience for third parties using our APIs by providing a straightforward way to authenticate and authorize their requests.</p>"},{"location":"security/api-keys/#which-apis-support-api-keys","title":"Which APIs support API keys","text":"<p>At the moment it is just the Business API that supports API keys. </p>"},{"location":"security/api-keys/#how-do-i-get-an-api-key","title":"How do I get an API key","text":"<p>API keys are automatically generated for Granite users whenever their password is saved.  There is no way currently to view these API keys from the front end - you will need to fetch the API key out of the <code>UsersCredential</code> table in the Granite database.</p> <p>Note</p> <p>If you change your Granite user password, your API key will also change.  This is useful if an API key leaks and you need to invalidate the old one and regenerate a new one.</p>"},{"location":"security/api-keys/#how-do-i-use-an-api-key","title":"How do I use an API key","text":"<p>You can use your API key to access the Granite APIs by passing it in a HTTP Authorization Bearer token like this:</p> <pre><code>GET /resource HTTP/1.1\nHost: server.example.com\nAuthorization: Bearer TsIPsMSGzqYDjwTc-bd2CtrGU7FHwydPeuZ7ruA1DpPnzr7R3Swk8o_Nlkwd5Bty\n</code></pre>"},{"location":"security/system-security/","title":"Security settings","text":"<p>The following settings are optional and related to Granite security. Configuration is managed within the SystemSettings database table.</p> <p>Important Notes: - Each setting is activated by the isActive value in the table. - The Value field is used to configure the specific parameters for each setting. - Once a security policy is breached, the UsersCredential table will be updated to enforce the policy.</p>"},{"location":"security/system-security/#passwordfailedattempts","title":"PasswordFailedAttempts","text":"<ul> <li>Description: Defines the maximum number of failed login attempts allowed before a user account is locked.</li> <li>Configuration: Specify the number of failed attempts as the Value.</li> </ul>"},{"location":"security/system-security/#passwordrecoveryminutes","title":"PasswordRecoveryMinutes","text":"<ul> <li>Description: Resets the failed login attempt counter after a specified duration (in minutes).</li> <li>Dependency: This setting only takes effect if PasswordFailedAttempts is active.</li> <li>Configuration: Specify the recovery duration (in minutes) as the Value.</li> </ul>"},{"location":"security/system-security/#enablepasswordstrength","title":"EnablePasswordStrength","text":"<ul> <li>Description: Enforces a strong password policy for all new passwords while retaining previous passwords.</li> <li>Configuration: when active set the Value to one of the options below ranging from 1 to 5.</li> </ul> Value Name Description 1 VeryWeak Minimum 4 characters with at least 1 unique character. No digits, lowercase, uppercase, or special characters required. 2 Weak Minimum 8 characters with at least 2 unique characters. Must include digits and lowercase letters. Uppercase and special characters are not required. 3 Medium Minimum 12 characters with at least 3 unique characters. Must include digits, lowercase, and uppercase letters. Special characters are not required. 4 Strong Minimum 14 characters with at least 4 unique characters. Must include digits, lowercase, uppercase, and special characters. 5 VeryStrong Minimum 16 characters with at least 5 unique characters. Must include digits, lowercase, uppercase, and special characters."},{"location":"security/system-security/#enablepasswordexpiry","title":"EnablePasswordExpiry","text":"<ul> <li>Description: Activates password expiration, requiring users to update their passwords after a set period.</li> <li>Configuration: Specify the expiration period (in days) as the Value.</li> </ul> <p><code>Examples of application handling security breaches</code></p> <p></p> <p></p>"},{"location":"security/user-permissions/","title":"Permissions","text":"<p>Permissions in our software system are organized into categories for easier maintenance and clarity. These categories are purely for organizational purposes and do not influence functionality within the system.</p> <p>Permissions (from version 6 onwards) are assigned to the to user groups rather than to individual users. These permissions are managed on the permission tab on the user group screen in the WebDesktop.</p> <p>They live in the following sql tables: </p> <ul> <li><code>SystemPermissions</code> - this is where permissions are defined. For a group to have a permission, the permission must exist in this table.</li> <li><code>UsersPermissions</code> - This is where permissions are assigned to UserGroups. An entry linking a user group to a system permission grants the group that permission.</li> </ul> <p>Below, you'll find a list of permissions, organized by their respective categories.</p>"},{"location":"security/user-permissions/#admin","title":"Admin","text":"<p>Admin Permissions grant administrators the ability to maintain the application's settings and configurations</p> Category Name Description Admin SystemSettingsSetup Allow access to application system settings (see SecuritySettings, ApplicationSettings settings) Admin SecuritySettings Allow access to security system settings Admin ApplicationSettings Allow access to application system settings (all Granite* settings) Admin PasswordReset Permission to set and reset passwords of users Admin ScheduledJobSetup Allow user to create and edit scheduled jobs Admin MetaDataSetup Allow user to create and edit metadata Admin StaticDataSetup Allow user to create and edit static data Admin ProcessCatalog Allow user to access ProcessCatalog screen Admin Integration Allow user to access Integration screen Admin TrackingEntityImport Allow user to import TrackingEntity Admin DataImport Allow user to import master data"},{"location":"security/user-permissions/#setup","title":"Setup","text":"<p>Permissions to Setup and Maintain Company Data includes the ability to manage and configure essential master data, such as locations, master items, and other key data setups</p> Category Name Description Setup CategorySetup Allow user to create and edit categories Setup TypeSetup Allow user to create and edit types Setup LocationSetup Allow user to create and edit locations Setup MasterItemSetup Allow user to create and edit master items Setup ProcessSetup Allow user to create and edit processes Setup UserGroupSetup Allow user to create and edit user groups Setup TradingPartnerSetup Allow user to create and edit trading partners Setup UserSetup Allow user to create and edit users"},{"location":"security/user-permissions/#process-permission","title":"Process Permission","text":"<p>Process permissions to allow access to certain processes </p> Category Name Description Process TakeOnProcess Allow user to perform TakeOn transactions Process ReceiveProcess Allow user to perform Receive transactions Process ReceiveReversalProcess Allow user to perform ReceiveReversal transactions Process BulkScrapProcess Allow user to perform BulkScrap transactions Process BulkMoveProcess Allow user to perform BulkMove transactions Process ReturnProcess Allow user to perform Return transactions Process PickDynamicProcess Allow user to perform PickDynamic transactions Process PickProcess Allow user to perform Pick transactions Process PickReversalProcess Allow user to perform PickReversal transactions Process StockTakeProcess Allow user to perform StockTake transactions Process StockTakeStatusControlProcess Allow user to perform StockTakeStatusControl transactions Process TransferProcess Allow user to perform Transfer transactions Process TransferDynamicProcess Allow user to perform TransferDynamic transactions Process TransferReversalProcess Allow user to perform TransferReversal transactions Process AdjustProcess Allow user to perform Adjust transactions Process ScrapProcess Allow user to perform Scrap transactions Process MoveProcess Allow user to perform Move transactions Process ReplenishProcess Allow user to perform Replenish transactions Process DataCaptureProcess Allow user to perform DataCapture transactions Process QualityControlProcess Allow user to perform QualityControl transactions Process PackProcess Allow user to perform Pack transactions Process PalletizeProcess Allow user to perform Palletize transactions Process ReclassifyProcess Allow user to perform Reclassify transactions Process ManufactureProcess Allow user to perform Manufacture transactions Process ConsumeProcess Allow user to perform Consume transactions"},{"location":"security/user-permissions/#inbound-permissions","title":"Inbound Permissions","text":"<p>Inbound permission grant users access to the Inbound document modules in the WebDesktop</p> Category Name Description Inbound InboundReceivingProgress Allows the user to view Receiving Progress in the WebDesktop Inbound module Inbound InboundReceivingDocument Allows the user to view and manage Receiving Documents in the WebDesktop Inbound module Inbound InboundReceivingComplete Allows the user to complete receiving documents in the WebDesktop Inbound module Inbound InboundReceivingRelease Allows the user to release receiving documents in the WebDesktop Inbound module Inbound InboundReceiveReversal Allows user to reverse receiving transactions in the WebDesktop Inbound module"},{"location":"security/user-permissions/#outbound-permissions","title":"Outbound Permissions","text":"<p>Outbound permission grant users access to the Outbound document modules in the WebDesktop</p> Category Name Description Outbound OutboundPickingProgress Allows the user to view Picking Progress in the WebDesktop Outbound module Outbound OutboundPickingDocument Allows the user to view and manage Picking Documents in the WebDesktop Outbound module Outbound OutboundPickSlipDocument Allows the user to view and manage PickSlip Documents in the WebDesktop Outbound module Outbound OutboundPickingReversal Allows user to reverse picking transactions in the WebDesktop Outbound module Outbound OutboundOrderComplete Allows the user to complete picking documents in the WebDesktop Outbound module Outbound OutboundOrderRelease Allows the user to release picking documents in the WebDesktop Outbound module"},{"location":"security/user-permissions/#integration-permissions","title":"Integration Permissions","text":"<p>Integration permission grant users permissions to post transactions for integration|</p> Category Name Description Integration ReceivePost Allow user to post ReceivePost transactions Integration ReturnPost Allow user to post ReturnPost transactions Integration PickPost Allow user to post PickPost transactions Integration StockTakePost Allow user to post StockTakePost transactions Integration TransferDynamicPost Allow user to post TransferDynamicPost transactions Integration TransferPost Allow user to post TransferPost transactions Integration ManufacturePost Allow user to post ManufacturePost transactions Integration ConsumePost Allow user to post ConsumePost transactions"},{"location":"security/user-permissions/#inventory-permissions","title":"Inventory Permissions","text":"<p>Inventory Permissions grant access to the inventory modules in the WebDesktop</p> Category Name Description Inventory InventoryTrackingEntity Allows the user to view and manage Tracking Entities in the WebDesktop Inventory module Inventory InventoryVariances Allows the user to access and review inventory variances within the WebDesktop Inventory module Inventory InventoryVariancesAdjustment Allows the user to make adjustments to inventory variances in the WebDesktop Inventory module Inventory InventoryQualityControl Allows the user to access the Quality Control section within the WebDesktop Inventory module Inventory InventoryQualityControlScrap Allows the user to mark inventory items as scrap within the WebDesktop Quality Control module Inventory InventoryQualityControlHold Allows the user to place inventory items on hold within the WebDesktop Quality Control module Inventory InventoryQualityControlRelease Allows the user to release inventory items from hold within the WebDesktop Quality Control module Inventory InventoryQualityControlMove Allows the user to move inventory items within the WebDesktop Quality Control module Inventory InventoryTrackingEntityMove Allows the user to move Tracking Entities within the WebDesktop Inventory module Inventory InventoryTrackingEntityScrap Allows the user to mark Tracking Entities as scrap within the WebDesktop Inventory module Inventory InventoryTrackingEntityAdjustment Allows the user to adjust Tracking Entities within the WebDesktop Inventory module"},{"location":"security/user-permissions/#manufacture-permissions","title":"Manufacture Permissions","text":"<p>Manufacture Permissions give users access to the Manufacturing modules in the WebDesktop</p> Category Name Description Manufacture ManufactureProgress Allow user to access ManufactureProgress screen in the WebDesktop Manufacture module Manufacture ManufactureDocument Allow user to access ManufactureDocument screen in the WebDesktop Manufacture module Manufacture ManufactureDocumentComplete Allows the user to complete receiving documents in the WebDesktop Manufacture module Manufacture ManufactureDocumentRelease Allows the user to release receiving documents in the WebDesktop Manufacture module"},{"location":"security/user-permissions/#stocktake-permissions","title":"StockTake Permissions","text":"<p>StockTake permissions give users access to StockTake modules in the WebDesktop</p> Category Name Description StockTake StockTakeSession Allow user to access StockTake CreateSession screen StockTake StockTakeProcessing Allow user to access StockTake Processing screen StockTake StockTakeProcessingCommands Allows the user to Process StockTake StockTakeStatusControl Allows the user to access StockTake StatusControl screen StockTake StockTakeQualityControlScrap Allows the user to mark inventory items as scrap within the WebDesktop StockTake StatusControl module StockTake StockTakeQualityControlHold Allows the user to place inventory items on hold within the WebDesktop StockTake StatusControl module StockTake StockTakeQualityControlRelease Allows the user to release inventory items from hold within the WebDesktop StockTake StatusControl module StockTake StockTakeQualityControlMove Allows the user to move inventory items within the WebDesktop StockTake StatusControl module"},{"location":"security/user-permissions/#transfer-permissions","title":"Transfer Permissions","text":"<p>Transfer Permissions give user access to Transfer modules in the WebDesktop</p> Category Name Description Transfer TransferProgress Allow user to access TransferProgress screen Transfer TransferDocumentComplete Allows the user to complete transfer documents in the WebDesktop Transfer module Transfer TransferDocumentRelease Allows the user to release transfer documents in the WebDesktop Transfer module Transfer TransferDocument Allow user to access TransferDocument screen Transfer InTransitDocument Allow user to access In-transit Transfer Document screen Transfer ReceiptDocument Allow user to access TransferDocument screen Transfer TransferReversal Allow user to reverse Transfer transactions"},{"location":"security/user-permissions/#enquiry-permissions","title":"Enquiry Permissions","text":"<p>Enquiry Permissions grant users access to enquires in the WebDesktop</p> Category Name Description Enquiry DataGrid Allow user to view Enquiry/DataGrid"},{"location":"sqlclr/","title":"SQLCLR","text":"<p>The SQL CLR (Common Language Runtime) integration offers a unique approach by <code>abstracting HTTP</code> technology away from direct SQL manipulation.  This encourages users to interact with our <code>API</code> instead of directly manipulating data within SQL Server. By promoting interaction with the API, this integration enhances security, maintains <code>data integrity</code>, and streamlines data processing workflows, empowering users to leverage our API's full capabilities within the SQL environment.</p> <p>Note</p> <p>SQLCLR will only work consistently on 64bit versions of SQL Server, Please see this error from a 32bit system: Stack Overflow</p>"},{"location":"sqlclr/#currently-supported-operations","title":"Currently supported operations","text":"<ul> <li> <p>Label Printing</p> <p>TRACKINGENTITY, MASTERITEM, LOCATION</p> </li> <li> <p>Integration</p> <p>POST, POST TO ENDPOINT, UPDATE</p> </li> <li> <p>Custodian API</p> <p>REPORT PRINT, REPORT EXPORT, SQL TABLE EXPORT, SIMPLE EMAIL, TEMPLATE EMAIL</p> </li> <li> <p>Business API</p> <p>INVENTORY: TAKEON, SCRAP, ADJUST, MOVE, PALLETIZE, REPLENISH, RECLASSIFY, TRANSFER, SAVE TRACKING ENTITY OPTIONAL FIELD</p> <p>OUTBOUND :PICK, PACK</p> <p>INBOUND: RECEIVE</p> <p>STOCKTAKE: STOCKTAKECOUNT, STOCKTAKEHOLD, STOCKTAKERELEASE</p> <p>OTHER: COPY DOCUMENT, SAVE OPTIONAL FIELDS</p> </li> </ul>"},{"location":"sqlclr/getting-started/","title":"Getting Started","text":"<p>Note</p> <p>The previous scripts and dlls have been replaced with: SQLCLR_Install.sql When opening the SQLCLR_Install.sql it will ask if you want to normalise the endings; select NO. Be sure to replace [GraniteDatabase] with the database in which you wish to create the procedures. </p> <p>Note</p> <p>If you are upgrading from an older version of CLR ensure that you change <code>Application</code> in <code>SystemSettings</code> table from <code>GraniteSQLCLR</code> to <code>SQLCLR</code></p>"},{"location":"sqlclr/getting-started/#install-sqlclr","title":"Install SQLCLR","text":"<p>As of Granite version 5, the default database create script will include the installation of SQLCLR procedures.</p> <p>If you need to manually install SQLCLR version 5, you can find the install script at the end of the Database install script.</p> <p>Note</p> <p>The create script requires the SQL <code>sysadmin</code> role to execute successfully. If you do not have the necessary permissions, ask the client's IT to run the script.</p> SystemSettings table <p>Once the necessary assemblies and procedures have been created, you will need to ensure that your <code>SystemSettings</code> table includes the necessary entries:</p> <p>Note</p> <p>BusinessAPI replaces Webservice after version 6.</p> Application Key Value Description ValueDataType isEncrypted isActive SQLCLR Business_API_Endpoint https://10.0.0.1:50006 Granite BusinessAPI Address string False SQLCLR Webservice http://10.0.0.1:50002 Granite Webservice Address string False True SQLCLR LabelPrintService http://10.0.0.1:50004 Label Print Service Address string False True SQLCLR IntegrationService http://10.0.0.1:50003 Integration Service Address string False True SQLCLR Custodian_API_Endpoint https://10.0.0.1:50001 CustodianAPI Address string False True"},{"location":"sqlclr/getting-started/#using-the-clr-procedures","title":"Using the CLR ProceduresUsing the CLR Functions","text":"<p>The suggested way to start working with your CLR procedures is to right click the procedure in SSMS and select <code>Script Stored Procedure as</code> -&gt; <code>Execute To</code></p> <p>This will ensure that you have all of the necessary variables declared with correct datatypes, and that all parameters are specified for the EXECUTE statement</p> <p>If you are not specifying a particular value, just set the variable to NULL. The variable must still be supplied as a parameter when executing the CLR procedure.</p> <p>CLR Functions are used to assist with formatting parameters with a more complex structure - typically a json input. Each function is related to a specific CLR procedure parameter. </p> <p>Doing it this way ensures that the complex parameter is properly formatted, without the need to manually manipulate json. This is especially helpful on versions of SQL Server that don't support the newer json related functions.</p> <p>The prefix indicates which of the CLR Procedures it is related to: </p> <ul> <li>\"dbo.report_\" for Reporting Service procedures</li> <li>\"dbo.email_\" for Email Service procedures</li> <li>\"dbo.export\" for SQL Export Service procedures</li> </ul>"},{"location":"sqlclr/reference/","title":"CLR Procedure Reference","text":""},{"location":"sqlclr/reference/#business-api","title":"Business API","text":"<p>Note</p> <p>As of version 6 clr now calls the Business API rather than the Webservice. If you are upgrading from a previous version to version 6 please refer to the Version 6 Upgrade Guide.</p> <p>For detauls of the call that CLR procedure make to the Business API visit the metadata page of the Business API that you are going to be calling (BusinessApiUrl)/metadata</p> <p>The following procedures map directly to the request and details of the parameter can be found as (BusinessApiURL + below path)</p> <ul> <li>dbo.clr_CreateCarryingEntity <pre><code>/json/metadata?op=CreateCarryingEntity\n</code></pre></li> <li>dbo.clr_Receive <pre><code>/json/metadata?op=InboundReceive\n</code></pre></li> <li>dbo.Adjustment <pre><code>/json/metadata?op=InventoryAdjustment\n</code></pre></li> <li>dbo.clr_Move <pre><code>/json/metadata?op=InventoryMove\n</code></pre></li> <li>dbo.clr_PalletizeRemove <pre><code>/metadata?op=InventoryPalletizeRemove\n</code></pre></li> <li>dbo.clr_PalletizeAdd <pre><code>/metadata?op=InventoryPalletizeAdd\n</code></pre></li> <li>dbo.clr_Reclassify <pre><code>/metadata?op=InventoryReclassify\n</code></pre></li> <li>dbo.clr_Replenish <pre><code>/metadata?op=InventoryReplenish\n</code></pre></li> <li>dbo.clr_Scrap <pre><code>/metadata?op=InventoryScrap\n</code></pre></li> <li>dbo.clr_Transfer <pre><code>/metadata?op=InventoryTransfer\n</code></pre></li> <li>dbo.clr_TakeOn <pre><code>/metadata?op=InventoryTakeOn\n</code></pre></li> <li>dbo.clr_TrackingEntityOptionalField <pre><code>/json/metadata?op=SetTrackingEntityOptionalFieldValue\n</code></pre></li> <li>dbo.clr_Pick <pre><code>/json/metadata?op=OutboundPick\n</code></pre></li> <li>dbo.clr_Pack <pre><code>/json/metadata?op=OutboundPack\n</code></pre></li> <li>dbo.clr_StockTakeCount <pre><code>/json/metadata?op=StockTakeCount\n</code></pre></li> <li>dbo.clr_StockTakeHold <pre><code>/json/metadata?op=StockTakeHold\n</code></pre></li> <li>dbo.clr_StockTakeRelease <pre><code>/json/metadata?op=StockTakeRelease\n</code></pre></li> <li>dbo.clr_CopyDocument <pre><code>/json/metadata?op=CopyDocument\n</code></pre></li> <li>dbo.clr_SaveOptionalField <pre><code>/json/metadata?op=SaveOptionalFields\n</code></pre></li> </ul>"},{"location":"sqlclr/reference/#webservice","title":"Webservice","text":"<p>Note</p> <p>From version 6 onwards the Webservice is no longer used in the SQLCLR methods. Please refer to the Business API section.</p> <p>For details of the calls that the CLR procedures make to the WebService visit the metadata page of the WebService that you are going to be calling  (WebServiceUrl)/metadata</p> <p>The following procedures directly map to the WebService request, for details browse to the associated details on the WebService (WebserviceURL + below path)</p> <p></p> <ul> <li>dbo.clr_Adjustment  <pre><code>/json/metadata?op=InventoryAdjustmentRequest\n</code></pre></li> <li>dbo.clr_Move <pre><code>/json/metadata?op=InventoryMoveRequest\n</code></pre></li> <li>dbo.clr_Pack <pre><code>/json/metadata?op=OutboundPackingRequest\n</code></pre></li> <li>dbo.clr_Pick <pre><code>/json/metadata?op=OutboundPickingRequest\n</code></pre></li> <li>dbo.clr_Receive <pre><code>/json/metadata?op=InboundReceivingRequest\n</code></pre></li> <li>dbo.clr_Replenish <pre><code>/json/metadata?op=InventoryReplenishRequest\n</code></pre></li> <li>dbo.clr_Reclassify <pre><code>/json/metadata?op=InventoryReclassifyRequest\n</code></pre></li> <li>dbo.clr_Scrap <pre><code>/json/metadata?op=InventoryScrapRequest\n</code></pre></li> <li>dbo.clr_StockTakeCount <pre><code>/json/metadata?op=StockTakeCountRequest\n</code></pre></li> <li>dbo.clr_StockTakeHold <pre><code>/json/metadata?op=StockTakeHoldRequest\n</code></pre></li> <li>dbo.clr_StockTakeRelease <pre><code>/json/metadata?op=StockTakeReleaseRequest\n</code></pre></li> <li>dbo.clr_Transfer <pre><code>/json/metadata?op=InventoryTransferRequest\n</code></pre></li> </ul> dbo.clr_TakeOn <p>This procedure differs from the WebService call in that it combines the parameters \"AssignTrackingEntityBarcode\" and \"TrackingEntityBarcode\" into @assignTrackingEntityBarcode. This parameter is not required, so leave as a null if not used for the standard TakeOn behavior.</p> <p>The procedure will check if tracking entity exists. If it does exist, then the qty will be assigned to that tracking entity. If not a new tracking entity will be created with the supplied barcode. </p>"},{"location":"sqlclr/reference/#label-printing","title":"Label Printing","text":"dbo.clr_PrintLabel Parameter name Required Description Barcode No The barcode that you want to print. If not specified, you must set the Barcodes parameter Barcodes No A comma separated list of barcodes you want to print. If not specified, you must set the Barcode parameter LabelName No Full name of the label you want to print, including the file extension (.zpl or .btw). If not set, will use the default format configured for the label type. NumberOfLabels No Number of copies of the label to print. Defaults to 1 if not set PrinterName No Name of the printer that you are printing to Type Yes The type of label that you want to print. Valid values are TRACKINGENTITY, MASTERITEM, LOCATION, USER, PALLET or BOX UserID Yes ID of the user that is printing the label"},{"location":"sqlclr/reference/#integration","title":"Integration","text":"dbo.clr_IntegrationPost Parameter name Required Description transactionID No Comma separated list of transaction IDs to post document No Document number to post documents No Comma separated list of documents to post reference No Integration reference of the transactions you want to post transactionType No Transaction type of the transactions being posted processName No Process name of the transactions being posted dbo.clr_IntegrationPostToEndpoint <p>If you have multiple integration services that you need to interact with using the CLR_IntegrationPostToEndpoint procedure,  you will need to add them with a unique name in the Key column:</p> Application Key Value Description ValueDataType isEncrypted isActive SQLCLR MySecondIntegrationService http://10.0.0.1:50006 ERP Company 2 Integration Service string False True <p>The Key \"MySecondIntegrationService\" can now be used when executing the CLR_IntegrationPostToEndpoint procedure  </p> Parameter name Required Description transactionID No Comma separated list of transaction IDs to post document No Document number to post documents No Comma separated list of documents to post reference No Integration reference of the transactions you want to post transactionType No Transaction type of the transactions being posted processName No Process name of the transactions being posted systemSettingsURLKey Yes Key from the SystemSettings table for the url you want to post to dbo.clr_IntegrationUpdate Parameter name Required Description transactionID No Comma separated list of transaction IDs to post document No Document number to post documents No Comma separated list of documents to post reference No Integration reference of the transactions you want to post transactionType No Transaction type of the transactions being posted processName No Process name of the transactions being posted"},{"location":"sqlclr/reference/#troubleshooting","title":"Troubleshooting","text":"<p>To run the create scripts you will need sysadmin permissions on the SQL instance that you are installing on</p> <p>Be sure that you are executing the procedure using ALL of the parameters. Set them to null if they are not being used</p>"},{"location":"sqlclr/reference/#examples","title":"Examples","text":""},{"location":"sqlclr/reference/#integration_1","title":"Integration","text":"<p>https://stackoverflowteams.com/c/granitewms/questions/349</p>"},{"location":"sqlclr/release-notes/","title":"Release Notes","text":""},{"location":"sqlclr/release-notes/#granitesqlclr-tba-5000","title":"Granite.SQLCLR (TBA) 5.0.0.0","text":""},{"location":"sqlclr/release-notes/#new","title":"New","text":"<ul> <li>UtilityAPI<ul> <li>Report Print</li> <li>Report Export</li> <li>SQL Table Export</li> <li>Template Email</li> <li>Simple Email</li> </ul> </li> </ul>"},{"location":"sqlclr/release-notes/#changes","title":"Changes","text":"<ul> <li>Update error handling to show more detailed messages when SystemSettings is incorrect</li> <li>Add manufactureDate to TakeOn procedure</li> <li>The SQLCLR_Install.sql has now been included in the standard GraniteDatabase_Create.sql script. </li> </ul>"},{"location":"sqlclr/release-notes/#granitesqlclr-15-august-2023-4502","title":"Granite.SQLCLR (15 August 2023) 4.5.0.2","text":""},{"location":"sqlclr/release-notes/#new_1","title":"New","text":"<ul> <li>Webservice<ul> <li>Packing</li> <li>Reclassify</li> </ul> </li> </ul>"},{"location":"sqlclr/release-notes/#changes_1","title":"Changes","text":"<ul> <li>Previous scripts and dlls have been replace with SQLCLR_Install.sql</li> <li>Script can now be run from any server that has the SSMS connected to the required SQL server instance.</li> </ul>"},{"location":"sqlclr/release-notes/#granitesqlclr-27-june-2023-4501","title":"Granite.SQLCLR (27 June 2023) 4.5.0.1","text":""},{"location":"sqlclr/release-notes/#changes_2","title":"Changes","text":"<ul> <li>Endpoints are now always fetched from the SystemSettings table. No need to run create scripts after making changes</li> <li>Integration<ul> <li>Fix bug preventing transactions from being posted using ID.</li> </ul> </li> </ul>"},{"location":"sqlclr/release-notes/#granitesqlclr-01-june-2023-4500","title":"Granite.SQLCLR (01 June 2023) 4.5.0.0","text":""},{"location":"sqlclr/release-notes/#new_2","title":"New","text":"<ul> <li>Webservice<ul> <li>Picking</li> <li>Receiving</li> </ul> </li> <li>Integration<ul> <li>Post to specified URL</li> </ul> </li> </ul>"},{"location":"sqlclr/release-notes/#changes_3","title":"Changes","text":"<ul> <li>Takeon<ul> <li>Fix bug where @assignTrackingEntityBarcode only works for new TrackingEntities</li> </ul> </li> <li>Split Types into separate files</li> <li>Create scripts added as .sql files and removed from manual</li> </ul>"},{"location":"sqlclr/version-6-upgrade-guide/","title":"Version 6 Upgrade Guide","text":"<p>This document explains the process of upgrading SQLCLR from version 5 to version 6 (Business API version). You will only need to do this if you upgrading an existing database to version 6. New version 6 installs come with SQLCLR.</p>"},{"location":"sqlclr/version-6-upgrade-guide/#what-has-changed","title":"What has changed","text":""},{"location":"sqlclr/version-6-upgrade-guide/#outputs","title":"Outputs","text":"<p>All outputs have be changed from responseCode and responseJson to success and message.  While this requires some overhead to change initially it will greatly simplify using SQLCLR in future.  Rather than building in handling into the prescript the valid and message can directly be set from the output.</p>"},{"location":"sqlclr/version-6-upgrade-guide/#businessapi","title":"BusinessAPI","text":"<p>In version 6 the BusinessAPI has replaced the WebService. This has a few affects. The first is that the system setting needs to be changes to include the address of the BusinessAPI rather than the WebService. The next is that many have different parameters. </p>"},{"location":"sqlclr/version-6-upgrade-guide/#utilityapi-custodianapi","title":"UtilityAPI &gt; CustodianAPI","text":"<p>The UtilityAPI has been merged with CustodianAPI. The only affect this has is on the System settings needs to be changed. </p>"},{"location":"sqlclr/version-6-upgrade-guide/#upgrade-steps","title":"Upgrade Steps:","text":"<ol> <li>Install new SQLCLR</li> <li>Update System Settings</li> <li>Identify all place it has been used</li> <li>Apply changes for each procedure</li> </ol>"},{"location":"sqlclr/version-6-upgrade-guide/#install-new-sqlclr","title":"Install new SQLCLR","text":"<p>Either use Custodian migration to upgrade SQLCLR(preferred method) or run the version 6 SQLCLR_install.sql script from the deploy folder.</p>"},{"location":"sqlclr/version-6-upgrade-guide/#update-system-settings","title":"Update System Settings","text":"<p>Note</p> <p>You only need to do this if implementing the changes manually. If done through Custodian migration these changes will be made already.</p> <p>Add the new System Settings entry for BusinessAPI and remove Webservice entry. You can use the below script.</p> <pre><code>INSERT INTO [dbo].[SystemSettings] ([Application], [Key], [Value], [Description], [ValueDataType], [isEncrypted], [isActive], [AuditDate], [AuditUser])\nSELECT 'SQLCLR', 'Business_API_Endpoint', '', 'Business API Address', 'string', 0, 1, GETDATE(), 'AUTOMATION'\nWHERE NOT EXISTS (\n    SELECT 1\n    FROM [dbo].[SystemSettings]\n    WHERE [Application] = 'SQLCLR' AND [Key] = 'Business_API_Endpoint'\n);\nINSERT INTO [dbo].[SystemSettings] ([Application], [Key], [Value], [Description], [ValueDataType], [isEncrypted], [isActive], [AuditDate], [AuditUser])\nSELECT 'SQLCLR', 'Custodian_API_Endpoint', '', 'Custodian API Address', 'string', 0, 1, GETDATE(), 'AUTOMATION'\nWHERE NOT EXISTS (\n    SELECT 1\n    FROM [dbo].[SystemSettings]\n    WHERE [Application] = 'SQLCLR' AND [Key] = 'Custodian_API_Endpoint'\n);\n\nIF EXISTS(SELECT * FROM SystemSettings WHERE [Application] = 'SQLCLR' AND [Key] = 'Webservice')\nBEGIN\n    DELETE FROM SystemSettings\n    WHERE [Application] = 'SQLCLR' AND [Key] = 'Webservice'\nEND\n</code></pre>"},{"location":"sqlclr/version-6-upgrade-guide/#identify-all-places-it-has-been-used","title":"Identify all places it has been used","text":"<p>As a result of the changes listed in the what has changed section above you will need to alter the prescripts using any of the SQLCLR procedures.</p> <p>To find all of these procedures you can use the following script: <pre><code>SELECT  referencing_object_name = OBJECT_NAME(sd.referencing_id),\n        referenced_object_name = COALESCE(OBJECT_NAME(sd.referenced_id), sd.referenced_entity_name)\nFROM    sys.sql_expression_dependencies sd\n        LEFT JOIN sys.objects so ON sd.referencing_id = so.object_id\n        LEFT JOIN sys.objects so_referenced ON sd.referenced_id = so_referenced.object_id\nWHERE sd.referenced_entity_name LIKE 'clr_%';\n</code></pre></p> <p>The first column is the prescript and the second is SQLCLR procedure executed in the script.</p> <p></p>"},{"location":"sqlclr/version-6-upgrade-guide/#apply-changes-for-each-procedure","title":"Apply changes for each procedure","text":"<p>To alter the existing procedure the simplest process will be to right click on the procedure and select execute. Fill in test info to get the formatting of the execute. </p> <p></p> <p>You can then replace the existing exec in prescript with the new one. Here you can see a before and after using clr_Adjustment. </p> <p>BEFORE: <pre><code>EXECUTE [dbo].[clr_Adjustment] \n   @userID = @userID\n  ,@inventoryIdentifier = @inventoryIdentifier\n  ,@qty = @qty\n  ,@comment = @comment\n  ,@reference = @reference\n  ,@adjustmentType = @adjustmentType\n  ,@integrationReference = @integrationReference\n  ,@processName = @processName\n  ,@responseCode = @responseCode OUTPUT\n  ,@responseJSON = @responseJSON OUTPUT\n\nIF @responseCode = 200\nBEGIN\n    SELECT @valid = 1\n    SELECT @message = CONCAT('Successfully adjusted ', @TrackingEntityBarcode, ' to ', @QtyToAdjustTo)  \nEND\nELSE\nBEGIN\n    SELECT @valid = 0\n    SELECT @message = @responseJSON\nEND\n</code></pre> AFTER: <pre><code>EXEC    [dbo].[clr_Adjustment]\n        @userName = @UserName,\n        @trackingEntityIdentifier = @inventoryIdentifier,\n        @adjustmentQty = @qty,\n        @comment = @comment,\n        @reference = @reference,\n        @adjustmentType = @adjustmentType,\n        @integrationReference = @integrationReference,\n        @processName = @processName,\n        @success = @valid OUTPUT,\n        @message = @message OUTPUT\n</code></pre> The main things to note are that you pass the UserName instead of the userID. This paired with being able to directly set the valid and message makes using the SQLCLR procedures far simpler. </p> <p>In this example the SQLCLR is the last action in the prescript so you can directly set the @valid and @message. If this is not the case, you can check if it succeeded like this:</p> <pre><code>EXEC    [dbo].[clr_Adjustment]\n        @userName = @UserName,\n        @trackingEntityIdentifier = @inventoryIdentifier,\n        @adjustmentQty = @qty,\n        @comment = @comment,\n        @reference = @reference,\n        @adjustmentType = @adjustmentType,\n        @integrationReference = @integrationReference,\n        @processName = @processName,\n        @success = @success OUTPUT,\n        @message = @message OUTPUT\n\nIF(@success = 1) -- 1 indicates success\n    BEGIN \n        -- Continue with logic here\n    END\n</code></pre>"},{"location":"ssrs/getting-started/","title":"SSRS","text":""},{"location":"ssrs/getting-started/#prerequisites","title":"Prerequisites","text":"<ul> <li>SQL Server needs to be installed and accessible from server where you are installing SSRS</li> </ul>"},{"location":"ssrs/getting-started/#install","title":"Install","text":"<p>Note</p> <p>If your customer is using the server as a Domain Controller, SSRS will NOT install.  To get around this, try the following: </p> <ul> <li>With customer\u2019s permission, remove DC rule, install SSRS, and reapply DC rule.</li> <li>Customer to provide and alternative server / PC to run SSRS (must be within same network and be accessible from user\u2019s PCs, i.e. can browse to the SSRS report url).</li> </ul> <p>To install:</p> <ul> <li>Run SQLServerReportingServices(2019) from the dropbox folder \"/Software Installs/Granite/Granite Reports/SQL Server Reporting Services\"</li> </ul> <p>OR </p> <ul> <li>Download the installer from SSRS 2019</li> </ul> <p>Follow the install prompts, selecting Developer as the edition to install. </p> <p>Once the install completes, select the option to \"Configure report server\". </p>"},{"location":"ssrs/getting-started/#configuration","title":"Configuration","text":"Web Service URL <p>Once Report Server Configuration Manager has launched, in the left panel, select \"Web Service URL\". </p> <p>Edit only the TCP Port. In this example 40071 was used but you can use any unreserved port. Select apply and you should see the following:</p> <p></p> Database <p>Next select the \"Database\" in the left panel.</p> <p>Here select \"Change Database\" and in the new window do the following:</p> <ol> <li> <p>Create a new report server database \"Next\"</p> </li> <li> <p>Connect to SQL Server Instance with SQL Server Account Authentication Type \"Next\"</p> </li> <li> <p>Specify Database Name (the default was used for this install) \"Next\"</p> </li> <li> <p>Change Authentication Type to SQL Server Credentials and specify Sql Username and Password \"Next\"</p> </li> <li> <p>On Summary \"Next\"</p> </li> <li> <p>\"Finish\"</p> </li> </ol> <p></p> Web Portal URL <p>Next select the \"Web Portal URL\" in the left panel.</p> <p>Select \"Apply\" and you should see the following:</p> <p></p> <p>Click the link to go to the Web Portal</p> <p>If your are prompted to sign in, the login details are the windows credentials (domain\\username or Administrator depending on what server login details have been provided) like below:</p> <p></p>"},{"location":"ssrs/getting-started/#granite-branding","title":"Granite Branding","text":"<p>To apply the Granite Branding go to site setting &gt; branding and upload the zipped file located in dropbox at \"\\Software Installs\\Granite\\Granite Reports\\SQL Server Reporting Services\\Granite Branding\"</p> <p></p>"},{"location":"ssrs/getting-started/#adding-barcodes","title":"Adding Barcodes","text":"<p>Barcodes are rendered as images within SSRS, so to be able to produce a barcode on a report, the value to be printed must be passed through an image generator and displayed on the report as an image.</p> <p>To set this up on the SSRS running server, the following needs to be in setup and configured:</p> BarcodeLib.ddl <p>Copy the \"BarcodeLib.dll\" from dropbox \"\\Software Installs\\Granite\\Granite Reports\\SQL Server Reporting Services\\Barcodes on SSRS reports\" to the following locations:</p> <ul> <li>For Standalone version of SSRS: \"C:\\Program Files\\Microsoft SQL Server Reporting Services\\SSRS\\ReportServer\\bin\"</li> <li>For full SQL version installation: \"C:\\Program Files\\Microsoft SQL Server\\MSRS10_50.MSSQLSERVER\\Reporting Services\\ReportServer\\bin\\\" -\u2981  For development / report builder: \"C:\\Program Files (x86)\\Microsoft Report Builder\"</li> </ul> <p>Note</p> <p>Ensure that \"BarcodeLib.dll\" is not blocked. Go to the properties of the file and select Unblock if necessary.</p> <p></p> Microsoft Report Builder <p>In report properties:</p> <ol> <li> <p>Add References to \u201cBarcodeLib.dll\u201d and \u201cSystem.Drawing.dll\u201d from the following:</p> <ul> <li>BarcodeLib.dll (use server folder from above, i.e. standalone / full server)</li> <li>System.Drawing.dll (C:\\Windows\\Microsoft.NET\\Framework\\v2.0.50727\\System.Drawing.dll)</li> </ul> </li> <li> <p>Insert the code: </p> <ul> <li> <p>For Code 3of9 barcode: <pre><code>    Public Function Convert(Text As String) As Byte()\n        Dim b As System.Drawing.Bitmap\n        bar.Alignment = BarcodeLib.AlignmentPositions.LEFT\n        bar.IncludeLabel = False\n        bar.RotateFlipType = Drawing.RotateFlipType.RotateNoneFlipNone\n        b = bar.Encode(BarcodeLib.TYPE.CODE39Extended, Text, 200, 15)\n        Dim bitmapData As Byte() = Nothing\n        Using ms As New System.IO.MemoryStream()\n            b.Save(ms, System.Drawing.Imaging.ImageFormat.Bmp)\n            bitmapData = ms.ToArray()\n        End Using\n        Return bitmapData\n    End Function\n</code></pre></p> </li> <li> <p>For Code128 barcode: <pre><code>    Public Function Convert128(Text As String) As Byte()\n        Dim b As System.Drawing.Bitmap\n        bar.Alignment = BarcodeLib.AlignmentPositions.LEFT\n        bar.IncludeLabel = False\n        bar.RotateFlipType = Drawing.RotateFlipType.RotateNoneFlipNone\n        b = bar.Encode(BarcodeLib.TYPE.CODE128, Text, 400, 50)\n        Dim bitmapData As Byte() = Nothing\n        Using ms As New System.IO.MemoryStream()\n            b.Save(ms, System.Drawing.Imaging.ImageFormat.Bmp)\n            bitmapData = ms.ToArray()\n        End Using\n        Return bitmapData\n    End Function\n</code></pre></p> </li> </ul> <p></p> </li> </ol> <p>In image properties:</p> <ul> <li>Use an Image with the following settings:<ul> <li>For Code3of9 Barcode:     Image source: Database     Expression: =Code.Convert(\"\" &amp; Fields!DocumentNumber.Value &amp; \"\")     MIME Type: image/bmp     Size: Fit Proportional</li> <li>For Code128 Barcode:     Image source: Database     Expression: =Code.Convert(Fields!DocumentNumber.Value)     MIME Type: image/bmp     Size: Fit Proportional</li> </ul> </li> </ul> <p></p>"},{"location":"third-party-integration/GettingStarted/","title":"GettingStarted","text":""},{"location":"third-party-integration/GettingStarted/#getting-started","title":"Getting Started","text":""},{"location":"third-party-integration/GettingStarted/#integration-to-granite","title":"Integration to Granite:","text":"<p>This document details the tools and information needed to integrate with Granite WMS.</p> <p>What will be covered:</p> <ul> <li>Granite's APIs</li> <li>Detailing business objects</li> <li>Relationships between the business objects</li> <li>Instruction on authentication to make calls</li> <li>An example of a GET, POST, and  DELETE on one of the business objects. </li> </ul>"},{"location":"third-party-integration/GettingStarted/#granite-apis","title":"Granite APIs:","text":"<p>Granite operates using two APIs:  - Webservice API: handles the business processes E.g picking or moving stock - Repository API : handles the CRUD functionality of the business objects. </p> <p>For the purposes of integration with Granite, i.e maintaining documents , masteritems, locations, and trading partners,  the Repository API will cover 99% of use cases and, as such, shall be the only API detailed in this document. </p> <p>Detailing all of the Repository API calls will not be covered here as there is full Swagger documentation to reference for each call. To view the swagger documentation please go to  localRepoAPIaddress/swagger-ui/  e.g. (https://granite.com:40196/swagger-ui/)</p>"},{"location":"third-party-integration/GettingStarted/#business-objects","title":"Business objects:","text":"<p>Granite makes use of six core business objects. While there are other business objects used in Granite, these six represent the core functionality.</p> <ul> <li> <p>Locations: are uniquely identified by a Barcode. Used to identify something as specific as a shelf or as general as an area in a warehouse. E.g Name: Cage A Shelf  3 Row 2 Barcode: A-3-2 or Name: Dispatch Code: DIS </p> </li> <li> <p>MasterItems: are the identities of specific products and are uniquely identified using a Code. E.g. Code: ABCLZZ110 Product: KL371X ABRASIVE CLOTH 230 x 280mm</p> </li> <li> <p>TradingPartners: are any parties that will be listed on a document as either a customer or supplier. Trading partners are set up per Document type and are uniquely identified with a Code. E.g. Code: AVO15 Name: Avondale Confectionary </p> </li> <li> <p>Documents: are the objects that represent sales orders, purchase orders, transfers, or manufacturing documents (documents are generic in Granite and represent any of the previously listed types). They can be considered the documents Header and are uniquely represented by a Number. E.g. A sales order for trading partner AVO15 Number: SO001263</p> </li> <li> <p>DocumentDetails: are the lines of the document and are uniquely assigned to a specific Document. E.g. There are multiple documentdetail entries that are assigned to SO001263 that detail the contents of the order. </p> </li> <li> <p>TrackingEntities: represent the stock/physical goods in the system and are uniquely identified with a Barcode. A single tracking entity can represent only one masteritem. E.g. Barcode: T00000124 represents a quantity of 5 sheets of master item ABCLZZ110.</p> </li> </ul>"},{"location":"third-party-integration/GettingStarted/#business-object-relationships","title":"Business object relationships","text":""},{"location":"third-party-integration/GettingStarted/#example-calls","title":"Example calls:","text":"<p>Following are a few examples of calls made to the repository API to provide some initial context. The calls for all the other objects are very similar so will not be detailed as their calls can be found in the swagger documention.  </p>"},{"location":"third-party-integration/GettingStarted/#authenticate","title":"Authenticate:","text":"<p>The first call is /auth to authenticate for all following calls. The security uses cookies so if the same client is used this will only have to be called once per set of calls. The format for the examples use json but xml, jsv, and csv are also supported  If any other call is made without calling authorisation first it will return: 401 Unauthorized <pre><code>POST https://granite.com:40196/auth HTTP/1.1\nAccept: application/json\nContent-Type: application/json\nContent-Length: length\n\n{\"UserName\":\"username\",\"Password\":\"password\"}\n</code></pre></p>"},{"location":"third-party-integration/GettingStarted/#locations","title":"Locations:","text":"<p>Following are examples of GET, POST, DELETE calls on the Location business object: <pre><code>GET https://granite.com:40196/Locations/{Barcode}?Barcode=DIS HTTP/1.1\nAccept: application/json\n</code></pre></p> <p><pre><code>POST https://granite.com:40196/Locations HTTP/1.1\nAccept: application/json\nContent-Type: application/json\nContent-Length: length\n\n{\"Body\":{\"Name\":\"ExampleLocation\",\"Barcode\":\"EL123\",\"Site\":\"\",\"isActive\":True,\"NonStock\":false,\"ERPLocation\":\"ERP1\",\"Category\":\"\",\"Type\":\"\",\"Status\":\"\",\"Width\":0,\"Length\":0,\"Height\":0,\"MaximumWeight\":0,\"ERPIdentification\":\"ERPid123\",\"AuditDate\":\"05/05/2023\",\"AuditUser\":\"ErpSystem\",\"Version\":0}}\n</code></pre> The same call can be used to modify the location by providing the granite id as part of the call: <pre><code>POST https://granite.com:40196/Locations HTTP/1.1\nAccept: application/json\nContent-Type: application/json\nContent-Length: length\n\n{\"Body\":{\"ID\":6064,\"Name\":\"NewName\",\"Barcode\":\"EL123\",\"Site\":\"\",\"isActive\":True,\"NonStock\":false,\"ERPLocation\":\"ERP1\",\"Category\":\"\",\"Type\":\"\",\"Status\":\"\",\"Width\":0,\"Length\":0,\"Height\":0,\"MaximumWeight\":0,\"ERPIdentification\":\"ERPid123\",\"AuditDate\":\"05/05/2023\",\"AuditUser\":\"ErpSystem\",\"Version\":0}}\n</code></pre> <pre><code>DELETE https://granite.com:40196/Locations/{Barcode}?Barcode=EL123 HTTP/1.1\nAccept: application/json\n</code></pre></p>"},{"location":"tools/","title":"Tools","text":"<p>Here you can find recommended tools and tutorials that can help you work more efficiently.</p>"},{"location":"tools/jaeger/","title":"Jaeger","text":""},{"location":"tools/jaeger/#jaeger","title":"Jaeger","text":"<p>Jaeger is an observability platform that allows you to view a complete picture of what happens across all of Granite's various layers when a user does something. This is almost like looking at the logs, but instead of having to hunt down the specific entry that corresponds to what you're looking at in another file, the correlation is all done for you.</p>"},{"location":"tools/jaeger/#setup","title":"Setup","text":"<p>In order to use Jaeger, you will need the complete GraniteTelemetry pack installed. This pack includes 3 components:</p> <ul> <li>Elasticsearch - The database that stores the telemetry information</li> <li>Jaeger Collector - The service that receives all of the trace data from Granite applications and stores it in Elasticsearch</li> <li>Jaeger UI - The front end that allows you to view and query trace data stored in Elasticsearch</li> </ul>"},{"location":"tools/jaeger/#the-easy-way","title":"The easy way","text":"<p>The easiest way is to install GraniteTelemetry alongside the rest of Granite WMS, using Scaffold. If you select GraniteTelemetry as one of the applications to install, Scaffold will guide you through the process.</p>"},{"location":"tools/jaeger/#the-manual-way","title":"The manual way","text":"<p>If you need to install Jaeger from scratch, you can use the <code>install.ps1</code> script in the GraniteTelemetry folder.</p> <p>Note</p> <p>If you are running the installation script manually, please ensure that any existing installations have been uninstalled before attempting the install. If you are not sure if any components are already installed, you can run the <code>uninstall.ps1</code> script to make certain they are removed.</p> <p>To run the script, you can execute it from powershell. When you do, ensure that you pass the necessary parameters in:</p> <pre><code>.\\install.ps1 -ElasticSearchMemory \"500m\" -ElasticSearchPort 40060 -JaegerCollectorHostPort \"192.168.0.41:40061\" -JaegerUIHostPort \"192.168.0.41:40062\"\n</code></pre> <ul> <li> <p>ElasticSearchMemory:</p> <p>The amount of memory that Elasticsearch can use.  You can specify 10 gigabytes as \"10g\" or 500 megabytes as \"500m\". At a bare minimum, you should allow Elasticsearch 500m of memory.  The more users your site has, the more memory will be required to ensure that all trace data is captured.</p> </li> <li> <p>ElasticSearchPort:</p> <p>The port number that Elasticsearch will use. Elasticsearch will always be bound to localhost.</p> </li> <li> <p>JaegerCollectorHostPort:</p> <p>The IP address or hostname and port number that Jaeger Collector will use.  Take note of this address, you will need to set this address as the <code>CollectorEndpoint</code> in the appsettings.json file of each application that will send trace data to be recorded.</p> </li> <li> <p>JaegerUIHostPort:</p> <p>The IP address or hostname and port number that Jaeger UI will use. Take note of this address, you will use this address to browse to the page where you can query the trace data.</p> </li> </ul>"},{"location":"tools/jaeger/#elasticsearch-ilm-policy","title":"Elasticsearch ILM policy","text":"<p>The Index Lifecycle Management policy determines how long trace data is kept in the Elasticsearch database.  By default, the policy is that trace data will be deleted once it is 30 days old.</p> <p>You can configure the policy by posting a new one to the Elasticsearch API once Elasticsearch is installed.</p> <p>To change the number of days to keep trace data, you only need to change the <code>min_age</code> property</p> <pre><code>PUT /_ilm/policy/jaeger-ilm-policy HTTP/1.1\ncontent-type: application/json\n\n{\n  \"policy\": {\n    \"phases\": {\n      \"hot\": {\n        \"min_age\": \"0ms\",\n        \"actions\": {\n          \"rollover\": {\n            \"max_age\": \"1d\"\n          },\n          \"set_priority\": {\n            \"priority\": 100\n          }\n        }\n      },\n      \"delete\": {\n        \"min_age\": \"30d\",\n        \"actions\": {\n          \"delete\": {}\n        }\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"tools/jaeger/#traces-spans","title":"Traces &amp; spans","text":"<p>Jaeger records each user action and the related backend operations and stores them together in a trace.  A trace is made up of spans, each span reflecting a specific part of the system that was triggered as a result of a user action.</p> <p>Here we can see traces representing multiple steps in a TAKEON process: </p> <p>We can see that there are errors on the final step. Clicking on the trace allows us to drill down and see the spans that make up this trace. Here we can see where the errors are actually coming from: </p> <p>Drilling down further into the labelprint-service entry we can see each of the logs that are related to this request, as well as the error message that was returned: </p>"},{"location":"tools/jaeger/#querying-jaeger","title":"Querying Jaeger","text":"<p>You can select the service that you want to query from the dropdown. </p> <p>If you are running multiple instances of Granite that are pointing to the same telemetry collector,  the service name can be set in each of the services' config files. This will allow you to distinguish between the environments in Jaeger.</p> <p>The Operation dropdown allows you to select a specific operation on the API to filter by.  For APIs this corresponds to the operation name from the ServiceStack <code>/metadata</code> page. For the Process App, the operation name will be the name of the process and the step name.</p> <p>You can use the tags of a span to query Jaeger for trace data.</p> <p>You can only search for exact matches on tags. There is no LIKE operator in Jaeger.</p> <p>Click the question mark above the tags field for more details on filtering using tags.</p>"},{"location":"tools/jaeger/#tags","title":"Tags","text":"<p>You can find tags by expanding a trace to see what each service is recording.</p> <p>Process App tags example: </p> <p>Business API tags example: </p> <p>There are a lot of tags included by default, but we've added some Granite specific ones to help you find what you're looking for.  See the sections below for the specific tags added to each service.</p>"},{"location":"tools/jaeger/#process-app","title":"Process App","text":"<ul> <li><code>user.name</code>  The username of the user performing this transaction</li> <li><code>process.name</code>  Name of the process </li> <li><code>process.step.isfinal</code>  True if it is the final step of the process, otherwise false</li> <li><code>process.step.name</code>  Name of the process step</li> <li><code>process.step.value</code> The value the user entered on this step.</li> </ul>"},{"location":"tools/jaeger/#business-api","title":"Business API","text":"<ul> <li><code>user.name</code>  The username of the user making the request</li> <li><code>session.authprovider</code>  The authentication method being used for this request (credentials / api-key)</li> <li><code>request.origin</code> Only used when the request comes from SQLCLR, most other requests will show the parent span in Jaeger's trace waterfall. </li> <li><code>operation</code>  The operation that was performed on the API. This corresponds to the Operations on the <code>/metadata</code> page</li> </ul>"},{"location":"tools/jaeger/#custodian-api","title":"Custodian API","text":"<ul> <li><code>user.name</code>  The username of the user making the request</li> <li><code>session.authprovider</code>  The authentication method being used for this request (credentials / api-key)</li> <li><code>request.origin</code> Only used when the request comes from SQLCLR, most other requests will show the parent span in Jaeger's trace waterfall. </li> <li><code>operation</code>  The operation that was performed on the API. This corresponds to the Operations on the <code>/metadata</code> page</li> </ul>"},{"location":"tools/jaeger/#scheduler","title":"Scheduler","text":"<ul> <li><code>job.name</code>  Name of the job as defined in the ScheduledJobs.Name column</li> <li><code>job.type</code>  The type of job (EMAIL, STOREDPROCEDURE, INJECTED)</li> </ul>"},{"location":"tools/jaeger/#labelprinting-zpl","title":"Labelprinting ZPL","text":"<ul> <li><code>request.origin</code> Only used when the request comes from SQLCLR, most other requests will show the parent span in Jaeger's trace waterfall. </li> <li><code>operation</code>  The operation that was performed on the API. This corresponds to the Operations on the <code>/metadata</code> page</li> </ul>"},{"location":"tools/jaeger/#integration-service","title":"Integration Service","text":"<ul> <li><code>request.origin</code> Only used when the request comes from SQLCLR, most other requests will show the parent span in Jaeger's trace waterfall. </li> <li><code>operation</code>  The operation that was performed on the API. This corresponds to the Operations on the <code>/metadata</code> page</li> </ul>"},{"location":"tools/jam/","title":"Jam.dev","text":"<p>Jam.dev is an awesome tool that can help you communicate more efficiently with the dev team. </p> <p>It's a chrome extension that allows you to capture a video of the end user action, as well as the browser dev tools output - in a matter of seconds.</p>"},{"location":"tools/jam/#tutorial-video","title":"Tutorial Video","text":"<p>Get Jam here: https://jam.dev/ \ud83c\udf53</p>"},{"location":"tools/nifi/","title":"Apache NiFi","text":"<p>Warning</p> <p>Under construction</p>"},{"location":"tools/nifi/#setup","title":"Setup","text":"<p>Download the following:</p> <ul> <li>NiFi Standard</li> <li>Java development kit x64 Compressed Archive</li> <li>NSSM</li> </ul> <p>Once you have extracted all the NiFi files, create a new folder inside the folder you will run Nifi from called <code>jdk</code>. Paste all of the files from the JDK compressed archive into the jdk folder:</p> <p></p> <p>Now we need to point NiFi to where we have the JDK installed. Browse into NiFi's <code>bin</code> folder and edit the <code>nifi-env.cmd</code> file to look like this:</p> <pre><code>rem Set application home directory based on parent directory of script location\npushd %~dp0..\nset NIFI_HOME=%CD%\npopd\n\nrem Set Java version\nset JAVA_HOME=%NIFI_HOME%\\jdk\n\nrem Set run directory for process identifier tracking\nset NIFI_PID_DIR=%NIFI_HOME%\\run\n\nrem Set application log directory\nset NIFI_LOG_DIR=%NIFI_HOME%\\logs\n</code></pre> <p>By default NiFi will run on port 8443. If you need to change the port, open the <code>nifi\\conf\\nifi.properties</code> file and set the port on line 162:</p> <p></p> <p>Next, copy the <code>nssm.exe</code> into the the <code>nifi\\bin</code> folder.  Open a terminal window and browse to the <code>nifi\\bin</code> folder, then execute the following</p> <pre><code>nssm install NiFi\n</code></pre> <p>Enter the path to the <code>nifi.cmd</code> file and provide Nssm with the folder path and start argument, then click Install Service:</p> <p></p>"},{"location":"tools/superset/","title":"Superset","text":"<p>Apache Superset is an open-source business intelligence and data visualization platform that allows users to explore and visualize data through interactive dashboards and charts. It provides a user-friendly interface for creating sophisticated visualizations without requiring extensive coding knowledge, making it accessible for both technical and non-technical users to analyze and present data insights.</p> <p></p>"},{"location":"tools/superset/#setup","title":"Setup","text":"<p>All files for standalone Superset install can be found in the dropbox folder: Granite Release/ApacheSuperset</p>"},{"location":"tools/superset/#install-postgresql","title":"Install Postgresql","text":"<p>The first step is to install Postgresql 18 with the included installer postgresql-18.1-2-windows-x64.exe</p> <p>It is a simple click next installer. </p> <p>Be sure to leave the install path as \"C:\\Program Files\\PostgreSQL\"</p> <p></p> <p>And uncheck Stackbuilder from the components to install</p> <p></p> <p>Set the password as you please, just remember it.</p> <p></p> <p>Leave the port as the standard</p> <p></p>"},{"location":"tools/superset/#postgresql-database-and-user","title":"Postgresql Database and User","text":"<p>Now that Postgresql is installed. Run pgAdmin. </p> <p></p> <p>Then run the script provided in the folder (setup_superset_db.sql) to create the user and the database needed. You will have to run each one separately by highlighting it. Be sure to run each statement. </p> <p></p>"},{"location":"tools/superset/#install-superset","title":"Install Superset","text":"<p>Now the easy part. If you have completed the above steps. Run the install_superset.bat file. This will create superset as a windows service. </p> <p></p> <p>You can now start the service.</p> <p></p> <p>And Browse to http://localhost:8088 to log in. Please reach out to the development team for the password. Unless you have the wisdom to guess it.</p> <p></p>"},{"location":"tools/superset/#iis-config","title":"IIS Config","text":"<p>By default, Superset runs on http. This is fine while testing but if it is going to be used in production then it is essential to have it served via https. In order to do this, you can create a reverse proxy in IIS. </p> <p>You will first need to install Application Request Routing</p> <p>Once installed, in IIS double click Application Request Routing to open it. (You may need to close IIS and open it again for it to appear)</p> <p></p> <p>Then in server proxy settings</p> <p></p> <p>Check enable proxy. You can leave everything as default</p> <p></p> <p>Now, create a folder named superset in \"C:\\inetpub\"</p> <p></p> <p>Copy the web.config file from the SupersetInstall/iis config folder to that new folder.</p> <p></p> <p>Once you have done that, you can create a new IIS website pointing to \"C:\\inetpub\\superset\" and set it up as https. </p> <p></p>"},{"location":"updates/","title":"Index","text":"<p>Each major release of Granite WMS addresses common concerns that serve as key motivators for upgrades and reflect our best practice in keeping up with the latest technologies.</p> <p>Each major version address the following:</p>"},{"location":"updates/#security-enhancements","title":"Security Enhancements","text":"<ul> <li>We keep in line with the latest .NET upgrades, which address security vulnerabilities and improve system protection.</li> <li>Regular updates enhance security measures to prevent potential threats.</li> </ul>"},{"location":"updates/#performance-improvements","title":"Performance Improvements","text":"<ul> <li>System optimizations leverage the latest .NET upgrades to enhance speed and efficiency.</li> <li>Upgraded .NET framework/runtime allows for better system stability and scalability.</li> <li>Adoption of the latest .NET, programming language enhancements, and other underlying technologies for better performance and maintainability.</li> </ul>"},{"location":"updates/#compatibility-support","title":"Compatibility &amp; Support","text":"<ul> <li>Hotfixes are available for the latest version and the previous version.</li> <li>Product updates, including minor feature enhancements, are available for the latest version.</li> </ul>"},{"location":"updates/#additionally","title":"Additionally","text":"<ul> <li>Automated end-to-end (E2E) testing and unit tests to ensure stability and reliability.</li> <li>Source code versioning and backup for secure and efficient development lifecycle management. (Github)</li> <li>Regular security scans to identify and address vulnerabilities proactively. (Github)</li> </ul>"},{"location":"updates/#version-specific","title":"Version specific","text":"<p><code>Please review the what's new documentation and discuss with your Granite WMS consultant.</code></p> <ul> <li>Each major release includes an automated migration process.</li> <li>Migration considers backward compatibility to minimize disruptions.</li> <li>Custom implementations should be reviewed and planned for each upgrade.</li> <li>We recommend an adoption plan for new features to maximize benefits.</li> </ul> <p>We hope you enjoy our latest version of Granite WMS!</p>"},{"location":"updates/release-notes/","title":"Hotfixes","text":""},{"location":"updates/release-notes/#2025-12-09-2025-12-15","title":"2025-12-09 - 2025-12-15","text":"<p>Process App</p> <ul> <li>Date 2025-12-12</li> <li>Version 7.0.3.1 &amp; 6.0.0.24</li> <li>Fix packing New carrying entity button not printing label</li> </ul> <p>DocumentImport DataGrid</p> <ul> <li>Date 2025-12-10</li> <li>Fix column naming for LineType and LineStatus</li> </ul> <p>Granite.Repository.ServiceInterface.dll</p> <ul> <li>Date 2025-12-10</li> <li>7.0.0.4 &amp; 6.0.0.8</li> <li>Fix Data Import setting document lines\u2019 Status to the header\u2019s Status</li> </ul> <p>Granite.Repository.ServiceModel.dll</p> <ul> <li>Date 2025-12-10</li> <li>7.0.0.2 &amp; 6.0.0.2</li> <li>Fix Data Import error messages not returned</li> </ul> <p>Granite.Business.API.ServiceModel.dll</p> <ul> <li>Date 2025-12-10</li> <li>7.0.0.4 &amp; 6.0.0.9</li> <li>Fix move and scrap validation for barcodes containing special chars</li> <li>NOTE: the service model dll must be updated in both the Business API AND Process App</li> </ul>"},{"location":"updates/release-notes/#2025-12-02-2025-12-08","title":"2025-12-02 - 2025-12-08","text":"<p>Granite.Integration.Accpac.dll</p> <ul> <li>Date 2025-12-08</li> <li>6.0.0.4 &amp; 7.0.0.1</li> <li>Fix transfer rounding action qty before summarization instead of after</li> <li>Always round action qty to int for manufacture transactions (Accpac throws error on decimal)</li> </ul> <p>Granite.Business.API.ServiceInterface.dll</p> <ul> <li>Date 2025-12-04</li> <li>6.0.1.0 &amp; 7.0.1.0</li> <li>Fix receive &amp; return not setting tracking entity manufacture date</li> <li>Change consume, manufacture and transfer ActionQtyAllowance to decimal instead of int</li> <li>Set audit date and audit user when creating carrying entities</li> </ul>"},{"location":"updates/release-notes/#2025-11-25-2025-12-01","title":"2025-11-25 - 2025-12-01","text":"<p>Process App</p> <ul> <li>Date 2025-11-28</li> <li>7.0.3.0 &amp; 6.0.0.23</li> <li>Support business rules on packing</li> </ul> <p>Business Api</p> <ul> <li>Date 2025-11-28</li> <li>Granite.Business.API.ServiceInterface.dll 7.0.0.10 &amp; 6.0.0.24</li> <li>Granite.Business.API.ServiceModel.dll 7.0.0.3 &amp; 6.0.0.8</li> <li>Added packing business rule ValidateAgainstDocumentQty - validates the PackQty against the Qty field instead of the ActionQty field</li> <li>Fix consume inventory validate operation not properly applying ActionQtyAllowance business rule</li> </ul>"},{"location":"updates/release-notes/#2025-11-18-2025-11-24","title":"2025-11-18 - 2025-11-24","text":"<p>Web desktop</p> <ul> <li>Date 2025-11-20</li> <li>Version 7.0.7 &amp; 6.1.6</li> <li>Fix: Quality Control &amp; Status Control scrap giving and undefined error</li> </ul> <p>Process App</p> <ul> <li>Date 2025-11-20</li> <li>Version 5.0.0.8</li> <li>Fix: Reclassify object reference error when invalid location entered</li> <li>Fix: Transfer Dynamic invalid input error when trying to transfer a pallet</li> </ul> <p>Granite.DomainModel.dll</p> <ul> <li>Date 2025-11-20</li> <li>Version 5.0.1.3</li> <li>Fix: tracking entity removed from pallet when reclassified to a new location</li> <li>Fix: Manufacture and Receiving fail to create transaction &amp; update document but leave TrackingEntity with 0 qty.</li> </ul> <p>Granite.Business.API.ServiceInterface.dll</p> <ul> <li>Date 2025-11-19</li> <li>Version 6.0.0.23</li> <li>Fix: timeout reversing transactions with a pallet caused by cartesian explosion</li> </ul>"},{"location":"updates/release-notes/#2025-11-03-2025-11-10","title":"2025-11-03 - 2025-11-10","text":"<p>Granite.Integration.Evo.Job.dll </p> <ul> <li>Date 2025-11-05</li> <li>Version 7.0.0.1</li> <li>Fix: Include the document que fix from 6.0.0.1 that was not ported over to the v7 branch</li> </ul> <p>Granite Business API and Process App</p> <ul> <li>Date 2025-11-06</li> <li>Fix: Include business rules in validation steps of Manufacture, Consume, and Transfer allowing the business rules to take affect even when the lines ActionQty = Qty of the line.</li> </ul> <p>Granite.Business.API.ServiceModel.dll</p> <ul> <li>Version 6.0.0.7, 7.0.0.2</li> </ul> <p>Granite.Business.API.ServiceInterface.dll</p> <ul> <li>Version 6.0.0.22 ,7.0.0.9</li> </ul> <p>Granite.Process.App.exe/dll</p> <ul> <li>Version  6.0.0.22, 7.0.2.0</li> </ul>"},{"location":"updates/release-notes/#2025-10-21-2025-10-27","title":"2025-10-21 - 2025-10-27","text":"<p>Granite.Repository.ServiceInterface.dll</p> <ul> <li>Date 2025-10-27</li> <li>Version 6.0.0.7, 7.0.0.3</li> <li>Fix \u201cCannot find step for process\u201d error when process step lookups exist for other users but not the current one.</li> </ul> <p>Granite Process App</p> <ul> <li>Date 2025-10-22</li> <li>Version 7.0.1.5, 6.0.0.21</li> <li>Fix conversion for decimals stored in exponential notation</li> <li>Fix packing carrying entity step not creating new BOX when barcode entered</li> <li>7.0.1.5 only:<ul> <li>Support new scale service</li> </ul> </li> </ul> <p>Granite.Business.API.DbContext.dll</p> <ul> <li>Date 2025-10-22</li> <li>Version 7.0.0.1, 6.0.0.1</li> <li>Remove decimal precision from code - use precision from db schema</li> </ul>"},{"location":"updates/release-notes/#2025-10-14-2025-10-20","title":"2025-10-14 - 2025-10-20","text":"<p>Granite.Business.API.ServiceInterface.dll</p> <ul> <li>Date 2025-10-20</li> <li>Version 7.0.0.8, 6.0.0.21</li> <li>Fix master item with special chars failing to validate</li> </ul>"},{"location":"updates/release-notes/#2025-10-07-2025-10-13","title":"2025-10-07 - 2025-10-13","text":"<p>Granite.Process.App.exe</p> <ul> <li>Date 2025-10-07</li> <li>Version 7.0.1.2, 6.0.0.20</li> <li>Support picking with uom conversion</li> </ul> <p>Granite.Business.API.ServiceInterface.dll</p> <ul> <li>Date 2025-10-07</li> <li>Version 6.0.0.18, 7.0.0.5</li> <li>Fix performance issue picking pickslip lines caused by inefficient EF core query</li> <li>Support pickslip reversal with ReversePickslipOnPickReversal system setting</li> <li>Support picking with UOM conversion</li> </ul> <p>Granite.Process.App.exe</p> <ul> <li>Date 2025-10-07</li> <li>Version 7.0.1.1, 6.0.0.19, 5.0.0.7</li> <li>Fix issue allowing users to select \u2018Yes\u2019 multiple times when on confirmation step.</li> </ul>"},{"location":"updates/release-notes/#2025-09-30-2025-10-06","title":"2025-09-30 - 2025-10-06","text":"<p>Granite.Integration.PastelEvo.dll</p> <ul> <li>Date 2025-10-01</li> <li>Version 7.0.0.1, 6.0.0.4, 5.0.0.2</li> <li>Fix error on dynamic pick post \u201cNo warehouse specified for warehouse item\u2026\u201d</li> </ul>"},{"location":"updates/release-notes/#2025-09-23-2025-09-29","title":"2025-09-23 - 2025-09-29","text":"<p>Granite.Business.API.ServiceInterface.dll</p> <ul> <li>Date: 2025-09-25</li> <li>Version 6.0.0.16, 7.0.0.4</li> <li>Fix: allow take on of 0 qty</li> </ul> <p>GraniteLabelPrintingZPL.ServiceInterface.dll</p> <ul> <li>Date 2025-09-25</li> <li>Version 6.0.0.1, 7.0.0.1</li> <li>Improved performance when printing multiple TrackingEntities in a single request</li> </ul>"},{"location":"updates/release-notes/#2025-09-10-2025-09-16","title":"2025-09-10 - 2025-09-16","text":"<p>Granite.Repository.ServiceInterface</p> <ul> <li>Date 2025-09-16</li> <li>Version 6.0.0.6, 7.0.0.2</li> <li>Menu divider bug</li> </ul> <p>Process App</p> <ul> <li>Date 2025-09-10</li> <li>Version 7.0.1.0</li> <li>Add support for scale integration (! using same scale service)</li> </ul> <p>Webdesktop</p> <ul> <li>Date 2025-09-10</li> <li>Version 7.0.6</li> <li>New add support to publish DataGrid from enquiry</li> <li>Fix TrackingEntity lookup transaction not showing results</li> <li>Fix Remove Print button from Variance Correction</li> <li>Fix: Allow range selection on Status control grid (quality control / stock take hold)</li> </ul>"},{"location":"updates/release-notes/#2025-09-02-2025-09-08","title":"2025-09-02 - 2025-09-08","text":"<p>Process App</p> <ul> <li>Date 2025-09-08</li> <li>Version 7.0.0.3</li> <li>Fix return to correct step on process submit error when there are step 100s</li> </ul>"},{"location":"updates/release-notes/#2025-08-19-2025-08-25","title":"2025-08-19 - 2025-08-25","text":"<p>Granite.Business.API.ServiceInterface.dll</p> <ul> <li>Date 2025-08-21</li> <li>Version 7.0.0.3 &amp; 6.0.0.15</li> <li>Fix takeon to use master item alias\u2019 uom conversion</li> </ul> <p>GraniteScheduler.ServiceInterface.dll</p> <ul> <li>Date 2025-08-22</li> <li>Version 5.0.1.0, 6.0.1.0, 7.0.1.0</li> <li>Add Archive and Delete Table Jobs</li> </ul>"},{"location":"updates/release-notes/#2025-08-12-2025-08-18","title":"2025-08-12 - 2025-08-18","text":"<p>Process App</p> <ul> <li>Date 2025-08-15</li> <li>Version 7.0.0.2</li> <li>Support optional fields on transaction submit</li> <li>Fix MasterItem \u201cNot Found\u201d when it contains a special char</li> </ul> <p>Granite.Business.API.ServiceInterface.dll</p> <ul> <li>Date 2025-08-15</li> <li>Version 7.0.0.2</li> <li>Add Transfer Business rule AlwaysSplitTrackingEntity</li> <li>Add optional fields to transaction submit</li> <li>Fix allow receive to location with erp location on line with empty ToLocation</li> <li>Fix takeon not capturing manufacture date</li> </ul> <p>Granite.Business.API.ServiceModel.dll</p> <ul> <li>Date 2025-08-15</li> <li>Version 7.0.0.1</li> <li>Fix MasterItem \u201cNot Found\u201d when it contains a special char</li> <li>Add optional fields to transaction submit</li> </ul> <p>Granite.Business.API.ServiceInterface.dll</p> <ul> <li>Date 2025-08-15</li> <li>Version 6.0.0.14</li> <li>Add Transfer Business rule AlwaysSplitTrackingEntity</li> </ul> <p>Granite.Repository.ServiceInterface.dll</p> <ul> <li>Date 2025-08-15</li> <li>Version 6.0.0.5 &amp; 7.0.0.1</li> <li>Support updating pickslip lines</li> <li>Prevent saving process divider with same name</li> <li>Fix error fetching document line locations</li> </ul> <p>Granite.Repository.ServiceModel.dll</p> <ul> <li>Date 2025-08-15</li> <li>Version 6.0.0.1 &amp; 7.0.0.1</li> <li>Support updating pickslip lines</li> <li>Fix deleting process step lookups with special chars</li> <li>Fix error fetching document line locations</li> </ul> <p>WebDesktop</p> <ul> <li>Date 2025-08-15</li> <li>6.1.5, 7.0.4</li> <li>Fix: Pickslip lines edit, allowing edit of qty, comment and instruction</li> <li>Fix deleting process step lookups with special chars</li> <li>Fix: Menu Divider,  prevent duplicate Names, update/maintain color field</li> <li>Fix: Move, Adjustment Integration - try to integrate even when URL not specified</li> <li>Fix: Reversal error (invalid URL)</li> </ul> <p>Process App</p> <ul> <li>Date 2025-08-13</li> <li>7.0.0.1</li> <li>Fix bug in process function mapping on subsequent iterations of a process</li> </ul> <p>Granite.Business.API.ServiceModel.dll</p> <ul> <li>Date 2025-08-12</li> <li>6.0.0.6</li> <li>Fix MasterItem \u201cNot Found\u201d when it contains a special char</li> </ul>"},{"location":"updates/release-notes/#2025-08-05-2025-08-11","title":"2025-08-05 - 2025-08-11","text":"<p>Granite.Business.API.ServiceInterface.dll</p> <ul> <li>Date 2025-08-07</li> <li>6.0.0.13</li> <li>Fix allow receive to location with erp location on line with empty ToLocation</li> </ul> <p>Database SQLCLR</p> <ul> <li>Date 2025-08-08</li> <li>Version 6.0.0.1</li> <li>Remove Pack size parameter from the CLR Takeon procedure</li> </ul>"},{"location":"updates/release-notes/#2025-07-29-2025-08-04","title":"2025-07-29 - 2025-08-04","text":"<p>Process App </p> <ul> <li>Date 2025-08-04</li> <li>Version 6.0.0.17</li> <li>Support optional fields with transaction submit</li> </ul> <p>Business Api</p> <ul> <li>Date 2025-08-04</li> <li>Granite.Business.API.ServiceInterface.dll 6.0.0.12</li> <li>Granite.Business.API.ServiceModel.dll 6.0.0.5</li> <li>Capture optional fields with transactions</li> </ul> <p>Granite.Integration.Evo.Job.dll</p> <ul> <li>Date 2025-07-29</li> <li>Version 6.0.0.1</li> <li>Fix error handling, continue processing documents when one document fails</li> </ul>"},{"location":"updates/release-notes/#2025-07-22-2025-07-28","title":"2025-07-22 - 2025-07-28","text":"<p>Process App</p> <ul> <li>Date 2025-07-23</li> <li>Version 6.0.0.16</li> <li>Fix takeon printing labels before optional fields finish capturing</li> </ul>"},{"location":"updates/release-notes/#2025-07-15-2025-07-21","title":"2025-07-15 - 2025-07-21","text":"<p>Granite.Business.API.ServiceInterface.dll</p> <ul> <li>Date 2025-07-18</li> <li>Version 6.0.0.10 &amp; 7.0.0.1</li> <li>Fix document lines not sorted by line priority</li> </ul>"},{"location":"updates/release-notes/#2025-07-08-2025-07-14","title":"2025-07-08 - 2025-07-14","text":"<p>Granite Process App </p> <ul> <li>Date 2025-07-14</li> <li>Version 6.0.0.15</li> <li>Fix error on optional field capture aborts capturing the rest of the fields.</li> </ul> <p>Granite Process App</p> <ul> <li>Date 2025-07-11</li> <li>Version 5.0.0.6</li> <li>Fix takeon optional fields not capturing</li> </ul> <p>Granite Process App</p> <ul> <li>Date 2025-07-10</li> <li>Version 6.0.0.14</li> <li>Fix \u201cNot Found\u201d error on picking when MasterItem has a trailing space</li> </ul> <p>Granite.Business.API.ServiceInterface.dll</p> <ul> <li>Date 2025-07-10</li> <li>Version 6.0.0.9</li> <li>Fix URL encoding issue on master item validation</li> </ul> <p>Granite.Custodian.ServiceInterface.dll</p> <ul> <li>Date 2025-07-10</li> <li>Version 6.0.0.2</li> <li>Fix background retries failing with object reference error.</li> </ul> <p>Granite.Email.ServiceInterface.dll</p> <ul> <li>Date 2025-07-10</li> <li>Version 5.0.1.3</li> <li>Fix background retries failing with object reference error.</li> </ul>"},{"location":"updates/release-notes/#2025-07-01-2025-07-07","title":"2025-07-01 - 2025-07-07","text":"<p>Granite.Business.API.ServiceModel.dll </p> <ul> <li>Date 2025-07-03</li> <li>Version 6.0.0.4</li> <li>Add support for Consume &amp; Manufacture business rules</li> </ul> <p>Granite.Business.API.ServiceInterface.dll</p> <ul> <li>Date 2025-07-03</li> <li>Version 6.0.0.8</li> <li>Add ActionQtyAllowance business rule to Consume &amp; Manufacture</li> </ul> <p>Process App</p> <ul> <li>Date 2025-07-03</li> <li>Version 6.0.0.13</li> <li>Add support for Consume &amp; Manufacture business rules</li> </ul>"},{"location":"updates/release-notes/#2025-06-17-2025-06-23","title":"2025-06-17 - 2025-06-23","text":"<p>Process App</p> <ul> <li>Date 2025-06-20</li> <li>Version 6.0.0.12</li> <li>Fix \u201cmethod not implemented\u201d error on Manufacture when there is a step 200</li> </ul>"},{"location":"updates/release-notes/#2025-06-10-2025-06-16","title":"2025-06-10 - 2025-06-16","text":"<p>Database SQLCLR</p> <ul> <li>Date 2025-06-13</li> <li>Version 5</li> <li>Remove Response json truncation</li> </ul> <p>Database SQLCLR</p> <ul> <li>Date 2025-06-10</li> <li>Version 6</li> <li>Added clr_Consume</li> <li>Added clr_Manufacture</li> <li>Fix clr_PrintLabel to work with https ZPL Label Print</li> </ul>"},{"location":"updates/release-notes/#2025-06-03-2025-06-09","title":"2025-06-03 - 2025-06-09","text":"<p>ProcessApp</p> <ul> <li>Date 2025-06-09</li> <li>Version 6.0.0.11</li> <li>Fix optional field capture for TakeOn</li> </ul> <p>Granite.Business.API.ServiceInterface.dll</p> <ul> <li>Date 2025-06-06</li> <li>Version 6.0.0.7</li> <li>Fix over transfer allowance for CarryingEntity and Partial TrackingEntity transfer</li> </ul>"},{"location":"updates/release-notes/#2025-05-27-2025-06-02","title":"2025-05-27 - 2025-06-02","text":"<p>Process App</p> <ul> <li>Date 2025-06-02</li> <li>Version 6.0.0.10</li> <li>Add support for Transfer business rules</li> </ul> <p>Granite.Business.API.ServiceInterface.dll, Granite.Business.API.ServiceModel.dll</p> <ul> <li>Date 2025-06-02</li> <li>Granite.Business.API.ServiceInterface.dll Version 6.0.0.6</li> <li>Granite.Business.API.ServiceModel.dll version 6.0.0.3</li> <li>Add ActionQtyAllowance business rule for transfers</li> </ul> <p>Granite.Integration.Accpac.Job.dll</p> <ul> <li>Date 2025-05-29</li> <li>Version 5.0.0.1 &amp; 6.0.0.1</li> <li>Set ERPSyncFailed = true when a line cannot be deleted in Granite because there are transactions against it</li> </ul>"},{"location":"updates/release-notes/#2025-05-20-2025-05-26","title":"2025-05-20 - 2025-05-26","text":"<p>Granite.Repository.ServiceInterface.dll</p> <ul> <li>Date 2025-05-21</li> <li>Version 6.0.0.5</li> <li>Fix batch validation on receiving and manufacture use barcode</li> </ul> <p>Granite.Repository.ServiceInterface.dll</p> <ul> <li>Date 2025-05-20</li> <li>Version 6.0.0.4</li> <li>Copy Document now zeros packed qty</li> </ul> <p>Granite.DomainModel.dll</p> <ul> <li>Date 2025-05-20</li> <li>Version 5.0.1.2</li> <li>Transfer overwriting qty on UseBarcode tracking entity instead of adding to it</li> </ul>"},{"location":"updates/release-notes/#2025-05-13-2025-05-19","title":"2025-05-13 - 2025-05-19","text":"<p>Web Desktop</p> <ul> <li>Date 2025-05-08</li> <li>Reversal error</li> </ul>"},{"location":"updates/release-notes/#2025-05-06-2025-05-12","title":"2025-05-06 - 2025-05-12","text":"<p>Web Desktop</p> <ul> <li>Date 2025-05-08</li> <li>Move, Scrap, Adjustment integration</li> </ul> <p>GraniteRepository.ServiceInterface.dll</p> <ul> <li>Date 2025-05-08</li> <li>Version 5.0.0.3, 6.0.0.2</li> <li>Delete process does not delete all process steps.</li> <li>TRANSFER Progress : status update of INTRANSIT,RECEIPT document not working</li> </ul> <p>Process App</p> <ul> <li>Date 2025-05-07</li> <li>Version 6.0.0.9</li> <li>Move transactions not being posted to integration service</li> </ul>"},{"location":"updates/release-notes/#2025-04-29-2025-05-05","title":"2025-04-29 - 2025-05-05","text":"<p>Process App</p> <ul> <li>Date 2025-05-05</li> <li>Version 6.0.0.8</li> <li>Fix error on manufacture use barcode step</li> </ul>"},{"location":"updates/release-notes/#2025-04-22-2025-04-28","title":"2025-04-22 - 2025-04-28","text":"<p>Process App</p> <ul> <li>Date: 2025-04-22</li> <li>Version 6.0.0.7</li> <li>Fix receiving empty use barcode step throwing error</li> </ul>"},{"location":"updates/release-notes/#2025-04-08-2025-04-14","title":"2025-04-08 - 2025-04-14","text":"<p>GraniteRepository.ServiceInterface.dll</p> <ul> <li>Date 2025-04-09</li> <li>Version 4.5.3.2, 5.0.0.2, 6.0.0.1</li> <li>Fix grid load time when view has CTE / subquerys</li> </ul>"},{"location":"updates/release-notes/#2025-03-25-2025-03-31","title":"2025-03-25 - 2025-03-31","text":"<p>Repo API</p> <ul> <li>Date 2025-03-28</li> <li>Version 4.5.3.1</li> <li>Fix CredentialsAuthProviderSync Error: Timeout expired, all pooled connections were in use.</li> </ul> <p>Process App</p> <ul> <li> <p>Date: 2025-03-26</p> </li> <li> <p>Version 6.0.0.6</p> </li> <li>Fixed receiving business rules not actually passed to business api.</li> </ul> <p>Granite.Integration.PastelEvo.dll</p> <ul> <li>Date: 2025-03-26</li> <li>Version 6.0.0.3</li> <li>New integration method RECEIVE_WITHOUT_SERIALS. Same as standard but does not post serial numbers for serialized items.</li> </ul>"},{"location":"updates/release-notes/#2025-03-18-2025-03-24","title":"2025-03-18 - 2025-03-24","text":"<p>Granite.Business.API.ServiceInterface.dll</p> <ul> <li>Date: 2025-03-24</li> <li>Version 6.0.0.4</li> <li>Serial number validation override business rule on receiving</li> </ul> <p>Granite.Business.API.ServiceModel.dll</p> <ul> <li>Date: 2025-03-24</li> <li>Version 6.0.0.2</li> <li>Add support for business rules to receiving</li> </ul> <p>Process App</p> <ul> <li>Date: 2025-03-24</li> <li>Version 6.0.0.5</li> <li>Add support for business rules to receiving</li> </ul> <p>Granite.Business.API.ServiceInterface.dll</p> <ul> <li>Date: 2025-03-18</li> <li>Version 6.0.0.3</li> <li>New business rule override serial number validation on picking</li> </ul> <p>Granite.Integration.PastelEvo.dll</p> <ul> <li>Date: 2025-03-18</li> <li>Version 6.0.0.2</li> <li>New integration method PICK_WITHOUT_SERIALS. Same as standard but does not post serial numbers for serialized items.</li> </ul>"},{"location":"updates/release-notes/#2025-03-11-2025-03-17","title":"2025-03-11 - 2025-03-17","text":"<p>dbo.API_QueryDocumentProgress</p> <ul> <li>Date: 2025-03-13</li> <li>Added columns<ul> <li>IntegrationReferences</li> <li>UnpostedTransactionCount</li> </ul> </li> </ul> <p>Process App</p> <ul> <li>Date: 2025-03-13</li> <li>Version 6.0.0.4</li> <li>Fixed serialization and deserialization of dates to match the business api, added DateTimeFormat to appsettings</li> </ul>"},{"location":"updates/release-notes/#2025-03-04-2025-03-10","title":"2025-03-04 - 2025-03-10","text":"<p>Evo Integration Provider</p> <ul> <li>Date: 2025-03-07</li> <li>Evo Provider versions 5.0.0.1 &amp; 6.0.0.1</li> <li>Add system settings to allow specify rounding on action qty for posting back to Evo</li> </ul>"},{"location":"updates/release-notes/#2025-02-25-2025-03-03","title":"2025-02-25 - 2025-03-03","text":"<p>ProcessApp &amp; Business API</p> <ul> <li>Date: 2025-02-25</li> <li>ProcessApp version 6.0.0.3</li> <li>Granite.Business.API.ServiceInterface.dll version 6.0.0.2</li> <li>Granite.Business.API.ServiceModel.dll version 6.0.0.1</li> <li>Fix Packing to allow using TrackingEntity barcode in place of MasterItem code</li> </ul>"},{"location":"updates/release-notes/#2025-02-18-2025-02-24","title":"2025-02-18 - 2025-02-24","text":"<ul> <li>Granite.Process.App<ul> <li>Date 2025-02-20</li> <li>Version 6.0.0.2</li> <li>Fix bug DestinationLocation step not being skipped for INTRANSIT transfers.</li> </ul> </li> </ul>"},{"location":"updates/release-notes/#2025-02-11-2025-02-17","title":"2025-02-11 - 2025-02-17","text":"<ul> <li>Granite.Business.API.ServiceInterface.dll<ul> <li>Date: 2025-02-12</li> <li>Version: 6.0.0.1</li> <li>Fix bug on Packing where EF tries to delete lines on document that do not match the master item being packed (cannot actually delete because lines are referenced by FK - but packing transaction fails)</li> </ul> </li> <li>Granite.Scaffolding.exe<ul> <li>Date 2025-02-13</li> <li>Version: 6.0.0.1</li> <li>Fix bug unable to leave telemetry collector address empty</li> <li>Fix bug fails to create firewall rule if integration service is not being installed.</li> </ul> </li> <li>Granite.Process.App<ul> <li>Date 2025-02-13</li> <li>Version: 6.0.0.1</li> <li>Fix bug failing to start if telemetry collector endpoint not configured</li> </ul> </li> <li>System Snippets Data<ul> <li>Date 2025-02-14</li> <li>Fix Packing snippet - incorrectly named variable resulting in corrupted template. Database create script has been updated as well as \u2026\\GraniteDatabase\\Data\\SystemSnippets.sql - you can delete all from SystemSnippets and then run this script to ensure that you have the latest snippets.</li> </ul> </li> <li>Granite.Custodian.ServiceInterface.dll<ul> <li>Date 2025-02-14</li> <li>Same fix as above (Packing snippet) fixed in v6 migration</li> </ul> </li> <li>Custodian GmailAuthenticator<ul> <li>Date 2025-02-14</li> <li>Was missing from previous V6 Custodian release</li> </ul> </li> </ul>"},{"location":"updates/release-notes/#2025-01-14-2025-01-20","title":"2025-01-14 - 2025-01-20","text":"<ul> <li>Granite.Webservice.dll (second fix below)<ul> <li>Released 15/01/2025</li> <li>Version 5.0.0.1</li> <li>Fix bug when multiple people were scanning the same line on a document (or there is network latency), some transactions fail to update the document detail action qty.</li> </ul> </li> <li>Granite.DomainModel.dll<ul> <li>Released 15/01/2025</li> <li>Version 5.0.1.1</li> <li>Fix bug replenish not printing new tracking entity labels</li> </ul> </li> <li>Granite.Webservice.dll (related to 5.0.0.1)<ul> <li>Released 17/01/2025</li> <li>Version 5.0.0.3</li> <li>Fix bug introduced by the fix in 5.0.0.1 - important update. Requests that need to wait to acquire a lock do not acquire a lock even once the document is available to process - this results in long running IIS requests that never terminate, and cause slow downs in IIS.</li> </ul> </li> </ul>"},{"location":"updates/release-notes/#2025-01-06-2025-01-13","title":"2025-01-06 - 2025-01-13","text":"<ul> <li>GraniteScheduler.ServiceInterface.dll<ul> <li>Released 06/01/2025</li> <li>Version 5.0.0.1</li> <li>Fix bug causing error <code>The SSL connection could not be established</code> when trying to connect to Utility API to send email.</li> </ul> </li> <li>Process App<ul> <li>Released 13/01/2025</li> <li>Version 5.0.0.5</li> <li>Properly disable the UI after the user has submitted an input. This prevents prescripts from running multiple times accidentally</li> </ul> </li> </ul>"},{"location":"updates/V4/whats-new/","title":"V4","text":""},{"location":"updates/V4/whats-new/#january-2024-product-update-4530","title":"January 2024 Product Update : 4.5.3.0","text":"<p>Note</p> <ul> <li>Database change required</li> <li>Release was done on 16 Jan for ProcessApp and Webdesktop / Repo Api on 23 Jan</li> </ul>"},{"location":"updates/V4/whats-new/#database-24-jan-2024","title":"Database (24 Jan 2024)","text":"<ul> <li><code>new</code> Table OptionalFieldValues_Location</li> </ul>"},{"location":"updates/V4/whats-new/#webdesktop-23-jan-2024","title":"Webdesktop (23 Jan 2024)","text":"<ul> <li> <p><code>fix</code> delete stock take session when no record selected</p> <ul> <li>https://stackoverflowteams.com/c/granitewms/questions/348</li> </ul> </li> <li> <p><code>new</code> grid menu options to clear selection and filters</p> <ul> <li>https://granitewms.canny.io/request/p/webdesktop-grid-menu-option-clear</li> </ul> </li> <li> <p><code>new</code> add optional field support for Locations</p> <ul> <li>https://granitewms.canny.io/request/p/optional-fields-location</li> <li>https://granitewms.canny.io/request/p/additional-fields-for-locations</li> </ul> </li> </ul>"},{"location":"updates/V4/whats-new/#repo-api-23-jan-2024","title":"Repo API (23 Jan 2024)","text":"<ul> <li>fix error when importing documents<ul> <li>https://granitewms.canny.io/bugs/p/webdesktop-document-import</li> </ul> </li> </ul>"},{"location":"updates/V4/whats-new/#processapp-16-jan-2024","title":"ProcessApp (16 Jan 2024)","text":"<ul> <li><code>fix</code> Layout issues on various screens <ul> <li>https://granitewms.canny.io/bugs/p/processapp-receiving-screen-issue</li> <li>https://granitewms.canny.io/bugs/p/processapp-layout-issues-picking</li> <li>https://granitewms.canny.io/bugs/p/stocktake-scanner-detail-values-not-adjacent-to-description</li> </ul> </li> </ul>"},{"location":"updates/V4/whats-new/#september-2023-product-update-4520","title":"September 2023 Product Update : 4.5.2.0","text":""},{"location":"updates/V4/whats-new/#webdesktop","title":"WebDesktop","text":"<ul> <li><code>fix</code> Document Detail stock on hand lookup did not return<ul> <li>https://granitewms.canny.io/bugs/p/stock-on-hand-button-on-document-screens</li> </ul> </li> <li><code>new</code> Add support for user sites in Datagrid (enquiry). Filter grid data based on user that is currently logged in.</li> <li><code>new</code> CSS Datagrid styling. Add CSS style classes to use with datagrid. fontGreen , fontBlue , fontRed , backgroundRed ,backgroundBlue ,backgroundGreen <ul> <li>https://granitewms.canny.io/request/p/webdesktop-datagrid-styling</li> </ul> </li> <li><code>fix</code> Document grids with status CANCELLED not apply correct CSS style<ul> <li>https://granitewms.canny.io/bugs/p/webdesktop-document-grids-status-not-showing-correctly</li> </ul> </li> <li><code>fix</code> Saving customize application grids used incorrect GroupName for the grid. </li> <li><code>fix</code> Saving customize application grids caused the GridName to duplicate the prefix word Custom.</li> </ul>"},{"location":"updates/V4/whats-new/#processapp","title":"ProcessApp","text":"<ul> <li><code>fix</code> Confirmation and error sound not playing</li> <li><code>fix</code> Documents with larger text fields render incorrectly. <ul> <li>https://granitewms.canny.io/bugs/p/processapp-document-display-issue</li> </ul> </li> </ul>"},{"location":"updates/V4/whats-new/#labelprintservice","title":"LabelPrintService","text":"<ul> <li><code>new</code> Add validation of printer name</li> </ul>"},{"location":"updates/V4/whats-new/#august-2023-product-update-4510","title":"August 2023 Product Update : 4.5.1.0","text":""},{"location":"updates/V4/whats-new/#webdesktop-repository-api","title":"WebDesktop / Repository API","text":"<ul> <li><code>fix</code> Print label not working with illegal characters in MasterItem Code</li> <li><code>fix</code> Functions scripts returning null in Valid (field) threw error.</li> <li><code>fix</code> Functions for document screen fixed. Selected records not being passed on to function.</li> <li><code>fix</code> Grid definition for application grids, show the name and audit information correctly.</li> <li><code>fix</code> Data Import: various issues causing the import to not import or show records in grid.</li> <li><code>fix</code> TrackingEntity Import: Remove override of Barcode. Expiry and manufacture date column rename.</li> <li><code>fix</code> Pickslip grid not showing data.</li> <li><code>fix</code> Application grids update isCustomGrid value for grid entry   </li> <li><code>new</code> Datagrid StockAvailable (include new SQL view)</li> </ul>"},{"location":"updates/V4/whats-new/#processapp_1","title":"ProcessApp","text":"<ul> <li><code>fix</code> New Pallet ignore casing of word New</li> <li><code>fix</code> Add web template support for Posting processes.</li> <li><code>fix</code> Expand / Collapse of trackingentity information on Pallet did not work.</li> <li><code>fix</code> When trying to open Transfer Post page was not found.</li> <li><code>new</code> Prefix all web template errors to clarify origin of error.</li> <li><code>change</code> Default config for logging <code>nlog.log</code> set to Info and included archive setting on size limit.</li> </ul>"},{"location":"updates/V4/whats-new/#database","title":"Database","text":""},{"location":"updates/V4/whats-new/#database-views","title":"Database Views","text":"<ul> <li><code>fix</code> API_QueryDocumentProgress</li> <li><code>fix</code> API_QueryTransactionsPickReversal (exclude pack transactions)</li> <li><code>new</code> DataGrid_StockAvailable</li> </ul>"},{"location":"updates/V4/whats-new/#database-data","title":"Database Data","text":"<ul> <li><code>fix</code> Table Datagrid: OrderDocumentProgress, ReceivingDocumentProgress, TransferDocumentProgress, WorkOrderDocumentProgress</li> <li><code>fix</code> Table Datagrid: entry ImportTrackingEntity. Fix layout. Also see Tracking Entity Import on Webdesktop fix.</li> <li><code>fix</code> Table Datagrid: entry Document / PickslipDocument. Fix layout. </li> <li><code>new</code> Table Datagrid: Grid for DataGrid_StockAvailable.</li> <li><code>new</code> Table Snippets: various snippets added to showcase standard Granite </li> </ul>"},{"location":"updates/V4/whats-new/#accpac-database","title":"Accpac Database","text":"<ul> <li><code>fix</code> MasterItemAlias_View add union on join</li> <li><code>change</code> IntegrationProcessTransfer, IntegrationProcessSalesOrder, IntegrationProcessTransfer. Use ExpectedDate instead of ActionDate</li> </ul>"},{"location":"updates/V4/whats-new/#scheduler","title":"Scheduler","text":"<ul> <li><code>change</code> Remove execution timeout for SQL jobs</li> </ul>"},{"location":"updates/V4/whats-new/#accpac-injected-jobs","title":"Accpac Injected jobs","text":"<ul> <li><code>fix</code> Scheduler gets stuck when document line's MasterItem_ERPIdentification does not appear in Integration_Accpac_MasterItem view</li> </ul>"},{"location":"updates/V4/whats-new/#evo-injected-jobs","title":"Evo Injected jobs","text":"<ul> <li><code>fix</code> not validating changes before updating document lines</li> </ul>"},{"location":"updates/V4/whats-new/#zpl-labelprinting","title":"ZPL LabelPrinting","text":"<ul> <li><code>change</code> Variables in ZPL label templates now need to be prefixed with <code>@</code></li> </ul>"},{"location":"updates/V4/whats-new/#accpac","title":"Accpac","text":"<ul> <li><code>new</code> Support for Accpac 2023 version 7.0</li> </ul>"},{"location":"updates/V5/product-update/","title":"Product Update","text":""},{"location":"updates/V5/product-update/#april-2024-new-release-5000","title":"April 2024 New Release : 5.0.0.0","text":"<p>Note</p> <ul> <li>Database changes required</li> </ul>"},{"location":"updates/V5/product-update/#database","title":"Database","text":""},{"location":"updates/V5/product-update/#database-tables","title":"Database Tables","text":"<ul> <li><code>new</code> table Migration</li> <li><code>new</code> table OptionalFieldValues_Document</li> <li><code>new</code> table OptionalFieldValues_DocumentDetail</li> <li><code>new</code> table SystemTransientData</li> <li><code>new</code> table Email</li> <li><code>new</code> table EmailLog</li> <li><code>new</code> table EmailTemplate</li> <li><code>fix</code> table OptionalFieldValues_Location</li> <li><code>change</code> table Users</li> <li><code>change</code> table SystemSettings</li> <li><code>change</code> table Process</li> <li><code>change</code> table ProcessMembers</li> <li><code>change</code> table ProcessStep</li> <li><code>change</code> table Transaction</li> <li><code>change</code> table ProcessStepLookup</li> <li><code>change</code> table ProcessStepLookupDynamic</li> </ul>"},{"location":"updates/V5/product-update/#stored-procedures","title":"Stored Procedures","text":"<ul> <li><code>remove</code> stored procedure EmailTemplate</li> </ul>"},{"location":"updates/V5/product-update/#database-data","title":"Database Data","text":"<ul> <li><code>new</code> Table Migration: Default migration data</li> <li><code>new</code> Table EmailTemplate: IntegrationError template</li> <li><code>new</code> Table SystemSettings: UtilityApi and Custodian settings</li> <li><code>fix</code> Table Users: User 0 has all permissions</li> <li><code>fix</code> Table DataGrid: Add missing fields to Document grids</li> <li><code>change</code> Table SystemSettings: All password settings are encrypted by default</li> <li><code>remove</code> Table SystemSettings: Email related settings removed</li> <li><code>remove</code> Table DataGrid: SystemSettings grid</li> </ul>"},{"location":"updates/V5/product-update/#sqlclr","title":"SQLCLR","text":"<ul> <li><code>new</code> support for UtilityAPI operations<ul> <li>Report Print</li> <li>Report Export</li> <li>SQL Table Export</li> <li>Template Email</li> <li>Simple Email</li> </ul> </li> <li><code>change</code> CLR procedures are now deployed with database create, no need to install separately</li> <li><code>change</code> improved error handling to show more detailed messages when SystemSettings is incorrect</li> <li><code>change</code> add manufactureDate to TakeOn procedure</li> <li><code>change</code> add NoEntities to clr_Replenish</li> </ul>"},{"location":"updates/V5/product-update/#accpac-integration","title":"Accpac Integration","text":"<ul> <li><code>fix</code> view Integration_Accpac_InternalUsageDetail </li> <li><code>fix</code> view Integration_Accpac_IntransitDetail </li> <li><code>fix</code> view Integration_Accpac_PurchaseOrderDetail </li> <li><code>fix</code> view Integration_Accpac_ReceiptDetail </li> <li><code>fix</code> view Integration_Accpac_SalesOrderDetail </li> <li><code>fix</code> view Integration_Accpac_TransferDetail </li> <li><code>fix</code> view MasterItemAlias_View</li> </ul>"},{"location":"updates/V5/product-update/#evo-integration","title":"Evo Integration","text":"<ul> <li><code>new</code> view Integration_Evolution_InterBranchRequisitionHeader</li> <li><code>new</code> view Integration_Evolution_InterBranchRequisitionDetail</li> <li><code>new</code> trigger TriggerGraniteInterBranchRequisition</li> </ul>"},{"location":"updates/V5/product-update/#webdesktop","title":"Webdesktop","text":"<ul> <li><code>fix</code> wrong document displaying when selected from grid<ul> <li>https://granitewms.canny.io/bugs/p/webdesktop-document-selection</li> </ul> </li> <li><code>fix</code> prevent action qty being overridden when editing document line<ul> <li>https://granitewms.canny.io/bugs/p/document-line-edit-overiding-action-qty</li> </ul> </li> <li><code>fix</code> stocktake recommendations when counts have been reset<ul> <li>https://granitewms.canny.io/bugs/p/stock-take-count-reset-and-recommendations</li> </ul> </li> <li><code>change</code> additional fields for pickslip documents<ul> <li>https://granitewms.canny.io/bugs/p/pickslip-document-fields</li> </ul> </li> <li><code>change</code> only show active master items in document edit<ul> <li>https://granitewms.canny.io/request/p/show-only-active-masteritems-in-dropdown</li> </ul> </li> <li><code>change</code> improve error message when executing function without selected record<ul> <li>https://granitewms.canny.io/bugs/p/webdesktop-functions-no-record-select-error</li> </ul> </li> <li><code>change</code> improve document management user experience</li> <li><code>new</code> optional fields support for Document</li> <li><code>new</code> optional fields support for DocumentDetail</li> <li><code>new</code> prescript preview functionality</li> <li><code>new</code> SystemSettings encryption functionality</li> <li><code>new</code> database migration support</li> </ul>"},{"location":"updates/V5/product-update/#processapp-webservice","title":"ProcessApp &amp; Webservice","text":"<ul> <li><code>fix</code> Document display issue<ul> <li>https://granitewms.canny.io/bugs/p/process-app-documentprogress-display-issue</li> </ul> </li> <li><code>fix</code> Error creating new pallet when label print service is not configured<ul> <li>https://granitewms.canny.io/bugs/p/pallet-label-print-error-with-no-print-service</li> </ul> </li> <li><code>new</code> Number of Entities functionality for replenish<ul> <li>https://granitewms.canny.io/request/p/replenish-to-multiple-tes</li> </ul> </li> <li><code>new</code> Unlimited step 200s</li> <li><code>new</code> Debug mode</li> </ul>"},{"location":"updates/V5/product-update/#evo-integration_1","title":"Evo integration","text":""},{"location":"updates/V5/product-update/#sdk-provider","title":"SDK Provider","text":"<ul> <li><code>new</code> Map DocumentReference to Message1 on Evo SalesOrder post<ul> <li>https://granitewms.canny.io/request/p/evo-integration-sales-order-post-update-message-lines-on-sales-order</li> </ul> </li> <li><code>new</code> Support for encrypted SystemSettings</li> </ul>"},{"location":"updates/V5/product-update/#injected-jobs","title":"Injected jobs","text":"<ul> <li><code>new</code> Support for Inter Branch Requisition<ul> <li>https://granitewms.canny.io/request/p/evo-inter-branch-requisition-document-sync-job</li> </ul> </li> <li><code>fix</code> Performance issue causing sql timeout on document jobs</li> <li><code>change</code> Use UtilityAPI for email notifications</li> </ul>"},{"location":"updates/V5/product-update/#accpac-integration_1","title":"Accpac Integration","text":""},{"location":"updates/V5/product-update/#sdk-provider_1","title":"SDK Provider","text":"<ul> <li><code>new</code> Support for encrypted SystemSettings</li> </ul>"},{"location":"updates/V5/product-update/#injected-jobs_1","title":"Injected jobs","text":"<ul> <li><code>change</code> Use UtilityAPI for email notifications</li> </ul>"},{"location":"updates/V5/product-update/#omni-integration","title":"Omni Integration","text":""},{"location":"updates/V5/product-update/#sdk-provider_2","title":"SDK Provider","text":"<ul> <li><code>new</code> Support for encrypted SystemSettings</li> </ul>"},{"location":"updates/V5/product-update/#sapb1-integration","title":"SAPB1 Integration","text":""},{"location":"updates/V5/product-update/#sdk-provider_3","title":"SDK Provider","text":"<ul> <li><code>new</code> Support for encrypted SystemSettings</li> </ul>"},{"location":"updates/V5/product-update/#syspro-integration","title":"Syspro Integration","text":""},{"location":"updates/V5/product-update/#sdk-provider_4","title":"SDK Provider","text":"<ul> <li><code>new</code> Support for encrypted SystemSettings</li> </ul>"},{"location":"updates/V5/product-update/#label-printing-bartender","title":"Label Printing Bartender","text":"<ul> <li><code>change</code> Logging provider to Nlog</li> </ul>"},{"location":"updates/V5/product-update/#scheduler","title":"Scheduler","text":"<ul> <li><code>change</code> email jobs now use Utility API - support for old implementation removed</li> </ul>"},{"location":"updates/V5/whats-new/","title":"Granite WMS What's New V 5.0","text":""},{"location":"updates/V5/whats-new/#new-applications-overview","title":"New Applications Overview","text":"<ul> <li>Process Catalog - A process catalogue that allows you to easily share your process configurations with the team</li> <li>Utility API - A brand new API, home to our new SSRS Reporting Service and Email Service</li> </ul>"},{"location":"updates/V5/whats-new/#webdesktop-changes-overview","title":"WebDesktop Changes Overview","text":"<ul> <li>Document - Document capture enhancements</li> <li>Optional Fields Location - Support for Optional Fields for Locations</li> <li>Optional Fields Document - Support for Optional Fields for Document</li> <li>Optional Fields DocumentDetail - Support for Optional Fields for Document Detail</li> <li>Pre-Script preview - Preview Pre-Scripts in WebDesktop</li> <li>System Settings Encryption - Allow encryption of sensitive data stored in System settings</li> <li>Database Migration - Easy migration / upgrade of version 4.5 to 5.0 via webdesktop.</li> </ul>"},{"location":"updates/V5/whats-new/#process-changes-overview","title":"Process Changes Overview","text":"<ul> <li>Silent Steps - Unlimited silent steps</li> <li>Debug Mode - Use by technical team to view webtemplates, scripts while executing a process</li> </ul>"},{"location":"updates/V5/whats-new/#process-catalog","title":"Process Catalog","text":"<p><code>Functionality not intended for end-user.</code></p> <p>Introducing new functionality that empowers consultants to seamlessly share Processes as Templates and securely store them in the cloud.  Moreover, this update enables users to conveniently access all shared templates from the central store and deploy them to production environments with ease</p> <p>Webdesktop Publish Process</p> <p>An easy to follow wizard to publish any Process as a template.   </p> <p>Webdesktop Process Catalog</p> <p>Search, preview and deploy templates with an easy to understand UI.</p> <p></p>"},{"location":"updates/V5/whats-new/#utility-api","title":"Utility API","text":"<p>The Granite Utility API is a brand new API that will be home to various services that enhance Granite's capabilities.</p> <p>The first two services that the Utility API will launch with are a SSRS Reporting Service to provide easy ways of interacting with SSRS from SQLCLR, and a new Email Service that is intended to replace the emailing currently built into the Scheduler. The new Email Service will also support the SSRS Reporting Service from the get go, allowing you to seamlessly attach SSRS Reports when sending emails.</p>"},{"location":"updates/V5/whats-new/#email-service","title":"Email Service","text":"<p>This new Email Service aims to make sending emails simpler, and at the same time far more powerful. We've achieved this by introducing Email Templates, which are based on the same technology as the ProcessApp's Web Templates. In addition to Email Templates, the new Email Service is fully supported by SQLCLR, which means no more inserting directly into tables to send once off emails!</p> <p>Sending emails with attachments is also now simpler than it's ever been. When you request an email to be sent, you can specify parameters for the SSRS Reporting Service which will render your reports, save them to disk and attach them to the email - all in a single request.</p>"},{"location":"updates/V5/whats-new/#email-templates","title":"Email Templates","text":"<p>Email templates allow you to create good looking responsive emails without the hassle of writing out all that html. This is done by keeping things simple - we use markdown for text formatting, and a standard layout that can be built upon. You can customize templates using script methods similar to the ones you're already familiar with from WebTemplates.</p> <p>A templated email without any further customization looks like this:</p> <p></p> <p>And with just a few script methods you can build it into this:</p> <p></p>"},{"location":"updates/V5/whats-new/#attachments","title":"Attachments","text":"<p>To attach an SSRS report to an email, we simply add the report path, file type and report parameters that we want to use to generate the attachment when we create our email:</p> <pre><code>DECLARE @subject nvarchar(max)\nDECLARE @body nvarchar(max)\nDECLARE @toEmailAddresses nvarchar(max)\nDECLARE @ccEmailAddresses nvarchar(max)\nDECLARE @bccEmailAddresses nvarchar(max)\nDECLARE @reportAttachments nvarchar(max)\nDECLARE @excelAttachments nvarchar(max)\nDECLARE @fileAttachments nvarchar(max)\nDECLARE @responseCode int\nDECLARE @responseJSON nvarchar(max)\nDECLARE @PickingReport varchar(max)\n\nSET @PickingReport = dbo.email_CreateReportAttachment('/PickingReport', 'PDF')                  \n-- Creating the report that we want to attach. The reportPath is /PickingReport, and fileType is PDF\nSET @PickingReport = dbo.email_AddReportParameter(@PickingReport, 'documentNumber', 'SO0001')       \n-- Adding a parameter that will be used to call the SSRS report. The parameter named 'documentNumber' will be set to 'SO0001'\nSET @reportAttachments = dbo.email_AddReportAttachment(@reportAttachments, @PickingReport)      \n-- Lastly, we add the picking report to the list of report attachments. \nSET @subject = 'Example Clr Mail' \nSET @toEmailAddresses = 'email1@gmail.com;email2@gmail.com'\n\nEXECUTE [dbo].[clr_SimpleEmail] \n   @subject\n  ,@body\n  ,@toEmailAddresses\n  ,@ccEmailAddresses\n  ,@bccEmailAddresses\n  ,@reportAttachments\n  ,@excelAttachments\n  ,@fileAttachments\n  ,@responseCode OUTPUT\n  ,@responseJSON OUTPUT\n\n  SELECT @responseCode, @responseJSON\n</code></pre>"},{"location":"updates/V5/whats-new/#ssrs-reporting-service","title":"SSRS Reporting Service","text":"<p>The SSRS Reporting Service adds some new functionality to Reporting 'tool-box' by enabling saving of reports to either PDF or EXCEL from a SQLCLR procedure. Printing SSRS reports has been improved and moved to this service. It is now allows for printing reports with multiple parameters and is far simpler to set up and execute with SQLCLR calls. </p>"},{"location":"updates/V5/whats-new/#sql-export-service","title":"SQL Export Service","text":"<p>The last piece of functionality being added with the Utility API is the SQL Export service. This service allows for exporting of data from Tables and Views to either Excel or CSV. Supporting filtering, order by, offset, limit, and shipping from the start with SQLCLR calls, this service aims to make it easier than ever to get data out of the Granite Database. </p>"},{"location":"updates/V5/whats-new/#webdesktop-changes","title":"WebDesktop Changes","text":""},{"location":"updates/V5/whats-new/#document","title":"Document","text":"<p>Several small changes was made to reduce errors and to facilitate a better experience when capturing documents.</p> <ul> <li>Open the item dialog when user click new line.</li> <li>If a from, to or intransit location is captured in the previous line it will carry over to the next.</li> </ul> <p></p> <ul> <li>Disable the edit of the header of the document when user is busy with line editing.</li> </ul>"},{"location":"updates/V5/whats-new/#optionalfields","title":"Optionalfields","text":"<p>We have introduced support for optional fields in Locations, Documents, and Document Details.</p> <p><code>Example showcasing an optional field at the line level.</code></p> <p></p>"},{"location":"updates/V5/whats-new/#prescript-preview","title":"Prescript Preview","text":"<p>Easily preview the prescript of a ProcessStep in a readonly view.</p> <p><code>Example: Icon displayed next to the prescript name trigger for a preview.</code></p> <p></p>"},{"location":"updates/V5/whats-new/#systemsettings-encryption","title":"Systemsettings Encryption","text":"<p><code>To ensure safety across the board, we have implemented encryption in our System Settings for storing sensitive information.</code> These values can never be viewed, and are securely stored with encryption keys.</p> <p><code>Take Note</code> We require all current system settings to migrate sensitive setting in version 5 as part of the upgrade procedure.</p> <p></p>"},{"location":"updates/V5/whats-new/#grid-menu-clear-options","title":"Grid menu clear options","text":"<p>Options to clear selection and filters.</p> <p></p>"},{"location":"updates/V5/whats-new/#silent-steps","title":"Silent Steps","text":"<p>We're excited to announce our support for silent steps within the range of 200-299. This enhancement grants users the flexibility to set up an unlimited number of silent steps within this range. The motivation behind this update is to meet the growing demands related to tasks such as sending emails or generating reports.</p> <p>We highly recommend segregating these new silent steps from your regular ones, as it enhances clarity and simplifies support processes.</p> <p>It's important to note that silent step 200 will halt execution if validation fails, preventing any subsequent silent steps from running. However, starting from step 201 onwards, execution will proceed regardless of validation status.</p>"},{"location":"updates/V5/whats-new/#debug-mode","title":"Debug Mode","text":"<p><code>Functionality not intended for end-user.</code></p> <p>When accessing the Debug Mode within the ProcessApp, users gain invaluable insights into each Business Process setup and configuration.  This specialized mode enables users to examine prescripts and web template syntax, as well as analyze the current state of the application in detail.</p> <p>Debug Mode facilitates a systematic walkthrough of each process step, empowering users to thoroughly review their setup and identify potential issues with precision. </p> <p>By offering a comprehensive view of the application's internal processes, Debug Mode enhances efficiency in debugging, enabling users to streamline problem-solving and optimization efforts effectively.</p>"},{"location":"updates/V5/whats-new/#application-state","title":"Application State","text":""},{"location":"updates/V5/whats-new/#prescript-syntax","title":"Prescript syntax","text":""},{"location":"updates/V5/whats-new/#webtemplate-syntax","title":"WebTemplate syntax","text":""},{"location":"updates/V6/cheatsheet/","title":"Cheat Sheet","text":""},{"location":"updates/V6/cheatsheet/#database","title":"Database","text":"<pre><code>%%{init: { 'logLevel': 'debug', 'theme': 'default' , 'themeVariables': {\n              'cScale0': '#51AA6C', 'cScaleLabel0': '#ffffff',\n              'cScale1': '#00A6CE',\n              'cScale2': '#F24C0D', 'cScaleLabel2': '#ffffff'\n       } } }%%\n    timeline\n        title Granite WMS Version 6 Database\n\n        section Tables\n          New Tables : AuditStockTakeSession : UsersPermissions : SystemPermissions : DataCapture : DataCaptureFields : DataCaptureFieldsLookup : IntegrationSettings\n\n          New columns : ProcessStep &lt;br&gt; isBusinessRule :  StockTakeLines &lt;br&gt; CarryingEntityBarcode &lt;br&gt; CarryingEntity_id : AuditStockTakeLines &lt;br&gt; CarryingEntityBarcode &lt;br&gt; CarryingEntity_id : StockTakeSession &lt;br&gt; AuditDate &lt;br&gt; AuditUser &lt;br&gt; Version : DataGrid &lt;br&gt; RowStyleRules &lt;br&gt; PageSize : UsersCredential &lt;br&gt; LockoutEndTime &lt;br&gt; PasswordExpiration &lt;br&gt; IsAccountLocked &lt;br&gt; ApiKey &lt;br&gt; PasswordLastChanged : Users &lt;br&gt; FirstName &lt;br&gt; LastName : Transaction &lt;br&gt; FromContainableEntity_id &lt;br&gt; ToContainableEntity_id\n\n         Column Changes : Audit &lt;br&gt; RecordVersion : Document &lt;br&gt; ERPSyncFailedReason : DocumentDetail &lt;br&gt; ERPSyncFailedReason : ScheduledJobs &lt;br&gt; InjectedJob : ScheduledJobsHistory &lt;br&gt; InjectedJob : UsersCredential &lt;br&gt; FailedLoginAttempts : TradingPartner &lt;br&gt; Address1 &lt;br&gt; Address2 &lt;br&gt; Address3 &lt;br&gt; Address4 &lt;br&gt; Address5 &lt;br&gt; ContactPerson\n\n         Dropped columns : Transaction &lt;br&gt; ContainableEntity_id : Users &lt;br&gt; Allow* &lt;br&gt; drop old permissions\n\n         section Data\n\n          New Data : UsersPermissions  : SystemPermissions : SystemSettings\n          Data Alterations :  SystemSettings : SystemSnippets : DataGrids\n\n         section Views\n          Alterations : API_QueryStockReorder : Label_Box : API_QueryTransactions : API_QueryTransactions&lt;br&gt;Manufacture : API_QueryTransactions&lt;br&gt;PickReversal : API_QueryTransactions&lt;br&gt;Picking : API_QueryTransactions&lt;br&gt;ReceiveReversal : API_QueryTransactions&lt;br&gt;Receiving : API_QueryTransactions&lt;br&gt;Transfer : API_QueryTransactions&lt;br&gt;TransferReversal\n\n          New Views : DataCaptureFields&lt;br&gt;Lookup_View\n\n</code></pre>"},{"location":"updates/V6/cheatsheet/#features","title":"Features","text":"<pre><code>%%{init: { 'logLevel': 'debug', 'theme': 'default' , 'themeVariables': {\n              'cScale0': '#51AA6C', 'cScaleLabel0': '#ffffff',\n              'cScale1': '#00A6CE',\n              'cScale2': '#F24C0D', 'cScaleLabel2': '#ffffff'\n       } } }%%\n    timeline\n        title Granite WMS Version 6 Features\n\n        section WebDesktop\n\n          Process Catalog : Add SQL Objects to templates\n\n          Process : Rename Function:  Delete Function:  UserGroups &lt;br&gt; Process Menu Dividers  : Enhanced Prescript Preview\n\n          Datagrid : Datagrid PageSize : Datagrid RowStyle : Datagrid Styling Guidelines\n\n          Document : Copy Function\n\n          StockTake : Refresh Session : Session Audit : Better Carrying Entity Visibility\n\n          Users: Copy function \n\n         section Security &amp; Permissions\n          Permissions : More Granular permissions : Permissions moved to User Groups\n          Security Enhancements : Expiring Passwords : Lockout after failed logins : Password strength requirements </code></pre>"},{"location":"updates/V6/cheatsheet/#technical","title":"Technical","text":"<pre><code>%%{init: { 'logLevel': 'debug', 'theme': 'default' , 'themeVariables': {\n              'cScale0': '#51AA6C', 'cScaleLabel0': '#ffffff',\n              'cScale1': '#00A6CE',\n              'cScale2': '#F24C0D', 'cScaleLabel2': '#ffffff'\n       } } }%%\n    timeline\n        title Granite WMS Version 6 Technical\n\n        section Installation\n          Scaffold CLI : Install and Setup Granite with EASE!\n          Integration Jobs : Accpac &lt;br&gt; all-in-one deploy script : Evo &lt;br&gt; all-in-one deploy script\n\n        section Config\n          AppSettings : Webdesktop &lt;br&gt; Change to Business API URL : ProcessApp &lt;br&gt; Change to Business API URL &lt;br&gt; Add telemetry settings : Integration service &lt;br&gt; Add telemetry settings : Custodian API &lt;br&gt; Add telemetry settings : Label Printing ZPL &lt;br&gt; Add telemetry settings : Scheduler &lt;br&gt; Add telemetry settings \n\n          Database Settings : Custodian API &lt;br&gt; Application name changed to Granite.Custodian &lt;br&gt; Add Email and Report settings : SQLCLR &lt;br&gt; Webservice changed to Business API &lt;br&gt; Utility API changed to Custodian : Scheduler &lt;br&gt; Utility API changed to Custodian \n\n\n        section Tooling\n          Jaeger : New way to view logs and traces  \n\n        section API\n          Webservice : Replaced with Business API\n\n          API Merge &amp; Consolidation: Util move to Custodian API\n          : Repo move to Business API\n\n          Security : API Key &lt;br&gt; 3rd party authentication \n         section CLR\n            New Procedures: Copy Document: Transfer: Create CarryingEntity: TrackingEntity Optional Field\n\n        section Integration\n          New Providers : Intacct : Sage 100 : Acumatica\n          Support Initial ActionQty : Evo : Accpac\n\n\n</code></pre>"},{"location":"updates/V6/whats-new/","title":"Granite WMS What's New V 6.0","text":"<p>Also see V6 Cheat Sheet for a high level overview and reference </p>"},{"location":"updates/V6/whats-new/#overview","title":"Overview","text":""},{"location":"updates/V6/whats-new/#api-consolidation-changes","title":"API Consolidation changes","text":"<p>Danger</p> <p>These changes will impact settings and configuration of the endpoint addresses. Please ensure that you understand the changes.</p> <ul> <li>The Utility API is now merged into the Custodian API, consolidating functionalities under the unified name: Custodian API.</li> <li>The Repo API is now merged into the new Business API, consolidating functionalities under the unified name: Business API.</li> </ul>"},{"location":"updates/V6/whats-new/#new-applications-tools","title":"New Applications &amp; Tools","text":"<ul> <li>Scaffold CLI - A simple to use CLI application (command line interface) to install, setup and configure Granite WMS.</li> <li>Business API - An upgraded replacement for the Webservice, and also the new home for the Repo API functionality</li> <li>Jaeger - Your new favorite way to \"check the logs\"</li> </ul>"},{"location":"updates/V6/whats-new/#new-integration-providers","title":"New Integration Providers","text":"<ul> <li>Sage 100</li> <li>Acumatica</li> <li>Sage Intacct</li> </ul>"},{"location":"updates/V6/whats-new/#webdesktop-enhancements","title":"Webdesktop Enhancements","text":"<ul> <li>Document Copy - Functionality to copy any document as a new document. Allowing the user to change the type of document.</li> <li>Data Capture - A new feature that gives you the ability to easily create input forms to streamline your users' experience capturing repetitive data.</li> <li>Data Grid Improvements - Data Grids now support conditional formatting and configurable page sizes</li> <li>Process Management - Styled Menu dividers  </li> <li>StockTake Session Auditing - Stocktake session creation criteria are now audited, giving you better visibility</li> <li>Process Template - Allow user to add any SQLObjects (View, Proc, Table, Function) to process template.</li> </ul>"},{"location":"updates/V6/whats-new/#security-and-permissions-enhancements","title":"Security and Permissions Enhancements","text":"<ul> <li>User Management - User permissions are now managed at the User Group level. You can also copy users from within the Webdesktop    </li> <li>New Permissions tables- Permissions are no longer columns on the user table</li> <li>Security Settings - Opt-in system wide settings that allow you enforce policies like password strength and user account lock outs</li> <li>API Keys - a new way of authenticating against our APIs</li> </ul>"},{"location":"updates/V6/whats-new/#scaffold","title":"Scaffold","text":"<p>Scaffold is a straightforward command line interface that makes it easy to install, setup, and configure Granite WMS.</p>"},{"location":"updates/V6/whats-new/#business-api","title":"Business API","text":"<p>In this first release of the Business API, our aim is that you shouldn't notice any major differences between it and the Webservice &amp; Repo API. However, this doesn't mean nothing has changed. Under the hood we've moved away from the legacy technology the Webservice was built on. This modernization enhances our ability to adapt to new requirements, allowing us to respond to business needs more quickly and efficiently. With this new API, we are better positioned to support innovation and deliver improved services to our users.</p> <p>The Repo API has been moved into it's new home without any major changes. There have been some bug fixes, but nothing has materially changed.</p>"},{"location":"updates/V6/whats-new/#business-rules","title":"Business Rules","text":"<p>The Business API does introduce one new concept to our core functionality - Business Rules.  These are overrides for standard behaviour that allow you to tweak how rules are applied for specific processes by configuring special Process Steps. Having functionality configured at step level allows for defaulting Business Rule values, as well as setting them from prescripts, just like any other step. Another benefit of applying these at step level is that only the process that you want to change is affected - standard validation on other processes remains untouched.</p> <p>At V6 launch there are only two Business Rules available for the Pick Service:</p> <ul> <li>Best Before Override - Allows picking expired stock, effectively changing the ExpiryDate field to function as Best Before field.</li> <li>On Hold Override - Allows picking stock that is on hold. </li> </ul> <p>The plan is to introduce more Business Rules allowing greater flexibility with the upcoming V6 Product Updates.</p>"},{"location":"updates/V6/whats-new/#transaction-validation-fixes-and-improvements","title":"Transaction validation fixes and improvements","text":"<p>On the Webservice functionality side, while the aim is to remain as consistent as possible, there are some changes to the behaviour in the Business API. The most notable change is that creating a pallet will require a location. This is to ensure better transactional consistency throughout the lifetime of the pallet. This means that you will need to have a Location step before any CarryingEntity step that creates pallets. This affects the following process types:</p> <ul> <li>Take On</li> <li>Manufacture</li> <li>Receiving</li> <li>Return</li> <li>Palletize</li> </ul> <p>Aside from that, the other changes are fixes that require no changes to processes:</p> <ul> <li>All Transaction types write FromContainableEntity_id and ToContainableEntity_id where applicable</li> <li>STOCKTAKERELEASE requires the TrackingEntity to be on hold.</li> <li>QCRELEASE Pallet writes ActionQty to transaction</li> <li>RECEIVING &amp; TAKEON of a MasterItem with DirectOnHold writes ProcessName to QCHOLD transaction</li> <li>RECEIVING a document with the same item with multiple ToLocations correctly validates the ToLocation</li> <li>MANUFACTURE validates against document detail TO Location (Webservice incorrectly validates against FROM Location)</li> <li>TRANSFER document validates against FromLocation and ToLocation</li> <li>INTRANSIT document validates against FromLocation and IntransitLocation</li> <li>RECEIPT document validates against IntransitLocation and ToLocation</li> <li>BarcodeMaster will skip barcodes for failed transactions more often than the Webservice - this is part of the strategy to avoid assigning barcodes twice.</li> </ul> <p>You can find out more in the Business API manual </p>"},{"location":"updates/V6/whats-new/#system-observability-with-jaeger","title":"System observability with Jaeger","text":""},{"location":"updates/V6/whats-new/#webdesktop-enhancements_1","title":"Webdesktop Enhancements","text":""},{"location":"updates/V6/whats-new/#document-copy","title":"Document Copy","text":""},{"location":"updates/V6/whats-new/#datacapture-feature","title":"Datacapture Feature","text":""},{"location":"updates/V6/whats-new/#data-grid-improvements","title":"Data Grid Improvements","text":"<ul> <li>Page Size configuration</li> <li>Row Formatting rule based row formatting</li> <li>Styling Guidelines built in style classes for improved look across application  </li> </ul>"},{"location":"updates/V6/whats-new/#process-management-changes","title":"Process Management changes","text":"<ul> <li>Rename process </li> <li>Delete process </li> <li>Process menu dividers</li> </ul>"},{"location":"updates/V6/whats-new/#stocktake-session-management-improvements","title":"Stocktake Session management improvements","text":"<ul> <li>Refresh button</li> <li>Stock Session (heading) audit</li> </ul>"},{"location":"updates/V6/whats-new/#process-template-sqlobjects","title":"Process Template SQLObjects","text":"<ul> <li>Include adhoc SQL views, functions or stored procedures</li> </ul>"},{"location":"updates/V6/whats-new/#minor-changes","title":"Minor Changes","text":"<ul> <li><code>new</code> MasterItem Alias SQL view preview. Allow user to preview the SQL view configured for MasterItem Alias.</li> </ul>"},{"location":"updates/V6/whats-new/#security-permissions-and-user-management-changes","title":"Security, Permissions and User Management changes","text":"<ul> <li>Security Settings</li> <li>API keys</li> <li>New User permissions</li> </ul>"},{"location":"updates/V7/whats-new/","title":"Granite WMS What's New V 7.0","text":""},{"location":"updates/V7/whats-new/#overview","title":"Overview","text":"Process App UI Enhancements <ul> <li>Collapsible Menu Layout - Maximize screen real estate with expandable/collapsible navigation</li> <li>Tree Menu Layout - Hierarchical organization of processes for better categorization and discovery</li> <li>Form Layout for Processes - Enhanced form-based interface for streamlined process execution</li> </ul>  Process Functions  <ul> <li>Execute processes directly from within other processes for improved workflow integration</li> </ul>  Python Integration <ul> <li>Python Prescripts - Business API now supports Python scripts for advanced business logic</li> <li>Python Scheduler Jobs - Schedule and run Python-based automation tasks</li> </ul>  Business API Enhancements <ul> <li>Inventory Correction Transaction Type - New transaction type for adhoc inventory adjustments</li> </ul>"},{"location":"updates/V7/whats-new/#process-app","title":"Process App","text":"<ul> <li>Collapsible Menu Layout</li> <li>Tree Menu Layout</li> <li>Form Layout for Processes</li> </ul>"},{"location":"updates/V7/whats-new/#process-functions","title":"Process Functions","text":"<p>Process Functions revolutionize workflow efficiency by allowing users to execute processes directly from within other processes. This feature eliminates the need to navigate away from your current task, enabling seamless workflow integration and reducing context switching.</p>"},{"location":"updates/V7/whats-new/#python-support","title":"Python Support","text":""},{"location":"updates/V7/whats-new/#python-in-version-7","title":"Python in Version 7","text":"<ul> <li>Python Prescripts</li> <li>Python scheduled jobs</li> </ul>"},{"location":"updates/V7/whats-new/#setting-up-vs-code-for-python","title":"Setting up VS Code for Python","text":""},{"location":"updates/V7/whats-new/#inventory-correction-transaction-type","title":"Inventory Correction Transaction Type","text":"<p>The new Inventory Correction transaction type provides comprehensive capabilities for adhoc inventory corrections.</p>"},{"location":"updates/V8/GraniteV8-Database/","title":"GraniteV8 Database","text":"<p>This document can act as progress while we develop, and we can turn into release note eventually.</p>"},{"location":"updates/V8/GraniteV8-Database/#migration","title":"Migration","text":""},{"location":"updates/V8/GraniteV8-Database/#guids","title":"GUIDs","text":"<ul> <li>Add column and insert data (final review of tables to be done)</li> <li>Add guid to datagrids (final review needed)</li> </ul>"},{"location":"updates/V8/GraniteV8-Database/#datagrids","title":"Datagrids","text":"<ul> <li>Replace old property cellRendererFramework with cellRenderer</li> </ul>"},{"location":"updates/V8/GraniteV8-Database/#database-project","title":"Database Project","text":""},{"location":"updates/V8/GraniteV8-Database/#guids_1","title":"GUIDs","text":"<p>Outstanding: - Add guids to tables - Add guids to views - Add guids to datagrids - Replace old property cellRendererFramework with cellRenderer</p>"},{"location":"updates/V8/whats-new/","title":"Granite WMS What's New V 8.0","text":"<p>Currently we can simply dump a list, we can format later.</p> <ul> <li>New Permissions</li> <li>DatabaseMigration</li> <li>DataGridMaintenance</li> <li>WebDesktopAccess</li> <li>ProcessAppAccess</li> </ul>"},{"location":"webdesktop/","title":"WebDesktop","text":"<p>The Granite WebDesktop is constructed on a thick client architecture, where the software application operates primarily on the user's device (like a computer or mobile device) and conducts a substantial amount of processing locally. This approach minimizes reliance on server processing and data retrieval for enhanced efficiency.</p> <p>The central functionality of the system revolves around data maintenance and enquiry. This relies on various Granite APIs to efficiently perform these tasks.</p>"},{"location":"webdesktop/#setup","title":"Setup","text":""},{"location":"webdesktop/#requirements","title":"Requirements","text":"<ul> <li>IIS</li> <li>Sufficient permissions for folder and file access and IIS application creation</li> </ul>"},{"location":"webdesktop/datacapture/data-capture/","title":"Data Capture","text":"<p><code>Granite Version 6~</code></p>"},{"location":"webdesktop/datacapture/data-capture/#introduction","title":"Introduction","text":"<p>Data Capture also known as Quick Capture allows you to setup custom WebDesktop dialogs to streamline the capture of data.  It will plug into the WebDesktop the same way Functions does, but unlike Functions that needs to run backend scripts, data capture executes the API call for the WebDesktop screen you have open.</p> <p>The reason to use data capture is to stream line data entry and to allow the user to capture specific sets of data  effortless. </p>"},{"location":"webdesktop/datacapture/data-capture/#limited-support","title":"Limited support","text":"<p>Version 6 introduces the DataCapture feature with limited functionality. While this release may not meet all requirements, we believe it can effectively support certain use cases. We have an extensive roadmap planned, which includes adding DataCapture to the ProcessApp in future updates. We encourage you to familiarize yourself with its current capabilities and use it where applicable.</p>"},{"location":"webdesktop/datacapture/data-capture/#supported-modules","title":"Supported Modules","text":"<p>Note</p> <p>Document based Modules is split in \"header\" and \"detail\". You cannot capture a new header and details in one. </p> Module Name Web Desktop Screen API Operation Notes MASTERITEM Setup -&gt; MasterItem /MasterItems (POST) MASTERITEMALIAS Setup -&gt; MasterItem /MasterItemAlias (POST) LOCATION Setup -&gt; Location /Locations (POST) TRADINGPARTNER Setup -&gt; Trading Partner /TradingPartners (POST) ORDERDOCUMENT Outbound -&gt; Orders /Documents (POST) Field: Type = ORDER ORDERDOCUMENTDETAIL Outbound -&gt; Orders /DocumentDetails (POST) Field: Document_id not required to specify. RECEIVINGDOCUMENT Inbound -&gt; Document /Documents (POST) Field: Type = ORDER RECEIVINGDOCUMENTDETAIL Inbound -&gt; Document /DocumentDetails (POST) Field: Document_id not required to specify. TRANSFERDOCUMENT Transfer -&gt; Transfer  Document /Documents (POST) Field: Type = TRANSFER TRANSFERDOCUMENTDETAIL Transfer -&gt; Transfer  Document /DocumentDetails (POST) Field: Document_id not required to specify. <p>Note</p> <p>Data capture Field Type for document modules must be set.  These can be invisible. </p> <p>Note</p> <p>For document detail capture the API requires the Document_id. This field do not require setup.</p>"},{"location":"webdesktop/datacapture/data-capture/#data-capture-fields-names","title":"Data Capture Fields Names","text":"<p>The data capture fields for each module is the same parameters name of the Business API operation. Please review the above table to get the Business API operation.</p> <p>Note</p> <p>Any field that is required by the Business API need to be setup (exception Document_id) These fields can be invisible and a default can be used. </p> <p>Note</p> <p>When using LOCATION or MASTERITEM (Types, see below) the field will map to the ID field of the API operation. Therefor it's important to check the API documentation on what the field should be called.  Example: Item_id or MasterItem_id would typically be the name for your Master Item field.</p>"},{"location":"webdesktop/datacapture/data-capture/#data-capture-fields-types","title":"Data Capture Fields Types","text":"<p>The following types is available.  In <code>V6</code> we have limited support for types, fields like Status, Types and Trading Partner not yet supported. </p> <ul> <li>MASTERITEM: Master Item dropdown of code and description. See notes below</li> <li>LOCATION: Location dropdown of Barcode and Name.  See notes below</li> <li>STRING: A primitive string.</li> <li>NUMBER: A primitive number or int.</li> <li>BOOLEAN: A primitive boolean.</li> </ul> <p>Notes: Any API operation that requires a primary key (Item_id, Location_id) must be configured with the name as it is specified by the API. However the Description of the field can be changed. Furthermore the user will not be asked to capture the ID, an autocomplete dropdown will be supplied  as describe by the types MASTERITEM, LOCATION</p>"},{"location":"webdesktop/datacapture/data-capture/#example-portland-transfer","title":"Example Portland transfer","text":"<p>This example is designed to ask the user to capture the Transfer number and then automatically default all other required fields associated with the client's needs for PORTLAND transfers.</p> <p>The second part of the example simplifies the line capture process by only asking for Code and Quantity. This approach allows the user to quickly add the required lines while minimizing the risk of errors.</p> <p>This example showcases the following: - How to default fields - How to hide fields - How to set up Item_id to display an autocomplete box - How to skip prompting for the Line Number</p> <p>DataCapture Table entries</p> Name Description Module PORTLAND_TRANSFER Portland Transfer Request TRANSFERDOCUMENT <p>DataCaptureFields Table entries</p> DataCapture Name Description Index Required Type Default Value Visible PORTLAND_TRANSFER Number Number 0 True STRING True PORTLAND_TRANSFER Site Site 90 True STRING PORTLAND False PORTLAND_TRANSFER ERPLocation ERPLocation 91 True STRING 2 False PORTLAND_TRANSFER Type Type 92 True STRING TRANSFER False PORTLAND_TRANSFER Status Status 93 True STRING ENTERED False PORTLAND_TRANSFER isActive isActive 94 True BOOLEAN 1 False <p>Continuing with Portland transfer this is the entry for capturing lines.</p> <p>DataCapture Table entries</p> Name Description Module PORTLAND_TRANSFER_LINE Portland Transfer Line TRANSFERDOCUMENTDETAIL <p>DataCaptureFields Table entries Notice: line number is set invisible and the default value is \"NEW\", this will generate the line number for the next sequence. Notice: the Item field, the field name Item_id is required by the API but the display name is Item and the UI will ask for the item by code and description.</p> DataCapture Name Description Index Required Type Default Value Visible PORTLAND_TRANSFER_LINE LineNumber LineNumber 100 True STRING NEW False PORTLAND_TRANSFER_LINE Item_id Item 1 True MASTERITEM NULL True PORTLAND_TRANSFER_LINE Qty Qty 2 True NUMBER NULL True <p>Sample Code</p> <pre><code>INSERT INTO [dbo].[DataCapture] ([Name], [Description], [Module], [UserGroup]) \nVALUES ('PORTLAND_TRANSFER', 'Portland Transfer Request', 'TRANSFERDOCUMENT', 15);\n\nINSERT INTO [dbo].[DataCapture] ([Name], [Description], [Module], [UserGroup]) \nVALUES ('PORTLAND_TRANSFER_LINE', 'Portland Transfer Line', 'TRANSFERDOCUMENTDETAIL', 15);\n\nINSERT INTO [dbo].[DataCaptureFields] ([DataCapture], [Name], [Description], [Index], [Required], [Type], [DefaultValue], [Visible], [AuditUser], [AuditDate], [Version]) \nVALUES ('PORTLAND_TRANSFER', 'Site', 'Site', 90, 1, 'STRING', 'PORTLAND_TRANSFER', 0, NULL, NULL, NULL);\n\nINSERT INTO [dbo].[DataCaptureFields] ([DataCapture], [Name], [Description], [Index], [Required], [Type], [DefaultValue], [Visible], [AuditUser], [AuditDate], [Version]) \nVALUES ('PORTLAND_TRANSFER', 'ERPLocation', 'ERPLocation', 91, 1, 'STRING', '2', 0, NULL, NULL, NULL);\n\nINSERT INTO [dbo].[DataCaptureFields] ([DataCapture], [Name], [Description], [Index], [Required], [Type], [DefaultValue], [Visible], [AuditUser], [AuditDate], [Version]) \nVALUES ('PORTLAND_TRANSFER', 'Number', 'Number', 0, 1, 'STRING', '', 1, NULL, NULL, NULL);\n\nINSERT INTO [dbo].[DataCaptureFields] ([DataCapture], [Name], [Description], [Index], [Required], [Type], [DefaultValue], [Visible], [AuditUser], [AuditDate], [Version]) \nVALUES ('PORTLAND_TRANSFER', 'Type', 'Type', 92, 1, 'STRING', 'TRANSFER', 0, NULL, NULL, NULL);\n\nINSERT INTO [dbo].[DataCaptureFields] ([DataCapture], [Name], [Description], [Index], [Required], [Type], [DefaultValue], [Visible], [AuditUser], [AuditDate], [Version]) \nVALUES ('PORTLAND_TRANSFER', 'Status', 'Status', 93, 1, 'STRING', 'ENTERED', 0, NULL, NULL, NULL);\n\nINSERT INTO [dbo].[DataCaptureFields] ([DataCapture], [Name], [Description], [Index], [Required], [Type], [DefaultValue], [Visible], [AuditUser], [AuditDate], [Version]) \nVALUES ('PORTLAND_TRANSFER', 'isActive', 'isActive', 94, 1, 'BOOLEAN', '1', 0, NULL, NULL, NULL);\n\nINSERT INTO [dbo].[DataCaptureFields] ([DataCapture], [Name], [Description], [Index], [Required], [Type], [DefaultValue], [Visible], [AuditUser], [AuditDate], [Version]) \nVALUES ('PORTLAND_TRANSFER_LINE', 'Item_id', 'Item', 0, 1, 'MASTERITEM', NULL, 1, NULL, NULL, NULL);\n\nINSERT INTO [dbo].[DataCaptureFields] ([DataCapture], [Name], [Description], [Index], [Required], [Type], [DefaultValue], [Visible], [AuditUser], [AuditDate], [Version]) \nVALUES ('PORTLAND_TRANSFER_LINE', 'Qty', 'Qty', 1, 1, 'NUMBER', NULL, 1, NULL, NULL, NULL);\n\nINSERT INTO [dbo].[DataCaptureFields] ([DataCapture], [Name], [Description], [Index], [Required], [Type], [DefaultValue], [Visible], [AuditUser], [AuditDate], [Version]) \nVALUES ('PORTLAND_TRANSFER_LINE', 'LineNumber', 'LineNumber', 100, 1, 'STRING', 'NEW', 0, NULL, NULL, NULL);\n</code></pre>"},{"location":"webdesktop/datagrid/datagrid/","title":"Data Grid","text":""},{"location":"webdesktop/datagrid/datagrid/#grids","title":"Grids","text":"<p>Our system empowers users to customize numerous grids according to their preferences and requirements. Determine whether a grid is configurable by right-clicking on it and selecting the Show Grid Definition option from the context menu.</p> <p></p> <p>In addition to displaying the JSON definition, the dialog provides visibility into both the API operation and the SQL syntax linked with the data source. Modify the JSON layout directly within this dialog interface for seamless customization.</p> <p></p> <p>The Datagrid table is responsible to store the grid information. When a grid is customized, its name will be prefixed with Custom and the column isCustomGrid will be set accordingly. The column isApplicationGrid serves as an indicator that the grid is integrated into the WebDesktop and forms an integral part of the application. These grids are preconfigured and we do not configure the SQL view (empty). Conversely, when isApplicationGrid is set to false, it signifies that the grid is designated as an Enquiry grid, allowing for further customization.</p> <p></p>"},{"location":"webdesktop/datagrid/datagrid/#application-grid-columns","title":"Application Grid Columns","text":"<p>Any data grid used by the WebDesktop (isApplicationGrid = <code>true</code>) will have a minium set of columns needed to allow the application to function correctly. These typically include the primary key fields such as Document.Number, MasterItem.Code, etc. To verify the necessary columns, access the API operation.</p> <p></p> <p>If you navigate to the API operation documentation, you can observe that we document the SQL view name and the essential columns required for its proper functionality.</p> <p></p> <p>In the example provided above, ID, Code, and isActive are explicitly designated as required columns.</p>"},{"location":"webdesktop/datagrid/datagrid/#page-size","title":"Page Size","text":"<p><code>Take note page size is available only for enquiry grids, this feuture is not supported for application grids.</code></p> <p>Set the PageSize on the database table Datagrid.PageSize.</p>"},{"location":"webdesktop/datagrid/datagrid/#grid-definition","title":"Grid Definition","text":"<pre><code>{\n        \"headerName\": \"Column_Name\",\n        \"field\": \"SQLView_ColumnName\",\n        \"width\": 100,\n        \"filter\": \"agTextColumnFilter\",\n        \"cellRenderer\": \"dateCellRenderer\",\n        \"hide\": true,\n        \"cellClassRules\": {\n                \"text-error\": \"x == 0\"\n        }\n}\n</code></pre> Property Value headerName Name you want to display on grid field Name of field in your SQL View width Width of the column filter Type of filter for the column. Options : agTextColumnFilter, agDateColumnFilter, agNumberColumnFilter cellRenderer How do render the cell value. Options : \"dateCellRenderer\" hide Hide the column. true / false sort Set default sort order. Options: \"asc\", \"desc\" cellClassRules Condition styling, \"text-error\": \"x == 0\" . Options : more below"},{"location":"webdesktop/datagrid/datagrid/#cell-formatting","title":"Cell Formatting","text":"<p>Cell customization is done at the column level via the grid definition using the property cellClassRules.  You can define rules which can be applied to include certain CSS classes. These rules are provided as a JavaScript map where the keys are the class names and the values are expressions that if evaluated to true, the class gets used. </p> <p>Example Document status <pre><code>{\n        // other column related properties...\n        \"cellClassRules\": {\n                \"bg-warning\": \"x == 'ONHOLD'\",\n                \"bg-error\": \"x == 'CANCELLED'\",\n                \"bg-success\": \"x == 'COMPLETE'\"\n        }\n}\n</code></pre></p>"},{"location":"webdesktop/datagrid/datagrid/#row-formatting","title":"Row Formatting","text":"<p><code>Version 6 ~</code></p> <p>You can define rules which can be applied to include certain CSS classes (CSS class defined in Styling Guidelines below).  These rules are provided as a map where the keys are CSS class names and the values are expression string that if evaluated to true, the class gets used. </p> <p>Note</p> <p>Set on the Database.RowStyleRules</p> <p>Example changing background color  <pre><code>{\n    \"bg-error text-bold\": \"data.Qty == 0\", // combine classes separating by space\n    \"bg-success\": \"data.NonStock == 1\",\n    \"bg-primary\": \"data.Qty &gt; 0\"\n}\n</code></pre></p>"},{"location":"webdesktop/datagrid/datagrid/#styling-guidelines","title":"Styling Guidelines","text":"<p><code>Version 6 ~</code></p> <p>Note</p> <p>In order to keep a professional and consistent look to the application please use the below styling regarding colors.</p> <p>This guide covers the available CSS classes for styling rows and cells. The following sections describe how to use each class for text formatting, background colors, borders, and alignment.</p> <ul> <li>Text Styles: Format text with colors, bold, italic, and text alignment.</li> <li>Background Styles: Set background colors for rows, cells, or sections based on states like success, warning, or error.</li> <li>Borders: Add or modify borders around elements to highlight specific areas.</li> <li>Padding and Alignment: Adjust spacing and alignment for better layout control.</li> </ul> CSS Class Description Cell Format Example (<code>cellClassRules</code>) Row Format Example (<code>rowClassRules</code>) text-bold Applies bold font weight. <code>\"cellClassRules\": { \"text-bold\": \"x === 'COMPLETE'\" }</code> <code>{ \"text-bold\": \"data.Status === 'COMPLETE'\" }</code> text-italic Applies italic font style. <code>\"cellClassRules\": { \"text-italic\": \"x === 'ENTERED'\" }</code> <code>{ \"text-italic\": \"data.Status === 'ENTERED'\" }</code> text-primary Sets text color to blue (#00A6CE). <code>\"cellClassRules\": { \"text-primary\": \"x === 'ONHOLD'\" }</code> <code>{ \"text-primary\": \"data.Status === 'ONHOLD'\" }</code> bg-primary Sets background color to blue (#00A6CE). <code>\"cellClassRules\": { \"bg-primary\": \"x === 'COMPLETE'\" }</code> <code>{ \"bg-primary\": \"data.Status === 'COMPLETE'\" }</code> text-primary-dark Sets text color to darker blue (#008CBA). <code>\"cellClassRules\": { \"text-primary-dark\": \"x === 'COMPLETE'\" }</code> <code>{ \"text-primary-dark\": \"data.Status === 'COMPLETE'\" }</code> bg-primary-dark Sets background color to darker blue (#008CBA). <code>\"cellClassRules\": { \"bg-primary-dark\": \"x === 'ONHOLD'\" }</code> <code>{ \"bg-primary-dark\": \"data.Status === 'ONHOLD'\" }</code> text-success Sets text color to green (#51AA6C). <code>\"cellClassRules\": { \"text-success\": \"x === 'COMPLETE'\" }</code> <code>{ \"text-success\": \"data.Status === 'COMPLETE'\" }</code> bg-success Sets background color to green (#51AA6C). <code>\"cellClassRules\": { \"bg-success\": \"x === 'COMPLETE'\" }</code> <code>{ \"bg-success\": \"data.Status === 'COMPLETE'\" }</code> text-success-light Sets text color to darker green (#4F9E63). <code>\"cellClassRules\": { \"text-success-light\": \"x === 'ENTERED'\" }</code> <code>{ \"text-success-light\": \"data.Status === 'ENTERED'\" }</code> bg-success-light Sets background color to pastel green (#B0D7B8). <code>\"cellClassRules\": { \"bg-success-light\": \"x === 'ENTERED'\" }</code> <code>{ \"bg-success-light\": \"data.Status === 'ENTERED'\" }</code> text-error Sets text color to red (#F24C3D). <code>\"cellClassRules\": { \"text-error\": \"x == 0\" }</code> <code>{ \"text-error\": \"data.Qty == 0\" }</code> bg-error Sets background color to red (#F24C3D). <code>\"cellClassRules\": { \"bg-error\": \"x == 0\" }</code> <code>{ \"bg-error\": \"data.Qty == 0\" }</code> text-warning Sets text color to orange (#FFA500). <code>\"cellClassRules\": { \"text-warning\": \"x === 'ONHOLD'\" }</code> <code>{ \"text-warning\": \"data.Status === 'ONHOLD'\" }</code> bg-warning Sets background color to orange (#FFA500). <code>\"cellClassRules\": { \"bg-warning\": \"x === 'ONHOLD'\" }</code> <code>{ \"bg-warning\": \"data.Status === 'ONHOLD'\" }</code> text-info Sets text color to light blue/cyan (#17A2B8). <code>\"cellClassRules\": { \"text-info\": \"x === 'ENTERED'\" }</code> <code>{ \"text-info\": \"data.Status === 'ENTERED'\" }</code> bg-info Sets background color to light blue/cyan (#17A2B8). <code>\"cellClassRules\": { \"bg-info\": \"x === 'ENTERED'\" }</code> <code>{ \"bg-info\": \"data.Status === 'ENTERED'\" }</code> text-secondary Sets text color to grey/neutral (#6C757D). <code>\"cellClassRules\": { \"text-secondary\": \"x === 'COMPLETE'\" }</code> <code>{ \"text-secondary\": \"data.Status === 'COMPLETE'\" }</code> bg-secondary Sets background color to grey/neutral (#6C757D). <code>\"cellClassRules\": { \"bg-secondary\": \"x === 'COMPLETE'\" }</code> <code>{ \"bg-secondary\": \"data.Status === 'COMPLETE'\" }</code> text-secondary-light Sets text color to lighter neutral (#AEB6BF). <code>\"cellClassRules\": { \"text-secondary-light\": \"x === 'ENTERED'\" }</code> <code>{ \"text-secondary-light\": \"data.Status === 'ENTERED'\" }</code> bg-secondary-light Sets background color to lighter neutral (#AEB6BF). <code>\"cellClassRules\": { \"bg-secondary-light\": \"x === 'ENTERED'\" }</code> <code>{ \"bg-secondary-light\": \"data.Status === 'ENTERED'\" }</code> text-dark Sets text color to dark grey (#343A40). <code>\"cellClassRules\": { \"text-dark\": \"x === 'COMPLETE'\" }</code> <code>{ \"text-dark\": \"data.Status === 'COMPLETE'\" }</code> bg-dark Sets background color to dark grey (#343A40). <code>\"cellClassRules\": { \"bg-dark\": \"x === 'ONHOLD'\" }</code> <code>{ \"bg-dark\": \"data.Status === 'ONHOLD'\" }</code> text-light Sets text color to light grey (#F8F9FA). <code>\"cellClassRules\": { \"text-light\": \"x === 'ENTERED'\" }</code> <code>{ \"text-light\": \"data.Status === 'ENTERED'\" }</code> bg-light Sets background color to light grey (#F8F9FA). <code>\"cellClassRules\": { \"bg-light\": \"x === 'ENTERED'\" }</code> <code>{ \"bg-light\": \"data.Status === 'ENTERED'\" }</code> text-center Centers text alignment. <code>\"cellClassRules\": { \"text-center\": \"x === 'ONHOLD'\" }</code> <code>{ \"text-center\": \"data.Status === 'ONHOLD'\" }</code> text-left Aligns text to the left. <code>\"cellClassRules\": { \"text-left\": \"x === 'COMPLETE'\" }</code> <code>{ \"text-left\": \"data.Status === 'COMPLETE'\" }</code> text-right Aligns text to the right. <code>\"cellClassRules\": { \"text-right\": \"x === 'ENTERED'\" }</code> <code>{ \"text-right\": \"data.Status === 'ENTERED'\" }</code> padding-small Adds small padding (4px) inside the element. <code>\"cellClassRules\": { \"padding-small\": \"x === 'COMPLETE'\" }</code> <code>{ \"padding-small\": \"data.Status === 'COMPLETE'\" }</code> padding-medium Adds medium padding (8px) inside the element. <code>\"cellClassRules\": { \"padding-medium\": \"x === 'ENTERED'\" }</code> <code>{ \"padding-medium\": \"data.Status === 'ENTERED'\" }</code> padding-large Adds large padding (16px) inside the element. <code>\"cellClassRules\": { \"padding-large\": \"x === 'ONHOLD'\" }</code> <code>{ \"padding-large\": \"data.Status === 'ONHOLD'\" }</code> border Adds a default grey border (1px solid #ddd). <code>\"cellClassRules\": { \"border\": \"x === false\" }</code> <code>{ \"border\": \"data.isActive === false\" }</code> border-primary Adds a blue border (1px solid #00A6CE). <code>\"cellClassRules\": { \"border-primary\": \"x === 'ONHOLD'\" }</code> <code>{ \"border-primary\": \"data.Status === 'ONHOLD'\" }</code> border-error Adds a red border (1px solid #F24C3D). <code>\"cellClassRules\": { \"border-error\": \"x == 0\" }</code> <code>{ \"border-error\": \"data.Qty == 0\" }</code> border-success Adds a green border (1px solid #51AA6C). <code>\"cellClassRules\": { \"border-success\": \"x === 'COMPLETE'\" }</code> <code>{ \"border-success\": \"data.Status === 'COMPLETE'\" }</code> border-warning Adds an orange border (1px solid #FFA500). <code>\"cellClassRules\": { \"border-warning\": \"x === 'ONHOLD'\" }</code> <code>{ \"border-warning\": \"data.Status === 'ONHOLD'\" }</code> border-dark Adds a dark grey border (1px solid #343A40). <code>\"cellClassRules\": { \"border-dark\": \"x === 'COMPLETE'\" }</code> <code>{ \"border-dark\": \"data.Status === 'COMPLETE'\" }</code> <p>Example: apply when ActionQty = 0, bg-error will display red background <pre><code>{ \n        \"bg-error\": \"data.ActionQty == 0\"\n}\n</code></pre></p> <p>Example: apply when Complete = 1, text-success will display green text <pre><code>{ \n        \"text-success\": \"data.Complete == 1\"\n}\n</code></pre> Example: apply when Complete = 1, text-success will display green text <pre><code>{ \n        \"text-success\": \"data.Complete == 1\"\n}\n</code></pre></p>"},{"location":"webdesktop/dataimport/DataImports/","title":"DataImports","text":""},{"location":"webdesktop/dataimport/DataImports/#data-import","title":"Data Import","text":"<p><code>Under construction</code></p> <p>The Web Desktop allows users to import data via Excel. When you right click on a Grid you should see a menu item for Import. This will open a dialog that walks you through the import process including the ability to download the format (empty template) in which the data must be captured.</p>"}]}